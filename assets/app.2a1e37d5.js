const _m={},Vb="modulepreload",Fg={},Ub="/",Ie=function(i,s){return!s||s.length===0?i():Promise.all(s.map(u=>{if(u=`${Ub}${u}`,u in Fg)return;Fg[u]=!0;const m=u.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${y}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":Vb,m||(x.as="script",x.crossOrigin=""),x.href=u,document.head.appendChild(x),m)return new Promise((l,T)=>{x.addEventListener("load",l),x.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>i())},$b={"v-8daa1a0e":()=>Ie(()=>import("./index.html.f518411e.js"),[]).then(({data:e})=>e),"v-74bc627b":()=>Ie(()=>import("./index.html.9928fd9d.js"),[]).then(({data:e})=>e),"v-08ae5eba":()=>Ie(()=>import("./2018-2019.html.547addd2.js"),[]).then(({data:e})=>e),"v-93cfbde4":()=>Ie(()=>import("./2019-2020.html.9e54f617.js"),[]).then(({data:e})=>e),"v-f917537a":()=>Ie(()=>import("./2020-2021.html.c39ab3e7.js"),[]).then(({data:e})=>e),"v-1a0de1a3":()=>Ie(()=>import("./2021-2022.html.e1a3dddc.js"),[]).then(({data:e})=>e),"v-190ab309":()=>Ie(()=>import("./2021fall.html.c1a961b5.js"),[]).then(({data:e})=>e),"v-96167c50":()=>Ie(()=>import("./index.html.9aa1ed4c.js"),[]).then(({data:e})=>e),"v-96536bf0":()=>Ie(()=>import("./index.html.65cc21f5.js"),[]).then(({data:e})=>e),"v-dbd38712":()=>Ie(()=>import("./index.html.fdc8e90d.js"),[]).then(({data:e})=>e),"v-c73889da":()=>Ie(()=>import("./index.html.6f17c954.js"),[]).then(({data:e})=>e),"v-104cfa63":()=>Ie(()=>import("./2021.html.34afe1c7.js"),[]).then(({data:e})=>e),"v-780207b9":()=>Ie(()=>import("./index.html.c62919de.js"),[]).then(({data:e})=>e),"v-14e6315a":()=>Ie(()=>import("./index.html.eb80f60c.js"),[]).then(({data:e})=>e),"v-42f2be94":()=>Ie(()=>import("./vehicle-charger.html.b06ba788.js"),[]).then(({data:e})=>e),"v-ed48bdf8":()=>Ie(()=>import("./index.html.c9275ffe.js"),[]).then(({data:e})=>e),"v-f4bc5604":()=>Ie(()=>import("./index.html.873351ac.js"),[]).then(({data:e})=>e),"v-1500d063":()=>Ie(()=>import("./index.html.285dde82.js"),[]).then(({data:e})=>e),"v-014445c8":()=>Ie(()=>import("./index.html.ecfa23be.js"),[]).then(({data:e})=>e),"v-461d4a7c":()=>Ie(()=>import("./registered-organization-2019.html.08c67ea4.js"),[]).then(({data:e})=>e),"v-6ba7e826":()=>Ie(()=>import("./registered-organization-2020.html.07ded705.js"),[]).then(({data:e})=>e),"v-6d5cc0c5":()=>Ie(()=>import("./registered-organization-2021.html.4572558b.js"),[]).then(({data:e})=>e),"v-28ddfa13":()=>Ie(()=>import("./index.html.21a0bdc2.js"),[]).then(({data:e})=>e),"v-be92ea7e":()=>Ie(()=>import("./index.html.c47b1b1e.js"),[]).then(({data:e})=>e),"v-d7188082":()=>Ie(()=>import("./index.html.0bdf0532.js"),[]).then(({data:e})=>e),"v-d1061704":()=>Ie(()=>import("./paper-tools.html.4cd10eb2.js"),[]).then(({data:e})=>e),"v-4322d0a7":()=>Ie(()=>import("./index.html.49cd1245.js"),[]).then(({data:e})=>e),"v-69b23ddf":()=>Ie(()=>import("./index.html.88c23618.js"),[]).then(({data:e})=>e),"v-1678dd6f":()=>Ie(()=>import("./bustimer-wx.html.7383a7da.js"),[]).then(({data:e})=>e),"v-1630dfb5":()=>Ie(()=>import("./bustimer.html.20e03192.js"),[]).then(({data:e})=>e),"v-6a28f6e0":()=>Ie(()=>import("./holiday.html.6f8c819e.js"),[]).then(({data:e})=>e),"v-48975204":()=>Ie(()=>import("./redirect.html.69854104.js"),[]).then(({data:e})=>e),"v-8059a7a6":()=>Ie(()=>import("./workday.html.dcc9a9e5.js"),[]).then(({data:e})=>e),"v-22cd7d0c":()=>Ie(()=>import("./index.html.8f2d855b.js"),[]).then(({data:e})=>e),"v-0e92d420":()=>Ie(()=>import("./index.html.35fa0833.js"),[]).then(({data:e})=>e),"v-2b8cac58":()=>Ie(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.html.5a141e85.js"),[]).then(({data:e})=>e),"v-66965350":()=>Ie(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.html.5a3c6c0a.js"),[]).then(({data:e})=>e),"v-66317da4":()=>Ie(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.html.2a63d838.js"),[]).then(({data:e})=>e),"v-5c3fcdf6":()=>Ie(()=>import("./index.html.f903e253.js"),[]).then(({data:e})=>e),"v-04710004":()=>Ie(()=>import("./index.html.714c1056.js"),[]).then(({data:e})=>e),"v-5589dd0c":()=>Ie(()=>import("./dorm-floor-plan.html.e5da1e96.js"),[]).then(({data:e})=>e),"v-d42194b6":()=>Ie(()=>import("./index.html.5d5b5cd8.js"),[]).then(({data:e})=>e),"v-20383a78":()=>Ie(()=>import("./index.html.d43fd917.js"),[]).then(({data:e})=>e),"v-42c1fa44":()=>Ie(()=>import("./index.html.288aab15.js"),[]).then(({data:e})=>e),"v-76cff034":()=>Ie(()=>import("./index.html.df87c689.js"),[]).then(({data:e})=>e),"v-29860ed0":()=>Ie(()=>import("./index.html.4d9d4586.js"),[]).then(({data:e})=>e),"v-622da02f":()=>Ie(()=>import("./index.html.18f951c4.js"),[]).then(({data:e})=>e),"v-5e590ec6":()=>Ie(()=>import("./index.html.8c0c13ad.js"),[]).then(({data:e})=>e),"v-1fa222d4":()=>Ie(()=>import("./index.html.5e3c74a8.js"),[]).then(({data:e})=>e),"v-48519846":()=>Ie(()=>import("./index.html.220f1800.js"),[]).then(({data:e})=>e),"v-369295b4":()=>Ie(()=>import("./index.html.e1758a0c.js"),[]).then(({data:e})=>e),"v-3692bb1f":()=>Ie(()=>import("./index.html.e46d891e.js"),[]).then(({data:e})=>e),"v-425958ce":()=>Ie(()=>import("./index.html.99cce8dd.js"),[]).then(({data:e})=>e),"v-3692ee77":()=>Ie(()=>import("./index.html.16623fbf.js"),[]).then(({data:e})=>e),"v-2686552a":()=>Ie(()=>import("./index.html.f9a9d60e.js"),[]).then(({data:e})=>e),"v-45d74ec0":()=>Ie(()=>import("./index.html.06ce26a2.js"),[]).then(({data:e})=>e),"v-772a5784":()=>Ie(()=>import("./index.html.d1403d7b.js"),[]).then(({data:e})=>e),"v-8460eeb8":()=>Ie(()=>import("./advice-on-study.html.94953218.js"),[]).then(({data:e})=>e),"v-435bd49a":()=>Ie(()=>import("./info-on-study.html.dfcbf0c0.js"),[]).then(({data:e})=>e),"v-6323734e":()=>Ie(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.html.0726d622.js"),[]).then(({data:e})=>e),"v-5eb748bf":()=>Ie(()=>import("./innovative-project.html.6236477b.js"),[]).then(({data:e})=>e),"v-2a23f022":()=>Ie(()=>import("./index.html.a846328f.js"),[]).then(({data:e})=>e),"v-66061b92":()=>Ie(()=>import("./index.html.7dca5c91.js"),[]).then(({data:e})=>e),"v-89ac2bec":()=>Ie(()=>import("./index.html.1ac030c9.js"),[]).then(({data:e})=>e),"v-1549b190":()=>Ie(()=>import("./index.html.49b0d254.js"),[]).then(({data:e})=>e),"v-9e1961f8":()=>Ie(()=>import("./index.html.ca5e2fe1.js"),[]).then(({data:e})=>e),"v-6bba5e58":()=>Ie(()=>import("./index.html.a5e2c0a6.js"),[]).then(({data:e})=>e),"v-83a77034":()=>Ie(()=>import("./index.html.7b40aa81.js"),[]).then(({data:e})=>e),"v-296d1d15":()=>Ie(()=>import("./index.html.3f9c288f.js"),[]).then(({data:e})=>e),"v-fb711be8":()=>Ie(()=>import("./index.html.ea85739a.js"),[]).then(({data:e})=>e),"v-3706649a":()=>Ie(()=>import("./404.html.92789ac9.js"),[]).then(({data:e})=>e)};function kf(e,i){const s=Object.create(null),u=e.split(",");for(let m=0;m<u.length;m++)s[u[m]]=!0;return i?m=>!!s[m.toLowerCase()]:m=>!!s[m]}const qb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hb=kf(qb);function uv(e){return!!e||e===""}function Xc(e){if(jt(e)){const i={};for(let s=0;s<e.length;s++){const u=e[s],m=Br(u)?Wb(u):Xc(u);if(m)for(const y in m)i[y]=m[y]}return i}else{if(Br(e))return e;if(un(e))return e}}const Gb=/;(?![^(]*\))/g,Zb=/:(.+)/;function Wb(e){const i={};return e.split(Gb).forEach(s=>{if(s){const u=s.split(Zb);u.length>1&&(i[u[0].trim()]=u[1].trim())}}),i}function us(e){let i="";if(Br(e))i=e;else if(jt(e))for(let s=0;s<e.length;s++){const u=us(e[s]);u&&(i+=u+" ")}else if(un(e))for(const s in e)e[s]&&(i+=s+" ");return i.trim()}function Kb(e){if(!e)return null;let{class:i,style:s}=e;return i&&!Br(i)&&(e.class=us(i)),s&&(e.style=Xc(s)),e}const Ci=e=>Br(e)?e:e==null?"":jt(e)||un(e)&&(e.toString===fv||!Yt(e.toString))?JSON.stringify(e,hv,2):String(e),hv=(e,i)=>i&&i.__v_isRef?hv(e,i.value):Xa(i)?{[`Map(${i.size})`]:[...i.entries()].reduce((s,[u,m])=>(s[`${u} =>`]=m,s),{})}:dv(i)?{[`Set(${i.size})`]:[...i.values()]}:un(i)&&!jt(i)&&!mv(i)?String(i):i,Rr={},Ka=[],ji=()=>{},Xb=()=>!1,Jb=/^on[^a-z]/,Jc=e=>Jb.test(e),Df=e=>e.startsWith("onUpdate:"),Dn=Object.assign,zf=(e,i)=>{const s=e.indexOf(i);s>-1&&e.splice(s,1)},Yb=Object.prototype.hasOwnProperty,gr=(e,i)=>Yb.call(e,i),jt=Array.isArray,Xa=e=>Kh(e)==="[object Map]",dv=e=>Kh(e)==="[object Set]",Yt=e=>typeof e=="function",Br=e=>typeof e=="string",Of=e=>typeof e=="symbol",un=e=>e!==null&&typeof e=="object",pv=e=>un(e)&&Yt(e.then)&&Yt(e.catch),fv=Object.prototype.toString,Kh=e=>fv.call(e),Qb=e=>Kh(e).slice(8,-1),mv=e=>Kh(e)==="[object Object]",Mf=e=>Br(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Pc=kf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xh=e=>{const i=Object.create(null);return s=>i[s]||(i[s]=e(s))},ew=/-(\w)/g,Xi=Xh(e=>e.replace(ew,(i,s)=>s?s.toUpperCase():"")),tw=/\B([A-Z])/g,Ws=Xh(e=>e.replace(tw,"-$1").toLowerCase()),Jh=Xh(e=>e.charAt(0).toUpperCase()+e.slice(1)),wp=Xh(e=>e?`on${Jh(e)}`:""),Fc=(e,i)=>!Object.is(e,i),Ep=(e,i)=>{for(let s=0;s<e.length;s++)e[s](i)},Ch=(e,i,s)=>{Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value:s})},gv=e=>{const i=parseFloat(e);return isNaN(i)?e:i};let Ng;const rw=()=>Ng||(Ng=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let pi;class nw{constructor(i=!1){this.active=!0,this.effects=[],this.cleanups=[],!i&&pi&&(this.parent=pi,this.index=(pi.scopes||(pi.scopes=[])).push(this)-1)}run(i){if(this.active){const s=pi;try{return pi=this,i()}finally{pi=s}}}on(){pi=this}off(){pi=this.parent}stop(i){if(this.active){let s,u;for(s=0,u=this.effects.length;s<u;s++)this.effects[s].stop();for(s=0,u=this.cleanups.length;s<u;s++)this.cleanups[s]();if(this.scopes)for(s=0,u=this.scopes.length;s<u;s++)this.scopes[s].stop(!0);if(this.parent&&!i){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.active=!1}}}function iw(e,i=pi){i&&i.active&&i.effects.push(e)}function ow(){return pi}function sw(e){pi&&pi.cleanups.push(e)}const Lf=e=>{const i=new Set(e);return i.w=0,i.n=0,i},_v=e=>(e.w&as)>0,yv=e=>(e.n&as)>0,aw=({deps:e})=>{if(e.length)for(let i=0;i<e.length;i++)e[i].w|=as},lw=e=>{const{deps:i}=e;if(i.length){let s=0;for(let u=0;u<i.length;u++){const m=i[u];_v(m)&&!yv(m)?m.delete(e):i[s++]=m,m.w&=~as,m.n&=~as}i.length=s}},Wp=new WeakMap;let Sc=0,as=1;const Kp=30;let Fi;const Gs=Symbol(""),Xp=Symbol("");class Rf{constructor(i,s=null,u){this.fn=i,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,iw(this,u)}run(){if(!this.active)return this.fn();let i=Fi,s=is;for(;i;){if(i===this)return;i=i.parent}try{return this.parent=Fi,Fi=this,is=!0,as=1<<++Sc,Sc<=Kp?aw(this):jg(this),this.fn()}finally{Sc<=Kp&&lw(this),as=1<<--Sc,Fi=this.parent,is=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Fi===this?this.deferStop=!0:this.active&&(jg(this),this.onStop&&this.onStop(),this.active=!1)}}function jg(e){const{deps:i}=e;if(i.length){for(let s=0;s<i.length;s++)i[s].delete(e);i.length=0}}let is=!0;const vv=[];function ll(){vv.push(is),is=!1}function cl(){const e=vv.pop();is=e===void 0?!0:e}function _i(e,i,s){if(is&&Fi){let u=Wp.get(e);u||Wp.set(e,u=new Map);let m=u.get(s);m||u.set(s,m=Lf()),xv(m)}}function xv(e,i){let s=!1;Sc<=Kp?yv(e)||(e.n|=as,s=!_v(e)):s=!e.has(Fi),s&&(e.add(Fi),Fi.deps.push(e))}function To(e,i,s,u,m,y){const x=Wp.get(e);if(!x)return;let l=[];if(i==="clear")l=[...x.values()];else if(s==="length"&&jt(e))x.forEach((T,C)=>{(C==="length"||C>=u)&&l.push(T)});else switch(s!==void 0&&l.push(x.get(s)),i){case"add":jt(e)?Mf(s)&&l.push(x.get("length")):(l.push(x.get(Gs)),Xa(e)&&l.push(x.get(Xp)));break;case"delete":jt(e)||(l.push(x.get(Gs)),Xa(e)&&l.push(x.get(Xp)));break;case"set":Xa(e)&&l.push(x.get(Gs));break}if(l.length===1)l[0]&&Jp(l[0]);else{const T=[];for(const C of l)C&&T.push(...C);Jp(Lf(T))}}function Jp(e,i){const s=jt(e)?e:[...e];for(const u of s)u.computed&&Vg(u);for(const u of s)u.computed||Vg(u)}function Vg(e,i){(e!==Fi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const cw=kf("__proto__,__v_isRef,__isVue"),bv=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Of)),uw=Bf(),hw=Bf(!1,!0),dw=Bf(!0),Ug=pw();function pw(){const e={};return["includes","indexOf","lastIndexOf"].forEach(i=>{e[i]=function(...s){const u=Er(this);for(let y=0,x=this.length;y<x;y++)_i(u,"get",y+"");const m=u[i](...s);return m===-1||m===!1?u[i](...s.map(Er)):m}}),["push","pop","shift","unshift","splice"].forEach(i=>{e[i]=function(...s){ll();const u=Er(this)[i].apply(this,s);return cl(),u}}),e}function Bf(e=!1,i=!1){return function(u,m,y){if(m==="__v_isReactive")return!e;if(m==="__v_isReadonly")return e;if(m==="__v_isShallow")return i;if(m==="__v_raw"&&y===(e?i?Cw:Iv:i?Tv:Sv).get(u))return u;const x=jt(u);if(!e&&x&&gr(Ug,m))return Reflect.get(Ug,m,y);const l=Reflect.get(u,m,y);return(Of(m)?bv.has(m):cw(m))||(e||_i(u,"get",m),i)?l:En(l)?x&&Mf(m)?l:l.value:un(l)?e?jf(l):ul(l):l}}const fw=wv(),mw=wv(!0);function wv(e=!1){return function(s,u,m,y){let x=s[u];if(Nc(x)&&En(x)&&!En(m))return!1;if(!e&&!Nc(m)&&(Yp(m)||(m=Er(m),x=Er(x)),!jt(s)&&En(x)&&!En(m)))return x.value=m,!0;const l=jt(s)&&Mf(u)?Number(u)<s.length:gr(s,u),T=Reflect.set(s,u,m,y);return s===Er(y)&&(l?Fc(m,x)&&To(s,"set",u,m):To(s,"add",u,m)),T}}function gw(e,i){const s=gr(e,i);e[i];const u=Reflect.deleteProperty(e,i);return u&&s&&To(e,"delete",i,void 0),u}function _w(e,i){const s=Reflect.has(e,i);return(!Of(i)||!bv.has(i))&&_i(e,"has",i),s}function yw(e){return _i(e,"iterate",jt(e)?"length":Gs),Reflect.ownKeys(e)}const Ev={get:uw,set:fw,deleteProperty:gw,has:_w,ownKeys:yw},vw={get:dw,set(e,i){return!0},deleteProperty(e,i){return!0}},xw=Dn({},Ev,{get:hw,set:mw}),Ff=e=>e,Yh=e=>Reflect.getPrototypeOf(e);function rh(e,i,s=!1,u=!1){e=e.__v_raw;const m=Er(e),y=Er(i);s||(i!==y&&_i(m,"get",i),_i(m,"get",y));const{has:x}=Yh(m),l=u?Ff:s?Uf:jc;if(x.call(m,i))return l(e.get(i));if(x.call(m,y))return l(e.get(y));e!==m&&e.get(i)}function nh(e,i=!1){const s=this.__v_raw,u=Er(s),m=Er(e);return i||(e!==m&&_i(u,"has",e),_i(u,"has",m)),e===m?s.has(e):s.has(e)||s.has(m)}function ih(e,i=!1){return e=e.__v_raw,!i&&_i(Er(e),"iterate",Gs),Reflect.get(e,"size",e)}function $g(e){e=Er(e);const i=Er(this);return Yh(i).has.call(i,e)||(i.add(e),To(i,"add",e,e)),this}function qg(e,i){i=Er(i);const s=Er(this),{has:u,get:m}=Yh(s);let y=u.call(s,e);y||(e=Er(e),y=u.call(s,e));const x=m.call(s,e);return s.set(e,i),y?Fc(i,x)&&To(s,"set",e,i):To(s,"add",e,i),this}function Hg(e){const i=Er(this),{has:s,get:u}=Yh(i);let m=s.call(i,e);m||(e=Er(e),m=s.call(i,e)),u&&u.call(i,e);const y=i.delete(e);return m&&To(i,"delete",e,void 0),y}function Gg(){const e=Er(this),i=e.size!==0,s=e.clear();return i&&To(e,"clear",void 0,void 0),s}function oh(e,i){return function(u,m){const y=this,x=y.__v_raw,l=Er(x),T=i?Ff:e?Uf:jc;return!e&&_i(l,"iterate",Gs),x.forEach((C,A)=>u.call(m,T(C),T(A),y))}}function sh(e,i,s){return function(...u){const m=this.__v_raw,y=Er(m),x=Xa(y),l=e==="entries"||e===Symbol.iterator&&x,T=e==="keys"&&x,C=m[e](...u),A=s?Ff:i?Uf:jc;return!i&&_i(y,"iterate",T?Xp:Gs),{next(){const{value:F,done:L}=C.next();return L?{value:F,done:L}:{value:l?[A(F[0]),A(F[1])]:A(F),done:L}},[Symbol.iterator](){return this}}}}function Wo(e){return function(...i){return e==="delete"?!1:this}}function bw(){const e={get(y){return rh(this,y)},get size(){return ih(this)},has:nh,add:$g,set:qg,delete:Hg,clear:Gg,forEach:oh(!1,!1)},i={get(y){return rh(this,y,!1,!0)},get size(){return ih(this)},has:nh,add:$g,set:qg,delete:Hg,clear:Gg,forEach:oh(!1,!0)},s={get(y){return rh(this,y,!0)},get size(){return ih(this,!0)},has(y){return nh.call(this,y,!0)},add:Wo("add"),set:Wo("set"),delete:Wo("delete"),clear:Wo("clear"),forEach:oh(!0,!1)},u={get(y){return rh(this,y,!0,!0)},get size(){return ih(this,!0)},has(y){return nh.call(this,y,!0)},add:Wo("add"),set:Wo("set"),delete:Wo("delete"),clear:Wo("clear"),forEach:oh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{e[y]=sh(y,!1,!1),s[y]=sh(y,!0,!1),i[y]=sh(y,!1,!0),u[y]=sh(y,!0,!0)}),[e,s,i,u]}const[ww,Ew,Sw,Tw]=bw();function Nf(e,i){const s=i?e?Tw:Sw:e?Ew:ww;return(u,m,y)=>m==="__v_isReactive"?!e:m==="__v_isReadonly"?e:m==="__v_raw"?u:Reflect.get(gr(s,m)&&m in u?s:u,m,y)}const Iw={get:Nf(!1,!1)},Aw={get:Nf(!1,!0)},Pw={get:Nf(!0,!1)},Sv=new WeakMap,Tv=new WeakMap,Iv=new WeakMap,Cw=new WeakMap;function kw(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Dw(e){return e.__v_skip||!Object.isExtensible(e)?0:kw(Qb(e))}function ul(e){return Nc(e)?e:Vf(e,!1,Ev,Iw,Sv)}function zw(e){return Vf(e,!1,xw,Aw,Tv)}function jf(e){return Vf(e,!0,vw,Pw,Iv)}function Vf(e,i,s,u,m){if(!un(e)||e.__v_raw&&!(i&&e.__v_isReactive))return e;const y=m.get(e);if(y)return y;const x=Dw(e);if(x===0)return e;const l=new Proxy(e,x===2?u:s);return m.set(e,l),l}function Ja(e){return Nc(e)?Ja(e.__v_raw):!!(e&&e.__v_isReactive)}function Nc(e){return!!(e&&e.__v_isReadonly)}function Yp(e){return!!(e&&e.__v_isShallow)}function Av(e){return Ja(e)||Nc(e)}function Er(e){const i=e&&e.__v_raw;return i?Er(i):e}function Pv(e){return Ch(e,"__v_skip",!0),e}const jc=e=>un(e)?ul(e):e,Uf=e=>un(e)?jf(e):e;function Cv(e){is&&Fi&&(e=Er(e),xv(e.dep||(e.dep=Lf())))}function kv(e,i){e=Er(e),e.dep&&Jp(e.dep)}function En(e){return!!(e&&e.__v_isRef===!0)}function mn(e){return zv(e,!1)}function Dv(e){return zv(e,!0)}function zv(e,i){return En(e)?e:new Ow(e,i)}class Ow{constructor(i,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?i:Er(i),this._value=s?i:jc(i)}get value(){return Cv(this),this._value}set value(i){i=this.__v_isShallow?i:Er(i),Fc(i,this._rawValue)&&(this._rawValue=i,this._value=this.__v_isShallow?i:jc(i),kv(this))}}function Vi(e){return En(e)?e.value:e}const Mw={get:(e,i,s)=>Vi(Reflect.get(e,i,s)),set:(e,i,s,u)=>{const m=e[i];return En(m)&&!En(s)?(m.value=s,!0):Reflect.set(e,i,s,u)}};function Ov(e){return Ja(e)?e:new Proxy(e,Mw)}function Lw(e){const i=jt(e)?new Array(e.length):{};for(const s in e)i[s]=Bw(e,s);return i}class Rw{constructor(i,s,u){this._object=i,this._key=s,this._defaultValue=u,this.__v_isRef=!0}get value(){const i=this._object[this._key];return i===void 0?this._defaultValue:i}set value(i){this._object[this._key]=i}}function Bw(e,i,s){const u=e[i];return En(u)?u:new Rw(e,i,s)}class Fw{constructor(i,s,u,m){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Rf(i,()=>{this._dirty||(this._dirty=!0,kv(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!m,this.__v_isReadonly=u}get value(){const i=Er(this);return Cv(i),(i._dirty||!i._cacheable)&&(i._dirty=!1,i._value=i.effect.run()),i._value}set value(i){this._setter(i)}}function Nw(e,i,s=!1){let u,m;const y=Yt(e);return y?(u=e,m=ji):(u=e.get,m=e.set),new Fw(u,m,y||!m,s)}function os(e,i,s,u){let m;try{m=u?e(...u):e()}catch(y){Yc(y,i,s)}return m}function ki(e,i,s,u){if(Yt(e)){const y=os(e,i,s,u);return y&&pv(y)&&y.catch(x=>{Yc(x,i,s)}),y}const m=[];for(let y=0;y<e.length;y++)m.push(ki(e[y],i,s,u));return m}function Yc(e,i,s,u=!0){const m=i?i.vnode:null;if(i){let y=i.parent;const x=i.proxy,l=s;for(;y;){const C=y.ec;if(C){for(let A=0;A<C.length;A++)if(C[A](e,x,l)===!1)return}y=y.parent}const T=i.appContext.config.errorHandler;if(T){os(T,null,10,[e,x,l]);return}}jw(e,s,m,u)}function jw(e,i,s,u=!0){console.error(e)}let kh=!1,Qp=!1;const fi=[];let bo=0;const Cc=[];let Tc=null,Ua=0;const kc=[];let Qo=null,$a=0;const Mv=Promise.resolve();let $f=null,ef=null;function qf(e){const i=$f||Mv;return e?i.then(this?e.bind(this):e):i}function Vw(e){let i=bo+1,s=fi.length;for(;i<s;){const u=i+s>>>1;Vc(fi[u])<e?i=u+1:s=u}return i}function Hf(e){(!fi.length||!fi.includes(e,kh&&e.allowRecurse?bo+1:bo))&&e!==ef&&(e.id==null?fi.push(e):fi.splice(Vw(e.id),0,e),Lv())}function Lv(){!kh&&!Qp&&(Qp=!0,$f=Mv.then(Bv))}function Uw(e){const i=fi.indexOf(e);i>bo&&fi.splice(i,1)}function Rv(e,i,s,u){jt(e)?s.push(...e):(!i||!i.includes(e,e.allowRecurse?u+1:u))&&s.push(e),Lv()}function $w(e){Rv(e,Tc,Cc,Ua)}function qw(e){Rv(e,Qo,kc,$a)}function Qh(e,i=null){if(Cc.length){for(ef=i,Tc=[...new Set(Cc)],Cc.length=0,Ua=0;Ua<Tc.length;Ua++)Tc[Ua]();Tc=null,Ua=0,ef=null,Qh(e,i)}}function Dh(e){if(Qh(),kc.length){const i=[...new Set(kc)];if(kc.length=0,Qo){Qo.push(...i);return}for(Qo=i,Qo.sort((s,u)=>Vc(s)-Vc(u)),$a=0;$a<Qo.length;$a++)Qo[$a]();Qo=null,$a=0}}const Vc=e=>e.id==null?1/0:e.id;function Bv(e){Qp=!1,kh=!0,Qh(e),fi.sort((s,u)=>Vc(s)-Vc(u));const i=ji;try{for(bo=0;bo<fi.length;bo++){const s=fi[bo];s&&s.active!==!1&&os(s,null,14)}}finally{bo=0,fi.length=0,Dh(),kh=!1,$f=null,(fi.length||Cc.length||kc.length)&&Bv(e)}}function Hw(e,i,...s){if(e.isUnmounted)return;const u=e.vnode.props||Rr;let m=s;const y=i.startsWith("update:"),x=y&&i.slice(7);if(x&&x in u){const A=`${x==="modelValue"?"model":x}Modifiers`,{number:F,trim:L}=u[A]||Rr;L&&(m=s.map(K=>K.trim())),F&&(m=s.map(gv))}let l,T=u[l=wp(i)]||u[l=wp(Xi(i))];!T&&y&&(T=u[l=wp(Ws(i))]),T&&ki(T,e,6,m);const C=u[l+"Once"];if(C){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,ki(C,e,6,m)}}function Fv(e,i,s=!1){const u=i.emitsCache,m=u.get(e);if(m!==void 0)return m;const y=e.emits;let x={},l=!1;if(!Yt(e)){const T=C=>{const A=Fv(C,i,!0);A&&(l=!0,Dn(x,A))};!s&&i.mixins.length&&i.mixins.forEach(T),e.extends&&T(e.extends),e.mixins&&e.mixins.forEach(T)}return!y&&!l?(u.set(e,null),null):(jt(y)?y.forEach(T=>x[T]=null):Dn(x,y),u.set(e,x),x)}function ed(e,i){return!e||!Jc(i)?!1:(i=i.slice(2).replace(/Once$/,""),gr(e,i[0].toLowerCase()+i.slice(1))||gr(e,Ws(i))||gr(e,i))}let Nn=null,td=null;function zh(e){const i=Nn;return Nn=e,td=e&&e.type.__scopeId||null,i}function Gw(e){td=e}function Zw(){td=null}function xh(e,i=Nn,s){if(!i||e._n)return e;const u=(...m)=>{u._d&&n_(-1);const y=zh(i),x=e(...m);return zh(y),u._d&&n_(1),x};return u._n=!0,u._c=!0,u._d=!0,u}function Sp(e){const{type:i,vnode:s,proxy:u,withProxy:m,props:y,propsOptions:[x],slots:l,attrs:T,emit:C,render:A,renderCache:F,data:L,setupState:K,ctx:se,inheritAttrs:pe}=e;let ye,Y;const he=zh(e);try{if(s.shapeFlag&4){const xe=m||u;ye=Bi(A.call(xe,xe,F,y,K,L,se)),Y=T}else{const xe=i;ye=Bi(xe.length>1?xe(y,{attrs:T,slots:l,emit:C}):xe(y,null)),Y=i.props?T:Ww(T)}}catch(xe){zc.length=0,Yc(xe,e,1),ye=qr(gi)}let me=ye;if(Y&&pe!==!1){const xe=Object.keys(Y),{shapeFlag:Ae}=me;xe.length&&Ae&7&&(x&&xe.some(Df)&&(Y=Kw(Y,x)),me=ls(me,Y))}return s.dirs&&(me=ls(me),me.dirs=me.dirs?me.dirs.concat(s.dirs):s.dirs),s.transition&&(me.transition=s.transition),ye=me,zh(he),ye}const Ww=e=>{let i;for(const s in e)(s==="class"||s==="style"||Jc(s))&&((i||(i={}))[s]=e[s]);return i},Kw=(e,i)=>{const s={};for(const u in e)(!Df(u)||!(u.slice(9)in i))&&(s[u]=e[u]);return s};function Xw(e,i,s){const{props:u,children:m,component:y}=e,{props:x,children:l,patchFlag:T}=i,C=y.emitsOptions;if(i.dirs||i.transition)return!0;if(s&&T>=0){if(T&1024)return!0;if(T&16)return u?Zg(u,x,C):!!x;if(T&8){const A=i.dynamicProps;for(let F=0;F<A.length;F++){const L=A[F];if(x[L]!==u[L]&&!ed(C,L))return!0}}}else return(m||l)&&(!l||!l.$stable)?!0:u===x?!1:u?x?Zg(u,x,C):!0:!!x;return!1}function Zg(e,i,s){const u=Object.keys(i);if(u.length!==Object.keys(e).length)return!0;for(let m=0;m<u.length;m++){const y=u[m];if(i[y]!==e[y]&&!ed(s,y))return!0}return!1}function Jw({vnode:e,parent:i},s){for(;i&&i.subTree===e;)(e=i.vnode).el=s,i=i.parent}const Yw=e=>e.__isSuspense;function Nv(e,i){i&&i.pendingBranch?jt(e)?i.effects.push(...e):i.effects.push(e):qw(e)}function ss(e,i){if(fn){let s=fn.provides;const u=fn.parent&&fn.parent.provides;u===s&&(s=fn.provides=Object.create(u)),s[e]=i}}function gn(e,i,s=!1){const u=fn||Nn;if(u){const m=u.parent==null?u.vnode.appContext&&u.vnode.appContext.provides:u.parent.provides;if(m&&e in m)return m[e];if(arguments.length>1)return s&&Yt(i)?i.call(u.proxy):i}}const Wg={};function Ui(e,i,s){return jv(e,i,s)}function jv(e,i,{immediate:s,deep:u,flush:m,onTrack:y,onTrigger:x}=Rr){const l=fn;let T,C=!1,A=!1;if(En(e)?(T=()=>e.value,C=Yp(e)):Ja(e)?(T=()=>e,u=!0):jt(e)?(A=!0,C=e.some(Y=>Ja(Y)||Yp(Y)),T=()=>e.map(Y=>{if(En(Y))return Y.value;if(Ja(Y))return Hs(Y);if(Yt(Y))return os(Y,l,2)})):Yt(e)?i?T=()=>os(e,l,2):T=()=>{if(!(l&&l.isUnmounted))return F&&F(),ki(e,l,3,[L])}:T=ji,i&&u){const Y=T;T=()=>Hs(Y())}let F,L=Y=>{F=ye.onStop=()=>{os(Y,l,4)}};if(rl)return L=ji,i?s&&ki(i,l,3,[T(),A?[]:void 0,L]):T(),ji;let K=A?[]:Wg;const se=()=>{if(!!ye.active)if(i){const Y=ye.run();(u||C||(A?Y.some((he,me)=>Fc(he,K[me])):Fc(Y,K)))&&(F&&F(),ki(i,l,3,[Y,K===Wg?void 0:K,L]),K=Y)}else ye.run()};se.allowRecurse=!!i;let pe;m==="sync"?pe=se:m==="post"?pe=()=>ni(se,l&&l.suspense):pe=()=>$w(se);const ye=new Rf(T,pe);return i?s?se():K=ye.run():m==="post"?ni(ye.run.bind(ye),l&&l.suspense):ye.run(),()=>{ye.stop(),l&&l.scope&&zf(l.scope.effects,ye)}}function Qw(e,i,s){const u=this.proxy,m=Br(e)?e.includes(".")?Vv(u,e):()=>u[e]:e.bind(u,u);let y;Yt(i)?y=i:(y=i.handler,s=i);const x=fn;tl(this);const l=jv(m,y.bind(u),s);return x?tl(x):Zs(),l}function Vv(e,i){const s=i.split(".");return()=>{let u=e;for(let m=0;m<s.length&&u;m++)u=u[s[m]];return u}}function Hs(e,i){if(!un(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),En(e))Hs(e.value,i);else if(jt(e))for(let s=0;s<e.length;s++)Hs(e[s],i);else if(dv(e)||Xa(e))e.forEach(s=>{Hs(s,i)});else if(mv(e))for(const s in e)Hs(e[s],i);return e}function e2(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ji(()=>{e.isMounted=!0}),Gf(()=>{e.isUnmounting=!0}),e}const Ai=[Function,Array],t2={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ai,onEnter:Ai,onAfterEnter:Ai,onEnterCancelled:Ai,onBeforeLeave:Ai,onLeave:Ai,onAfterLeave:Ai,onLeaveCancelled:Ai,onBeforeAppear:Ai,onAppear:Ai,onAfterAppear:Ai,onAppearCancelled:Ai},setup(e,{slots:i}){const s=a0(),u=e2();let m;return()=>{const y=i.default&&qv(i.default(),!0);if(!y||!y.length)return;let x=y[0];if(y.length>1){for(const pe of y)if(pe.type!==gi){x=pe;break}}const l=Er(e),{mode:T}=l;if(u.isLeaving)return Tp(x);const C=Kg(x);if(!C)return Tp(x);const A=tf(C,l,u,s);rf(C,A);const F=s.subTree,L=F&&Kg(F);let K=!1;const{getTransitionKey:se}=C.type;if(se){const pe=se();m===void 0?m=pe:pe!==m&&(m=pe,K=!0)}if(L&&L.type!==gi&&(!$s(C,L)||K)){const pe=tf(L,l,u,s);if(rf(L,pe),T==="out-in")return u.isLeaving=!0,pe.afterLeave=()=>{u.isLeaving=!1,s.update()},Tp(x);T==="in-out"&&C.type!==gi&&(pe.delayLeave=(ye,Y,he)=>{const me=$v(u,L);me[String(L.key)]=L,ye._leaveCb=()=>{Y(),ye._leaveCb=void 0,delete A.delayedLeave},A.delayedLeave=he})}return x}}},Uv=t2;function $v(e,i){const{leavingVNodes:s}=e;let u=s.get(i.type);return u||(u=Object.create(null),s.set(i.type,u)),u}function tf(e,i,s,u){const{appear:m,mode:y,persisted:x=!1,onBeforeEnter:l,onEnter:T,onAfterEnter:C,onEnterCancelled:A,onBeforeLeave:F,onLeave:L,onAfterLeave:K,onLeaveCancelled:se,onBeforeAppear:pe,onAppear:ye,onAfterAppear:Y,onAppearCancelled:he}=i,me=String(e.key),xe=$v(s,e),Ae=(_e,ot)=>{_e&&ki(_e,u,9,ot)},Ge=(_e,ot)=>{const it=ot[1];Ae(_e,ot),jt(_e)?_e.every(dt=>dt.length<=1)&&it():_e.length<=1&&it()},We={mode:y,persisted:x,beforeEnter(_e){let ot=l;if(!s.isMounted)if(m)ot=pe||l;else return;_e._leaveCb&&_e._leaveCb(!0);const it=xe[me];it&&$s(e,it)&&it.el._leaveCb&&it.el._leaveCb(),Ae(ot,[_e])},enter(_e){let ot=T,it=C,dt=A;if(!s.isMounted)if(m)ot=ye||T,it=Y||C,dt=he||A;else return;let De=!1;const Je=_e._enterCb=Ke=>{De||(De=!0,Ke?Ae(dt,[_e]):Ae(it,[_e]),We.delayedLeave&&We.delayedLeave(),_e._enterCb=void 0)};ot?Ge(ot,[_e,Je]):Je()},leave(_e,ot){const it=String(e.key);if(_e._enterCb&&_e._enterCb(!0),s.isUnmounting)return ot();Ae(F,[_e]);let dt=!1;const De=_e._leaveCb=Je=>{dt||(dt=!0,ot(),Je?Ae(se,[_e]):Ae(K,[_e]),_e._leaveCb=void 0,xe[it]===e&&delete xe[it])};xe[it]=e,L?Ge(L,[_e,De]):De()},clone(_e){return tf(_e,i,s,u)}};return We}function Tp(e){if(Qc(e))return e=ls(e),e.children=null,e}function Kg(e){return Qc(e)?e.children?e.children[0]:void 0:e}function rf(e,i){e.shapeFlag&6&&e.component?rf(e.component.subTree,i):e.shapeFlag&128?(e.ssContent.transition=i.clone(e.ssContent),e.ssFallback.transition=i.clone(e.ssFallback)):e.transition=i}function qv(e,i=!1,s){let u=[],m=0;for(let y=0;y<e.length;y++){let x=e[y];const l=s==null?x.key:String(s)+String(x.key!=null?x.key:y);x.type===wn?(x.patchFlag&128&&m++,u=u.concat(qv(x.children,i,l))):(i||x.type!==gi)&&u.push(l!=null?ls(x,{key:l}):x)}if(m>1)for(let y=0;y<u.length;y++)u[y].patchFlag=-2;return u}function jn(e){return Yt(e)?{setup:e,name:e.name}:e}const Ya=e=>!!e.type.__asyncLoader;function xt(e){Yt(e)&&(e={loader:e});const{loader:i,loadingComponent:s,errorComponent:u,delay:m=200,timeout:y,suspensible:x=!0,onError:l}=e;let T=null,C,A=0;const F=()=>(A++,T=null,L()),L=()=>{let K;return T||(K=T=i().catch(se=>{if(se=se instanceof Error?se:new Error(String(se)),l)return new Promise((pe,ye)=>{l(se,()=>pe(F()),()=>ye(se),A+1)});throw se}).then(se=>K!==T&&T?T:(se&&(se.__esModule||se[Symbol.toStringTag]==="Module")&&(se=se.default),C=se,se)))};return jn({name:"AsyncComponentWrapper",__asyncLoader:L,get __asyncResolved(){return C},setup(){const K=fn;if(C)return()=>Ip(C,K);const se=he=>{T=null,Yc(he,K,13,!u)};if(x&&K.suspense||rl)return L().then(he=>()=>Ip(he,K)).catch(he=>(se(he),()=>u?qr(u,{error:he}):null));const pe=mn(!1),ye=mn(),Y=mn(!!m);return m&&setTimeout(()=>{Y.value=!1},m),y!=null&&setTimeout(()=>{if(!pe.value&&!ye.value){const he=new Error(`Async component timed out after ${y}ms.`);se(he),ye.value=he}},y),L().then(()=>{pe.value=!0,K.parent&&Qc(K.parent.vnode)&&Hf(K.parent.update)}).catch(he=>{se(he),ye.value=he}),()=>{if(pe.value&&C)return Ip(C,K);if(ye.value&&u)return qr(u,{error:ye.value});if(s&&!Y.value)return qr(s)}}})}function Ip(e,{vnode:{ref:i,props:s,children:u,shapeFlag:m},parent:y}){const x=qr(e,s,u);return x.ref=i,x}const Qc=e=>e.type.__isKeepAlive;function r2(e,i){Hv(e,"a",i)}function n2(e,i){Hv(e,"da",i)}function Hv(e,i,s=fn){const u=e.__wdc||(e.__wdc=()=>{let m=s;for(;m;){if(m.isDeactivated)return;m=m.parent}return e()});if(rd(i,u,s),s){let m=s.parent;for(;m&&m.parent;)Qc(m.parent.vnode)&&i2(u,i,s,m),m=m.parent}}function i2(e,i,s,u){const m=rd(i,e,u,!0);Zf(()=>{zf(u[i],m)},s)}function rd(e,i,s=fn,u=!1){if(s){const m=s[e]||(s[e]=[]),y=i.__weh||(i.__weh=(...x)=>{if(s.isUnmounted)return;ll(),tl(s);const l=ki(i,s,e,x);return Zs(),cl(),l});return u?m.unshift(y):m.push(y),y}}const Io=e=>(i,s=fn)=>(!rl||e==="sp")&&rd(e,i,s),Gv=Io("bm"),Ji=Io("m"),o2=Io("bu"),s2=Io("u"),Gf=Io("bum"),Zf=Io("um"),a2=Io("sp"),l2=Io("rtg"),c2=Io("rtc");function u2(e,i=fn){rd("ec",e,i)}function Z5(e,i){const s=Nn;if(s===null)return e;const u=od(s)||s.proxy,m=e.dirs||(e.dirs=[]);for(let y=0;y<i.length;y++){let[x,l,T,C=Rr]=i[y];Yt(x)&&(x={mounted:x,updated:x}),x.deep&&Hs(l),m.push({dir:x,instance:u,value:l,oldValue:void 0,arg:T,modifiers:C})}return e}function Zi(e,i,s,u){const m=e.dirs,y=i&&i.dirs;for(let x=0;x<m.length;x++){const l=m[x];y&&(l.oldValue=y[x].value);let T=l.dir[u];T&&(ll(),ki(T,s,8,[e.el,l,e,i]),cl())}}const Zv="components";function Ga(e,i){return d2(Zv,e,!0,i)||e}const h2=Symbol();function d2(e,i,s=!0,u=!1){const m=Nn||fn;if(m){const y=m.type;if(e===Zv){const l=V2(y,!1);if(l&&(l===i||l===Xi(i)||l===Jh(Xi(i))))return y}const x=Xg(m[e]||y[e],i)||Xg(m.appContext[e],i);return!x&&u?y:x}}function Xg(e,i){return e&&(e[i]||e[Xi(i)]||e[Jh(Xi(i))])}function Wf(e,i,s,u){let m;const y=s&&s[u];if(jt(e)||Br(e)){m=new Array(e.length);for(let x=0,l=e.length;x<l;x++)m[x]=i(e[x],x,void 0,y&&y[x])}else if(typeof e=="number"){m=new Array(e);for(let x=0;x<e;x++)m[x]=i(x+1,x,void 0,y&&y[x])}else if(un(e))if(e[Symbol.iterator])m=Array.from(e,(x,l)=>i(x,l,void 0,y&&y[l]));else{const x=Object.keys(e);m=new Array(x.length);for(let l=0,T=x.length;l<T;l++){const C=x[l];m[l]=i(e[C],C,l,y&&y[l])}}else m=[];return s&&(s[u]=m),m}function nd(e,i,s={},u,m){if(Nn.isCE||Nn.parent&&Ya(Nn.parent)&&Nn.parent.isCE)return qr("slot",i==="default"?null:{name:i},u&&u());let y=e[i];y&&y._c&&(y._d=!1),tn();const x=y&&Wv(y(s)),l=qc(wn,{key:s.key||`_${i}`},x||(u?u():[]),x&&e._===1?64:-2);return!m&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),y&&y._c&&(y._d=!0),l}function Wv(e){return e.some(i=>Rh(i)?!(i.type===gi||i.type===wn&&!Wv(i.children)):!0)?e:null}const nf=e=>e?l0(e)?od(e)||e.proxy:nf(e.parent):null,Oh=Dn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>nf(e.parent),$root:e=>nf(e.root),$emit:e=>e.emit,$options:e=>Xv(e),$forceUpdate:e=>e.f||(e.f=()=>Hf(e.update)),$nextTick:e=>e.n||(e.n=qf.bind(e.proxy)),$watch:e=>Qw.bind(e)}),p2={get({_:e},i){const{ctx:s,setupState:u,data:m,props:y,accessCache:x,type:l,appContext:T}=e;let C;if(i[0]!=="$"){const K=x[i];if(K!==void 0)switch(K){case 1:return u[i];case 2:return m[i];case 4:return s[i];case 3:return y[i]}else{if(u!==Rr&&gr(u,i))return x[i]=1,u[i];if(m!==Rr&&gr(m,i))return x[i]=2,m[i];if((C=e.propsOptions[0])&&gr(C,i))return x[i]=3,y[i];if(s!==Rr&&gr(s,i))return x[i]=4,s[i];of&&(x[i]=0)}}const A=Oh[i];let F,L;if(A)return i==="$attrs"&&_i(e,"get",i),A(e);if((F=l.__cssModules)&&(F=F[i]))return F;if(s!==Rr&&gr(s,i))return x[i]=4,s[i];if(L=T.config.globalProperties,gr(L,i))return L[i]},set({_:e},i,s){const{data:u,setupState:m,ctx:y}=e;return m!==Rr&&gr(m,i)?(m[i]=s,!0):u!==Rr&&gr(u,i)?(u[i]=s,!0):gr(e.props,i)||i[0]==="$"&&i.slice(1)in e?!1:(y[i]=s,!0)},has({_:{data:e,setupState:i,accessCache:s,ctx:u,appContext:m,propsOptions:y}},x){let l;return!!s[x]||e!==Rr&&gr(e,x)||i!==Rr&&gr(i,x)||(l=y[0])&&gr(l,x)||gr(u,x)||gr(Oh,x)||gr(m.config.globalProperties,x)},defineProperty(e,i,s){return s.get!=null?e._.accessCache[i]=0:gr(s,"value")&&this.set(e,i,s.value,null),Reflect.defineProperty(e,i,s)}};let of=!0;function f2(e){const i=Xv(e),s=e.proxy,u=e.ctx;of=!1,i.beforeCreate&&Jg(i.beforeCreate,e,"bc");const{data:m,computed:y,methods:x,watch:l,provide:T,inject:C,created:A,beforeMount:F,mounted:L,beforeUpdate:K,updated:se,activated:pe,deactivated:ye,beforeDestroy:Y,beforeUnmount:he,destroyed:me,unmounted:xe,render:Ae,renderTracked:Ge,renderTriggered:We,errorCaptured:_e,serverPrefetch:ot,expose:it,inheritAttrs:dt,components:De,directives:Je,filters:Ke}=i;if(C&&m2(C,u,null,e.appContext.config.unwrapInjectedRef),x)for(const At in x){const Ot=x[At];Yt(Ot)&&(u[At]=Ot.bind(s))}if(m){const At=m.call(s,s);un(At)&&(e.data=ul(At))}if(of=!0,y)for(const At in y){const Ot=y[At],dr=Yt(Ot)?Ot.bind(s,s):Yt(Ot.get)?Ot.get.bind(s,s):ji,pr=!Yt(Ot)&&Yt(Ot.set)?Ot.set.bind(s):ji,Ir=Pr({get:dr,set:pr});Object.defineProperty(u,At,{enumerable:!0,configurable:!0,get:()=>Ir.value,set:vr=>Ir.value=vr})}if(l)for(const At in l)Kv(l[At],u,s,At);if(T){const At=Yt(T)?T.call(s):T;Reflect.ownKeys(At).forEach(Ot=>{ss(Ot,At[Ot])})}A&&Jg(A,e,"c");function Le(At,Ot){jt(Ot)?Ot.forEach(dr=>At(dr.bind(s))):Ot&&At(Ot.bind(s))}if(Le(Gv,F),Le(Ji,L),Le(o2,K),Le(s2,se),Le(r2,pe),Le(n2,ye),Le(u2,_e),Le(c2,Ge),Le(l2,We),Le(Gf,he),Le(Zf,xe),Le(a2,ot),jt(it))if(it.length){const At=e.exposed||(e.exposed={});it.forEach(Ot=>{Object.defineProperty(At,Ot,{get:()=>s[Ot],set:dr=>s[Ot]=dr})})}else e.exposed||(e.exposed={});Ae&&e.render===ji&&(e.render=Ae),dt!=null&&(e.inheritAttrs=dt),De&&(e.components=De),Je&&(e.directives=Je)}function m2(e,i,s=ji,u=!1){jt(e)&&(e=sf(e));for(const m in e){const y=e[m];let x;un(y)?"default"in y?x=gn(y.from||m,y.default,!0):x=gn(y.from||m):x=gn(y),En(x)&&u?Object.defineProperty(i,m,{enumerable:!0,configurable:!0,get:()=>x.value,set:l=>x.value=l}):i[m]=x}}function Jg(e,i,s){ki(jt(e)?e.map(u=>u.bind(i.proxy)):e.bind(i.proxy),i,s)}function Kv(e,i,s,u){const m=u.includes(".")?Vv(s,u):()=>s[u];if(Br(e)){const y=i[e];Yt(y)&&Ui(m,y)}else if(Yt(e))Ui(m,e.bind(s));else if(un(e))if(jt(e))e.forEach(y=>Kv(y,i,s,u));else{const y=Yt(e.handler)?e.handler.bind(s):i[e.handler];Yt(y)&&Ui(m,y,e)}}function Xv(e){const i=e.type,{mixins:s,extends:u}=i,{mixins:m,optionsCache:y,config:{optionMergeStrategies:x}}=e.appContext,l=y.get(i);let T;return l?T=l:!m.length&&!s&&!u?T=i:(T={},m.length&&m.forEach(C=>Mh(T,C,x,!0)),Mh(T,i,x)),y.set(i,T),T}function Mh(e,i,s,u=!1){const{mixins:m,extends:y}=i;y&&Mh(e,y,s,!0),m&&m.forEach(x=>Mh(e,x,s,!0));for(const x in i)if(!(u&&x==="expose")){const l=g2[x]||s&&s[x];e[x]=l?l(e[x],i[x]):i[x]}return e}const g2={data:Yg,props:js,emits:js,methods:js,computed:js,beforeCreate:Xn,created:Xn,beforeMount:Xn,mounted:Xn,beforeUpdate:Xn,updated:Xn,beforeDestroy:Xn,beforeUnmount:Xn,destroyed:Xn,unmounted:Xn,activated:Xn,deactivated:Xn,errorCaptured:Xn,serverPrefetch:Xn,components:js,directives:js,watch:y2,provide:Yg,inject:_2};function Yg(e,i){return i?e?function(){return Dn(Yt(e)?e.call(this,this):e,Yt(i)?i.call(this,this):i)}:i:e}function _2(e,i){return js(sf(e),sf(i))}function sf(e){if(jt(e)){const i={};for(let s=0;s<e.length;s++)i[e[s]]=e[s];return i}return e}function Xn(e,i){return e?[...new Set([].concat(e,i))]:i}function js(e,i){return e?Dn(Dn(Object.create(null),e),i):i}function y2(e,i){if(!e)return i;if(!i)return e;const s=Dn(Object.create(null),e);for(const u in i)s[u]=Xn(e[u],i[u]);return s}function v2(e,i,s,u=!1){const m={},y={};Ch(y,id,1),e.propsDefaults=Object.create(null),Jv(e,i,m,y);for(const x in e.propsOptions[0])x in m||(m[x]=void 0);s?e.props=u?m:zw(m):e.type.props?e.props=m:e.props=y,e.attrs=y}function x2(e,i,s,u){const{props:m,attrs:y,vnode:{patchFlag:x}}=e,l=Er(m),[T]=e.propsOptions;let C=!1;if((u||x>0)&&!(x&16)){if(x&8){const A=e.vnode.dynamicProps;for(let F=0;F<A.length;F++){let L=A[F];if(ed(e.emitsOptions,L))continue;const K=i[L];if(T)if(gr(y,L))K!==y[L]&&(y[L]=K,C=!0);else{const se=Xi(L);m[se]=af(T,l,se,K,e,!1)}else K!==y[L]&&(y[L]=K,C=!0)}}}else{Jv(e,i,m,y)&&(C=!0);let A;for(const F in l)(!i||!gr(i,F)&&((A=Ws(F))===F||!gr(i,A)))&&(T?s&&(s[F]!==void 0||s[A]!==void 0)&&(m[F]=af(T,l,F,void 0,e,!0)):delete m[F]);if(y!==l)for(const F in y)(!i||!gr(i,F)&&!0)&&(delete y[F],C=!0)}C&&To(e,"set","$attrs")}function Jv(e,i,s,u){const[m,y]=e.propsOptions;let x=!1,l;if(i)for(let T in i){if(Pc(T))continue;const C=i[T];let A;m&&gr(m,A=Xi(T))?!y||!y.includes(A)?s[A]=C:(l||(l={}))[A]=C:ed(e.emitsOptions,T)||(!(T in u)||C!==u[T])&&(u[T]=C,x=!0)}if(y){const T=Er(s),C=l||Rr;for(let A=0;A<y.length;A++){const F=y[A];s[F]=af(m,T,F,C[F],e,!gr(C,F))}}return x}function af(e,i,s,u,m,y){const x=e[s];if(x!=null){const l=gr(x,"default");if(l&&u===void 0){const T=x.default;if(x.type!==Function&&Yt(T)){const{propsDefaults:C}=m;s in C?u=C[s]:(tl(m),u=C[s]=T.call(null,i),Zs())}else u=T}x[0]&&(y&&!l?u=!1:x[1]&&(u===""||u===Ws(s))&&(u=!0))}return u}function Yv(e,i,s=!1){const u=i.propsCache,m=u.get(e);if(m)return m;const y=e.props,x={},l=[];let T=!1;if(!Yt(e)){const A=F=>{T=!0;const[L,K]=Yv(F,i,!0);Dn(x,L),K&&l.push(...K)};!s&&i.mixins.length&&i.mixins.forEach(A),e.extends&&A(e.extends),e.mixins&&e.mixins.forEach(A)}if(!y&&!T)return u.set(e,Ka),Ka;if(jt(y))for(let A=0;A<y.length;A++){const F=Xi(y[A]);Qg(F)&&(x[F]=Rr)}else if(y)for(const A in y){const F=Xi(A);if(Qg(F)){const L=y[A],K=x[F]=jt(L)||Yt(L)?{type:L}:L;if(K){const se=r_(Boolean,K.type),pe=r_(String,K.type);K[0]=se>-1,K[1]=pe<0||se<pe,(se>-1||gr(K,"default"))&&l.push(F)}}}const C=[x,l];return u.set(e,C),C}function Qg(e){return e[0]!=="$"}function e_(e){const i=e&&e.toString().match(/^\s*function (\w+)/);return i?i[1]:e===null?"null":""}function t_(e,i){return e_(e)===e_(i)}function r_(e,i){return jt(i)?i.findIndex(s=>t_(s,e)):Yt(i)&&t_(i,e)?0:-1}const Qv=e=>e[0]==="_"||e==="$stable",Kf=e=>jt(e)?e.map(Bi):[Bi(e)],b2=(e,i,s)=>{if(i._n)return i;const u=xh((...m)=>Kf(i(...m)),s);return u._c=!1,u},e0=(e,i,s)=>{const u=e._ctx;for(const m in e){if(Qv(m))continue;const y=e[m];if(Yt(y))i[m]=b2(m,y,u);else if(y!=null){const x=Kf(y);i[m]=()=>x}}},t0=(e,i)=>{const s=Kf(i);e.slots.default=()=>s},w2=(e,i)=>{if(e.vnode.shapeFlag&32){const s=i._;s?(e.slots=Er(i),Ch(i,"_",s)):e0(i,e.slots={})}else e.slots={},i&&t0(e,i);Ch(e.slots,id,1)},E2=(e,i,s)=>{const{vnode:u,slots:m}=e;let y=!0,x=Rr;if(u.shapeFlag&32){const l=i._;l?s&&l===1?y=!1:(Dn(m,i),!s&&l===1&&delete m._):(y=!i.$stable,e0(i,m)),x=i}else i&&(t0(e,i),x={default:1});if(y)for(const l in m)!Qv(l)&&!(l in x)&&delete m[l]};function r0(){return{app:null,config:{isNativeTag:Xb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let S2=0;function T2(e,i){return function(u,m=null){Yt(u)||(u=Object.assign({},u)),m!=null&&!un(m)&&(m=null);const y=r0(),x=new Set;let l=!1;const T=y.app={_uid:S2++,_component:u,_props:m,_container:null,_context:y,_instance:null,version:$2,get config(){return y.config},set config(C){},use(C,...A){return x.has(C)||(C&&Yt(C.install)?(x.add(C),C.install(T,...A)):Yt(C)&&(x.add(C),C(T,...A))),T},mixin(C){return y.mixins.includes(C)||y.mixins.push(C),T},component(C,A){return A?(y.components[C]=A,T):y.components[C]},directive(C,A){return A?(y.directives[C]=A,T):y.directives[C]},mount(C,A,F){if(!l){const L=qr(u,m);return L.appContext=y,A&&i?i(L,C):e(L,C,F),l=!0,T._container=C,C.__vue_app__=T,od(L.component)||L.component.proxy}},unmount(){l&&(e(null,T._container),delete T._container.__vue_app__)},provide(C,A){return y.provides[C]=A,T}};return T}}function Lh(e,i,s,u,m=!1){if(jt(e)){e.forEach((L,K)=>Lh(L,i&&(jt(i)?i[K]:i),s,u,m));return}if(Ya(u)&&!m)return;const y=u.shapeFlag&4?od(u.component)||u.component.proxy:u.el,x=m?null:y,{i:l,r:T}=e,C=i&&i.r,A=l.refs===Rr?l.refs={}:l.refs,F=l.setupState;if(C!=null&&C!==T&&(Br(C)?(A[C]=null,gr(F,C)&&(F[C]=null)):En(C)&&(C.value=null)),Yt(T))os(T,l,12,[x,A]);else{const L=Br(T),K=En(T);if(L||K){const se=()=>{if(e.f){const pe=L?A[T]:T.value;m?jt(pe)&&zf(pe,y):jt(pe)?pe.includes(y)||pe.push(y):L?(A[T]=[y],gr(F,T)&&(F[T]=A[T])):(T.value=[y],e.k&&(A[e.k]=T.value))}else L?(A[T]=x,gr(F,T)&&(F[T]=x)):K&&(T.value=x,e.k&&(A[e.k]=x))};x?(se.id=-1,ni(se,s)):se()}}}let Ko=!1;const ah=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",lh=e=>e.nodeType===8;function I2(e){const{mt:i,p:s,o:{patchProp:u,createText:m,nextSibling:y,parentNode:x,remove:l,insert:T,createComment:C}}=e,A=(Y,he)=>{if(!he.hasChildNodes()){s(null,Y,he),Dh(),he._vnode=Y;return}Ko=!1,F(he.firstChild,Y,null,null,null),Dh(),he._vnode=Y,Ko&&console.error("Hydration completed but contains mismatches.")},F=(Y,he,me,xe,Ae,Ge=!1)=>{const We=lh(Y)&&Y.data==="[",_e=()=>pe(Y,he,me,xe,Ae,We),{type:ot,ref:it,shapeFlag:dt,patchFlag:De}=he,Je=Y.nodeType;he.el=Y,De===-2&&(Ge=!1,he.dynamicChildren=null);let Ke=null;switch(ot){case Uc:Je!==3?he.children===""?(T(he.el=m(""),x(Y),Y),Ke=Y):Ke=_e():(Y.data!==he.children&&(Ko=!0,Y.data=he.children),Ke=y(Y));break;case gi:Je!==8||We?Ke=_e():Ke=y(Y);break;case Dc:if(Je!==1&&Je!==3)Ke=_e();else{Ke=Y;const zt=!he.children.length;for(let Le=0;Le<he.staticCount;Le++)zt&&(he.children+=Ke.nodeType===1?Ke.outerHTML:Ke.data),Le===he.staticCount-1&&(he.anchor=Ke),Ke=y(Ke);return Ke}break;case wn:We?Ke=se(Y,he,me,xe,Ae,Ge):Ke=_e();break;default:if(dt&1)Je!==1||he.type.toLowerCase()!==Y.tagName.toLowerCase()?Ke=_e():Ke=L(Y,he,me,xe,Ae,Ge);else if(dt&6){he.slotScopeIds=Ae;const zt=x(Y);if(i(he,zt,null,me,xe,ah(zt),Ge),Ke=We?ye(Y):y(Y),Ke&&lh(Ke)&&Ke.data==="teleport end"&&(Ke=y(Ke)),Ya(he)){let Le;We?(Le=qr(wn),Le.anchor=Ke?Ke.previousSibling:zt.lastChild):Le=Y.nodeType===3?Xf(""):qr("div"),Le.el=Y,he.component.subTree=Le}}else dt&64?Je!==8?Ke=_e():Ke=he.type.hydrate(Y,he,me,xe,Ae,Ge,e,K):dt&128&&(Ke=he.type.hydrate(Y,he,me,xe,ah(x(Y)),Ae,Ge,e,F))}return it!=null&&Lh(it,null,xe,he),Ke},L=(Y,he,me,xe,Ae,Ge)=>{Ge=Ge||!!he.dynamicChildren;const{type:We,props:_e,patchFlag:ot,shapeFlag:it,dirs:dt}=he,De=We==="input"&&dt||We==="option";if(De||ot!==-1){if(dt&&Zi(he,null,me,"created"),_e)if(De||!Ge||ot&48)for(const Ke in _e)(De&&Ke.endsWith("value")||Jc(Ke)&&!Pc(Ke))&&u(Y,Ke,null,_e[Ke],!1,void 0,me);else _e.onClick&&u(Y,"onClick",null,_e.onClick,!1,void 0,me);let Je;if((Je=_e&&_e.onVnodeBeforeMount)&&Pi(Je,me,he),dt&&Zi(he,null,me,"beforeMount"),((Je=_e&&_e.onVnodeMounted)||dt)&&Nv(()=>{Je&&Pi(Je,me,he),dt&&Zi(he,null,me,"mounted")},xe),it&16&&!(_e&&(_e.innerHTML||_e.textContent))){let Ke=K(Y.firstChild,he,Y,me,xe,Ae,Ge);for(;Ke;){Ko=!0;const zt=Ke;Ke=Ke.nextSibling,l(zt)}}else it&8&&Y.textContent!==he.children&&(Ko=!0,Y.textContent=he.children)}return Y.nextSibling},K=(Y,he,me,xe,Ae,Ge,We)=>{We=We||!!he.dynamicChildren;const _e=he.children,ot=_e.length;for(let it=0;it<ot;it++){const dt=We?_e[it]:_e[it]=Bi(_e[it]);if(Y)Y=F(Y,dt,xe,Ae,Ge,We);else{if(dt.type===Uc&&!dt.children)continue;Ko=!0,s(null,dt,me,null,xe,Ae,ah(me),Ge)}}return Y},se=(Y,he,me,xe,Ae,Ge)=>{const{slotScopeIds:We}=he;We&&(Ae=Ae?Ae.concat(We):We);const _e=x(Y),ot=K(y(Y),he,_e,me,xe,Ae,Ge);return ot&&lh(ot)&&ot.data==="]"?y(he.anchor=ot):(Ko=!0,T(he.anchor=C("]"),_e,ot),ot)},pe=(Y,he,me,xe,Ae,Ge)=>{if(Ko=!0,he.el=null,Ge){const ot=ye(Y);for(;;){const it=y(Y);if(it&&it!==ot)l(it);else break}}const We=y(Y),_e=x(Y);return l(Y),s(null,he,_e,We,me,xe,ah(_e),Ae),We},ye=Y=>{let he=0;for(;Y;)if(Y=y(Y),Y&&lh(Y)&&(Y.data==="["&&he++,Y.data==="]")){if(he===0)return y(Y);he--}return Y};return[A,F]}const ni=Nv;function A2(e){return P2(e,I2)}function P2(e,i){const s=rw();s.__VUE__=!0;const{insert:u,remove:m,patchProp:y,createElement:x,createText:l,createComment:T,setText:C,setElementText:A,parentNode:F,nextSibling:L,setScopeId:K=ji,cloneNode:se,insertStaticContent:pe}=e,ye=(W,ne,be,Me=null,Re=null,Ve=null,Qe=!1,$e=null,tt=!!ne.dynamicChildren)=>{if(W===ne)return;W&&!$s(W,ne)&&(Me=ft(W),Ar(W,Re,Ve,!0),W=null),ne.patchFlag===-2&&(tt=!1,ne.dynamicChildren=null);const{type:He,ref:et,shapeFlag:bt}=ne;switch(He){case Uc:Y(W,ne,be,Me);break;case gi:he(W,ne,be,Me);break;case Dc:W==null&&me(ne,be,Me,Qe);break;case wn:Je(W,ne,be,Me,Re,Ve,Qe,$e,tt);break;default:bt&1?Ge(W,ne,be,Me,Re,Ve,Qe,$e,tt):bt&6?Ke(W,ne,be,Me,Re,Ve,Qe,$e,tt):(bt&64||bt&128)&&He.process(W,ne,be,Me,Re,Ve,Qe,$e,tt,nr)}et!=null&&Re&&Lh(et,W&&W.ref,Ve,ne||W,!ne)},Y=(W,ne,be,Me)=>{if(W==null)u(ne.el=l(ne.children),be,Me);else{const Re=ne.el=W.el;ne.children!==W.children&&C(Re,ne.children)}},he=(W,ne,be,Me)=>{W==null?u(ne.el=T(ne.children||""),be,Me):ne.el=W.el},me=(W,ne,be,Me)=>{[W.el,W.anchor]=pe(W.children,ne,be,Me,W.el,W.anchor)},xe=({el:W,anchor:ne},be,Me)=>{let Re;for(;W&&W!==ne;)Re=L(W),u(W,be,Me),W=Re;u(ne,be,Me)},Ae=({el:W,anchor:ne})=>{let be;for(;W&&W!==ne;)be=L(W),m(W),W=be;m(ne)},Ge=(W,ne,be,Me,Re,Ve,Qe,$e,tt)=>{Qe=Qe||ne.type==="svg",W==null?We(ne,be,Me,Re,Ve,Qe,$e,tt):it(W,ne,Re,Ve,Qe,$e,tt)},We=(W,ne,be,Me,Re,Ve,Qe,$e)=>{let tt,He;const{type:et,props:bt,shapeFlag:yt,transition:Pt,patchFlag:Vt,dirs:ve}=W;if(W.el&&se!==void 0&&Vt===-1)tt=W.el=se(W.el);else{if(tt=W.el=x(W.type,Ve,bt&&bt.is,bt),yt&8?A(tt,W.children):yt&16&&ot(W.children,tt,null,Me,Re,Ve&&et!=="foreignObject",Qe,$e),ve&&Zi(W,null,Me,"created"),bt){for(const ur in bt)ur!=="value"&&!Pc(ur)&&y(tt,ur,null,bt[ur],Ve,W.children,Me,Re,Ye);"value"in bt&&y(tt,"value",null,bt.value),(He=bt.onVnodeBeforeMount)&&Pi(He,Me,W)}_e(tt,W,W.scopeId,Qe,Me)}ve&&Zi(W,null,Me,"beforeMount");const Ue=(!Re||Re&&!Re.pendingBranch)&&Pt&&!Pt.persisted;Ue&&Pt.beforeEnter(tt),u(tt,ne,be),((He=bt&&bt.onVnodeMounted)||Ue||ve)&&ni(()=>{He&&Pi(He,Me,W),Ue&&Pt.enter(tt),ve&&Zi(W,null,Me,"mounted")},Re)},_e=(W,ne,be,Me,Re)=>{if(be&&K(W,be),Me)for(let Ve=0;Ve<Me.length;Ve++)K(W,Me[Ve]);if(Re){let Ve=Re.subTree;if(ne===Ve){const Qe=Re.vnode;_e(W,Qe,Qe.scopeId,Qe.slotScopeIds,Re.parent)}}},ot=(W,ne,be,Me,Re,Ve,Qe,$e,tt=0)=>{for(let He=tt;He<W.length;He++){const et=W[He]=$e?es(W[He]):Bi(W[He]);ye(null,et,ne,be,Me,Re,Ve,Qe,$e)}},it=(W,ne,be,Me,Re,Ve,Qe)=>{const $e=ne.el=W.el;let{patchFlag:tt,dynamicChildren:He,dirs:et}=ne;tt|=W.patchFlag&16;const bt=W.props||Rr,yt=ne.props||Rr;let Pt;be&&Ls(be,!1),(Pt=yt.onVnodeBeforeUpdate)&&Pi(Pt,be,ne,W),et&&Zi(ne,W,be,"beforeUpdate"),be&&Ls(be,!0);const Vt=Re&&ne.type!=="foreignObject";if(He?dt(W.dynamicChildren,He,$e,be,Me,Vt,Ve):Qe||dr(W,ne,$e,null,be,Me,Vt,Ve,!1),tt>0){if(tt&16)De($e,ne,bt,yt,be,Me,Re);else if(tt&2&&bt.class!==yt.class&&y($e,"class",null,yt.class,Re),tt&4&&y($e,"style",bt.style,yt.style,Re),tt&8){const ve=ne.dynamicProps;for(let Ue=0;Ue<ve.length;Ue++){const ur=ve[Ue],Hr=bt[ur],ir=yt[ur];(ir!==Hr||ur==="value")&&y($e,ur,Hr,ir,Re,W.children,be,Me,Ye)}}tt&1&&W.children!==ne.children&&A($e,ne.children)}else!Qe&&He==null&&De($e,ne,bt,yt,be,Me,Re);((Pt=yt.onVnodeUpdated)||et)&&ni(()=>{Pt&&Pi(Pt,be,ne,W),et&&Zi(ne,W,be,"updated")},Me)},dt=(W,ne,be,Me,Re,Ve,Qe)=>{for(let $e=0;$e<ne.length;$e++){const tt=W[$e],He=ne[$e],et=tt.el&&(tt.type===wn||!$s(tt,He)||tt.shapeFlag&70)?F(tt.el):be;ye(tt,He,et,null,Me,Re,Ve,Qe,!0)}},De=(W,ne,be,Me,Re,Ve,Qe)=>{if(be!==Me){for(const $e in Me){if(Pc($e))continue;const tt=Me[$e],He=be[$e];tt!==He&&$e!=="value"&&y(W,$e,He,tt,Qe,ne.children,Re,Ve,Ye)}if(be!==Rr)for(const $e in be)!Pc($e)&&!($e in Me)&&y(W,$e,be[$e],null,Qe,ne.children,Re,Ve,Ye);"value"in Me&&y(W,"value",be.value,Me.value)}},Je=(W,ne,be,Me,Re,Ve,Qe,$e,tt)=>{const He=ne.el=W?W.el:l(""),et=ne.anchor=W?W.anchor:l("");let{patchFlag:bt,dynamicChildren:yt,slotScopeIds:Pt}=ne;Pt&&($e=$e?$e.concat(Pt):Pt),W==null?(u(He,be,Me),u(et,be,Me),ot(ne.children,be,et,Re,Ve,Qe,$e,tt)):bt>0&&bt&64&&yt&&W.dynamicChildren?(dt(W.dynamicChildren,yt,be,Re,Ve,Qe,$e),(ne.key!=null||Re&&ne===Re.subTree)&&n0(W,ne,!0)):dr(W,ne,be,et,Re,Ve,Qe,$e,tt)},Ke=(W,ne,be,Me,Re,Ve,Qe,$e,tt)=>{ne.slotScopeIds=$e,W==null?ne.shapeFlag&512?Re.ctx.activate(ne,be,Me,Qe,tt):zt(ne,be,Me,Re,Ve,Qe,tt):Le(W,ne,tt)},zt=(W,ne,be,Me,Re,Ve,Qe)=>{const $e=W.component=R2(W,Me,Re);if(Qc(W)&&($e.ctx.renderer=nr),B2($e),$e.asyncDep){if(Re&&Re.registerDep($e,At),!W.el){const tt=$e.subTree=qr(gi);he(null,tt,ne,be)}return}At($e,W,ne,be,Re,Ve,Qe)},Le=(W,ne,be)=>{const Me=ne.component=W.component;if(Xw(W,ne,be))if(Me.asyncDep&&!Me.asyncResolved){Ot(Me,ne,be);return}else Me.next=ne,Uw(Me.update),Me.update();else ne.el=W.el,Me.vnode=ne},At=(W,ne,be,Me,Re,Ve,Qe)=>{const $e=()=>{if(W.isMounted){let{next:et,bu:bt,u:yt,parent:Pt,vnode:Vt}=W,ve=et,Ue;Ls(W,!1),et?(et.el=Vt.el,Ot(W,et,Qe)):et=Vt,bt&&Ep(bt),(Ue=et.props&&et.props.onVnodeBeforeUpdate)&&Pi(Ue,Pt,et,Vt),Ls(W,!0);const ur=Sp(W),Hr=W.subTree;W.subTree=ur,ye(Hr,ur,F(Hr.el),ft(Hr),W,Re,Ve),et.el=ur.el,ve===null&&Jw(W,ur.el),yt&&ni(yt,Re),(Ue=et.props&&et.props.onVnodeUpdated)&&ni(()=>Pi(Ue,Pt,et,Vt),Re)}else{let et;const{el:bt,props:yt}=ne,{bm:Pt,m:Vt,parent:ve}=W,Ue=Ya(ne);if(Ls(W,!1),Pt&&Ep(Pt),!Ue&&(et=yt&&yt.onVnodeBeforeMount)&&Pi(et,ve,ne),Ls(W,!0),bt&&Lt){const ur=()=>{W.subTree=Sp(W),Lt(bt,W.subTree,W,Re,null)};Ue?ne.type.__asyncLoader().then(()=>!W.isUnmounted&&ur()):ur()}else{const ur=W.subTree=Sp(W);ye(null,ur,be,Me,W,Re,Ve),ne.el=ur.el}if(Vt&&ni(Vt,Re),!Ue&&(et=yt&&yt.onVnodeMounted)){const ur=ne;ni(()=>Pi(et,ve,ur),Re)}(ne.shapeFlag&256||ve&&Ya(ve.vnode)&&ve.vnode.shapeFlag&256)&&W.a&&ni(W.a,Re),W.isMounted=!0,ne=be=Me=null}},tt=W.effect=new Rf($e,()=>Hf(He),W.scope),He=W.update=()=>tt.run();He.id=W.uid,Ls(W,!0),He()},Ot=(W,ne,be)=>{ne.component=W;const Me=W.vnode.props;W.vnode=ne,W.next=null,x2(W,ne.props,Me,be),E2(W,ne.children,be),ll(),Qh(void 0,W.update),cl()},dr=(W,ne,be,Me,Re,Ve,Qe,$e,tt=!1)=>{const He=W&&W.children,et=W?W.shapeFlag:0,bt=ne.children,{patchFlag:yt,shapeFlag:Pt}=ne;if(yt>0){if(yt&128){Ir(He,bt,be,Me,Re,Ve,Qe,$e,tt);return}else if(yt&256){pr(He,bt,be,Me,Re,Ve,Qe,$e,tt);return}}Pt&8?(et&16&&Ye(He,Re,Ve),bt!==He&&A(be,bt)):et&16?Pt&16?Ir(He,bt,be,Me,Re,Ve,Qe,$e,tt):Ye(He,Re,Ve,!0):(et&8&&A(be,""),Pt&16&&ot(bt,be,Me,Re,Ve,Qe,$e,tt))},pr=(W,ne,be,Me,Re,Ve,Qe,$e,tt)=>{W=W||Ka,ne=ne||Ka;const He=W.length,et=ne.length,bt=Math.min(He,et);let yt;for(yt=0;yt<bt;yt++){const Pt=ne[yt]=tt?es(ne[yt]):Bi(ne[yt]);ye(W[yt],Pt,be,null,Re,Ve,Qe,$e,tt)}He>et?Ye(W,Re,Ve,!0,!1,bt):ot(ne,be,Me,Re,Ve,Qe,$e,tt,bt)},Ir=(W,ne,be,Me,Re,Ve,Qe,$e,tt)=>{let He=0;const et=ne.length;let bt=W.length-1,yt=et-1;for(;He<=bt&&He<=yt;){const Pt=W[He],Vt=ne[He]=tt?es(ne[He]):Bi(ne[He]);if($s(Pt,Vt))ye(Pt,Vt,be,null,Re,Ve,Qe,$e,tt);else break;He++}for(;He<=bt&&He<=yt;){const Pt=W[bt],Vt=ne[yt]=tt?es(ne[yt]):Bi(ne[yt]);if($s(Pt,Vt))ye(Pt,Vt,be,null,Re,Ve,Qe,$e,tt);else break;bt--,yt--}if(He>bt){if(He<=yt){const Pt=yt+1,Vt=Pt<et?ne[Pt].el:Me;for(;He<=yt;)ye(null,ne[He]=tt?es(ne[He]):Bi(ne[He]),be,Vt,Re,Ve,Qe,$e,tt),He++}}else if(He>yt)for(;He<=bt;)Ar(W[He],Re,Ve,!0),He++;else{const Pt=He,Vt=He,ve=new Map;for(He=Vt;He<=yt;He++){const Xt=ne[He]=tt?es(ne[He]):Bi(ne[He]);Xt.key!=null&&ve.set(Xt.key,He)}let Ue,ur=0;const Hr=yt-Vt+1;let ir=!1,Sn=0;const Gr=new Array(Hr);for(He=0;He<Hr;He++)Gr[He]=0;for(He=Pt;He<=bt;He++){const Xt=W[He];if(ur>=Hr){Ar(Xt,Re,Ve,!0);continue}let Xe;if(Xt.key!=null)Xe=ve.get(Xt.key);else for(Ue=Vt;Ue<=yt;Ue++)if(Gr[Ue-Vt]===0&&$s(Xt,ne[Ue])){Xe=Ue;break}Xe===void 0?Ar(Xt,Re,Ve,!0):(Gr[Xe-Vt]=He+1,Xe>=Sn?Sn=Xe:ir=!0,ye(Xt,ne[Xe],be,null,Re,Ve,Qe,$e,tt),ur++)}const vi=ir?C2(Gr):Ka;for(Ue=vi.length-1,He=Hr-1;He>=0;He--){const Xt=Vt+He,Xe=ne[Xt],$t=Xt+1<et?ne[Xt+1].el:Me;Gr[He]===0?ye(null,Xe,be,$t,Re,Ve,Qe,$e,tt):ir&&(Ue<0||He!==vi[Ue]?vr(Xe,be,$t,2):Ue--)}}},vr=(W,ne,be,Me,Re=null)=>{const{el:Ve,type:Qe,transition:$e,children:tt,shapeFlag:He}=W;if(He&6){vr(W.component.subTree,ne,be,Me);return}if(He&128){W.suspense.move(ne,be,Me);return}if(He&64){Qe.move(W,ne,be,nr);return}if(Qe===wn){u(Ve,ne,be);for(let bt=0;bt<tt.length;bt++)vr(tt[bt],ne,be,Me);u(W.anchor,ne,be);return}if(Qe===Dc){xe(W,ne,be);return}if(Me!==2&&He&1&&$e)if(Me===0)$e.beforeEnter(Ve),u(Ve,ne,be),ni(()=>$e.enter(Ve),Re);else{const{leave:bt,delayLeave:yt,afterLeave:Pt}=$e,Vt=()=>u(Ve,ne,be),ve=()=>{bt(Ve,()=>{Vt(),Pt&&Pt()})};yt?yt(Ve,Vt,ve):ve()}else u(Ve,ne,be)},Ar=(W,ne,be,Me=!1,Re=!1)=>{const{type:Ve,props:Qe,ref:$e,children:tt,dynamicChildren:He,shapeFlag:et,patchFlag:bt,dirs:yt}=W;if($e!=null&&Lh($e,null,be,W,!0),et&256){ne.ctx.deactivate(W);return}const Pt=et&1&&yt,Vt=!Ya(W);let ve;if(Vt&&(ve=Qe&&Qe.onVnodeBeforeUnmount)&&Pi(ve,ne,W),et&6)lt(W.component,be,Me);else{if(et&128){W.suspense.unmount(be,Me);return}Pt&&Zi(W,null,ne,"beforeUnmount"),et&64?W.type.remove(W,ne,be,Re,nr,Me):He&&(Ve!==wn||bt>0&&bt&64)?Ye(He,ne,be,!1,!0):(Ve===wn&&bt&384||!Re&&et&16)&&Ye(tt,ne,be),Me&&Fr(W)}(Vt&&(ve=Qe&&Qe.onVnodeUnmounted)||Pt)&&ni(()=>{ve&&Pi(ve,ne,W),Pt&&Zi(W,null,ne,"unmounted")},be)},Fr=W=>{const{type:ne,el:be,anchor:Me,transition:Re}=W;if(ne===wn){Fe(be,Me);return}if(ne===Dc){Ae(W);return}const Ve=()=>{m(be),Re&&!Re.persisted&&Re.afterLeave&&Re.afterLeave()};if(W.shapeFlag&1&&Re&&!Re.persisted){const{leave:Qe,delayLeave:$e}=Re,tt=()=>Qe(be,Ve);$e?$e(W.el,Ve,tt):tt()}else Ve()},Fe=(W,ne)=>{let be;for(;W!==ne;)be=L(W),m(W),W=be;m(ne)},lt=(W,ne,be)=>{const{bum:Me,scope:Re,update:Ve,subTree:Qe,um:$e}=W;Me&&Ep(Me),Re.stop(),Ve&&(Ve.active=!1,Ar(Qe,W,ne,be)),$e&&ni($e,ne),ni(()=>{W.isUnmounted=!0},ne),ne&&ne.pendingBranch&&!ne.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===ne.pendingId&&(ne.deps--,ne.deps===0&&ne.resolve())},Ye=(W,ne,be,Me=!1,Re=!1,Ve=0)=>{for(let Qe=Ve;Qe<W.length;Qe++)Ar(W[Qe],ne,be,Me,Re)},ft=W=>W.shapeFlag&6?ft(W.component.subTree):W.shapeFlag&128?W.suspense.next():L(W.anchor||W.el),Zt=(W,ne,be)=>{W==null?ne._vnode&&Ar(ne._vnode,null,null,!0):ye(ne._vnode||null,W,ne,null,null,null,be),Dh(),ne._vnode=W},nr={p:ye,um:Ar,m:vr,r:Fr,mt:zt,mc:ot,pc:dr,pbc:dt,n:ft,o:e};let Bt,Lt;return i&&([Bt,Lt]=i(nr)),{render:Zt,hydrate:Bt,createApp:T2(Zt,Bt)}}function Ls({effect:e,update:i},s){e.allowRecurse=i.allowRecurse=s}function n0(e,i,s=!1){const u=e.children,m=i.children;if(jt(u)&&jt(m))for(let y=0;y<u.length;y++){const x=u[y];let l=m[y];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=m[y]=es(m[y]),l.el=x.el),s||n0(x,l))}}function C2(e){const i=e.slice(),s=[0];let u,m,y,x,l;const T=e.length;for(u=0;u<T;u++){const C=e[u];if(C!==0){if(m=s[s.length-1],e[m]<C){i[u]=m,s.push(u);continue}for(y=0,x=s.length-1;y<x;)l=y+x>>1,e[s[l]]<C?y=l+1:x=l;C<e[s[y]]&&(y>0&&(i[u]=s[y-1]),s[y]=u)}}for(y=s.length,x=s[y-1];y-- >0;)s[y]=x,x=i[x];return s}const k2=e=>e.__isTeleport,wn=Symbol(void 0),Uc=Symbol(void 0),gi=Symbol(void 0),Dc=Symbol(void 0),zc=[];let Ni=null;function tn(e=!1){zc.push(Ni=e?null:[])}function D2(){zc.pop(),Ni=zc[zc.length-1]||null}let $c=1;function n_(e){$c+=e}function i0(e){return e.dynamicChildren=$c>0?Ni||Ka:null,D2(),$c>0&&Ni&&Ni.push(e),e}function kn(e,i,s,u,m,y){return i0(mi(e,i,s,u,m,y,!0))}function qc(e,i,s,u,m){return i0(qr(e,i,s,u,m,!0))}function Rh(e){return e?e.__v_isVNode===!0:!1}function $s(e,i){return e.type===i.type&&e.key===i.key}const id="__vInternal",o0=({key:e})=>e!=null?e:null,bh=({ref:e,ref_key:i,ref_for:s})=>e!=null?Br(e)||En(e)||Yt(e)?{i:Nn,r:e,k:i,f:!!s}:e:null;function mi(e,i=null,s=null,u=0,m=null,y=e===wn?0:1,x=!1,l=!1){const T={__v_isVNode:!0,__v_skip:!0,type:e,props:i,key:i&&o0(i),ref:i&&bh(i),scopeId:td,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:u,dynamicProps:m,dynamicChildren:null,appContext:null};return l?(Jf(T,s),y&128&&e.normalize(T)):s&&(T.shapeFlag|=Br(s)?8:16),$c>0&&!x&&Ni&&(T.patchFlag>0||y&6)&&T.patchFlag!==32&&Ni.push(T),T}const qr=z2;function z2(e,i=null,s=null,u=0,m=null,y=!1){if((!e||e===h2)&&(e=gi),Rh(e)){const l=ls(e,i,!0);return s&&Jf(l,s),$c>0&&!y&&Ni&&(l.shapeFlag&6?Ni[Ni.indexOf(e)]=l:Ni.push(l)),l.patchFlag|=-2,l}if(U2(e)&&(e=e.__vccOpts),i){i=O2(i);let{class:l,style:T}=i;l&&!Br(l)&&(i.class=us(l)),un(T)&&(Av(T)&&!jt(T)&&(T=Dn({},T)),i.style=Xc(T))}const x=Br(e)?1:Yw(e)?128:k2(e)?64:un(e)?4:Yt(e)?2:0;return mi(e,i,s,u,m,x,y,!0)}function O2(e){return e?Av(e)||id in e?Dn({},e):e:null}function ls(e,i,s=!1){const{props:u,ref:m,patchFlag:y,children:x}=e,l=i?s0(u||{},i):u;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&o0(l),ref:i&&i.ref?s&&m?jt(m)?m.concat(bh(i)):[m,bh(i)]:bh(i):m,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:x,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:i&&e.type!==wn?y===-1?16:y|16:y,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ls(e.ssContent),ssFallback:e.ssFallback&&ls(e.ssFallback),el:e.el,anchor:e.anchor}}function Xf(e=" ",i=0){return qr(Uc,null,e,i)}function W5(e,i){const s=qr(Dc,null,e);return s.staticCount=i,s}function el(e="",i=!1){return i?(tn(),qc(gi,null,e)):qr(gi,null,e)}function Bi(e){return e==null||typeof e=="boolean"?qr(gi):jt(e)?qr(wn,null,e.slice()):typeof e=="object"?es(e):qr(Uc,null,String(e))}function es(e){return e.el===null||e.memo?e:ls(e)}function Jf(e,i){let s=0;const{shapeFlag:u}=e;if(i==null)i=null;else if(jt(i))s=16;else if(typeof i=="object")if(u&65){const m=i.default;m&&(m._c&&(m._d=!1),Jf(e,m()),m._c&&(m._d=!0));return}else{s=32;const m=i._;!m&&!(id in i)?i._ctx=Nn:m===3&&Nn&&(Nn.slots._===1?i._=1:(i._=2,e.patchFlag|=1024))}else Yt(i)?(i={default:i,_ctx:Nn},s=32):(i=String(i),u&64?(s=16,i=[Xf(i)]):s=8);e.children=i,e.shapeFlag|=s}function s0(...e){const i={};for(let s=0;s<e.length;s++){const u=e[s];for(const m in u)if(m==="class")i.class!==u.class&&(i.class=us([i.class,u.class]));else if(m==="style")i.style=Xc([i.style,u.style]);else if(Jc(m)){const y=i[m],x=u[m];x&&y!==x&&!(jt(y)&&y.includes(x))&&(i[m]=y?[].concat(y,x):x)}else m!==""&&(i[m]=u[m])}return i}function Pi(e,i,s,u=null){ki(e,i,7,[s,u])}const M2=r0();let L2=0;function R2(e,i,s){const u=e.type,m=(i?i.appContext:e.appContext)||M2,y={uid:L2++,vnode:e,type:u,parent:i,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,scope:new nw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:i?i.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yv(u,m),emitsOptions:Fv(u,m),emit:null,emitted:null,propsDefaults:Rr,inheritAttrs:u.inheritAttrs,ctx:Rr,data:Rr,props:Rr,attrs:Rr,slots:Rr,refs:Rr,setupState:Rr,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=i?i.root:y,y.emit=Hw.bind(null,y),e.ce&&e.ce(y),y}let fn=null;const a0=()=>fn||Nn,tl=e=>{fn=e,e.scope.on()},Zs=()=>{fn&&fn.scope.off(),fn=null};function l0(e){return e.vnode.shapeFlag&4}let rl=!1;function B2(e,i=!1){rl=i;const{props:s,children:u}=e.vnode,m=l0(e);v2(e,s,m,i),w2(e,u);const y=m?F2(e,i):void 0;return rl=!1,y}function F2(e,i){const s=e.type;e.accessCache=Object.create(null),e.proxy=Pv(new Proxy(e.ctx,p2));const{setup:u}=s;if(u){const m=e.setupContext=u.length>1?j2(e):null;tl(e),ll();const y=os(u,e,0,[e.props,m]);if(cl(),Zs(),pv(y)){if(y.then(Zs,Zs),i)return y.then(x=>{i_(e,x,i)}).catch(x=>{Yc(x,e,0)});e.asyncDep=y}else i_(e,y,i)}else c0(e,i)}function i_(e,i,s){Yt(i)?e.type.__ssrInlineRender?e.ssrRender=i:e.render=i:un(i)&&(e.setupState=Ov(i)),c0(e,s)}let o_;function c0(e,i,s){const u=e.type;if(!e.render){if(!i&&o_&&!u.render){const m=u.template;if(m){const{isCustomElement:y,compilerOptions:x}=e.appContext.config,{delimiters:l,compilerOptions:T}=u,C=Dn(Dn({isCustomElement:y,delimiters:l},x),T);u.render=o_(m,C)}}e.render=u.render||ji}tl(e),ll(),f2(e),cl(),Zs()}function N2(e){return new Proxy(e.attrs,{get(i,s){return _i(e,"get","$attrs"),i[s]}})}function j2(e){const i=u=>{e.exposed=u||{}};let s;return{get attrs(){return s||(s=N2(e))},slots:e.slots,emit:e.emit,expose:i}}function od(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ov(Pv(e.exposed)),{get(i,s){if(s in i)return i[s];if(s in Oh)return Oh[s](e)}}))}function V2(e,i=!0){return Yt(e)?e.displayName||e.name:e.name||i&&e.__name}function U2(e){return Yt(e)&&"__vccOpts"in e}const Pr=(e,i)=>Nw(e,i,rl);function cr(e,i,s){const u=arguments.length;return u===2?un(i)&&!jt(i)?Rh(i)?qr(e,null,[i]):qr(e,i):qr(e,null,i):(u>3?s=Array.prototype.slice.call(arguments,2):u===3&&Rh(s)&&(s=[s]),qr(e,i,s))}const $2="3.2.37",q2="http://www.w3.org/2000/svg",qs=typeof document!="undefined"?document:null,s_=qs&&qs.createElement("template"),H2={insert:(e,i,s)=>{i.insertBefore(e,s||null)},remove:e=>{const i=e.parentNode;i&&i.removeChild(e)},createElement:(e,i,s,u)=>{const m=i?qs.createElementNS(q2,e):qs.createElement(e,s?{is:s}:void 0);return e==="select"&&u&&u.multiple!=null&&m.setAttribute("multiple",u.multiple),m},createText:e=>qs.createTextNode(e),createComment:e=>qs.createComment(e),setText:(e,i)=>{e.nodeValue=i},setElementText:(e,i)=>{e.textContent=i},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qs.querySelector(e),setScopeId(e,i){e.setAttribute(i,"")},cloneNode(e){const i=e.cloneNode(!0);return"_value"in e&&(i._value=e._value),i},insertStaticContent(e,i,s,u,m,y){const x=s?s.previousSibling:i.lastChild;if(m&&(m===y||m.nextSibling))for(;i.insertBefore(m.cloneNode(!0),s),!(m===y||!(m=m.nextSibling)););else{s_.innerHTML=u?`<svg>${e}</svg>`:e;const l=s_.content;if(u){const T=l.firstChild;for(;T.firstChild;)l.appendChild(T.firstChild);l.removeChild(T)}i.insertBefore(l,s)}return[x?x.nextSibling:i.firstChild,s?s.previousSibling:i.lastChild]}};function G2(e,i,s){const u=e._vtc;u&&(i=(i?[i,...u]:[...u]).join(" ")),i==null?e.removeAttribute("class"):s?e.setAttribute("class",i):e.className=i}function Z2(e,i,s){const u=e.style,m=Br(s);if(s&&!m){for(const y in s)lf(u,y,s[y]);if(i&&!Br(i))for(const y in i)s[y]==null&&lf(u,y,"")}else{const y=u.display;m?i!==s&&(u.cssText=s):i&&e.removeAttribute("style"),"_vod"in e&&(u.display=y)}}const a_=/\s*!important$/;function lf(e,i,s){if(jt(s))s.forEach(u=>lf(e,i,u));else if(s==null&&(s=""),i.startsWith("--"))e.setProperty(i,s);else{const u=W2(e,i);a_.test(s)?e.setProperty(Ws(u),s.replace(a_,""),"important"):e[u]=s}}const l_=["Webkit","Moz","ms"],Ap={};function W2(e,i){const s=Ap[i];if(s)return s;let u=Xi(i);if(u!=="filter"&&u in e)return Ap[i]=u;u=Jh(u);for(let m=0;m<l_.length;m++){const y=l_[m]+u;if(y in e)return Ap[i]=y}return i}const c_="http://www.w3.org/1999/xlink";function K2(e,i,s,u,m){if(u&&i.startsWith("xlink:"))s==null?e.removeAttributeNS(c_,i.slice(6,i.length)):e.setAttributeNS(c_,i,s);else{const y=Hb(i);s==null||y&&!uv(s)?e.removeAttribute(i):e.setAttribute(i,y?"":s)}}function X2(e,i,s,u,m,y,x){if(i==="innerHTML"||i==="textContent"){u&&x(u,m,y),e[i]=s==null?"":s;return}if(i==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=s;const T=s==null?"":s;(e.value!==T||e.tagName==="OPTION")&&(e.value=T),s==null&&e.removeAttribute(i);return}let l=!1;if(s===""||s==null){const T=typeof e[i];T==="boolean"?s=uv(s):s==null&&T==="string"?(s="",l=!0):T==="number"&&(s=0,l=!0)}try{e[i]=s}catch{}l&&e.removeAttribute(i)}const[u0,J2]=(()=>{let e=Date.now,i=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const s=navigator.userAgent.match(/firefox\/(\d+)/i);i=!!(s&&Number(s[1])<=53)}return[e,i]})();let cf=0;const Y2=Promise.resolve(),Q2=()=>{cf=0},eE=()=>cf||(Y2.then(Q2),cf=u0());function tE(e,i,s,u){e.addEventListener(i,s,u)}function rE(e,i,s,u){e.removeEventListener(i,s,u)}function nE(e,i,s,u,m=null){const y=e._vei||(e._vei={}),x=y[i];if(u&&x)x.value=u;else{const[l,T]=iE(i);if(u){const C=y[i]=oE(u,m);tE(e,l,C,T)}else x&&(rE(e,l,x,T),y[i]=void 0)}}const u_=/(?:Once|Passive|Capture)$/;function iE(e){let i;if(u_.test(e)){i={};let s;for(;s=e.match(u_);)e=e.slice(0,e.length-s[0].length),i[s[0].toLowerCase()]=!0}return[Ws(e.slice(2)),i]}function oE(e,i){const s=u=>{const m=u.timeStamp||u0();(J2||m>=s.attached-1)&&ki(sE(u,s.value),i,5,[u])};return s.value=e,s.attached=eE(),s}function sE(e,i){if(jt(i)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},i.map(u=>m=>!m._stopped&&u&&u(m))}else return i}const h_=/^on[a-z]/,aE=(e,i,s,u,m=!1,y,x,l,T)=>{i==="class"?G2(e,u,m):i==="style"?Z2(e,s,u):Jc(i)?Df(i)||nE(e,i,s,u,x):(i[0]==="."?(i=i.slice(1),!0):i[0]==="^"?(i=i.slice(1),!1):lE(e,i,u,m))?X2(e,i,u,y,x,l,T):(i==="true-value"?e._trueValue=u:i==="false-value"&&(e._falseValue=u),K2(e,i,u,m))};function lE(e,i,s,u){return u?!!(i==="innerHTML"||i==="textContent"||i in e&&h_.test(i)&&Yt(s)):i==="spellcheck"||i==="draggable"||i==="translate"||i==="form"||i==="list"&&e.tagName==="INPUT"||i==="type"&&e.tagName==="TEXTAREA"||h_.test(i)&&Br(s)?!1:i in e}const Xo="transition",mc="animation",sd=(e,{slots:i})=>cr(Uv,cE(e),i);sd.displayName="Transition";const h0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};sd.props=Dn({},Uv.props,h0);const Rs=(e,i=[])=>{jt(e)?e.forEach(s=>s(...i)):e&&e(...i)},d_=e=>e?jt(e)?e.some(i=>i.length>1):e.length>1:!1;function cE(e){const i={};for(const De in e)De in h0||(i[De]=e[De]);if(e.css===!1)return i;const{name:s="v",type:u,duration:m,enterFromClass:y=`${s}-enter-from`,enterActiveClass:x=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:T=y,appearActiveClass:C=x,appearToClass:A=l,leaveFromClass:F=`${s}-leave-from`,leaveActiveClass:L=`${s}-leave-active`,leaveToClass:K=`${s}-leave-to`}=e,se=uE(m),pe=se&&se[0],ye=se&&se[1],{onBeforeEnter:Y,onEnter:he,onEnterCancelled:me,onLeave:xe,onLeaveCancelled:Ae,onBeforeAppear:Ge=Y,onAppear:We=he,onAppearCancelled:_e=me}=i,ot=(De,Je,Ke)=>{Bs(De,Je?A:l),Bs(De,Je?C:x),Ke&&Ke()},it=(De,Je)=>{De._isLeaving=!1,Bs(De,F),Bs(De,K),Bs(De,L),Je&&Je()},dt=De=>(Je,Ke)=>{const zt=De?We:he,Le=()=>ot(Je,De,Ke);Rs(zt,[Je,Le]),p_(()=>{Bs(Je,De?T:y),Jo(Je,De?A:l),d_(zt)||f_(Je,u,pe,Le)})};return Dn(i,{onBeforeEnter(De){Rs(Y,[De]),Jo(De,y),Jo(De,x)},onBeforeAppear(De){Rs(Ge,[De]),Jo(De,T),Jo(De,C)},onEnter:dt(!1),onAppear:dt(!0),onLeave(De,Je){De._isLeaving=!0;const Ke=()=>it(De,Je);Jo(De,F),pE(),Jo(De,L),p_(()=>{!De._isLeaving||(Bs(De,F),Jo(De,K),d_(xe)||f_(De,u,ye,Ke))}),Rs(xe,[De,Ke])},onEnterCancelled(De){ot(De,!1),Rs(me,[De])},onAppearCancelled(De){ot(De,!0),Rs(_e,[De])},onLeaveCancelled(De){it(De),Rs(Ae,[De])}})}function uE(e){if(e==null)return null;if(un(e))return[Pp(e.enter),Pp(e.leave)];{const i=Pp(e);return[i,i]}}function Pp(e){return gv(e)}function Jo(e,i){i.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e._vtc||(e._vtc=new Set)).add(i)}function Bs(e,i){i.split(/\s+/).forEach(u=>u&&e.classList.remove(u));const{_vtc:s}=e;s&&(s.delete(i),s.size||(e._vtc=void 0))}function p_(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let hE=0;function f_(e,i,s,u){const m=e._endId=++hE,y=()=>{m===e._endId&&u()};if(s)return setTimeout(y,s);const{type:x,timeout:l,propCount:T}=dE(e,i);if(!x)return u();const C=x+"end";let A=0;const F=()=>{e.removeEventListener(C,L),y()},L=K=>{K.target===e&&++A>=T&&F()};setTimeout(()=>{A<T&&F()},l+1),e.addEventListener(C,L)}function dE(e,i){const s=window.getComputedStyle(e),u=se=>(s[se]||"").split(", "),m=u(Xo+"Delay"),y=u(Xo+"Duration"),x=m_(m,y),l=u(mc+"Delay"),T=u(mc+"Duration"),C=m_(l,T);let A=null,F=0,L=0;i===Xo?x>0&&(A=Xo,F=x,L=y.length):i===mc?C>0&&(A=mc,F=C,L=T.length):(F=Math.max(x,C),A=F>0?x>C?Xo:mc:null,L=A?A===Xo?y.length:T.length:0);const K=A===Xo&&/\b(transform|all)(,|$)/.test(s[Xo+"Property"]);return{type:A,timeout:F,propCount:L,hasTransform:K}}function m_(e,i){for(;e.length<i.length;)e=e.concat(e);return Math.max(...i.map((s,u)=>g_(s)+g_(e[u])))}function g_(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function pE(){return document.body.offsetHeight}const fE={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},K5=(e,i)=>s=>{if(!("key"in s))return;const u=Ws(s.key);if(i.some(m=>m===u||fE[m]===u))return e(s)},X5={beforeMount(e,{value:i},{transition:s}){e._vod=e.style.display==="none"?"":e.style.display,s&&i?s.beforeEnter(e):gc(e,i)},mounted(e,{value:i},{transition:s}){s&&i&&s.enter(e)},updated(e,{value:i,oldValue:s},{transition:u}){!i!=!s&&(u?i?(u.beforeEnter(e),gc(e,!0),u.enter(e)):u.leave(e,()=>{gc(e,!1)}):gc(e,i))},beforeUnmount(e,{value:i}){gc(e,i)}};function gc(e,i){e.style.display=i?e._vod:"none"}const mE=Dn({patchProp:aE},H2);let Cp,__=!1;function gE(){return Cp=__?Cp:A2(mE),__=!0,Cp}const _E=(...e)=>{const i=gE().createApp(...e),{mount:s}=i;return i.mount=u=>{const m=yE(u);if(m)return s(m,!0,m instanceof SVGElement)},i};function yE(e){return Br(e)?document.querySelector(e):e}const vE=JSON.parse(`{"base":"/","lang":"en-US","title":"","description":"","head":[["link",{"rel":"icon","href":"/logo-assets/touch/homescreen192.png"}],["meta",{"name":"theme-color","content":"#49BF7C"}],["link",{"rel":"manifest","href":"/manifest.json"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:type","content":"article"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:image","content":"https://mirrors.sustech.edu.cn/git/sustech-online/sustech-online-ng/-/raw/master/docs/assets/og-image.png"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:article:author","content":"sustech.online"}],["meta",{"name":"apple-mobile-web-app-capable","content":"yes"}],["meta",{"name":"apple-mobile-web-app-status-bar-style","content":"black"}],["link",{"rel":"apple-touch-icon","href":"/logo-assets/touch/homescreen168.png"}],["meta",{"name":"msapplication-TileImage","content":"/logo-assets/touch/homescreen144.png"}],["meta",{"name":"msapplication-TileColor","content":"#49BF7C"}],["meta",{"name":"google-site-verification","content":"Av-srANCmFA_yZ8Iasa1yQsIPJCF_zlP5AoD35m6_Ww"}],["script",{"async":true,"src":"https://www.googletagmanager.com/gtag/js?id=G-1BQBXDGY3R"}],["script",{},"\\n    window.dataLayer = window.dataLayer || [];\\n    function gtag(){dataLayer.push(arguments);}\\n    gtag('js', new Date());\\n    gtag('config', 'G-1BQBXDGY3R');\\n    "],["script",{"src":"/wx_helper.js"}],["script",{"src":"https://res.wx.qq.com/open/js/jweixin-1.6.0.js"}],["script",{"src":"https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"}],["script",{"src":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"}],["script",{"src":"https://lib.baomitu.com/datatables/1.10.21/js/jquery.dataTables.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/datatables/1.10.21/css/jquery.dataTables.min.css"}]],"locales":{"/":{"title":"\u5357\u79D1\u624B\u518C","lang":"zh-CN","description":"Online manual for sustecher"}}}`);var xE=([e,i,s])=>e==="meta"&&i.name?`${e}.${i.name}`:["title","base"].includes(e)?e:e==="template"&&i.id?`${e}.${i.id}`:JSON.stringify([e,i,s]),bE=e=>{const i=new Set,s=[];return e.forEach(u=>{const m=xE(u);i.has(m)||(i.add(m),s.push(u))}),s},wE=e=>/^(https?:)?\/\//.test(e),J5=e=>/^mailto:/.test(e),Y5=e=>/^tel:/.test(e),d0=e=>Object.prototype.toString.call(e)==="[object Object]",EE=e=>e.replace(/\/$/,""),SE=e=>e.replace(/^\//,""),p0=(e,i)=>{const s=Object.keys(e).sort((u,m)=>{const y=m.split("/").length-u.split("/").length;return y!==0?y:m.length-u.length});for(const u of s)if(i.startsWith(u))return u;return"/"},TE=(e,i="/")=>e.replace(/^(https?:)?\/\/[^/]*/,"").replace(new RegExp(`^${i}`),"/");const f0={"v-8daa1a0e":xt(()=>Ie(()=>import("./index.html.85a0802f.js"),[])),"v-74bc627b":xt(()=>Ie(()=>import("./index.html.17ab0551.js"),[])),"v-08ae5eba":xt(()=>Ie(()=>import("./2018-2019.html.86dfb8aa.js"),[])),"v-93cfbde4":xt(()=>Ie(()=>import("./2019-2020.html.b446af06.js"),[])),"v-f917537a":xt(()=>Ie(()=>import("./2020-2021.html.b5d7ceb4.js"),[])),"v-1a0de1a3":xt(()=>Ie(()=>import("./2021-2022.html.788836f8.js"),[])),"v-190ab309":xt(()=>Ie(()=>import("./2021fall.html.a7a4ed59.js"),[])),"v-96167c50":xt(()=>Ie(()=>import("./index.html.ba6bafd7.js"),[])),"v-96536bf0":xt(()=>Ie(()=>import("./index.html.400ea116.js"),[])),"v-dbd38712":xt(()=>Ie(()=>import("./index.html.448f76b2.js"),[])),"v-c73889da":xt(()=>Ie(()=>import("./index.html.fa168b63.js"),[])),"v-104cfa63":xt(()=>Ie(()=>import("./2021.html.807d70cf.js"),[])),"v-780207b9":xt(()=>Ie(()=>import("./index.html.883caa67.js"),[])),"v-14e6315a":xt(()=>Ie(()=>import("./index.html.9292735f.js"),[])),"v-42f2be94":xt(()=>Ie(()=>import("./vehicle-charger.html.4dbd0e3c.js"),[])),"v-ed48bdf8":xt(()=>Ie(()=>import("./index.html.df929f05.js"),[])),"v-f4bc5604":xt(()=>Ie(()=>import("./index.html.024334a4.js"),[])),"v-1500d063":xt(()=>Ie(()=>import("./index.html.bc7142d4.js"),[])),"v-014445c8":xt(()=>Ie(()=>import("./index.html.2db12c87.js"),[])),"v-461d4a7c":xt(()=>Ie(()=>import("./registered-organization-2019.html.34a03117.js"),[])),"v-6ba7e826":xt(()=>Ie(()=>import("./registered-organization-2020.html.47edc410.js"),[])),"v-6d5cc0c5":xt(()=>Ie(()=>import("./registered-organization-2021.html.c39faa38.js"),[])),"v-28ddfa13":xt(()=>Ie(()=>import("./index.html.3adc718c.js"),[])),"v-be92ea7e":xt(()=>Ie(()=>import("./index.html.86962e76.js"),[])),"v-d7188082":xt(()=>Ie(()=>import("./index.html.65c7a73a.js"),[])),"v-d1061704":xt(()=>Ie(()=>import("./paper-tools.html.d362f4ee.js"),[])),"v-4322d0a7":xt(()=>Ie(()=>import("./index.html.e9d6bc42.js"),["assets/index.html.e9d6bc42.js","assets/1.7b653657.js"])),"v-69b23ddf":xt(()=>Ie(()=>import("./index.html.a4f17126.js"),["assets/index.html.a4f17126.js","assets/1.7b653657.js"])),"v-1678dd6f":xt(()=>Ie(()=>import("./bustimer-wx.html.05ff3217.js"),["assets/bustimer-wx.html.05ff3217.js","assets/busline2.c5a5b35e.js"])),"v-1630dfb5":xt(()=>Ie(()=>import("./bustimer.html.212970a4.js"),["assets/bustimer.html.212970a4.js","assets/busline2.c5a5b35e.js"])),"v-6a28f6e0":xt(()=>Ie(()=>import("./holiday.html.e4842b9d.js"),["assets/holiday.html.e4842b9d.js","assets/busline2.c5a5b35e.js"])),"v-48975204":xt(()=>Ie(()=>import("./redirect.html.b7ce8654.js"),[])),"v-8059a7a6":xt(()=>Ie(()=>import("./workday.html.715fb745.js"),["assets/workday.html.715fb745.js","assets/busline2.c5a5b35e.js"])),"v-22cd7d0c":xt(()=>Ie(()=>import("./index.html.fa633678.js"),[])),"v-0e92d420":xt(()=>Ie(()=>import("./index.html.183258eb.js"),[])),"v-2b8cac58":xt(()=>Ie(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.html.aac6cb95.js"),[])),"v-66965350":xt(()=>Ie(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.html.7a3e983a.js"),[])),"v-66317da4":xt(()=>Ie(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.html.dcb2b227.js"),[])),"v-5c3fcdf6":xt(()=>Ie(()=>import("./index.html.4828b00d.js"),[])),"v-04710004":xt(()=>Ie(()=>import("./index.html.698b7b61.js"),[])),"v-5589dd0c":xt(()=>Ie(()=>import("./dorm-floor-plan.html.5b107176.js"),[])),"v-d42194b6":xt(()=>Ie(()=>import("./index.html.4b57d6f5.js"),[])),"v-20383a78":xt(()=>Ie(()=>import("./index.html.cf51316b.js"),[])),"v-42c1fa44":xt(()=>Ie(()=>import("./index.html.fad53d15.js"),[])),"v-76cff034":xt(()=>Ie(()=>import("./index.html.03c1d400.js"),[])),"v-29860ed0":xt(()=>Ie(()=>import("./index.html.4d42dbea.js"),[])),"v-622da02f":xt(()=>Ie(()=>import("./index.html.ab8efe33.js"),[])),"v-5e590ec6":xt(()=>Ie(()=>import("./index.html.a7f7d817.js"),[])),"v-1fa222d4":xt(()=>Ie(()=>import("./index.html.6fbcad5d.js"),[])),"v-48519846":xt(()=>Ie(()=>import("./index.html.802c17b2.js"),[])),"v-369295b4":xt(()=>Ie(()=>import("./index.html.77934418.js"),[])),"v-3692bb1f":xt(()=>Ie(()=>import("./index.html.0a2b3e39.js"),[])),"v-425958ce":xt(()=>Ie(()=>import("./index.html.0c886037.js"),[])),"v-3692ee77":xt(()=>Ie(()=>import("./index.html.22a7590d.js"),[])),"v-2686552a":xt(()=>Ie(()=>import("./index.html.76b532c8.js"),[])),"v-45d74ec0":xt(()=>Ie(()=>import("./index.html.0676b817.js"),[])),"v-772a5784":xt(()=>Ie(()=>import("./index.html.64fc7a09.js"),[])),"v-8460eeb8":xt(()=>Ie(()=>import("./advice-on-study.html.20232c46.js"),[])),"v-435bd49a":xt(()=>Ie(()=>import("./info-on-study.html.52b06056.js"),[])),"v-6323734e":xt(()=>Ie(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.html.cdafc4bf.js"),[])),"v-5eb748bf":xt(()=>Ie(()=>import("./innovative-project.html.c8903251.js"),[])),"v-2a23f022":xt(()=>Ie(()=>import("./index.html.9449e7a7.js"),[])),"v-66061b92":xt(()=>Ie(()=>import("./index.html.07fd38a8.js"),[])),"v-89ac2bec":xt(()=>Ie(()=>import("./index.html.b3f165a5.js"),[])),"v-1549b190":xt(()=>Ie(()=>import("./index.html.535db900.js"),[])),"v-9e1961f8":xt(()=>Ie(()=>import("./index.html.8045ff24.js"),[])),"v-6bba5e58":xt(()=>Ie(()=>import("./index.html.6064482e.js"),[])),"v-83a77034":xt(()=>Ie(()=>import("./index.html.71b7c0df.js"),[])),"v-296d1d15":xt(()=>Ie(()=>import("./index.html.ae558514.js"),[])),"v-fb711be8":xt(()=>Ie(()=>import("./index.html.3cef1e20.js"),[])),"v-3706649a":xt(()=>Ie(()=>import("./404.html.6142d643.js"),[]))},IE={404:xt(()=>Ie(()=>import("./404.09a37f8a.js"),[])),Layout:xt(()=>Ie(()=>import("./Layout.ca7380e6.js"),[]))};var m0=mn($b),g0=jf({key:"",path:"",title:"",lang:"",frontmatter:{},excerpt:"",headers:[]}),wo=mn(g0),hl=()=>wo;_m.webpackHot&&(__VUE_HMR_RUNTIME__.updatePageData=e=>{m0.value[e.key]=()=>Promise.resolve(e),e.key===wo.value.key&&(wo.value=e)});var _0=Symbol(""),AE=()=>{const e=gn(_0);if(!e)throw new Error("usePageFrontmatter() is called without provider.");return e},y0=Symbol(""),PE=()=>{const e=gn(y0);if(!e)throw new Error("usePageHead() is called without provider.");return e},CE=Symbol(""),v0=Symbol(""),x0=()=>{const e=gn(v0);if(!e)throw new Error("usePageLang() is called without provider.");return e},Yf=Symbol(""),Qf=()=>{const e=gn(Yf);if(!e)throw new Error("useRouteLocale() is called without provider.");return e},ns=mn(vE),b0=()=>ns;_m.webpackHot&&(__VUE_HMR_RUNTIME__.updateSiteData=e=>{ns.value=e});var w0=Symbol(""),Q5=()=>{const e=gn(w0);if(!e)throw new Error("useSiteLocaleData() is called without provider.");return e},kE=Symbol(""),Vs=ul({resolvePageData:async e=>{const i=m0.value[e],s=await(i==null?void 0:i());return s!=null?s:g0},resolvePageFrontmatter:e=>e.frontmatter,resolvePageHead:(e,i,s)=>{const u=Br(i.description)?i.description:s.description,m=[...jt(i.head)?i.head:[],...s.head,["title",{},e],["meta",{name:"description",content:u}]];return bE(m)},resolvePageHeadTitle:(e,i)=>`${e.title?`${e.title} | `:""}${i.title}`,resolvePageLang:e=>e.lang||"en",resolveRouteLocale:(e,i)=>p0(e,i),resolveSiteLocaleData:(e,i)=>({...e,...e.locales[i]})}),DE=jn({name:"ClientOnly",setup(e,i){const s=mn(!1);return Ji(()=>{s.value=!0}),()=>{var u,m;return s.value?(m=(u=i.slots).default)==null?void 0:m.call(u):null}}}),zE=jn({name:"Content",props:{pageKey:{type:String,required:!1,default:""}},setup(e){const i=hl(),s=Pr(()=>f0[e.pageKey||i.value.key]);return()=>s.value?cr(s.value):cr("div","404 Not Found")}}),y_=jn({name:"Vuepress",setup(){const e=hl(),i=Pr(()=>{let s;if(e.value.path){const u=e.value.frontmatter.layout;Br(u)?s=u:s="Layout"}else s="404";return IE[s]||Ga(s,!1)});return()=>cr(i.value)}}),E0=e=>wE(e)?e:`${b0().value.base}${SE(e)}`,yi=e=>e;function em(e,i,s){var u,m,y;i===void 0&&(i=50),s===void 0&&(s={});var x=(u=s.isImmediate)!=null&&u,l=(m=s.callback)!=null&&m,T=s.maxWait,C=Date.now(),A=[];function F(){if(T!==void 0){var K=Date.now()-C;if(K+i>=T)return T-K}return i}var L=function(){var K=[].slice.call(arguments),se=this;return new Promise(function(pe,ye){var Y=x&&y===void 0;if(y!==void 0&&clearTimeout(y),y=setTimeout(function(){if(y=void 0,C=Date.now(),!x){var me=e.apply(se,K);l&&l(me),A.forEach(function(xe){return(0,xe.resolve)(me)}),A=[]}},F()),Y){var he=e.apply(se,K);return l&&l(he),pe(he)}A.push({resolve:pe,reject:ye})})};return L.cancel=function(K){y!==void 0&&clearTimeout(y),A.forEach(function(se){return(0,se.reject)(K)}),A=[]},L}/*!
  * vue-router v4.1.2
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const qa=typeof window!="undefined";function OE(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Lr=Object.assign;function kp(e,i){const s={};for(const u in i){const m=i[u];s[u]=$i(m)?m.map(e):e(m)}return s}const Oc=()=>{},$i=Array.isArray,ME=/\/$/,LE=e=>e.replace(ME,"");function Dp(e,i,s="/"){let u,m={},y="",x="";const l=i.indexOf("#");let T=i.indexOf("?");return l<T&&l>=0&&(T=-1),T>-1&&(u=i.slice(0,T),y=i.slice(T+1,l>-1?l:i.length),m=e(y)),l>-1&&(u=u||i.slice(0,l),x=i.slice(l,i.length)),u=NE(u!=null?u:i,s),{fullPath:u+(y&&"?")+y+x,path:u,query:m,hash:x}}function RE(e,i){const s=i.query?e(i.query):"";return i.path+(s&&"?")+s+(i.hash||"")}function v_(e,i){return!i||!e.toLowerCase().startsWith(i.toLowerCase())?e:e.slice(i.length)||"/"}function BE(e,i,s){const u=i.matched.length-1,m=s.matched.length-1;return u>-1&&u===m&&nl(i.matched[u],s.matched[m])&&S0(i.params,s.params)&&e(i.query)===e(s.query)&&i.hash===s.hash}function nl(e,i){return(e.aliasOf||e)===(i.aliasOf||i)}function S0(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const s in e)if(!FE(e[s],i[s]))return!1;return!0}function FE(e,i){return $i(e)?x_(e,i):$i(i)?x_(i,e):e===i}function x_(e,i){return $i(i)?e.length===i.length&&e.every((s,u)=>s===i[u]):e.length===1&&e[0]===i}function NE(e,i){if(e.startsWith("/"))return e;if(!e)return i;const s=i.split("/"),u=e.split("/");let m=s.length-1,y,x;for(y=0;y<u.length;y++)if(x=u[y],x!==".")if(x==="..")m>1&&m--;else break;return s.slice(0,m).join("/")+"/"+u.slice(y-(y===u.length?1:0)).join("/")}var Hc;(function(e){e.pop="pop",e.push="push"})(Hc||(Hc={}));var Mc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Mc||(Mc={}));function jE(e){if(!e)if(qa){const i=document.querySelector("base");e=i&&i.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),LE(e)}const VE=/^[^#]+#/;function UE(e,i){return e.replace(VE,"#")+i}function $E(e,i){const s=document.documentElement.getBoundingClientRect(),u=e.getBoundingClientRect();return{behavior:i.behavior,left:u.left-s.left-(i.left||0),top:u.top-s.top-(i.top||0)}}const ad=()=>({left:window.pageXOffset,top:window.pageYOffset});function qE(e){let i;if("el"in e){const s=e.el,u=typeof s=="string"&&s.startsWith("#"),m=typeof s=="string"?u?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!m)return;i=$E(m,e)}else i=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(i):window.scrollTo(i.left!=null?i.left:window.pageXOffset,i.top!=null?i.top:window.pageYOffset)}function b_(e,i){return(history.state?history.state.position-i:-1)+e}const uf=new Map;function HE(e,i){uf.set(e,i)}function GE(e){const i=uf.get(e);return uf.delete(e),i}let ZE=()=>location.protocol+"//"+location.host;function T0(e,i){const{pathname:s,search:u,hash:m}=i,y=e.indexOf("#");if(y>-1){let l=m.includes(e.slice(y))?e.slice(y).length:1,T=m.slice(l);return T[0]!=="/"&&(T="/"+T),v_(T,"")}return v_(s,e)+u+m}function WE(e,i,s,u){let m=[],y=[],x=null;const l=({state:L})=>{const K=T0(e,location),se=s.value,pe=i.value;let ye=0;if(L){if(s.value=K,i.value=L,x&&x===se){x=null;return}ye=pe?L.position-pe.position:0}else u(K);m.forEach(Y=>{Y(s.value,se,{delta:ye,type:Hc.pop,direction:ye?ye>0?Mc.forward:Mc.back:Mc.unknown})})};function T(){x=s.value}function C(L){m.push(L);const K=()=>{const se=m.indexOf(L);se>-1&&m.splice(se,1)};return y.push(K),K}function A(){const{history:L}=window;!L.state||L.replaceState(Lr({},L.state,{scroll:ad()}),"")}function F(){for(const L of y)L();y=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",A)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",A),{pauseListeners:T,listen:C,destroy:F}}function w_(e,i,s,u=!1,m=!1){return{back:e,current:i,forward:s,replaced:u,position:window.history.length,scroll:m?ad():null}}function KE(e){const{history:i,location:s}=window,u={value:T0(e,s)},m={value:i.state};m.value||y(u.value,{back:null,current:u.value,forward:null,position:i.length-1,replaced:!0,scroll:null},!0);function y(T,C,A){const F=e.indexOf("#"),L=F>-1?(s.host&&document.querySelector("base")?e:e.slice(F))+T:ZE()+e+T;try{i[A?"replaceState":"pushState"](C,"",L),m.value=C}catch(K){console.error(K),s[A?"replace":"assign"](L)}}function x(T,C){const A=Lr({},i.state,w_(m.value.back,T,m.value.forward,!0),C,{position:m.value.position});y(T,A,!0),u.value=T}function l(T,C){const A=Lr({},m.value,i.state,{forward:T,scroll:ad()});y(A.current,A,!0);const F=Lr({},w_(u.value,T,null),{position:A.position+1},C);y(T,F,!1),u.value=T}return{location:u,state:m,push:l,replace:x}}function XE(e){e=jE(e);const i=KE(e),s=WE(e,i.state,i.location,i.replace);function u(y,x=!0){x||s.pauseListeners(),history.go(y)}const m=Lr({location:"",base:e,go:u,createHref:UE.bind(null,e)},i,s);return Object.defineProperty(m,"location",{enumerable:!0,get:()=>i.location.value}),Object.defineProperty(m,"state",{enumerable:!0,get:()=>i.state.value}),m}function JE(e){return typeof e=="string"||e&&typeof e=="object"}function I0(e){return typeof e=="string"||typeof e=="symbol"}const xo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},A0=Symbol("");var E_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(E_||(E_={}));function il(e,i){return Lr(new Error,{type:e,[A0]:!0},i)}function Yo(e,i){return e instanceof Error&&A0 in e&&(i==null||!!(e.type&i))}const S_="[^/]+?",YE={sensitive:!1,strict:!1,start:!0,end:!0},QE=/[.+*?^${}()[\]/\\]/g;function eS(e,i){const s=Lr({},YE,i),u=[];let m=s.start?"^":"";const y=[];for(const C of e){const A=C.length?[]:[90];s.strict&&!C.length&&(m+="/");for(let F=0;F<C.length;F++){const L=C[F];let K=40+(s.sensitive?.25:0);if(L.type===0)F||(m+="/"),m+=L.value.replace(QE,"\\$&"),K+=40;else if(L.type===1){const{value:se,repeatable:pe,optional:ye,regexp:Y}=L;y.push({name:se,repeatable:pe,optional:ye});const he=Y||S_;if(he!==S_){K+=10;try{new RegExp(`(${he})`)}catch(xe){throw new Error(`Invalid custom RegExp for param "${se}" (${he}): `+xe.message)}}let me=pe?`((?:${he})(?:/(?:${he}))*)`:`(${he})`;F||(me=ye&&C.length<2?`(?:/${me})`:"/"+me),ye&&(me+="?"),m+=me,K+=20,ye&&(K+=-8),pe&&(K+=-20),he===".*"&&(K+=-50)}A.push(K)}u.push(A)}if(s.strict&&s.end){const C=u.length-1;u[C][u[C].length-1]+=.7000000000000001}s.strict||(m+="/?"),s.end?m+="$":s.strict&&(m+="(?:/|$)");const x=new RegExp(m,s.sensitive?"":"i");function l(C){const A=C.match(x),F={};if(!A)return null;for(let L=1;L<A.length;L++){const K=A[L]||"",se=y[L-1];F[se.name]=K&&se.repeatable?K.split("/"):K}return F}function T(C){let A="",F=!1;for(const L of e){(!F||!A.endsWith("/"))&&(A+="/"),F=!1;for(const K of L)if(K.type===0)A+=K.value;else if(K.type===1){const{value:se,repeatable:pe,optional:ye}=K,Y=se in C?C[se]:"";if($i(Y)&&!pe)throw new Error(`Provided param "${se}" is an array but it is not repeatable (* or + modifiers)`);const he=$i(Y)?Y.join("/"):Y;if(!he)if(ye)L.length<2&&e.length>1&&(A.endsWith("/")?A=A.slice(0,-1):F=!0);else throw new Error(`Missing required param "${se}"`);A+=he}}return A}return{re:x,score:u,keys:y,parse:l,stringify:T}}function tS(e,i){let s=0;for(;s<e.length&&s<i.length;){const u=i[s]-e[s];if(u)return u;s++}return e.length<i.length?e.length===1&&e[0]===40+40?-1:1:e.length>i.length?i.length===1&&i[0]===40+40?1:-1:0}function rS(e,i){let s=0;const u=e.score,m=i.score;for(;s<u.length&&s<m.length;){const y=tS(u[s],m[s]);if(y)return y;s++}if(Math.abs(m.length-u.length)===1){if(T_(u))return 1;if(T_(m))return-1}return m.length-u.length}function T_(e){const i=e[e.length-1];return e.length>0&&i[i.length-1]<0}const nS={type:0,value:""},iS=/[a-zA-Z0-9_]/;function oS(e){if(!e)return[[]];if(e==="/")return[[nS]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function i(K){throw new Error(`ERR (${s})/"${C}": ${K}`)}let s=0,u=s;const m=[];let y;function x(){y&&m.push(y),y=[]}let l=0,T,C="",A="";function F(){!C||(s===0?y.push({type:0,value:C}):s===1||s===2||s===3?(y.length>1&&(T==="*"||T==="+")&&i(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),y.push({type:1,value:C,regexp:A,repeatable:T==="*"||T==="+",optional:T==="*"||T==="?"})):i("Invalid state to consume buffer"),C="")}function L(){C+=T}for(;l<e.length;){if(T=e[l++],T==="\\"&&s!==2){u=s,s=4;continue}switch(s){case 0:T==="/"?(C&&F(),x()):T===":"?(F(),s=1):L();break;case 4:L(),s=u;break;case 1:T==="("?s=2:iS.test(T)?L():(F(),s=0,T!=="*"&&T!=="?"&&T!=="+"&&l--);break;case 2:T===")"?A[A.length-1]=="\\"?A=A.slice(0,-1)+T:s=3:A+=T;break;case 3:F(),s=0,T!=="*"&&T!=="?"&&T!=="+"&&l--,A="";break;default:i("Unknown state");break}}return s===2&&i(`Unfinished custom RegExp for param "${C}"`),F(),x(),m}function sS(e,i,s){const u=eS(oS(e.path),s),m=Lr(u,{record:e,parent:i,children:[],alias:[]});return i&&!m.record.aliasOf==!i.record.aliasOf&&i.children.push(m),m}function aS(e,i){const s=[],u=new Map;i=A_({strict:!1,end:!0,sensitive:!1},i);function m(A){return u.get(A)}function y(A,F,L){const K=!L,se=cS(A);se.aliasOf=L&&L.record;const pe=A_(i,A),ye=[se];if("alias"in A){const me=typeof A.alias=="string"?[A.alias]:A.alias;for(const xe of me)ye.push(Lr({},se,{components:L?L.record.components:se.components,path:xe,aliasOf:L?L.record:se}))}let Y,he;for(const me of ye){const{path:xe}=me;if(F&&xe[0]!=="/"){const Ae=F.record.path,Ge=Ae[Ae.length-1]==="/"?"":"/";me.path=F.record.path+(xe&&Ge+xe)}if(Y=sS(me,F,pe),L?L.alias.push(Y):(he=he||Y,he!==Y&&he.alias.push(Y),K&&A.name&&!I_(Y)&&x(A.name)),se.children){const Ae=se.children;for(let Ge=0;Ge<Ae.length;Ge++)y(Ae[Ge],Y,L&&L.children[Ge])}L=L||Y,T(Y)}return he?()=>{x(he)}:Oc}function x(A){if(I0(A)){const F=u.get(A);F&&(u.delete(A),s.splice(s.indexOf(F),1),F.children.forEach(x),F.alias.forEach(x))}else{const F=s.indexOf(A);F>-1&&(s.splice(F,1),A.record.name&&u.delete(A.record.name),A.children.forEach(x),A.alias.forEach(x))}}function l(){return s}function T(A){let F=0;for(;F<s.length&&rS(A,s[F])>=0&&(A.record.path!==s[F].record.path||!P0(A,s[F]));)F++;s.splice(F,0,A),A.record.name&&!I_(A)&&u.set(A.record.name,A)}function C(A,F){let L,K={},se,pe;if("name"in A&&A.name){if(L=u.get(A.name),!L)throw il(1,{location:A});pe=L.record.name,K=Lr(lS(F.params,L.keys.filter(he=>!he.optional).map(he=>he.name)),A.params),se=L.stringify(K)}else if("path"in A)se=A.path,L=s.find(he=>he.re.test(se)),L&&(K=L.parse(se),pe=L.record.name);else{if(L=F.name?u.get(F.name):s.find(he=>he.re.test(F.path)),!L)throw il(1,{location:A,currentLocation:F});pe=L.record.name,K=Lr({},F.params,A.params),se=L.stringify(K)}const ye=[];let Y=L;for(;Y;)ye.unshift(Y.record),Y=Y.parent;return{name:pe,path:se,params:K,matched:ye,meta:hS(ye)}}return e.forEach(A=>y(A)),{addRoute:y,resolve:C,removeRoute:x,getRoutes:l,getRecordMatcher:m}}function lS(e,i){const s={};for(const u of i)u in e&&(s[u]=e[u]);return s}function cS(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:uS(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function uS(e){const i={},s=e.props||!1;if("component"in e)i.default=s;else for(const u in e.components)i[u]=typeof s=="boolean"?s:s[u];return i}function I_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function hS(e){return e.reduce((i,s)=>Lr(i,s.meta),{})}function A_(e,i){const s={};for(const u in e)s[u]=u in i?i[u]:e[u];return s}function P0(e,i){return i.children.some(s=>s===e||P0(e,s))}const C0=/#/g,dS=/&/g,pS=/\//g,fS=/=/g,mS=/\?/g,k0=/\+/g,gS=/%5B/g,_S=/%5D/g,D0=/%5E/g,yS=/%60/g,z0=/%7B/g,vS=/%7C/g,O0=/%7D/g,xS=/%20/g;function tm(e){return encodeURI(""+e).replace(vS,"|").replace(gS,"[").replace(_S,"]")}function bS(e){return tm(e).replace(z0,"{").replace(O0,"}").replace(D0,"^")}function hf(e){return tm(e).replace(k0,"%2B").replace(xS,"+").replace(C0,"%23").replace(dS,"%26").replace(yS,"`").replace(z0,"{").replace(O0,"}").replace(D0,"^")}function wS(e){return hf(e).replace(fS,"%3D")}function ES(e){return tm(e).replace(C0,"%23").replace(mS,"%3F")}function SS(e){return e==null?"":ES(e).replace(pS,"%2F")}function Bh(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function TS(e){const i={};if(e===""||e==="?")return i;const u=(e[0]==="?"?e.slice(1):e).split("&");for(let m=0;m<u.length;++m){const y=u[m].replace(k0," "),x=y.indexOf("="),l=Bh(x<0?y:y.slice(0,x)),T=x<0?null:Bh(y.slice(x+1));if(l in i){let C=i[l];$i(C)||(C=i[l]=[C]),C.push(T)}else i[l]=T}return i}function P_(e){let i="";for(let s in e){const u=e[s];if(s=wS(s),u==null){u!==void 0&&(i+=(i.length?"&":"")+s);continue}($i(u)?u.map(y=>y&&hf(y)):[u&&hf(u)]).forEach(y=>{y!==void 0&&(i+=(i.length?"&":"")+s,y!=null&&(i+="="+y))})}return i}function IS(e){const i={};for(const s in e){const u=e[s];u!==void 0&&(i[s]=$i(u)?u.map(m=>m==null?null:""+m):u==null?u:""+u)}return i}const AS=Symbol(""),C_=Symbol(""),ld=Symbol(""),rm=Symbol(""),df=Symbol("");function _c(){let e=[];function i(u){return e.push(u),()=>{const m=e.indexOf(u);m>-1&&e.splice(m,1)}}function s(){e=[]}return{add:i,list:()=>e,reset:s}}function ts(e,i,s,u,m){const y=u&&(u.enterCallbacks[m]=u.enterCallbacks[m]||[]);return()=>new Promise((x,l)=>{const T=F=>{F===!1?l(il(4,{from:s,to:i})):F instanceof Error?l(F):JE(F)?l(il(2,{from:i,to:F})):(y&&u.enterCallbacks[m]===y&&typeof F=="function"&&y.push(F),x())},C=e.call(u&&u.instances[m],i,s,T);let A=Promise.resolve(C);e.length<3&&(A=A.then(T)),A.catch(F=>l(F))})}function zp(e,i,s,u){const m=[];for(const y of e)for(const x in y.components){let l=y.components[x];if(!(i!=="beforeRouteEnter"&&!y.instances[x]))if(PS(l)){const C=(l.__vccOpts||l)[i];C&&m.push(ts(C,s,u,y,x))}else{let T=l();m.push(()=>T.then(C=>{if(!C)return Promise.reject(new Error(`Couldn't resolve component "${x}" at "${y.path}"`));const A=OE(C)?C.default:C;y.components[x]=A;const L=(A.__vccOpts||A)[i];return L&&ts(L,s,u,y,x)()}))}}return m}function PS(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function k_(e){const i=gn(ld),s=gn(rm),u=Pr(()=>i.resolve(Vi(e.to))),m=Pr(()=>{const{matched:T}=u.value,{length:C}=T,A=T[C-1],F=s.matched;if(!A||!F.length)return-1;const L=F.findIndex(nl.bind(null,A));if(L>-1)return L;const K=D_(T[C-2]);return C>1&&D_(A)===K&&F[F.length-1].path!==K?F.findIndex(nl.bind(null,T[C-2])):L}),y=Pr(()=>m.value>-1&&DS(s.params,u.value.params)),x=Pr(()=>m.value>-1&&m.value===s.matched.length-1&&S0(s.params,u.value.params));function l(T={}){return kS(T)?i[Vi(e.replace)?"replace":"push"](Vi(e.to)).catch(Oc):Promise.resolve()}return{route:u,href:Pr(()=>u.value.href),isActive:y,isExactActive:x,navigate:l}}const CS=jn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:k_,setup(e,{slots:i}){const s=ul(k_(e)),{options:u}=gn(ld),m=Pr(()=>({[z_(e.activeClass,u.linkActiveClass,"router-link-active")]:s.isActive,[z_(e.exactActiveClass,u.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const y=i.default&&i.default(s);return e.custom?y:cr("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:m.value},y)}}}),M0=CS;function kS(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const i=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(i))return}return e.preventDefault&&e.preventDefault(),!0}}function DS(e,i){for(const s in i){const u=i[s],m=e[s];if(typeof u=="string"){if(u!==m)return!1}else if(!$i(m)||m.length!==u.length||u.some((y,x)=>y!==m[x]))return!1}return!0}function D_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const z_=(e,i,s)=>e!=null?e:i!=null?i:s,zS=jn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:i,slots:s}){const u=gn(df),m=Pr(()=>e.route||u.value),y=gn(C_,0),x=Pr(()=>{let C=Vi(y);const{matched:A}=m.value;let F;for(;(F=A[C])&&!F.components;)C++;return C}),l=Pr(()=>m.value.matched[x.value]);ss(C_,Pr(()=>x.value+1)),ss(AS,l),ss(df,m);const T=mn();return Ui(()=>[T.value,l.value,e.name],([C,A,F],[L,K,se])=>{A&&(A.instances[F]=C,K&&K!==A&&C&&C===L&&(A.leaveGuards.size||(A.leaveGuards=K.leaveGuards),A.updateGuards.size||(A.updateGuards=K.updateGuards))),C&&A&&(!K||!nl(A,K)||!L)&&(A.enterCallbacks[F]||[]).forEach(pe=>pe(C))},{flush:"post"}),()=>{const C=m.value,A=l.value,F=A&&A.components[e.name],L=e.name;if(!F)return O_(s.default,{Component:F,route:C});const K=A.props[e.name],se=K?K===!0?C.params:typeof K=="function"?K(C):K:null,ye=cr(F,Lr({},se,i,{onVnodeUnmounted:Y=>{Y.component.isUnmounted&&(A.instances[L]=null)},ref:T}));return O_(s.default,{Component:ye,route:C})||ye}}});function O_(e,i){if(!e)return null;const s=e(i);return s.length===1?s[0]:s}const L0=zS;function OS(e){const i=aS(e.routes,e),s=e.parseQuery||TS,u=e.stringifyQuery||P_,m=e.history,y=_c(),x=_c(),l=_c(),T=Dv(xo);let C=xo;qa&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const A=kp.bind(null,Fe=>""+Fe),F=kp.bind(null,SS),L=kp.bind(null,Bh);function K(Fe,lt){let Ye,ft;return I0(Fe)?(Ye=i.getRecordMatcher(Fe),ft=lt):ft=Fe,i.addRoute(ft,Ye)}function se(Fe){const lt=i.getRecordMatcher(Fe);lt&&i.removeRoute(lt)}function pe(){return i.getRoutes().map(Fe=>Fe.record)}function ye(Fe){return!!i.getRecordMatcher(Fe)}function Y(Fe,lt){if(lt=Lr({},lt||T.value),typeof Fe=="string"){const Lt=Dp(s,Fe,lt.path),W=i.resolve({path:Lt.path},lt),ne=m.createHref(Lt.fullPath);return Lr(Lt,W,{params:L(W.params),hash:Bh(Lt.hash),redirectedFrom:void 0,href:ne})}let Ye;if("path"in Fe)Ye=Lr({},Fe,{path:Dp(s,Fe.path,lt.path).path});else{const Lt=Lr({},Fe.params);for(const W in Lt)Lt[W]==null&&delete Lt[W];Ye=Lr({},Fe,{params:F(Fe.params)}),lt.params=F(lt.params)}const ft=i.resolve(Ye,lt),Zt=Fe.hash||"";ft.params=A(L(ft.params));const nr=RE(u,Lr({},Fe,{hash:bS(Zt),path:ft.path})),Bt=m.createHref(nr);return Lr({fullPath:nr,hash:Zt,query:u===P_?IS(Fe.query):Fe.query||{}},ft,{redirectedFrom:void 0,href:Bt})}function he(Fe){return typeof Fe=="string"?Dp(s,Fe,T.value.path):Lr({},Fe)}function me(Fe,lt){if(C!==Fe)return il(8,{from:lt,to:Fe})}function xe(Fe){return We(Fe)}function Ae(Fe){return xe(Lr(he(Fe),{replace:!0}))}function Ge(Fe){const lt=Fe.matched[Fe.matched.length-1];if(lt&&lt.redirect){const{redirect:Ye}=lt;let ft=typeof Ye=="function"?Ye(Fe):Ye;return typeof ft=="string"&&(ft=ft.includes("?")||ft.includes("#")?ft=he(ft):{path:ft},ft.params={}),Lr({query:Fe.query,hash:Fe.hash,params:"path"in ft?{}:Fe.params},ft)}}function We(Fe,lt){const Ye=C=Y(Fe),ft=T.value,Zt=Fe.state,nr=Fe.force,Bt=Fe.replace===!0,Lt=Ge(Ye);if(Lt)return We(Lr(he(Lt),{state:Zt,force:nr,replace:Bt}),lt||Ye);const W=Ye;W.redirectedFrom=lt;let ne;return!nr&&BE(u,ft,Ye)&&(ne=il(16,{to:W,from:ft}),pr(ft,ft,!0,!1)),(ne?Promise.resolve(ne):ot(W,ft)).catch(be=>Yo(be)?Yo(be,2)?be:dr(be):At(be,W,ft)).then(be=>{if(be){if(Yo(be,2))return We(Lr(he(be.to),{state:Zt,force:nr,replace:Bt}),lt||W)}else be=dt(W,ft,!0,Bt,Zt);return it(W,ft,be),be})}function _e(Fe,lt){const Ye=me(Fe,lt);return Ye?Promise.reject(Ye):Promise.resolve()}function ot(Fe,lt){let Ye;const[ft,Zt,nr]=MS(Fe,lt);Ye=zp(ft.reverse(),"beforeRouteLeave",Fe,lt);for(const Lt of ft)Lt.leaveGuards.forEach(W=>{Ye.push(ts(W,Fe,lt))});const Bt=_e.bind(null,Fe,lt);return Ye.push(Bt),Ra(Ye).then(()=>{Ye=[];for(const Lt of y.list())Ye.push(ts(Lt,Fe,lt));return Ye.push(Bt),Ra(Ye)}).then(()=>{Ye=zp(Zt,"beforeRouteUpdate",Fe,lt);for(const Lt of Zt)Lt.updateGuards.forEach(W=>{Ye.push(ts(W,Fe,lt))});return Ye.push(Bt),Ra(Ye)}).then(()=>{Ye=[];for(const Lt of Fe.matched)if(Lt.beforeEnter&&!lt.matched.includes(Lt))if($i(Lt.beforeEnter))for(const W of Lt.beforeEnter)Ye.push(ts(W,Fe,lt));else Ye.push(ts(Lt.beforeEnter,Fe,lt));return Ye.push(Bt),Ra(Ye)}).then(()=>(Fe.matched.forEach(Lt=>Lt.enterCallbacks={}),Ye=zp(nr,"beforeRouteEnter",Fe,lt),Ye.push(Bt),Ra(Ye))).then(()=>{Ye=[];for(const Lt of x.list())Ye.push(ts(Lt,Fe,lt));return Ye.push(Bt),Ra(Ye)}).catch(Lt=>Yo(Lt,8)?Lt:Promise.reject(Lt))}function it(Fe,lt,Ye){for(const ft of l.list())ft(Fe,lt,Ye)}function dt(Fe,lt,Ye,ft,Zt){const nr=me(Fe,lt);if(nr)return nr;const Bt=lt===xo,Lt=qa?history.state:{};Ye&&(ft||Bt?m.replace(Fe.fullPath,Lr({scroll:Bt&&Lt&&Lt.scroll},Zt)):m.push(Fe.fullPath,Zt)),T.value=Fe,pr(Fe,lt,Ye,Bt),dr()}let De;function Je(){De||(De=m.listen((Fe,lt,Ye)=>{if(!Fr.listening)return;const ft=Y(Fe),Zt=Ge(ft);if(Zt){We(Lr(Zt,{replace:!0}),ft).catch(Oc);return}C=ft;const nr=T.value;qa&&HE(b_(nr.fullPath,Ye.delta),ad()),ot(ft,nr).catch(Bt=>Yo(Bt,12)?Bt:Yo(Bt,2)?(We(Bt.to,ft).then(Lt=>{Yo(Lt,20)&&!Ye.delta&&Ye.type===Hc.pop&&m.go(-1,!1)}).catch(Oc),Promise.reject()):(Ye.delta&&m.go(-Ye.delta,!1),At(Bt,ft,nr))).then(Bt=>{Bt=Bt||dt(ft,nr,!1),Bt&&(Ye.delta?m.go(-Ye.delta,!1):Ye.type===Hc.pop&&Yo(Bt,20)&&m.go(-1,!1)),it(ft,nr,Bt)}).catch(Oc)}))}let Ke=_c(),zt=_c(),Le;function At(Fe,lt,Ye){dr(Fe);const ft=zt.list();return ft.length?ft.forEach(Zt=>Zt(Fe,lt,Ye)):console.error(Fe),Promise.reject(Fe)}function Ot(){return Le&&T.value!==xo?Promise.resolve():new Promise((Fe,lt)=>{Ke.add([Fe,lt])})}function dr(Fe){return Le||(Le=!Fe,Je(),Ke.list().forEach(([lt,Ye])=>Fe?Ye(Fe):lt()),Ke.reset()),Fe}function pr(Fe,lt,Ye,ft){const{scrollBehavior:Zt}=e;if(!qa||!Zt)return Promise.resolve();const nr=!Ye&&GE(b_(Fe.fullPath,0))||(ft||!Ye)&&history.state&&history.state.scroll||null;return qf().then(()=>Zt(Fe,lt,nr)).then(Bt=>Bt&&qE(Bt)).catch(Bt=>At(Bt,Fe,lt))}const Ir=Fe=>m.go(Fe);let vr;const Ar=new Set,Fr={currentRoute:T,listening:!0,addRoute:K,removeRoute:se,hasRoute:ye,getRoutes:pe,resolve:Y,options:e,push:xe,replace:Ae,go:Ir,back:()=>Ir(-1),forward:()=>Ir(1),beforeEach:y.add,beforeResolve:x.add,afterEach:l.add,onError:zt.add,isReady:Ot,install(Fe){const lt=this;Fe.component("RouterLink",M0),Fe.component("RouterView",L0),Fe.config.globalProperties.$router=lt,Object.defineProperty(Fe.config.globalProperties,"$route",{enumerable:!0,get:()=>Vi(T)}),qa&&!vr&&T.value===xo&&(vr=!0,xe(m.location).catch(Zt=>{}));const Ye={};for(const Zt in xo)Ye[Zt]=Pr(()=>T.value[Zt]);Fe.provide(ld,lt),Fe.provide(rm,ul(Ye)),Fe.provide(df,T);const ft=Fe.unmount;Ar.add(Fe),Fe.unmount=function(){Ar.delete(Fe),Ar.size<1&&(C=xo,De&&De(),De=null,T.value=xo,vr=!1,Le=!1),ft()}}};return Fr}function Ra(e){return e.reduce((i,s)=>i.then(()=>s()),Promise.resolve())}function MS(e,i){const s=[],u=[],m=[],y=Math.max(i.matched.length,e.matched.length);for(let x=0;x<y;x++){const l=i.matched[x];l&&(e.matched.find(C=>nl(C,l))?u.push(l):s.push(l));const T=e.matched[x];T&&(i.matched.find(C=>nl(C,T))||m.push(T))}return[s,u,m]}function cd(){return gn(ld)}function ud(){return gn(rm)}const LS=({headerLinkSelector:e,headerAnchorSelector:i,delay:s,offset:u=5})=>{const m=cd(),y=hl(),l=em(()=>{var ye,Y,he,me;const T=Math.max(window.scrollY,document.documentElement.scrollTop,document.body.scrollTop);if(Math.abs(T-0)<u){M_(m,{hash:"",force:!0});return}const A=window.innerHeight+T,F=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),L=Math.abs(F-A)<u,K=Array.from(document.querySelectorAll(e)),pe=Array.from(document.querySelectorAll(i)).filter(xe=>K.some(Ae=>Ae.hash===xe.hash));for(let xe=0;xe<pe.length;xe++){const Ae=pe[xe],Ge=pe[xe+1],We=T>=((Y=(ye=Ae.parentElement)==null?void 0:ye.offsetTop)!=null?Y:0)-u,_e=!Ge||T<((me=(he=Ge.parentElement)==null?void 0:he.offsetTop)!=null?me:0)-u;if(!(We&&_e))continue;const it=decodeURIComponent(m.currentRoute.value.hash),dt=decodeURIComponent(Ae.hash);if(it===dt)return;if(L){for(let De=xe+1;De<pe.length;De++)if(it===decodeURIComponent(pe[De].hash))return}M_(m,{hash:dt,force:!0});return}},s);Ji(()=>{l(),window.addEventListener("scroll",l)}),Gf(()=>{window.removeEventListener("scroll",l)}),Ui(()=>y.value.path,l)},M_=async(e,...i)=>{const{scrollBehavior:s}=e.options;e.options.scrollBehavior=void 0,await e.replace(...i).finally(()=>e.options.scrollBehavior=s)},RS="a.sidebar-item",BS=".header-anchor",FS=300,NS=5;var jS=yi({setup(){LS({headerLinkSelector:RS,headerAnchorSelector:BS,delay:FS,offset:NS})}});const VS=cr("svg",{class:"external-link-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[cr("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),cr("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),US=jn({name:"ExternalLinkIcon",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(e){const i=Qf(),s=Pr(()=>{var u;return(u=e.locales[i.value])!=null?u:{openInNewWindow:"open in new window"}});return()=>cr("span",[VS,cr("span",{class:"external-link-icon-sr-only"},s.value.openInNewWindow)])}}),$S={"/":{openInNewWindow:"open in new window"}};var qS=yi({enhance({app:e}){e.component("ExternalLinkIcon",cr(US,{locales:$S}))}});const HS=JSON.parse(`{"navbar":[{"text":"\u4E3B\u9875","link":"/"},{"text":"\u5FEB\u8BAF\u7F51","link":"https://daily.sustech.online/"},{"text":"\u5C0F\u7A0B\u5E8F","link":"/miniapp/"},{"text":"\u5173\u4E8E","link":"/about/"},{"text":"\u7AD9\u70B9\u5E2E\u52A9","link":"/site-help/"}],"repo":"sustech-cra/sustech-online-ng","repoLabel":"\u5728Github\u4E0A\u67E5\u770B","docsRepo":"sustech-cra/sustech-online-ng","docsDir":"docs","editLinkText":"\u4E00\u8D77\u5B8C\u5584\u8FD9\u672C\u624B\u518C\uFF01","lastUpdatedText":"\u4E0A\u6B21\u66F4\u65B0","contributorsText":"\u8D21\u732E\u8005","editLinks":true,"docsBranch":"master","sidebarDepth":2,"sidebar":["/","/facility/","/contact/","/calendar/","/service/","/life/","/study/","/organizations/","/media/",{"text":"\u{1F684}\u4EA4\u901A","link":"/transport/","children":[{"text":"\u{1F68C}\u65B0\u7248\u5DF4\u58EB\u65F6\u523B\u8868","link":"/transport/bustimer.md","children":[]},{"text":"\u{1F68C}\u6821\u56ED\u5DF4\u58EB-\u5DE5\u4F5C\u65E5","link":"/transport/workday.md","children":[]},{"text":"\u{1F68C}\u6821\u56ED\u5DF4\u58EB-\u8282\u5047\u65E5","link":"/transport/holiday.md","children":[]},{"text":"\u5468\u56F4\u4EA4\u901A","link":"/transport/","children":[]}]},"/surroundings/"],"locales":{"/":{"selectLanguageName":"English"}},"colorMode":"auto","colorModeSwitch":true,"logo":null,"selectLanguageText":"Languages","selectLanguageAriaLabel":"Select language","editLink":true,"lastUpdated":true,"contributors":true,"notFound":["There's nothing here.","How did we get here?","That's a Four-Oh-Four.","Looks like we've got some broken links."],"backToHome":"Take me home","openInNewWindow":"open in new window","toggleColorMode":"toggle color mode","toggleSidebar":"toggle sidebar"}`),R0=mn(HS),GS=()=>R0;_m.webpackHot&&(__VUE_HMR_RUNTIME__.updateThemeData=e=>{R0.value=e});const B0=Symbol(""),ZS=()=>{const e=gn(B0);if(!e)throw new Error("useThemeLocaleData() is called without provider.");return e},WS=(e,i)=>{var s;return{...e,...(s=e.locales)==null?void 0:s[i]}};var KS=yi({enhance({app:e}){const i=GS(),s=e._context.provides[Yf],u=Pr(()=>WS(i.value,s.value));e.provide(B0,u),Object.defineProperties(e.config.globalProperties,{$theme:{get(){return i.value}},$themeLocale:{get(){return u.value}}})}}),Yi=(e,i)=>{const s=e.__vccOpts||e;for(const[u,m]of i)s[u]=m;return s};const XS=jn({__name:"Badge",props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(e){return(i,s)=>(tn(),kn("span",{class:us(["badge",e.type]),style:Xc({verticalAlign:e.vertical})},[nd(i.$slots,"default",{},()=>[Xf(Ci(e.text),1)])],6))}});var JS=Yi(XS,[["__file","Badge.vue"]]);const YS=jn({name:"CodeGroup",setup(e,{slots:i}){const s=mn(-1),u=mn([]),m=(l=s.value)=>{l<u.value.length-1?s.value=l+1:s.value=0,u.value[s.value].focus()},y=(l=s.value)=>{l>0?s.value=l-1:s.value=u.value.length-1,u.value[s.value].focus()},x=(l,T)=>{l.key===" "||l.key==="Enter"?(l.preventDefault(),s.value=T):l.key==="ArrowRight"?(l.preventDefault(),m(T)):l.key==="ArrowLeft"&&(l.preventDefault(),y(T))};return()=>{var T;const l=(((T=i.default)==null?void 0:T.call(i))||[]).filter(C=>C.type.name==="CodeGroupItem").map(C=>(C.props===null&&(C.props={}),C));return l.length===0?null:(s.value<0||s.value>l.length-1?(s.value=l.findIndex(C=>C.props.active===""||C.props.active===!0),s.value===-1&&(s.value=0)):l.forEach((C,A)=>{C.props.active=A===s.value}),cr("div",{class:"code-group"},[cr("div",{class:"code-group__nav"},cr("ul",{class:"code-group__ul"},l.map((C,A)=>{const F=A===s.value;return cr("li",{class:"code-group__li"},cr("button",{ref:L=>{L&&(u.value[A]=L)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":F},ariaPressed:F,ariaExpanded:F,onClick:()=>s.value=A,onKeydown:L=>x(L,A)},C.props.title))}))),l]))}}}),QS=["aria-selected"],eT=jn({name:"CodeGroupItem"}),tT=jn({...eT,props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup(e){return(i,s)=>(tn(),kn("div",{class:us(["code-group-item",{"code-group-item__active":e.active}]),"aria-selected":e.active},[nd(i.$slots,"default")],10,QS))}});var rT=Yi(tT,[["__file","CodeGroupItem.vue"]]),L_;const eu=typeof window!="undefined",nT=e=>typeof e=="string",Op=()=>{};eu&&((L_=window==null?void 0:window.navigator)==null?void 0:L_.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function iT(e,i){function s(...u){e(()=>i.apply(this,u),{fn:i,thisArg:this,args:u})}return s}const F0=e=>e();function oT(e=F0){const i=mn(!0);function s(){i.value=!1}function u(){i.value=!0}return{isActive:i,pause:s,resume:u,eventFilter:(...y)=>{i.value&&e(...y)}}}function N0(e){return ow()?(sw(e),!0):!1}function sT(e,i=!0){a0()?Gv(e):i?e():qf(e)}function e3(e=!1,i={}){const{truthyValue:s=!0,falsyValue:u=!1}=i,m=En(e),y=mn(e);function x(l){return arguments.length?(y.value=l,y.value):(y.value=y.value===Vi(s)?Vi(u):Vi(s),y.value)}return m?x:[y,x]}var R_=Object.getOwnPropertySymbols,aT=Object.prototype.hasOwnProperty,lT=Object.prototype.propertyIsEnumerable,cT=(e,i)=>{var s={};for(var u in e)aT.call(e,u)&&i.indexOf(u)<0&&(s[u]=e[u]);if(e!=null&&R_)for(var u of R_(e))i.indexOf(u)<0&&lT.call(e,u)&&(s[u]=e[u]);return s};function uT(e,i,s={}){const u=s,{eventFilter:m=F0}=u,y=cT(u,["eventFilter"]);return Ui(e,iT(m,i),y)}var hT=Object.defineProperty,dT=Object.defineProperties,pT=Object.getOwnPropertyDescriptors,Fh=Object.getOwnPropertySymbols,j0=Object.prototype.hasOwnProperty,V0=Object.prototype.propertyIsEnumerable,B_=(e,i,s)=>i in e?hT(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s,fT=(e,i)=>{for(var s in i||(i={}))j0.call(i,s)&&B_(e,s,i[s]);if(Fh)for(var s of Fh(i))V0.call(i,s)&&B_(e,s,i[s]);return e},mT=(e,i)=>dT(e,pT(i)),gT=(e,i)=>{var s={};for(var u in e)j0.call(e,u)&&i.indexOf(u)<0&&(s[u]=e[u]);if(e!=null&&Fh)for(var u of Fh(e))i.indexOf(u)<0&&V0.call(e,u)&&(s[u]=e[u]);return s};function _T(e,i,s={}){const u=s,{eventFilter:m}=u,y=gT(u,["eventFilter"]),{eventFilter:x,pause:l,resume:T,isActive:C}=oT(m);return{stop:uT(e,i,mT(fT({},y),{eventFilter:x})),pause:l,resume:T,isActive:C}}function yT(e){var i;const s=Vi(e);return(i=s==null?void 0:s.$el)!=null?i:s}const Nh=eu?window:void 0;eu&&window.document;eu&&window.navigator;eu&&window.location;function vT(...e){let i,s,u,m;if(nT(e[0])?([s,u,m]=e,i=Nh):[i,s,u,m]=e,!i)return Op;let y=Op;const x=Ui(()=>yT(i),T=>{y(),T&&(T.addEventListener(s,u,m),y=()=>{T.removeEventListener(s,u,m),y=Op})},{immediate:!0,flush:"post"}),l=()=>{x(),y()};return N0(l),l}function xT(e,i={}){const{window:s=Nh}=i,u=Boolean(s&&"matchMedia"in s&&typeof s.matchMedia=="function");let m;const y=mn(!1),x=()=>{!u||(m||(m=s.matchMedia(e)),y.value=m.matches)};return sT(()=>{x(),m&&("addEventListener"in m?m.addEventListener("change",x):m.addListener(x),N0(()=>{"removeEventListener"in m?m.removeEventListener("change",x):m.removeListener(x)}))}),y}const pf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ff="__vueuse_ssr_handlers__";pf[ff]=pf[ff]||{};const bT=pf[ff];function wT(e,i){return bT[e]||i}function ET(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"||Array.isArray(e)?"object":Number.isNaN(e)?"any":"number"}const ST={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}};function TT(e,i,s,u={}){var m;const{flush:y="pre",deep:x=!0,listenToStorageChanges:l=!0,writeDefaults:T=!0,shallow:C,window:A=Nh,eventFilter:F,onError:L=Ge=>{console.error(Ge)}}=u,K=(C?Dv:mn)(i);if(!s)try{s=wT("getDefaultStorage",()=>{var Ge;return(Ge=Nh)==null?void 0:Ge.localStorage})()}catch(Ge){L(Ge)}if(!s)return K;const se=Vi(i),pe=ET(se),ye=(m=u.serializer)!=null?m:ST[pe],{pause:Y,resume:he}=_T(K,()=>me(K.value),{flush:y,deep:x,eventFilter:F});return A&&l&&vT(A,"storage",Ae),Ae(),K;function me(Ge){try{Ge==null?s.removeItem(e):s.setItem(e,ye.write(Ge))}catch(We){L(We)}}function xe(Ge){if(!(Ge&&Ge.key!==e)){Y();try{const We=Ge?Ge.newValue:s.getItem(e);return We==null?(T&&se!==null&&s.setItem(e,ye.write(se)),se):typeof We!="string"?We:ye.read(We)}catch(We){L(We)}finally{he()}}}function Ae(Ge){Ge&&Ge.key!==e||(K.value=xe(Ge))}}function IT(e){return xT("(prefers-color-scheme: dark)",e)}var F_;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(F_||(F_={}));const U0=Symbol(""),t3=()=>{const e=gn(U0);if(!e)throw new Error("useDarkMode() is called without provider.");return e},AT=()=>{const e=G0(),i=IT(),s=TT("vuepress-color-scheme",e.value.colorMode),u=Pr({get(){return e.value.colorModeSwitch?s.value==="auto"?i.value:s.value==="dark":e.value.colorMode==="dark"},set(m){m===i.value?s.value="auto":s.value=m?"dark":"light"}});ss(U0,u),PT(u)},PT=e=>{const i=(s=e.value)=>{const u=window==null?void 0:window.document.querySelector("html");u==null||u.classList.toggle("dark",s)};Ji(()=>{Ui(e,i,{immediate:!0})}),Zf(()=>i())},$0=(...e)=>{const s=cd().resolve(...e),u=s.matched[s.matched.length-1];if(!(u!=null&&u.redirect))return s;const{redirect:m}=u,y=Yt(m)?m(s):m,x=Br(y)?{path:y}:y;return $0({hash:s.hash,query:s.query,params:s.params,...x})},CT=e=>{const i=$0(encodeURI(e));return{text:i.meta.title||e,link:i.name==="404"?e:i.fullPath}};let Mp=null,yc=null;const kT={wait:()=>Mp,pending:()=>{Mp=new Promise(e=>yc=e)},resolve:()=>{yc==null||yc(),Mp=null,yc=null}},DT=()=>kT,q0=Symbol("sidebarItems"),r3=()=>{const e=gn(q0);if(!e)throw new Error("useSidebarItems() is called without provider.");return e},zT=()=>{const e=G0(),i=AE(),s=Pr(()=>OT(i.value,e.value));ss(q0,s)},OT=(e,i)=>{var m,y,x,l;const s=(y=(m=e.sidebar)!=null?m:i.sidebar)!=null?y:"auto",u=(l=(x=e.sidebarDepth)!=null?x:i.sidebarDepth)!=null?l:2;return e.home||s===!1?[]:s==="auto"?LT(u):jt(s)?H0(s,u):d0(s)?RT(s,u):[]},MT=(e,i)=>({text:e.title,link:`#${e.slug}`,children:nm(e.children,i)}),nm=(e,i)=>i>0?e.map(s=>MT(s,i-1)):[],LT=e=>{const i=hl();return[{text:i.value.title,children:nm(i.value.headers,e)}]},H0=(e,i)=>{const s=ud(),u=hl(),m=y=>{var l;let x;if(Br(y)?x=CT(y):x=y,x.children)return{...x,children:x.children.map(T=>m(T))};if(x.link===s.path){const T=((l=u.value.headers[0])==null?void 0:l.level)===1?u.value.headers[0].children:u.value.headers;return{...x,children:nm(T,i)}}return x};return e.map(y=>m(y))},RT=(e,i)=>{var y;const s=ud(),u=p0(e,s.path),m=(y=e[u])!=null?y:[];return H0(m,i)},G0=()=>ZS();var BT=yi({enhance({app:e,router:i}){e.component("Badge",JS),e.component("CodeGroup",YS),e.component("CodeGroupItem",rT),e.component("AutoLinkExternalIcon",()=>{const u=e.component("ExternalLinkIcon");return u?cr(u):null}),e.component("NavbarSearch",()=>{const u=e.component("Docsearch")||e.component("SearchBox");return u?cr(u):null});const s=i.options.scrollBehavior;i.options.scrollBehavior=async(...u)=>(await DT().wait(),s(...u))},setup(){AT(),zT()}});/*! @docsearch/js 3.1.1 | MIT License |  Algolia, Inc. and contributors | https://docsearch.algolia.com */function N_(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function wr(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?N_(Object(s),!0).forEach(function(u){FT(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N_(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function Gc(e){return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Gc(e)}function FT(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function mf(){return mf=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},mf.apply(this,arguments)}function NT(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}function jh(e,i){return function(s){if(Array.isArray(s))return s}(e)||function(s,u){var m=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(m!=null){var y,x,l=[],T=!0,C=!1;try{for(m=m.call(s);!(T=(y=m.next()).done)&&(l.push(y.value),!u||l.length!==u);T=!0);}catch(A){C=!0,x=A}finally{try{T||m.return==null||m.return()}finally{if(C)throw x}}return l}}(e,i)||Z0(e,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vh(e){return function(i){if(Array.isArray(i))return gf(i)}(e)||function(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(e)||Z0(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Z0(e,i){if(e){if(typeof e=="string")return gf(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?gf(e,i):void 0}}function gf(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=e[s];return u}var Mt,Lc,W0,j_,K0,Uh={},im=[],jT=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Eo(e,i){for(var s in i)e[s]=i[s];return e}function X0(e){var i=e.parentNode;i&&i.removeChild(e)}function Wi(e,i,s){var u,m,y,x=arguments,l={};for(y in i)y=="key"?u=i[y]:y=="ref"?m=i[y]:l[y]=i[y];if(arguments.length>3)for(s=[s],y=3;y<arguments.length;y++)s.push(x[y]);if(s!=null&&(l.children=s),typeof e=="function"&&e.defaultProps!=null)for(y in e.defaultProps)l[y]===void 0&&(l[y]=e.defaultProps[y]);return Rc(e,l,u,m,null)}function Rc(e,i,s,u,m){var y={type:e,props:i,key:s,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:m==null?++Mt.__v:m};return Mt.vnode!=null&&Mt.vnode(y),y}function cs(e){return e.children}function Ki(e,i){this.props=e,this.context=i}function Zc(e,i){if(i==null)return e.__?Zc(e.__,e.__.__k.indexOf(e)+1):null;for(var s;i<e.__k.length;i++)if((s=e.__k[i])!=null&&s.__e!=null)return s.__e;return typeof e.type=="function"?Zc(e):null}function J0(e){var i,s;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,i=0;i<e.__k.length;i++)if((s=e.__k[i])!=null&&s.__e!=null){e.__e=e.__c.base=s.__e;break}return J0(e)}}function _f(e){(!e.__d&&(e.__d=!0)&&Lc.push(e)&&!$h.__r++||j_!==Mt.debounceRendering)&&((j_=Mt.debounceRendering)||W0)($h)}function $h(){for(var e;$h.__r=Lc.length;)e=Lc.sort(function(i,s){return i.__v.__b-s.__v.__b}),Lc=[],e.some(function(i){var s,u,m,y,x,l;i.__d&&(x=(y=(s=i).__v).__e,(l=s.__P)&&(u=[],(m=Eo({},y)).__v=y.__v+1,om(l,y,m,s.__n,l.ownerSVGElement!==void 0,y.__h!=null?[x]:null,u,x==null?Zc(y):x,y.__h),tx(u,y),y.__e!=x&&J0(y)))})}function Y0(e,i,s,u,m,y,x,l,T,C){var A,F,L,K,se,pe,ye,Y=u&&u.__k||im,he=Y.length;for(s.__k=[],A=0;A<i.length;A++)if((K=s.__k[A]=(K=i[A])==null||typeof K=="boolean"?null:typeof K=="string"||typeof K=="number"?Rc(null,K,null,null,K):Array.isArray(K)?Rc(cs,{children:K},null,null,null):K.__b>0?Rc(K.type,K.props,K.key,null,K.__v):K)!=null){if(K.__=s,K.__b=s.__b+1,(L=Y[A])===null||L&&K.key==L.key&&K.type===L.type)Y[A]=void 0;else for(F=0;F<he;F++){if((L=Y[F])&&K.key==L.key&&K.type===L.type){Y[F]=void 0;break}L=null}om(e,K,L=L||Uh,m,y,x,l,T,C),se=K.__e,(F=K.ref)&&L.ref!=F&&(ye||(ye=[]),L.ref&&ye.push(L.ref,null,K),ye.push(F,K.__c||se,K)),se!=null?(pe==null&&(pe=se),typeof K.type=="function"&&K.__k!=null&&K.__k===L.__k?K.__d=T=Q0(K,T,e):T=ex(e,K,L,Y,se,T),C||s.type!=="option"?typeof s.type=="function"&&(s.__d=T):e.value=""):T&&L.__e==T&&T.parentNode!=e&&(T=Zc(L))}for(s.__e=pe,A=he;A--;)Y[A]!=null&&(typeof s.type=="function"&&Y[A].__e!=null&&Y[A].__e==s.__d&&(s.__d=Zc(u,A+1)),nx(Y[A],Y[A]));if(ye)for(A=0;A<ye.length;A++)rx(ye[A],ye[++A],ye[++A])}function Q0(e,i,s){var u,m;for(u=0;u<e.__k.length;u++)(m=e.__k[u])&&(m.__=e,i=typeof m.type=="function"?Q0(m,i,s):ex(s,m,m,e.__k,m.__e,i));return i}function So(e,i){return i=i||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(s){So(s,i)}):i.push(e)),i}function ex(e,i,s,u,m,y){var x,l,T;if(i.__d!==void 0)x=i.__d,i.__d=void 0;else if(s==null||m!=y||m.parentNode==null)e:if(y==null||y.parentNode!==e)e.appendChild(m),x=null;else{for(l=y,T=0;(l=l.nextSibling)&&T<u.length;T+=2)if(l==m)break e;e.insertBefore(m,y),x=y}return x!==void 0?x:m.nextSibling}function V_(e,i,s){i[0]==="-"?e.setProperty(i,s):e[i]=s==null?"":typeof s!="number"||jT.test(i)?s:s+"px"}function ch(e,i,s,u,m){var y;e:if(i==="style")if(typeof s=="string")e.style.cssText=s;else{if(typeof u=="string"&&(e.style.cssText=u=""),u)for(i in u)s&&i in s||V_(e.style,i,"");if(s)for(i in s)u&&s[i]===u[i]||V_(e.style,i,s[i])}else if(i[0]==="o"&&i[1]==="n")y=i!==(i=i.replace(/Capture$/,"")),i=i.toLowerCase()in e?i.toLowerCase().slice(2):i.slice(2),e.l||(e.l={}),e.l[i+y]=s,s?u||e.addEventListener(i,y?$_:U_,y):e.removeEventListener(i,y?$_:U_,y);else if(i!=="dangerouslySetInnerHTML"){if(m)i=i.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(i!=="href"&&i!=="list"&&i!=="form"&&i!=="download"&&i in e)try{e[i]=s==null?"":s;break e}catch{}typeof s=="function"||(s!=null&&(s!==!1||i[0]==="a"&&i[1]==="r")?e.setAttribute(i,s):e.removeAttribute(i))}}function U_(e){this.l[e.type+!1](Mt.event?Mt.event(e):e)}function $_(e){this.l[e.type+!0](Mt.event?Mt.event(e):e)}function om(e,i,s,u,m,y,x,l,T){var C,A,F,L,K,se,pe,ye,Y,he,me,xe=i.type;if(i.constructor!==void 0)return null;s.__h!=null&&(T=s.__h,l=i.__e=s.__e,i.__h=null,y=[l]),(C=Mt.__b)&&C(i);try{e:if(typeof xe=="function"){if(ye=i.props,Y=(C=xe.contextType)&&u[C.__c],he=C?Y?Y.props.value:C.__:u,s.__c?pe=(A=i.__c=s.__c).__=A.__E:("prototype"in xe&&xe.prototype.render?i.__c=A=new xe(ye,he):(i.__c=A=new Ki(ye,he),A.constructor=xe,A.render=UT),Y&&Y.sub(A),A.props=ye,A.state||(A.state={}),A.context=he,A.__n=u,F=A.__d=!0,A.__h=[]),A.__s==null&&(A.__s=A.state),xe.getDerivedStateFromProps!=null&&(A.__s==A.state&&(A.__s=Eo({},A.__s)),Eo(A.__s,xe.getDerivedStateFromProps(ye,A.__s))),L=A.props,K=A.state,F)xe.getDerivedStateFromProps==null&&A.componentWillMount!=null&&A.componentWillMount(),A.componentDidMount!=null&&A.__h.push(A.componentDidMount);else{if(xe.getDerivedStateFromProps==null&&ye!==L&&A.componentWillReceiveProps!=null&&A.componentWillReceiveProps(ye,he),!A.__e&&A.shouldComponentUpdate!=null&&A.shouldComponentUpdate(ye,A.__s,he)===!1||i.__v===s.__v){A.props=ye,A.state=A.__s,i.__v!==s.__v&&(A.__d=!1),A.__v=i,i.__e=s.__e,i.__k=s.__k,A.__h.length&&x.push(A);break e}A.componentWillUpdate!=null&&A.componentWillUpdate(ye,A.__s,he),A.componentDidUpdate!=null&&A.__h.push(function(){A.componentDidUpdate(L,K,se)})}A.context=he,A.props=ye,A.state=A.__s,(C=Mt.__r)&&C(i),A.__d=!1,A.__v=i,A.__P=e,C=A.render(A.props,A.state,A.context),A.state=A.__s,A.getChildContext!=null&&(u=Eo(Eo({},u),A.getChildContext())),F||A.getSnapshotBeforeUpdate==null||(se=A.getSnapshotBeforeUpdate(L,K)),me=C!=null&&C.type===cs&&C.key==null?C.props.children:C,Y0(e,Array.isArray(me)?me:[me],i,s,u,m,y,x,l,T),A.base=i.__e,i.__h=null,A.__h.length&&x.push(A),pe&&(A.__E=A.__=null),A.__e=!1}else y==null&&i.__v===s.__v?(i.__k=s.__k,i.__e=s.__e):i.__e=VT(s.__e,i,s,u,m,y,x,T);(C=Mt.diffed)&&C(i)}catch(Ae){i.__v=null,(T||y!=null)&&(i.__e=l,i.__h=!!T,y[y.indexOf(l)]=null),Mt.__e(Ae,i,s)}}function tx(e,i){Mt.__c&&Mt.__c(i,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(u){u.call(s)})}catch(u){Mt.__e(u,s.__v)}})}function VT(e,i,s,u,m,y,x,l){var T,C,A,F,L=s.props,K=i.props,se=i.type,pe=0;if(se==="svg"&&(m=!0),y!=null){for(;pe<y.length;pe++)if((T=y[pe])&&(T===e||(se?T.localName==se:T.nodeType==3))){e=T,y[pe]=null;break}}if(e==null){if(se===null)return document.createTextNode(K);e=m?document.createElementNS("http://www.w3.org/2000/svg",se):document.createElement(se,K.is&&K),y=null,l=!1}if(se===null)L===K||l&&e.data===K||(e.data=K);else{if(y=y&&im.slice.call(e.childNodes),C=(L=s.props||Uh).dangerouslySetInnerHTML,A=K.dangerouslySetInnerHTML,!l){if(y!=null)for(L={},F=0;F<e.attributes.length;F++)L[e.attributes[F].name]=e.attributes[F].value;(A||C)&&(A&&(C&&A.__html==C.__html||A.__html===e.innerHTML)||(e.innerHTML=A&&A.__html||""))}if(function(ye,Y,he,me,xe){var Ae;for(Ae in he)Ae==="children"||Ae==="key"||Ae in Y||ch(ye,Ae,null,he[Ae],me);for(Ae in Y)xe&&typeof Y[Ae]!="function"||Ae==="children"||Ae==="key"||Ae==="value"||Ae==="checked"||he[Ae]===Y[Ae]||ch(ye,Ae,Y[Ae],he[Ae],me)}(e,K,L,m,l),A)i.__k=[];else if(pe=i.props.children,Y0(e,Array.isArray(pe)?pe:[pe],i,s,u,m&&se!=="foreignObject",y,x,e.firstChild,l),y!=null)for(pe=y.length;pe--;)y[pe]!=null&&X0(y[pe]);l||("value"in K&&(pe=K.value)!==void 0&&(pe!==e.value||se==="progress"&&!pe)&&ch(e,"value",pe,L.value,!1),"checked"in K&&(pe=K.checked)!==void 0&&pe!==e.checked&&ch(e,"checked",pe,L.checked,!1))}return e}function rx(e,i,s){try{typeof e=="function"?e(i):e.current=i}catch(u){Mt.__e(u,s)}}function nx(e,i,s){var u,m,y;if(Mt.unmount&&Mt.unmount(e),(u=e.ref)&&(u.current&&u.current!==e.__e||rx(u,null,i)),s||typeof e.type=="function"||(s=(m=e.__e)!=null),e.__e=e.__d=void 0,(u=e.__c)!=null){if(u.componentWillUnmount)try{u.componentWillUnmount()}catch(x){Mt.__e(x,i)}u.base=u.__P=null}if(u=e.__k)for(y=0;y<u.length;y++)u[y]&&nx(u[y],i,s);m!=null&&X0(m)}function UT(e,i,s){return this.constructor(e,s)}function Wc(e,i,s){var u,m,y;Mt.__&&Mt.__(e,i),m=(u=typeof s=="function")?null:s&&s.__k||i.__k,y=[],om(i,e=(!u&&s||i).__k=Wi(cs,null,[e]),m||Uh,Uh,i.ownerSVGElement!==void 0,!u&&s?[s]:m?null:i.firstChild?im.slice.call(i.childNodes):null,y,!u&&s?s:m?m.__e:i.firstChild,u),tx(y,e)}function ix(e,i){Wc(e,i,ix)}function $T(e,i,s){var u,m,y,x=arguments,l=Eo({},e.props);for(y in i)y=="key"?u=i[y]:y=="ref"?m=i[y]:l[y]=i[y];if(arguments.length>3)for(s=[s],y=3;y<arguments.length;y++)s.push(x[y]);return s!=null&&(l.children=s),Rc(e.type,l,u||e.key,m||e.ref,null)}Mt={__e:function(e,i){for(var s,u,m;i=i.__;)if((s=i.__c)&&!s.__)try{if((u=s.constructor)&&u.getDerivedStateFromError!=null&&(s.setState(u.getDerivedStateFromError(e)),m=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e),m=s.__d),m)return s.__E=s}catch(y){e=y}throw e},__v:0},Ki.prototype.setState=function(e,i){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Eo({},this.state),typeof e=="function"&&(e=e(Eo({},s),this.props)),e&&Eo(s,e),e!=null&&this.__v&&(i&&this.__h.push(i),_f(this))},Ki.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_f(this))},Ki.prototype.render=cs,Lc=[],W0=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$h.__r=0,K0=0;var dl,Jn,q_,Qa=0,yf=[],H_=Mt.__b,G_=Mt.__r,Z_=Mt.diffed,W_=Mt.__c,K_=Mt.unmount;function tu(e,i){Mt.__h&&Mt.__h(Jn,e,Qa||i),Qa=0;var s=Jn.__H||(Jn.__H={__:[],__h:[]});return e>=s.__.length&&s.__.push({}),s.__[e]}function ox(e){return Qa=1,sx(lx,e)}function sx(e,i,s){var u=tu(dl++,2);return u.t=e,u.__c||(u.__=[s?s(i):lx(void 0,i),function(m){var y=u.t(u.__[0],m);u.__[0]!==y&&(u.__=[y,u.__[1]],u.__c.setState({}))}],u.__c=Jn),u.__}function ax(e,i){var s=tu(dl++,3);!Mt.__s&&sm(s.__H,i)&&(s.__=e,s.__H=i,Jn.__H.__h.push(s))}function X_(e,i){var s=tu(dl++,4);!Mt.__s&&sm(s.__H,i)&&(s.__=e,s.__H=i,Jn.__h.push(s))}function Lp(e,i){var s=tu(dl++,7);return sm(s.__H,i)&&(s.__=e(),s.__H=i,s.__h=e),s.__}function qT(){yf.forEach(function(e){if(e.__P)try{e.__H.__h.forEach(wh),e.__H.__h.forEach(vf),e.__H.__h=[]}catch(i){e.__H.__h=[],Mt.__e(i,e.__v)}}),yf=[]}Mt.__b=function(e){Jn=null,H_&&H_(e)},Mt.__r=function(e){G_&&G_(e),dl=0;var i=(Jn=e.__c).__H;i&&(i.__h.forEach(wh),i.__h.forEach(vf),i.__h=[])},Mt.diffed=function(e){Z_&&Z_(e);var i=e.__c;i&&i.__H&&i.__H.__h.length&&(yf.push(i)!==1&&q_===Mt.requestAnimationFrame||((q_=Mt.requestAnimationFrame)||function(s){var u,m=function(){clearTimeout(y),J_&&cancelAnimationFrame(u),setTimeout(s)},y=setTimeout(m,100);J_&&(u=requestAnimationFrame(m))})(qT)),Jn=void 0},Mt.__c=function(e,i){i.some(function(s){try{s.__h.forEach(wh),s.__h=s.__h.filter(function(u){return!u.__||vf(u)})}catch(u){i.some(function(m){m.__h&&(m.__h=[])}),i=[],Mt.__e(u,s.__v)}}),W_&&W_(e,i)},Mt.unmount=function(e){K_&&K_(e);var i=e.__c;if(i&&i.__H)try{i.__H.__.forEach(wh)}catch(s){Mt.__e(s,i.__v)}};var J_=typeof requestAnimationFrame=="function";function wh(e){var i=Jn;typeof e.__c=="function"&&e.__c(),Jn=i}function vf(e){var i=Jn;e.__c=e.__(),Jn=i}function sm(e,i){return!e||e.length!==i.length||i.some(function(s,u){return s!==e[u]})}function lx(e,i){return typeof i=="function"?i(e):i}function cx(e,i){for(var s in i)e[s]=i[s];return e}function xf(e,i){for(var s in e)if(s!=="__source"&&!(s in i))return!0;for(var u in i)if(u!=="__source"&&e[u]!==i[u])return!0;return!1}function bf(e){this.props=e}(bf.prototype=new Ki).isPureReactComponent=!0,bf.prototype.shouldComponentUpdate=function(e,i){return xf(this.props,e)||xf(this.state,i)};var Y_=Mt.__b;Mt.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Y_&&Y_(e)};var HT=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911,Q_=function(e,i){return e==null?null:So(So(e).map(i))},GT={map:Q_,forEach:Q_,count:function(e){return e?So(e).length:0},only:function(e){var i=So(e);if(i.length!==1)throw"Children.only";return i[0]},toArray:So},ZT=Mt.__e;function Eh(){this.__u=0,this.t=null,this.__b=null}function ux(e){var i=e.__.__c;return i&&i.__e&&i.__e(e)}function Ic(){this.u=null,this.o=null}Mt.__e=function(e,i,s){if(e.then){for(var u,m=i;m=m.__;)if((u=m.__c)&&u.__c)return i.__e==null&&(i.__e=s.__e,i.__k=s.__k),u.__c(e,i)}ZT(e,i,s)},(Eh.prototype=new Ki).__c=function(e,i){var s=i.__c,u=this;u.t==null&&(u.t=[]),u.t.push(s);var m=ux(u.__v),y=!1,x=function(){y||(y=!0,s.componentWillUnmount=s.__c,m?m(l):l())};s.__c=s.componentWillUnmount,s.componentWillUnmount=function(){x(),s.__c&&s.__c()};var l=function(){if(!--u.__u){if(u.state.__e){var C=u.state.__e;u.__v.__k[0]=function F(L,K,se){return L&&(L.__v=null,L.__k=L.__k&&L.__k.map(function(pe){return F(pe,K,se)}),L.__c&&L.__c.__P===K&&(L.__e&&se.insertBefore(L.__e,L.__d),L.__c.__e=!0,L.__c.__P=se)),L}(C,C.__c.__P,C.__c.__O)}var A;for(u.setState({__e:u.__b=null});A=u.t.pop();)A.forceUpdate()}},T=i.__h===!0;u.__u++||T||u.setState({__e:u.__b=u.__v.__k[0]}),e.then(x,x)},Eh.prototype.componentWillUnmount=function(){this.t=[]},Eh.prototype.render=function(e,i){if(this.__b){if(this.__v.__k){var s=document.createElement("div"),u=this.__v.__k[0].__c;this.__v.__k[0]=function y(x,l,T){return x&&(x.__c&&x.__c.__H&&(x.__c.__H.__.forEach(function(C){typeof C.__c=="function"&&C.__c()}),x.__c.__H=null),(x=cx({},x)).__c!=null&&(x.__c.__P===T&&(x.__c.__P=l),x.__c=null),x.__k=x.__k&&x.__k.map(function(C){return y(C,l,T)})),x}(this.__b,s,u.__O=u.__P)}this.__b=null}var m=i.__e&&Wi(cs,null,e.fallback);return m&&(m.__h=null),[Wi(cs,null,i.__e?null:e.children),m]};var ey=function(e,i,s){if(++s[1]===s[0]&&e.o.delete(i),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(s=e.u;s;){for(;s.length>3;)s.pop()();if(s[1]<s[0])break;e.u=s=s[2]}};function WT(e){return this.getChildContext=function(){return e.context},e.children}function KT(e){var i=this,s=e.i;i.componentWillUnmount=function(){Wc(null,i.l),i.l=null,i.i=null},i.i&&i.i!==s&&i.componentWillUnmount(),e.__v?(i.l||(i.i=s,i.l={nodeType:1,parentNode:s,childNodes:[],appendChild:function(u){this.childNodes.push(u),i.i.appendChild(u)},insertBefore:function(u,m){this.childNodes.push(u),i.i.appendChild(u)},removeChild:function(u){this.childNodes.splice(this.childNodes.indexOf(u)>>>1,1),i.i.removeChild(u)}}),Wc(Wi(WT,{context:i.context},e.__v),i.l)):i.l&&i.componentWillUnmount()}function hx(e,i){return Wi(KT,{__v:e,i})}(Ic.prototype=new Ki).__e=function(e){var i=this,s=ux(i.__v),u=i.o.get(e);return u[0]++,function(m){var y=function(){i.props.revealOrder?(u.push(m),ey(i,e,u)):m()};s?s(y):y()}},Ic.prototype.render=function(e){this.u=null,this.o=new Map;var i=So(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&i.reverse();for(var s=i.length;s--;)this.o.set(i[s],this.u=[1,0,this.u]);return e.children},Ic.prototype.componentDidUpdate=Ic.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(i,s){ey(e,s,i)})};var dx=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,XT=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,JT=function(e){return(typeof Symbol!="undefined"&&Gc(Symbol())=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};function px(e,i,s){return i.__k==null&&(i.textContent=""),Wc(e,i),typeof s=="function"&&s(),e?e.__c:null}Ki.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Ki.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(i){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:i})}})});var ty=Mt.event;function YT(){}function QT(){return this.cancelBubble}function eI(){return this.defaultPrevented}Mt.event=function(e){return ty&&(e=ty(e)),e.persist=YT,e.isPropagationStopped=QT,e.isDefaultPrevented=eI,e.nativeEvent=e};var fx,ry={configurable:!0,get:function(){return this.class}},ny=Mt.vnode;Mt.vnode=function(e){var i=e.type,s=e.props,u=s;if(typeof i=="string"){for(var m in u={},s){var y=s[m];m==="value"&&"defaultValue"in s&&y==null||(m==="defaultValue"&&"value"in s&&s.value==null?m="value":m==="download"&&y===!0?y="":/ondoubleclick/i.test(m)?m="ondblclick":/^onchange(textarea|input)/i.test(m+i)&&!JT(s.type)?m="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(m)?m=m.toLowerCase():XT.test(m)?m=m.replace(/[A-Z0-9]/,"-$&").toLowerCase():y===null&&(y=void 0),u[m]=y)}i=="select"&&u.multiple&&Array.isArray(u.value)&&(u.value=So(s.children).forEach(function(x){x.props.selected=u.value.indexOf(x.props.value)!=-1})),i=="select"&&u.defaultValue!=null&&(u.value=So(s.children).forEach(function(x){x.props.selected=u.multiple?u.defaultValue.indexOf(x.props.value)!=-1:u.defaultValue==x.props.value})),e.props=u}i&&s.class!=s.className&&(ry.enumerable="className"in s,s.className!=null&&(u.class=s.className),Object.defineProperty(u,"className",ry)),e.$$typeof=dx,ny&&ny(e)};var iy=Mt.__r;Mt.__r=function(e){iy&&iy(e),fx=e.__c};var tI={ReactCurrentDispatcher:{current:{readContext:function(e){return fx.__n[e.__c].props.value}}}};(typeof performance=="undefined"?"undefined":Gc(performance))=="object"&&typeof performance.now=="function"&&performance.now.bind(performance);function oy(e){return!!e&&e.$$typeof===dx}var le={useState:ox,useReducer:sx,useEffect:ax,useLayoutEffect:X_,useRef:function(e){return Qa=5,Lp(function(){return{current:e}},[])},useImperativeHandle:function(e,i,s){Qa=6,X_(function(){typeof e=="function"?e(i()):e&&(e.current=i())},s==null?s:s.concat(e))},useMemo:Lp,useCallback:function(e,i){return Qa=8,Lp(function(){return e},i)},useContext:function(e){var i=Jn.context[e.__c],s=tu(dl++,9);return s.__c=e,i?(s.__==null&&(s.__=!0,i.sub(Jn)),i.props.value):e.__},useDebugValue:function(e,i){Mt.useDebugValue&&Mt.useDebugValue(i?i(e):e)},version:"16.8.0",Children:GT,render:px,hydrate:function(e,i,s){return ix(e,i),typeof s=="function"&&s(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(Wc(null,e),!0)},createPortal:hx,createElement:Wi,createContext:function(e,i){var s={__c:i="__cC"+K0++,__:e,Consumer:function(u,m){return u.children(m)},Provider:function(u){var m,y;return this.getChildContext||(m=[],(y={})[i]=this,this.getChildContext=function(){return y},this.shouldComponentUpdate=function(x){this.props.value!==x.value&&m.some(_f)},this.sub=function(x){m.push(x);var l=x.componentWillUnmount;x.componentWillUnmount=function(){m.splice(m.indexOf(x),1),l&&l.call(x)}}),u.children}};return s.Provider.__=s.Consumer.contextType=s},createFactory:function(e){return Wi.bind(null,e)},cloneElement:function(e){return oy(e)?$T.apply(null,arguments):e},createRef:function(){return{current:null}},Fragment:cs,isValidElement:oy,findDOMNode:function(e){return e&&(e.base||e.nodeType===1&&e)||null},Component:Ki,PureComponent:bf,memo:function(e,i){function s(m){var y=this.props.ref,x=y==m.ref;return!x&&y&&(y.call?y(null):y.current=null),i?!i(this.props,m)||!x:xf(this.props,m)}function u(m){return this.shouldComponentUpdate=s,Wi(e,m)}return u.displayName="Memo("+(e.displayName||e.name)+")",u.prototype.isReactComponent=!0,u.__f=!0,u},forwardRef:function(e){function i(s,u){var m=cx({},s);return delete m.ref,e(m,(u=s.ref||u)&&(Gc(u)!="object"||"current"in u)?u:null)}return i.$$typeof=HT,i.render=i,i.prototype.isReactComponent=i.__f=!0,i.displayName="ForwardRef("+(e.displayName||e.name)+")",i},unstable_batchedUpdates:function(e,i){return e(i)},StrictMode:cs,Suspense:Eh,SuspenseList:Ic,lazy:function(e){var i,s,u;function m(y){if(i||(i=e()).then(function(x){s=x.default||x},function(x){u=x}),u)throw u;if(!s)throw i;return Wi(s,y)}return m.displayName="Lazy",m.__f=!0,m},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:tI};function rI(){return le.createElement("svg",{width:"15",height:"15",className:"DocSearch-Control-Key-Icon"},le.createElement("path",{d:"M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953",strokeWidth:"1.2",stroke:"currentColor",fill:"none",strokeLinecap:"square"}))}function mx(){return le.createElement("svg",{width:"20",height:"20",className:"DocSearch-Search-Icon",viewBox:"0 0 20 20"},le.createElement("path",{d:"M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}var nI=["translations"];function wf(){return wf=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},wf.apply(this,arguments)}function iI(e,i){return function(s){if(Array.isArray(s))return s}(e)||function(s,u){var m=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(m!=null){var y,x,l=[],T=!0,C=!1;try{for(m=m.call(s);!(T=(y=m.next()).done)&&(l.push(y.value),!u||l.length!==u);T=!0);}catch(A){C=!0,x=A}finally{try{T||m.return==null||m.return()}finally{if(C)throw x}}return l}}(e,i)||function(s,u){if(!!s){if(typeof s=="string")return sy(s,u);var m=Object.prototype.toString.call(s).slice(8,-1);if(m==="Object"&&s.constructor&&(m=s.constructor.name),m==="Map"||m==="Set")return Array.from(s);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return sy(s,u)}}(e,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sy(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=e[s];return u}function oI(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}var sI=le.forwardRef(function(e,i){var s=e.translations,u=s===void 0?{}:s,m=oI(e,nI),y=u.buttonText,x=y===void 0?"Search":y,l=u.buttonAriaLabel,T=l===void 0?"Search":l,C=iI(ox(null),2),A=C[0],F=C[1];return ax(function(){typeof navigator!="undefined"&&(/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?F("\u2318"):F("Ctrl"))},[]),le.createElement("button",wf({type:"button",className:"DocSearch DocSearch-Button","aria-label":T},m,{ref:i}),le.createElement("span",{className:"DocSearch-Button-Container"},le.createElement(mx,null),le.createElement("span",{className:"DocSearch-Button-Placeholder"},x)),le.createElement("span",{className:"DocSearch-Button-Keys"},A!==null&&le.createElement(le.Fragment,null,le.createElement("kbd",{className:"DocSearch-Button-Key"},A==="Ctrl"?le.createElement(rI,null):A),le.createElement("kbd",{className:"DocSearch-Button-Key"},"K"))))});function Kc(e){return e.reduce(function(i,s){return i.concat(s)},[])}var aI=0;function Ef(e){return e.collections.length===0?0:e.collections.reduce(function(i,s){return i+s.items.length},0)}var gx=function(){},lI=[{segment:"autocomplete-core",version:"1.7.1"}];function Sh(e,i){var s=i;return{then:function(u,m){return Sh(e.then(uh(u,s,e),uh(m,s,e)),s)},catch:function(u){return Sh(e.catch(uh(u,s,e)),s)},finally:function(u){return u&&s.onCancelList.push(u),Sh(e.finally(uh(u&&function(){return s.onCancelList=[],u()},s,e)),s)},cancel:function(){s.isCanceled=!0;var u=s.onCancelList;s.onCancelList=[],u.forEach(function(m){m()})},isCanceled:function(){return s.isCanceled===!0}}}function ay(e){return Sh(e,{isCanceled:!1,onCancelList:[]})}function uh(e,i,s){return e?function(u){return i.isCanceled?u:e(u)}:s}function ly(e,i,s,u){if(!s)return null;if(e<0&&(i===null||u!==null&&i===0))return s+e;var m=(i===null?-1:i)+e;return m<=-1||m>=s?u===null?null:0:m}function cy(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function cI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function uI(e,i){var s=[];return Promise.resolve(e(i)).then(function(u){return Promise.all(u.filter(function(m){return Boolean(m)}).map(function(m){if(m.sourceId,s.includes(m.sourceId))throw new Error("[Autocomplete] The `sourceId` ".concat(JSON.stringify(m.sourceId)," is not unique."));s.push(m.sourceId);var y=function(x){for(var l=1;l<arguments.length;l++){var T=arguments[l]!=null?arguments[l]:{};l%2?cy(Object(T),!0).forEach(function(C){cI(x,C,T[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(T)):cy(Object(T)).forEach(function(C){Object.defineProperty(x,C,Object.getOwnPropertyDescriptor(T,C))})}return x}({getItemInputValue:function(x){return x.state.query},getItemUrl:function(){},onSelect:function(x){(0,x.setIsOpen)(!1)},onActive:gx},m);return Promise.resolve(y)}))})}function Za(e){var i=function(m){var y=m.collections.map(function(x){return x.items.length}).reduce(function(x,l,T){var C=(x[T-1]||0)+l;return x.push(C),x},[]).reduce(function(x,l){return l<=m.activeItemId?x+1:x},0);return m.collections[y]}(e);if(!i)return null;var s=i.items[function(m){for(var y=m.state,x=m.collection,l=!1,T=0,C=0;l===!1;){var A=y.collections[T];if(A===x){l=!0;break}C+=A.items.length,T++}return y.activeItemId-C}({state:e,collection:i})],u=i.source;return{item:s,itemInputValue:u.getItemInputValue({item:s,state:e}),itemUrl:u.getItemUrl({item:s,state:e}),source:u}}var hI=/((gt|sm)-|galaxy nexus)|samsung[- ]/i;function uy(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function hh(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?uy(Object(s),!0).forEach(function(u){dI(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uy(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function dI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function hy(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function pI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function fI(e,i,s){var u,m=i.initialState;return{getState:function(){return m},dispatch:function(y,x){var l=function(T){for(var C=1;C<arguments.length;C++){var A=arguments[C]!=null?arguments[C]:{};C%2?hy(Object(A),!0).forEach(function(F){pI(T,F,A[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(A)):hy(Object(A)).forEach(function(F){Object.defineProperty(T,F,Object.getOwnPropertyDescriptor(A,F))})}return T}({},m);m=e(m,{type:y,props:i,payload:x}),s({state:m,prevState:l})},pendingRequests:(u=[],{add:function(y){return u.push(y),y.finally(function(){u=u.filter(function(x){return x!==y})})},cancelAll:function(){u.forEach(function(y){return y.cancel()})},isEmpty:function(){return u.length===0}})}}function dy(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function dh(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?dy(Object(s),!0).forEach(function(u){mI(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dy(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function mI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function gI(e){return function(i){if(Array.isArray(i))return Rp(i)}(e)||function(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(e)||function(i,s){if(!!i){if(typeof i=="string")return Rp(i,s);var u=Object.prototype.toString.call(i).slice(8,-1);if(u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set")return Array.from(i);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return Rp(i,s)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rp(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=e[s];return u}function py(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function Ba(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?py(Object(s),!0).forEach(function(u){_I(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):py(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function _I(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function fy(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function ph(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?fy(Object(s),!0).forEach(function(u){_x(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fy(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function _x(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function yI(e){return function(i){if(Array.isArray(i))return Bp(i)}(e)||function(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(e)||function(i,s){if(!!i){if(typeof i=="string")return Bp(i,s);var u=Object.prototype.toString.call(i).slice(8,-1);if(u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set")return Array.from(i);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return Bp(i,s)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Bp(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=e[s];return u}function my(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function gy(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?my(Object(s),!0).forEach(function(u){vI(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):my(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function vI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function fh(e){return Boolean(e.execute)}function xI(e,i){return s=e,Boolean(s==null?void 0:s.execute)?gy(gy({},e),{},{requests:e.queries.map(function(u){return{query:u,sourceId:i,transformResponse:e.transformResponse}})}):{items:e,sourceId:i};var s}function bI(e){var i=e.reduce(function(s,u){if(!fh(u))return s.push(u),s;var m=u.searchClient,y=u.execute,x=u.requesterId,l=u.requests,T=s.find(function(F){return fh(u)&&fh(F)&&F.searchClient===m&&Boolean(x)&&F.requesterId===x});if(T){var C;(C=T.items).push.apply(C,yI(l))}else{var A={execute:y,requesterId:x,items:l,searchClient:m};s.push(A)}return s},[]).map(function(s){if(!fh(s))return Promise.resolve(s);var u=s,m=u.execute,y=u.items;return m({searchClient:u.searchClient,requests:y})});return Promise.all(i).then(function(s){return Kc(s)})}function wI(e,i){return i.map(function(s){var u=e.filter(function(l){return l.sourceId===s.sourceId}),m=u.map(function(l){return l.items}),y=u[0].transformResponse,x=y?y(function(l){var T=l.map(function(C){var A;return hh(hh({},C),{},{hits:(A=C.hits)===null||A===void 0?void 0:A.map(function(F){return hh(hh({},F),{},{__autocomplete_indexName:C.index,__autocomplete_queryID:C.queryID})})})});return{results:T,hits:T.map(function(C){return C.hits}).filter(Boolean),facetHits:T.map(function(C){var A;return(A=C.facetHits)===null||A===void 0?void 0:A.map(function(F){return{label:F.value,count:F.count,_highlightResult:{label:{value:F.highlighted}}}})}).filter(Boolean)}}(m)):m;return x.every(Boolean),'The `getItems` function from source "'.concat(s.sourceId,'" must return an array of items but returned ').concat(JSON.stringify(void 0),`.

Did you forget to return items?

See: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems`),{source:s,items:x}})}var EI=["event","nextState","props","query","refresh","store"];function _y(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function vc(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?_y(Object(s),!0).forEach(function(u){SI(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_y(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function SI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function TI(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}var yy,Fp,mh,xc=null,vy=(yy=-1,Fp=-1,mh=void 0,function(e){var i=++yy;return Promise.resolve(e).then(function(s){return mh&&i<Fp?mh:(Fp=i,mh=s,s)})});function Ha(e){var i=e.event,s=e.nextState,u=s===void 0?{}:s,m=e.props,y=e.query,x=e.refresh,l=e.store,T=TI(e,EI);xc&&m.environment.clearTimeout(xc);var C=T.setCollections,A=T.setIsOpen,F=T.setQuery,L=T.setActiveItemId,K=T.setStatus;if(F(y),L(m.defaultActiveItemId),!y&&m.openOnFocus===!1){var se,pe=l.getState().collections.map(function(he){return vc(vc({},he),{},{items:[]})});K("idle"),C(pe),A((se=u.isOpen)!==null&&se!==void 0?se:m.shouldPanelOpen({state:l.getState()}));var ye=ay(vy(pe).then(function(){return Promise.resolve()}));return l.pendingRequests.add(ye)}K("loading"),xc=m.environment.setTimeout(function(){K("stalled")},m.stallThreshold);var Y=ay(vy(m.getSources(vc({query:y,refresh:x,state:l.getState()},T)).then(function(he){return Promise.all(he.map(function(me){return Promise.resolve(me.getItems(vc({query:y,refresh:x,state:l.getState()},T))).then(function(xe){return xI(xe,me.sourceId)})})).then(bI).then(function(me){return wI(me,he)}).then(function(me){return function(xe){var Ae=xe.collections,Ge=xe.props,We=xe.state,_e=Ae.reduce(function(ot,it){return ph(ph({},ot),{},_x({},it.source.sourceId,ph(ph({},it.source),{},{getItems:function(){return Kc(it.items)}})))},{});return Kc(Ge.reshape({sources:Object.values(_e),sourcesBySourceId:_e,state:We})).filter(Boolean).map(function(ot){return{source:ot,items:ot.getItems()}})}({collections:me,props:m,state:l.getState()})})}))).then(function(he){var me;K("idle"),C(he);var xe=m.shouldPanelOpen({state:l.getState()});A((me=u.isOpen)!==null&&me!==void 0?me:m.openOnFocus&&!y&&xe||xe);var Ae=Za(l.getState());if(l.getState().activeItemId!==null&&Ae){var Ge=Ae.item,We=Ae.itemInputValue,_e=Ae.itemUrl,ot=Ae.source;ot.onActive(vc({event:i,item:Ge,itemInputValue:We,itemUrl:_e,refresh:x,source:ot,state:l.getState()},T))}}).finally(function(){K("idle"),xc&&m.environment.clearTimeout(xc)});return l.pendingRequests.add(Y)}var II=["event","props","refresh","store"];function xy(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function Fs(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?xy(Object(s),!0).forEach(function(u){AI(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xy(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function AI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function PI(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}var CI=["props","refresh","store"],kI=["inputElement","formElement","panelElement"],DI=["inputElement"],zI=["inputElement","maxLength"],OI=["item","source"];function by(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function Fn(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?by(Object(s),!0).forEach(function(u){MI(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):by(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function MI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function bc(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}function LI(e){var i=e.props,s=e.refresh,u=e.store,m=bc(e,CI);return{getEnvironmentProps:function(y){var x=y.inputElement,l=y.formElement,T=y.panelElement;function C(A){!u.getState().isOpen&&u.pendingRequests.isEmpty()||A.target===x||[l,T].some(function(F){return L=F,K=A.target,L===K||L.contains(K);var L,K})===!1&&(u.dispatch("blur",null),i.debug||u.pendingRequests.cancelAll())}return Fn({onTouchStart:C,onMouseDown:C,onTouchMove:function(A){u.getState().isOpen!==!1&&x===i.environment.document.activeElement&&A.target!==x&&x.blur()}},bc(y,kI))},getRootProps:function(y){return Fn({role:"combobox","aria-expanded":u.getState().isOpen,"aria-haspopup":"listbox","aria-owns":u.getState().isOpen?"".concat(i.id,"-list"):void 0,"aria-labelledby":"".concat(i.id,"-label")},y)},getFormProps:function(y){return y.inputElement,Fn({action:"",noValidate:!0,role:"search",onSubmit:function(x){var l;x.preventDefault(),i.onSubmit(Fn({event:x,refresh:s,state:u.getState()},m)),u.dispatch("submit",null),(l=y.inputElement)===null||l===void 0||l.blur()},onReset:function(x){var l;x.preventDefault(),i.onReset(Fn({event:x,refresh:s,state:u.getState()},m)),u.dispatch("reset",null),(l=y.inputElement)===null||l===void 0||l.focus()}},bc(y,DI))},getLabelProps:function(y){return Fn({htmlFor:"".concat(i.id,"-input"),id:"".concat(i.id,"-label")},y)},getInputProps:function(y){var x;function l(pe){(i.openOnFocus||Boolean(u.getState().query))&&Ha(Fn({event:pe,props:i,query:u.getState().completion||u.getState().query,refresh:s,store:u},m)),u.dispatch("focus",null)}var T=y||{},C=(T.inputElement,T.maxLength),A=C===void 0?512:C,F=bc(T,zI),L=Za(u.getState()),K=function(pe){return Boolean(pe&&pe.match(hI))}(((x=i.environment.navigator)===null||x===void 0?void 0:x.userAgent)||""),se=L!=null&&L.itemUrl&&!K?"go":"search";return Fn({"aria-autocomplete":"both","aria-activedescendant":u.getState().isOpen&&u.getState().activeItemId!==null?"".concat(i.id,"-item-").concat(u.getState().activeItemId):void 0,"aria-controls":u.getState().isOpen?"".concat(i.id,"-list"):void 0,"aria-labelledby":"".concat(i.id,"-label"),value:u.getState().completion||u.getState().query,id:"".concat(i.id,"-input"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",enterKeyHint:se,spellCheck:"false",autoFocus:i.autoFocus,placeholder:i.placeholder,maxLength:A,type:"search",onChange:function(pe){Ha(Fn({event:pe,props:i,query:pe.currentTarget.value.slice(0,A),refresh:s,store:u},m))},onKeyDown:function(pe){(function(ye){var Y=ye.event,he=ye.props,me=ye.refresh,xe=ye.store,Ae=PI(ye,II);if(Y.key==="ArrowUp"||Y.key==="ArrowDown"){var Ge=function(){var Je=he.environment.document.getElementById("".concat(he.id,"-item-").concat(xe.getState().activeItemId));Je&&(Je.scrollIntoViewIfNeeded?Je.scrollIntoViewIfNeeded(!1):Je.scrollIntoView(!1))},We=function(){var Je=Za(xe.getState());if(xe.getState().activeItemId!==null&&Je){var Ke=Je.item,zt=Je.itemInputValue,Le=Je.itemUrl,At=Je.source;At.onActive(Fs({event:Y,item:Ke,itemInputValue:zt,itemUrl:Le,refresh:me,source:At,state:xe.getState()},Ae))}};Y.preventDefault(),xe.getState().isOpen===!1&&(he.openOnFocus||Boolean(xe.getState().query))?Ha(Fs({event:Y,props:he,query:xe.getState().query,refresh:me,store:xe},Ae)).then(function(){xe.dispatch(Y.key,{nextActiveItemId:he.defaultActiveItemId}),We(),setTimeout(Ge,0)}):(xe.dispatch(Y.key,{}),We(),Ge())}else if(Y.key==="Escape")Y.preventDefault(),xe.dispatch(Y.key,null),xe.pendingRequests.cancelAll();else if(Y.key==="Tab")xe.dispatch("blur",null),xe.pendingRequests.cancelAll();else if(Y.key==="Enter"){if(xe.getState().activeItemId===null||xe.getState().collections.every(function(Je){return Je.items.length===0}))return void(he.debug||xe.pendingRequests.cancelAll());Y.preventDefault();var _e=Za(xe.getState()),ot=_e.item,it=_e.itemInputValue,dt=_e.itemUrl,De=_e.source;if(Y.metaKey||Y.ctrlKey)dt!==void 0&&(De.onSelect(Fs({event:Y,item:ot,itemInputValue:it,itemUrl:dt,refresh:me,source:De,state:xe.getState()},Ae)),he.navigator.navigateNewTab({itemUrl:dt,item:ot,state:xe.getState()}));else if(Y.shiftKey)dt!==void 0&&(De.onSelect(Fs({event:Y,item:ot,itemInputValue:it,itemUrl:dt,refresh:me,source:De,state:xe.getState()},Ae)),he.navigator.navigateNewWindow({itemUrl:dt,item:ot,state:xe.getState()}));else if(!Y.altKey){if(dt!==void 0)return De.onSelect(Fs({event:Y,item:ot,itemInputValue:it,itemUrl:dt,refresh:me,source:De,state:xe.getState()},Ae)),void he.navigator.navigate({itemUrl:dt,item:ot,state:xe.getState()});Ha(Fs({event:Y,nextState:{isOpen:!1},props:he,query:it,refresh:me,store:xe},Ae)).then(function(){De.onSelect(Fs({event:Y,item:ot,itemInputValue:it,itemUrl:dt,refresh:me,source:De,state:xe.getState()},Ae))})}}})(Fn({event:pe,props:i,refresh:s,store:u},m))},onFocus:l,onBlur:gx,onClick:function(pe){y.inputElement!==i.environment.document.activeElement||u.getState().isOpen||l(pe)}},F)},getPanelProps:function(y){return Fn({onMouseDown:function(x){x.preventDefault()},onMouseLeave:function(){u.dispatch("mouseleave",null)}},y)},getListProps:function(y){return Fn({role:"listbox","aria-labelledby":"".concat(i.id,"-label"),id:"".concat(i.id,"-list")},y)},getItemProps:function(y){var x=y.item,l=y.source,T=bc(y,OI);return Fn({id:"".concat(i.id,"-item-").concat(x.__autocomplete_id),role:"option","aria-selected":u.getState().activeItemId===x.__autocomplete_id,onMouseMove:function(C){if(x.__autocomplete_id!==u.getState().activeItemId){u.dispatch("mousemove",x.__autocomplete_id);var A=Za(u.getState());if(u.getState().activeItemId!==null&&A){var F=A.item,L=A.itemInputValue,K=A.itemUrl,se=A.source;se.onActive(Fn({event:C,item:F,itemInputValue:L,itemUrl:K,refresh:s,source:se,state:u.getState()},m))}}},onMouseDown:function(C){C.preventDefault()},onClick:function(C){var A=l.getItemInputValue({item:x,state:u.getState()}),F=l.getItemUrl({item:x,state:u.getState()});(F?Promise.resolve():Ha(Fn({event:C,nextState:{isOpen:!1},props:i,query:A,refresh:s,store:u},m))).then(function(){l.onSelect(Fn({event:C,item:x,itemInputValue:A,itemUrl:F,refresh:s,source:l,state:u.getState()},m))})}},T)}}}function wy(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function RI(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?wy(Object(s),!0).forEach(function(u){yx(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wy(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function yx(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function BI(e){var i,s,u,m,y=e.plugins,x=e.options,l=(i=(((s=x.__autocomplete_metadata)===null||s===void 0?void 0:s.userAgents)||[])[0])===null||i===void 0?void 0:i.segment,T=l?yx({},l,Object.keys(((u=x.__autocomplete_metadata)===null||u===void 0?void 0:u.options)||{})):{};return{plugins:y.map(function(C){return{name:C.name,options:Object.keys(C.__autocomplete_pluginOptions||[])}}),options:RI({"autocomplete-core":Object.keys(x)},T),ua:lI.concat(((m=x.__autocomplete_metadata)===null||m===void 0?void 0:m.userAgents)||[])}}function Ey(e){var i,s=e.state;return s.isOpen===!1||s.activeItemId===null?null:((i=Za(s))===null||i===void 0?void 0:i.itemInputValue)||null}function Sy(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function lr(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?Sy(Object(s),!0).forEach(function(u){FI(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sy(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function FI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}var NI=function(e,i){switch(i.type){case"setActiveItemId":case"mousemove":return lr(lr({},e),{},{activeItemId:i.payload});case"setQuery":return lr(lr({},e),{},{query:i.payload,completion:null});case"setCollections":return lr(lr({},e),{},{collections:i.payload});case"setIsOpen":return lr(lr({},e),{},{isOpen:i.payload});case"setStatus":return lr(lr({},e),{},{status:i.payload});case"setContext":return lr(lr({},e),{},{context:lr(lr({},e.context),i.payload)});case"ArrowDown":var s=lr(lr({},e),{},{activeItemId:i.payload.hasOwnProperty("nextActiveItemId")?i.payload.nextActiveItemId:ly(1,e.activeItemId,Ef(e),i.props.defaultActiveItemId)});return lr(lr({},s),{},{completion:Ey({state:s})});case"ArrowUp":var u=lr(lr({},e),{},{activeItemId:ly(-1,e.activeItemId,Ef(e),i.props.defaultActiveItemId)});return lr(lr({},u),{},{completion:Ey({state:u})});case"Escape":return e.isOpen?lr(lr({},e),{},{activeItemId:null,isOpen:!1,completion:null}):lr(lr({},e),{},{activeItemId:null,query:"",status:"idle",collections:[]});case"submit":return lr(lr({},e),{},{activeItemId:null,isOpen:!1,status:"idle"});case"reset":return lr(lr({},e),{},{activeItemId:i.props.openOnFocus===!0?i.props.defaultActiveItemId:null,status:"idle",query:""});case"focus":return lr(lr({},e),{},{activeItemId:i.props.defaultActiveItemId,isOpen:(i.props.openOnFocus||Boolean(e.query))&&i.props.shouldPanelOpen({state:e})});case"blur":return i.props.debug?e:lr(lr({},e),{},{isOpen:!1,activeItemId:null});case"mouseleave":return lr(lr({},e),{},{activeItemId:i.props.defaultActiveItemId});default:return"The reducer action ".concat(JSON.stringify(i.type)," is not supported."),e}};function Ty(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function Ns(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?Ty(Object(s),!0).forEach(function(u){jI(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ty(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function jI(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function VI(e){var i=[],s=function(l,T){var C,A=typeof window!="undefined"?window:{},F=l.plugins||[];return Ba(Ba({debug:!1,openOnFocus:!1,placeholder:"",autoFocus:!1,defaultActiveItemId:null,stallThreshold:300,environment:A,shouldPanelOpen:function(L){return Ef(L.state)>0},reshape:function(L){return L.sources}},l),{},{id:(C=l.id)!==null&&C!==void 0?C:"autocomplete-".concat(aI++),plugins:F,initialState:Ba({activeItemId:null,query:"",completion:null,collections:[],isOpen:!1,status:"idle",context:{}},l.initialState),onStateChange:function(L){var K;(K=l.onStateChange)===null||K===void 0||K.call(l,L),F.forEach(function(se){var pe;return(pe=se.onStateChange)===null||pe===void 0?void 0:pe.call(se,L)})},onSubmit:function(L){var K;(K=l.onSubmit)===null||K===void 0||K.call(l,L),F.forEach(function(se){var pe;return(pe=se.onSubmit)===null||pe===void 0?void 0:pe.call(se,L)})},onReset:function(L){var K;(K=l.onReset)===null||K===void 0||K.call(l,L),F.forEach(function(se){var pe;return(pe=se.onReset)===null||pe===void 0?void 0:pe.call(se,L)})},getSources:function(L){return Promise.all([].concat(gI(F.map(function(K){return K.getSources})),[l.getSources]).filter(Boolean).map(function(K){return uI(K,L)})).then(function(K){return Kc(K)}).then(function(K){return K.map(function(se){return Ba(Ba({},se),{},{onSelect:function(pe){se.onSelect(pe),T.forEach(function(ye){var Y;return(Y=ye.onSelect)===null||Y===void 0?void 0:Y.call(ye,pe)})},onActive:function(pe){se.onActive(pe),T.forEach(function(ye){var Y;return(Y=ye.onActive)===null||Y===void 0?void 0:Y.call(ye,pe)})}})})})},navigator:Ba({navigate:function(L){var K=L.itemUrl;A.location.assign(K)},navigateNewTab:function(L){var K=L.itemUrl,se=A.open(K,"_blank","noopener");se==null||se.focus()},navigateNewWindow:function(L){var K=L.itemUrl;A.open(K,"_blank","noopener")}},l.navigator)})}(e,i),u=fI(NI,s,function(l){var T=l.prevState,C=l.state;s.onStateChange(Ns({prevState:T,state:C,refresh:x},m))}),m=function(l){var T=l.store;return{setActiveItemId:function(C){T.dispatch("setActiveItemId",C)},setQuery:function(C){T.dispatch("setQuery",C)},setCollections:function(C){var A=0,F=C.map(function(L){return dh(dh({},L),{},{items:Kc(L.items).map(function(K){return dh(dh({},K),{},{__autocomplete_id:A++})})})});T.dispatch("setCollections",F)},setIsOpen:function(C){T.dispatch("setIsOpen",C)},setStatus:function(C){T.dispatch("setStatus",C)},setContext:function(C){T.dispatch("setContext",C)}}}({store:u}),y=LI(Ns({props:s,refresh:x,store:u},m));function x(){return Ha(Ns({event:new Event("input"),nextState:{isOpen:u.getState().isOpen},props:s,query:u.getState().query,refresh:x,store:u},m))}return s.plugins.forEach(function(l){var T;return(T=l.subscribe)===null||T===void 0?void 0:T.call(l,Ns(Ns({},m),{},{refresh:x,onSelect:function(C){i.push({onSelect:C})},onActive:function(C){i.push({onActive:C})}}))}),function(l){var T,C,A=l.metadata,F=l.environment;if(!((T=F.navigator)===null||T===void 0||(C=T.userAgent)===null||C===void 0)&&C.includes("Algolia Crawler")){var L=F.document.createElement("meta"),K=F.document.querySelector("head");L.name="algolia:metadata",setTimeout(function(){L.content=JSON.stringify(A),K.appendChild(L)},0)}}({metadata:BI({plugins:s.plugins,options:e}),environment:s.environment}),Ns(Ns({refresh:x},y),m)}function UI(e){var i=e.translations,s=(i===void 0?{}:i).searchByText,u=s===void 0?"Search by":s;return le.createElement("a",{href:"https://www.algolia.com/ref/docsearch/?utm_source=".concat(window.location.hostname,"&utm_medium=referral&utm_content=powered_by&utm_campaign=docsearch"),target:"_blank",rel:"noopener noreferrer"},le.createElement("span",{className:"DocSearch-Label"},u),le.createElement("svg",{width:"77",height:"19","aria-label":"Algolia",role:"img"},le.createElement("path",{d:"M2.5067 0h14.0245c1.384.001 2.5058 1.1205 2.5068 2.5017V16.5c-.0014 1.3808-1.1232 2.4995-2.5068 2.5H2.5067C1.1232 18.9995.0014 17.8808 0 16.5V2.4958A2.495 2.495 0 01.735.7294 2.505 2.505 0 012.5068 0zM37.95 15.0695c-3.7068.0168-3.7068-2.986-3.7068-3.4634L34.2372.3576 36.498 0v11.1794c0 .2715 0 1.9889 1.452 1.994v1.8961zm-9.1666-1.8388c.694 0 1.2086-.0397 1.5678-.1088v-2.2934a5.3639 5.3639 0 00-1.3303-.1679 4.8283 4.8283 0 00-.758.0582 2.2845 2.2845 0 00-.688.2024c-.2029.0979-.371.2362-.4919.4142-.1268.1788-.185.2826-.185.5533 0 .5297.185.8359.5205 1.0375.3355.2016.7928.3053 1.365.3053v-.0008zm-.1969-8.1817c.7463 0 1.3768.092 1.8856.2767.5088.1838.9195.4428 1.2204.7717.3068.334.5147.7777.6423 1.251.1327.4723.196.991.196 1.5603v5.798c-.5235.1036-1.05.192-1.5787.2649-.7048.1037-1.4976.156-2.3774.156-.5832 0-1.1215-.0582-1.6016-.167a3.385 3.385 0 01-1.2432-.5364 2.6034 2.6034 0 01-.8037-.9565c-.191-.3922-.29-.9447-.29-1.5208 0-.5533.11-.905.3246-1.2863a2.7351 2.7351 0 01.8849-.9329c.376-.242.8029-.415 1.2948-.5187a7.4517 7.4517 0 011.5381-.156 7.1162 7.1162 0 011.6667.2024V8.886c0-.259-.0296-.5061-.093-.7372a1.5847 1.5847 0 00-.3245-.6158 1.5079 1.5079 0 00-.6119-.4158 2.6788 2.6788 0 00-.966-.173c-.5206 0-.9948.0634-1.4283.1384a6.5481 6.5481 0 00-1.065.259l-.2712-1.849c.2831-.0986.7048-.1964 1.2491-.2943a9.2979 9.2979 0 011.752-.1501v.0008zm44.6597 8.1193c.6947 0 1.2086-.0405 1.567-.1097v-2.2942a5.3743 5.3743 0 00-1.3303-.1679c-.2485 0-.503.0177-.7573.0582a2.2853 2.2853 0 00-.688.2024 1.2333 1.2333 0 00-.4918.4142c-.1268.1788-.1843.2826-.1843.5533 0 .5297.1843.8359.5198 1.0375.3414.2066.7927.3053 1.365.3053v.0009zm-.191-8.1767c.7463 0 1.3768.0912 1.8856.2759.5087.1847.9195.4436 1.2204.7717.3.329.5147.7786.6414 1.251a5.7248 5.7248 0 01.197 1.562v5.7972c-.3466.0742-.874.1602-1.5788.2648-.7049.1038-1.4976.1552-2.3774.1552-.5832 0-1.1215-.0573-1.6016-.167a3.385 3.385 0 01-1.2432-.5356 2.6034 2.6034 0 01-.8038-.9565c-.191-.3922-.2898-.9447-.2898-1.5216 0-.5533.1098-.905.3245-1.2854a2.7373 2.7373 0 01.8849-.9338c.376-.2412.8029-.4141 1.2947-.5178a7.4545 7.4545 0 012.325-.1097c.2781.0287.5672.081.879.156v-.3686a2.7781 2.7781 0 00-.092-.738 1.5788 1.5788 0 00-.3246-.6166 1.5079 1.5079 0 00-.612-.415 2.6797 2.6797 0 00-.966-.1729c-.5205 0-.9947.0633-1.4282.1384a6.5608 6.5608 0 00-1.065.259l-.2712-1.8498c.283-.0979.7048-.1957 1.2491-.2935a9.8597 9.8597 0 011.752-.1494zm-6.79-1.072c-.7576.001-1.373-.6103-1.3759-1.3664 0-.755.6128-1.3664 1.376-1.3664.764 0 1.3775.6115 1.3775 1.3664s-.6195 1.3664-1.3776 1.3664zm1.1393 11.1507h-2.2726V5.3409l2.2734-.3568v10.0845l-.0008.0017zm-3.984 0c-3.707.0168-3.707-2.986-3.707-3.4642L59.7069.3576 61.9685 0v11.1794c0 .2715 0 1.9889 1.452 1.994V15.0703zm-7.3512-4.979c0-.975-.2138-1.7873-.6305-2.3516-.4167-.571-.9998-.852-1.747-.852-.7454 0-1.3302.281-1.7452.852-.4166.5702-.6195 1.3765-.6195 2.3516 0 .9851.208 1.6473.6254 2.2183.4158.576.9998.8587 1.7461.8587.7454 0 1.3303-.2885 1.747-.8595.4158-.5761.6237-1.2315.6237-2.2184v.0009zm2.3132-.006c0 .7609-.1099 1.3361-.3356 1.9654a4.654 4.654 0 01-.9533 1.6076A4.214 4.214 0 0155.613 14.69c-.579.2412-1.4697.3795-1.9143.3795-.4462-.005-1.3303-.1324-1.9033-.3795a4.307 4.307 0 01-1.474-1.0316c-.4115-.4445-.7293-.9801-.9609-1.6076a5.3423 5.3423 0 01-.3465-1.9653c0-.7608.104-1.493.3356-2.1155a4.683 4.683 0 01.9719-1.5958 4.3383 4.3383 0 011.479-1.0257c.5739-.242 1.2043-.3567 1.8864-.3567.6829 0 1.3125.1197 1.8906.3567a4.1245 4.1245 0 011.4816 1.0257 4.7587 4.7587 0 01.9592 1.5958c.2426.6225.3643 1.3547.3643 2.1155zm-17.0198 0c0 .9448.208 1.9932.6238 2.431.4166.4386.955.6579 1.6142.6579.3584 0 .6998-.0523 1.0176-.1502.3186-.0978.5721-.2134.775-.3517V7.0784a8.8706 8.8706 0 00-1.4926-.1906c-.8206-.0236-1.4452.312-1.8847.8468-.4335.5365-.6533 1.476-.6533 2.3516v-.0008zm6.2863 4.4485c0 1.5385-.3938 2.662-1.1866 3.3773-.791.7136-2.0005 1.0712-3.6308 1.0712-.5958 0-1.834-.1156-2.8228-.334l.3643-1.7865c.8282.173 1.9202.2193 2.4932.2193.9077 0 1.555-.1847 1.943-.5533.388-.3686.578-.916.578-1.643v-.3687a6.8289 6.8289 0 01-.8848.3349c-.3634.1096-.786.167-1.261.167-.6246 0-1.1917-.0979-1.7055-.2944a3.5554 3.5554 0 01-1.3244-.8645c-.3642-.3796-.6541-.8579-.8561-1.4289-.2028-.571-.3068-1.59-.3068-2.339 0-.7034.1099-1.5856.3245-2.1735.2198-.5871.5316-1.0949.9542-1.515.4167-.42.9255-.743 1.5213-.98a5.5923 5.5923 0 012.052-.3855c.7353 0 1.4114.092 2.0707.2024.6592.1088 1.2204.2236 1.6776.35v8.945-.0008zM11.5026 4.2418v-.6511c-.0005-.4553-.3704-.8241-.8266-.8241H8.749c-.4561 0-.826.3688-.8265.824v.669c0 .0742.0693.1264.1445.1096a6.0346 6.0346 0 011.6768-.2362 6.125 6.125 0 011.6202.2185.1116.1116 0 00.1386-.1097zm-5.2806.852l-.3296-.3282a.8266.8266 0 00-1.168 0l-.393.3922a.8199.8199 0 000 1.164l.3237.323c.0524.0515.1268.0397.1733-.0117.191-.259.3989-.507.6305-.7372.2374-.2362.48-.4437.7462-.6335.0575-.0354.0634-.1155.017-.1687zm3.5159 2.069v2.818c0 .081.0879.1392.1622.0987l2.5102-1.2964c.0574-.0287.0752-.0987.0464-.1552a3.1237 3.1237 0 00-2.603-1.574c-.0575 0-.115.0456-.115.1097l-.0008-.0009zm.0008 6.789c-2.0933.0005-3.7915-1.6912-3.7947-3.7804C5.9468 8.0821 7.6452 6.39 9.7387 6.391c2.0932-.0005 3.7911 1.6914 3.794 3.7804a3.7783 3.7783 0 01-1.1124 2.675 3.7936 3.7936 0 01-2.6824 1.1054h.0008zM9.738 4.8002c-1.9218 0-3.6975 1.0232-4.6584 2.6841a5.359 5.359 0 000 5.3683c.9609 1.661 2.7366 2.6841 4.6584 2.6841a5.3891 5.3891 0 003.8073-1.5725 5.3675 5.3675 0 001.578-3.7987 5.3574 5.3574 0 00-1.5771-3.797A5.379 5.379 0 009.7387 4.801l-.0008-.0008z",fill:"currentColor",fillRule:"evenodd"})))}function gh(e){return le.createElement("svg",{width:"15",height:"15","aria-label":e.ariaLabel,role:"img"},le.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"},e.children))}function $I(e){var i=e.translations,s=i===void 0?{}:i,u=s.selectText,m=u===void 0?"to select":u,y=s.selectKeyAriaLabel,x=y===void 0?"Enter key":y,l=s.navigateText,T=l===void 0?"to navigate":l,C=s.navigateUpKeyAriaLabel,A=C===void 0?"Arrow up":C,F=s.navigateDownKeyAriaLabel,L=F===void 0?"Arrow down":F,K=s.closeText,se=K===void 0?"to close":K,pe=s.closeKeyAriaLabel,ye=pe===void 0?"Escape key":pe,Y=s.searchByText,he=Y===void 0?"Search by":Y;return le.createElement(le.Fragment,null,le.createElement("div",{className:"DocSearch-Logo"},le.createElement(UI,{translations:{searchByText:he}})),le.createElement("ul",{className:"DocSearch-Commands"},le.createElement("li",null,le.createElement("kbd",{className:"DocSearch-Commands-Key"},le.createElement(gh,{ariaLabel:x},le.createElement("path",{d:"M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"}))),le.createElement("span",{className:"DocSearch-Label"},m)),le.createElement("li",null,le.createElement("kbd",{className:"DocSearch-Commands-Key"},le.createElement(gh,{ariaLabel:L},le.createElement("path",{d:"M7.5 3.5v8M10.5 8.5l-3 3-3-3"}))),le.createElement("kbd",{className:"DocSearch-Commands-Key"},le.createElement(gh,{ariaLabel:A},le.createElement("path",{d:"M7.5 11.5v-8M10.5 6.5l-3-3-3 3"}))),le.createElement("span",{className:"DocSearch-Label"},T)),le.createElement("li",null,le.createElement("kbd",{className:"DocSearch-Commands-Key"},le.createElement(gh,{ariaLabel:ye},le.createElement("path",{d:"M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"}))),le.createElement("span",{className:"DocSearch-Label"},se))))}function qI(e){var i=e.hit,s=e.children;return le.createElement("a",{href:i.url},s)}function HI(){return le.createElement("svg",{viewBox:"0 0 38 38",stroke:"currentColor",strokeOpacity:".5"},le.createElement("g",{fill:"none",fillRule:"evenodd"},le.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},le.createElement("circle",{strokeOpacity:".3",cx:"18",cy:"18",r:"18"}),le.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},le.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))}function GI(){return le.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},le.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("path",{d:"M3.18 6.6a8.23 8.23 0 1112.93 9.94h0a8.23 8.23 0 01-11.63 0"}),le.createElement("path",{d:"M6.44 7.25H2.55V3.36M10.45 6v5.6M10.45 11.6L13 13"})))}function Sf(){return le.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},le.createElement("path",{d:"M10 10l5.09-5.09L10 10l5.09 5.09L10 10zm0 0L4.91 4.91 10 10l-5.09 5.09L10 10z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function ZI(){return le.createElement("svg",{className:"DocSearch-Hit-Select-Icon",width:"20",height:"20",viewBox:"0 0 20 20"},le.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("path",{d:"M18 3v4c0 2-2 4-4 4H2"}),le.createElement("path",{d:"M8 17l-6-6 6-6"})))}var WI=function(){return le.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},le.createElement("path",{d:"M17 6v12c0 .52-.2 1-1 1H4c-.7 0-1-.33-1-1V2c0-.55.42-1 1-1h8l5 5zM14 8h-3.13c-.51 0-.87-.34-.87-.87V4",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))};function KI(e){switch(e.type){case"lvl1":return le.createElement(WI,null);case"content":return le.createElement(JI,null);default:return le.createElement(XI,null)}}function XI(){return le.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},le.createElement("path",{d:"M13 13h4-4V8H7v5h6v4-4H7V8H3h4V3v5h6V3v5h4-4v5zm-6 0v4-4H3h4z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function JI(){return le.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},le.createElement("path",{d:"M17 5H3h14zm0 5H3h14zm0 5H3h14z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function Iy(){return le.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},le.createElement("path",{d:"M10 14.2L5 17l1-5.6-4-4 5.5-.7 2.5-5 2.5 5 5.6.8-4 4 .9 5.5z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function YI(){return le.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("path",{d:"M19 4.8a16 16 0 00-2-1.2m-3.3-1.2A16 16 0 001.1 4.7M16.7 8a12 12 0 00-2.8-1.4M10 6a12 12 0 00-6.7 2M12.3 14.7a4 4 0 00-4.5 0M14.5 11.4A8 8 0 0010 10M3 16L18 2M10 18h0"}))}function QI(){return le.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("path",{d:"M15.5 4.8c2 3 1.7 7-1 9.7h0l4.3 4.3-4.3-4.3a7.8 7.8 0 01-9.8 1m-2.2-2.2A7.8 7.8 0 0113.2 2.4M2 18L18 2"}))}function eA(e){var i=e.translations,s=i===void 0?{}:i,u=s.titleText,m=u===void 0?"Unable to fetch results":u,y=s.helpText,x=y===void 0?"You might want to check your network connection.":y;return le.createElement("div",{className:"DocSearch-ErrorScreen"},le.createElement("div",{className:"DocSearch-Screen-Icon"},le.createElement(YI,null)),le.createElement("p",{className:"DocSearch-Title"},m),le.createElement("p",{className:"DocSearch-Help"},x))}var tA=["translations"];function rA(e){return function(i){if(Array.isArray(i))return Np(i)}(e)||function(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(e)||function(i,s){if(!!i){if(typeof i=="string")return Np(i,s);var u=Object.prototype.toString.call(i).slice(8,-1);if(u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set")return Array.from(i);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return Np(i,s)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Np(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=e[s];return u}function nA(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}function iA(e){var i=e.translations,s=i===void 0?{}:i,u=nA(e,tA),m=s.noResultsText,y=m===void 0?"No results for":m,x=s.suggestedQueryText,l=x===void 0?"Try searching for":x,T=s.reportMissingResultsText,C=T===void 0?"Believe this query should return results?":T,A=s.reportMissingResultsLinkText,F=A===void 0?"Let us know.":A,L=u.state.context.searchSuggestions;return le.createElement("div",{className:"DocSearch-NoResults"},le.createElement("div",{className:"DocSearch-Screen-Icon"},le.createElement(QI,null)),le.createElement("p",{className:"DocSearch-Title"},y,' "',le.createElement("strong",null,u.state.query),'"'),L&&L.length>0&&le.createElement("div",{className:"DocSearch-NoResults-Prefill-List"},le.createElement("p",{className:"DocSearch-Help"},l,":"),le.createElement("ul",null,L.slice(0,3).reduce(function(K,se){return[].concat(rA(K),[le.createElement("li",{key:se},le.createElement("button",{className:"DocSearch-Prefill",key:se,type:"button",onClick:function(){u.setQuery(se.toLowerCase()+" "),u.refresh(),u.inputRef.current.focus()}},se))])},[]))),u.getMissingResultsUrl&&le.createElement("p",{className:"DocSearch-Help"},"".concat(C," "),le.createElement("a",{href:u.getMissingResultsUrl({query:u.state.query}),target:"_blank",rel:"noopener noreferrer"},F)))}var oA=["hit","attribute","tagName"];function Ay(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function Py(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?Ay(Object(s),!0).forEach(function(u){sA(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ay(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function sA(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function aA(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}function Cy(e,i){return i.split(".").reduce(function(s,u){return s!=null&&s[u]?s[u]:null},e)}function Fa(e){var i=e.hit,s=e.attribute,u=e.tagName;return Wi(u===void 0?"span":u,Py(Py({},aA(e,oA)),{},{dangerouslySetInnerHTML:{__html:Cy(i,"_snippetResult.".concat(s,".value"))||Cy(i,s)}}))}function ky(e,i){return function(s){if(Array.isArray(s))return s}(e)||function(s,u){var m=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(m!=null){var y,x,l=[],T=!0,C=!1;try{for(m=m.call(s);!(T=(y=m.next()).done)&&(l.push(y.value),!u||l.length!==u);T=!0);}catch(A){C=!0,x=A}finally{try{T||m.return==null||m.return()}finally{if(C)throw x}}return l}}(e,i)||function(s,u){if(!!s){if(typeof s=="string")return Dy(s,u);var m=Object.prototype.toString.call(s).slice(8,-1);if(m==="Object"&&s.constructor&&(m=s.constructor.name),m==="Map"||m==="Set")return Array.from(s);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Dy(s,u)}}(e,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dy(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=e[s];return u}function qh(){return qh=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},qh.apply(this,arguments)}function Tf(e){return e.collection&&e.collection.items.length!==0?le.createElement("section",{className:"DocSearch-Hits"},le.createElement("div",{className:"DocSearch-Hit-source"},e.title),le.createElement("ul",e.getListProps(),e.collection.items.map(function(i,s){return le.createElement(lA,qh({key:[e.title,i.objectID].join(":"),item:i,index:s},e))}))):null}function lA(e){var i=e.item,s=e.index,u=e.renderIcon,m=e.renderAction,y=e.getItemProps,x=e.onItemClick,l=e.collection,T=e.hitComponent,C=ky(le.useState(!1),2),A=C[0],F=C[1],L=ky(le.useState(!1),2),K=L[0],se=L[1],pe=le.useRef(null),ye=T;return le.createElement("li",qh({className:["DocSearch-Hit",i.__docsearch_parent&&"DocSearch-Hit--Child",A&&"DocSearch-Hit--deleting",K&&"DocSearch-Hit--favoriting"].filter(Boolean).join(" "),onTransitionEnd:function(){pe.current&&pe.current()}},y({item:i,source:l.source,onClick:function(){x(i)}})),le.createElement(ye,{hit:i},le.createElement("div",{className:"DocSearch-Hit-Container"},u({item:i,index:s}),i.hierarchy[i.type]&&i.type==="lvl1"&&le.createElement("div",{className:"DocSearch-Hit-content-wrapper"},le.createElement(Fa,{className:"DocSearch-Hit-title",hit:i,attribute:"hierarchy.lvl1"}),i.content&&le.createElement(Fa,{className:"DocSearch-Hit-path",hit:i,attribute:"content"})),i.hierarchy[i.type]&&(i.type==="lvl2"||i.type==="lvl3"||i.type==="lvl4"||i.type==="lvl5"||i.type==="lvl6")&&le.createElement("div",{className:"DocSearch-Hit-content-wrapper"},le.createElement(Fa,{className:"DocSearch-Hit-title",hit:i,attribute:"hierarchy.".concat(i.type)}),le.createElement(Fa,{className:"DocSearch-Hit-path",hit:i,attribute:"hierarchy.lvl1"})),i.type==="content"&&le.createElement("div",{className:"DocSearch-Hit-content-wrapper"},le.createElement(Fa,{className:"DocSearch-Hit-title",hit:i,attribute:"content"}),le.createElement(Fa,{className:"DocSearch-Hit-path",hit:i,attribute:"hierarchy.lvl1"})),m({item:i,runDeleteTransition:function(Y){F(!0),pe.current=Y},runFavoriteTransition:function(Y){se(!0),pe.current=Y}}))))}function zy(e,i){return e.reduce(function(s,u){var m=i(u);return s.hasOwnProperty(m)||(s[m]=[]),s[m].length<5&&s[m].push(u),s},{})}function Oy(e){return e}function cA(){}var vx=/(<mark>|<\/mark>)/g,uA=RegExp(vx.source);function xx(e){var i,s,u,m,y,x=e;if(!x.__docsearch_parent&&!e._highlightResult)return e.hierarchy.lvl0;var l=((x.__docsearch_parent?(i=x.__docsearch_parent)===null||i===void 0||(s=i._highlightResult)===null||s===void 0||(u=s.hierarchy)===null||u===void 0?void 0:u.lvl0:(m=e._highlightResult)===null||m===void 0||(y=m.hierarchy)===null||y===void 0?void 0:y.lvl0)||{}).value;return l&&uA.test(l)?l.replace(vx,""):l}function If(){return If=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},If.apply(this,arguments)}function hA(e){return le.createElement("div",{className:"DocSearch-Dropdown-Container"},e.state.collections.map(function(i){if(i.items.length===0)return null;var s=xx(i.items[0]);return le.createElement(Tf,If({},e,{key:i.source.sourceId,title:s,collection:i,renderIcon:function(u){var m,y=u.item,x=u.index;return le.createElement(le.Fragment,null,y.__docsearch_parent&&le.createElement("svg",{className:"DocSearch-Hit-Tree",viewBox:"0 0 24 54"},le.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},y.__docsearch_parent!==((m=i.items[x+1])===null||m===void 0?void 0:m.__docsearch_parent)?le.createElement("path",{d:"M8 6v21M20 27H8.3"}):le.createElement("path",{d:"M8 6v42M20 27H8.3"}))),le.createElement("div",{className:"DocSearch-Hit-icon"},le.createElement(KI,{type:y.type})))},renderAction:function(){return le.createElement("div",{className:"DocSearch-Hit-action"},le.createElement(ZI,null))}}))}),e.resultsFooterComponent&&le.createElement("section",{className:"DocSearch-HitsFooter"},le.createElement(e.resultsFooterComponent,{state:e.state})))}var dA=["translations"];function Hh(){return Hh=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},Hh.apply(this,arguments)}function pA(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}function fA(e){var i=e.translations,s=i===void 0?{}:i,u=pA(e,dA),m=s.recentSearchesTitle,y=m===void 0?"Recent":m,x=s.noRecentSearchesText,l=x===void 0?"No recent searches":x,T=s.saveRecentSearchButtonTitle,C=T===void 0?"Save this search":T,A=s.removeRecentSearchButtonTitle,F=A===void 0?"Remove this search from history":A,L=s.favoriteSearchesTitle,K=L===void 0?"Favorite":L,se=s.removeFavoriteSearchButtonTitle,pe=se===void 0?"Remove this search from favorites":se;return u.state.status==="idle"&&u.hasCollections===!1?u.disableUserPersonalization?null:le.createElement("div",{className:"DocSearch-StartScreen"},le.createElement("p",{className:"DocSearch-Help"},l)):u.hasCollections===!1?null:le.createElement("div",{className:"DocSearch-Dropdown-Container"},le.createElement(Tf,Hh({},u,{title:y,collection:u.state.collections[0],renderIcon:function(){return le.createElement("div",{className:"DocSearch-Hit-icon"},le.createElement(GI,null))},renderAction:function(ye){var Y=ye.item,he=ye.runFavoriteTransition,me=ye.runDeleteTransition;return le.createElement(le.Fragment,null,le.createElement("div",{className:"DocSearch-Hit-action"},le.createElement("button",{className:"DocSearch-Hit-action-button",title:C,type:"submit",onClick:function(xe){xe.preventDefault(),xe.stopPropagation(),he(function(){u.favoriteSearches.add(Y),u.recentSearches.remove(Y),u.refresh()})}},le.createElement(Iy,null))),le.createElement("div",{className:"DocSearch-Hit-action"},le.createElement("button",{className:"DocSearch-Hit-action-button",title:F,type:"submit",onClick:function(xe){xe.preventDefault(),xe.stopPropagation(),me(function(){u.recentSearches.remove(Y),u.refresh()})}},le.createElement(Sf,null))))}})),le.createElement(Tf,Hh({},u,{title:K,collection:u.state.collections[1],renderIcon:function(){return le.createElement("div",{className:"DocSearch-Hit-icon"},le.createElement(Iy,null))},renderAction:function(ye){var Y=ye.item,he=ye.runDeleteTransition;return le.createElement("div",{className:"DocSearch-Hit-action"},le.createElement("button",{className:"DocSearch-Hit-action-button",title:pe,type:"submit",onClick:function(me){me.preventDefault(),me.stopPropagation(),he(function(){u.favoriteSearches.remove(Y),u.refresh()})}},le.createElement(Sf,null)))}})))}var mA=["translations"];function Gh(){return Gh=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},Gh.apply(this,arguments)}function gA(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}var _A=le.memo(function(e){var i=e.translations,s=i===void 0?{}:i,u=gA(e,mA);if(u.state.status==="error")return le.createElement(eA,{translations:s==null?void 0:s.errorScreen});var m=u.state.collections.some(function(y){return y.items.length>0});return u.state.query?m===!1?le.createElement(iA,Gh({},u,{translations:s==null?void 0:s.noResultsScreen})):le.createElement(hA,u):le.createElement(fA,Gh({},u,{hasCollections:m,translations:s==null?void 0:s.startScreen}))},function(e,i){return i.state.status==="loading"||i.state.status==="stalled"}),yA=["translations"];function Zh(){return Zh=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},Zh.apply(this,arguments)}function vA(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}function xA(e){var i=e.translations,s=i===void 0?{}:i,u=vA(e,yA),m=s.resetButtonTitle,y=m===void 0?"Clear the query":m,x=s.resetButtonAriaLabel,l=x===void 0?"Clear the query":x,T=s.cancelButtonText,C=T===void 0?"Cancel":T,A=s.cancelButtonAriaLabel,F=A===void 0?"Cancel":A,L=u.getFormProps({inputElement:u.inputRef.current}).onReset;return le.useEffect(function(){u.autoFocus&&u.inputRef.current&&u.inputRef.current.focus()},[u.autoFocus,u.inputRef]),le.useEffect(function(){u.isFromSelection&&u.inputRef.current&&u.inputRef.current.select()},[u.isFromSelection,u.inputRef]),le.createElement(le.Fragment,null,le.createElement("form",{className:"DocSearch-Form",onSubmit:function(K){K.preventDefault()},onReset:L},le.createElement("label",Zh({className:"DocSearch-MagnifierLabel"},u.getLabelProps()),le.createElement(mx,null)),le.createElement("div",{className:"DocSearch-LoadingIndicator"},le.createElement(HI,null)),le.createElement("input",Zh({className:"DocSearch-Input",ref:u.inputRef},u.getInputProps({inputElement:u.inputRef.current,autoFocus:u.autoFocus,maxLength:64}))),le.createElement("button",{type:"reset",title:y,className:"DocSearch-Reset","aria-label":l,hidden:!u.state.query},le.createElement(Sf,null))),le.createElement("button",{className:"DocSearch-Cancel",type:"reset","aria-label":F,onClick:u.onClose},C))}var bA=["_highlightResult","_snippetResult"];function wA(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}function EA(e){return function(){var i="__TEST_KEY__";try{return localStorage.setItem(i,""),localStorage.removeItem(i),!0}catch{return!1}}()===!1?{setItem:function(){},getItem:function(){return[]}}:{setItem:function(i){return window.localStorage.setItem(e,JSON.stringify(i))},getItem:function(){var i=window.localStorage.getItem(e);return i?JSON.parse(i):[]}}}function My(e){var i=e.key,s=e.limit,u=s===void 0?5:s,m=EA(i),y=m.getItem().slice(0,u);return{add:function(x){var l=x,T=(l._highlightResult,l._snippetResult,wA(l,bA)),C=y.findIndex(function(A){return A.objectID===T.objectID});C>-1&&y.splice(C,1),y.unshift(T),y=y.slice(0,u),m.setItem(y)},remove:function(x){y=y.filter(function(l){return l.objectID!==x.objectID}),m.setItem(y)},getAll:function(){return y}}}var SA=["facetName","facetQuery"];function TA(e){var i,s="algoliasearch-client-js-".concat(e.key),u=function(){return i===void 0&&(i=e.localStorage||window.localStorage),i},m=function(){return JSON.parse(u().getItem(s)||"{}")};return{get:function(y,x){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){var T=JSON.stringify(y),C=m()[T];return Promise.all([C||x(),C!==void 0])}).then(function(T){var C=jh(T,2),A=C[0],F=C[1];return Promise.all([A,F||l.miss(A)])}).then(function(T){return jh(T,1)[0]})},set:function(y,x){return Promise.resolve().then(function(){var l=m();return l[JSON.stringify(y)]=x,u().setItem(s,JSON.stringify(l)),x})},delete:function(y){return Promise.resolve().then(function(){var x=m();delete x[JSON.stringify(y)],u().setItem(s,JSON.stringify(x))})},clear:function(){return Promise.resolve().then(function(){u().removeItem(s)})}}}function Ac(e){var i=Vh(e.caches),s=i.shift();return s===void 0?{get:function(u,m){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return m().then(function(x){return Promise.all([x,y.miss(x)])}).then(function(x){return jh(x,1)[0]})},set:function(u,m){return Promise.resolve(m)},delete:function(u){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(u,m){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return s.get(u,m,y).catch(function(){return Ac({caches:i}).get(u,m,y)})},set:function(u,m){return s.set(u,m).catch(function(){return Ac({caches:i}).set(u,m)})},delete:function(u){return s.delete(u).catch(function(){return Ac({caches:i}).delete(u)})},clear:function(){return s.clear().catch(function(){return Ac({caches:i}).clear()})}}}function jp(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},i={};return{get:function(s,u){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},y=JSON.stringify(s);if(y in i)return Promise.resolve(e.serializable?JSON.parse(i[y]):i[y]);var x=u(),l=m&&m.miss||function(){return Promise.resolve()};return x.then(function(T){return l(T)}).then(function(){return x})},set:function(s,u){return i[JSON.stringify(s)]=e.serializable?JSON.stringify(u):u,Promise.resolve(u)},delete:function(s){return delete i[JSON.stringify(s)],Promise.resolve()},clear:function(){return i={},Promise.resolve()}}}function IA(e){for(var i=e.length-1;i>0;i--){var s=Math.floor(Math.random()*(i+1)),u=e[i];e[i]=e[s],e[s]=u}return e}function bx(e,i){return i&&Object.keys(i).forEach(function(s){e[s]=i[s](e)}),e}function hd(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];var m=0;return e.replace(/%s/g,function(){return encodeURIComponent(s[m++])})}var Th={WithinQueryParameters:0,WithinHeaders:1};function Ly(e,i){var s=e||{},u=s.data||{};return Object.keys(s).forEach(function(m){["timeout","headers","queryParameters","data","cacheable"].indexOf(m)===-1&&(u[m]=s[m])}),{data:Object.entries(u).length>0?u:void 0,timeout:s.timeout||i,headers:s.headers||{},queryParameters:s.queryParameters||{},cacheable:s.cacheable}}var Wa={Read:1,Write:2,Any:3},wx=1,AA=2,Ex=3;function Sx(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wx;return wr(wr({},e),{},{status:i,lastUpdate:Date.now()})}function Tx(e){return typeof e=="string"?{protocol:"https",url:e,accept:Wa.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||Wa.Any}}var Ry="GET",dd="POST";function PA(e,i){return Promise.all(i.map(function(s){return e.get(s,function(){return Promise.resolve(Sx(s))})})).then(function(s){var u=s.filter(function(x){return function(l){return l.status===wx||Date.now()-l.lastUpdate>12e4}(x)}),m=s.filter(function(x){return function(l){return l.status===Ex&&Date.now()-l.lastUpdate<=12e4}(x)}),y=[].concat(Vh(u),Vh(m));return{getTimeout:function(x,l){return(m.length===0&&x===0?1:m.length+3+x)*l},statelessHosts:y.length>0?y.map(function(x){return Tx(x)}):i}})}function By(e,i,s,u){var m=[],y=function(L,K){if(!(L.method===Ry||L.data===void 0&&K.data===void 0)){var se=Array.isArray(L.data)?L.data:wr(wr({},L.data),K.data);return JSON.stringify(se)}}(s,u),x=function(L,K){var se=wr(wr({},L.headers),K.headers),pe={};return Object.keys(se).forEach(function(ye){var Y=se[ye];pe[ye.toLowerCase()]=Y}),pe}(e,u),l=s.method,T=s.method!==Ry?{}:wr(wr({},s.data),u.data),C=wr(wr(wr({"x-algolia-agent":e.userAgent.value},e.queryParameters),T),u.queryParameters),A=0,F=function L(K,se){var pe=K.pop();if(pe===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:Fy(m)};var ye={data:y,headers:x,method:l,url:kA(pe,s.path,C),connectTimeout:se(A,e.timeouts.connect),responseTimeout:se(A,u.timeout)},Y=function(me){var xe={request:ye,response:me,host:pe,triesLeft:K.length};return m.push(xe),xe},he={onSucess:function(me){return function(xe){try{return JSON.parse(xe.content)}catch(Ae){throw function(Ge,We){return{name:"DeserializationError",message:Ge,response:We}}(Ae.message,xe)}}(me)},onRetry:function(me){var xe=Y(me);return me.isTimedOut&&A++,Promise.all([e.logger.info("Retryable failure",Ax(xe)),e.hostsCache.set(pe,Sx(pe,me.isTimedOut?Ex:AA))]).then(function(){return L(K,se)})},onFail:function(me){throw Y(me),function(xe,Ae){var Ge=xe.content,We=xe.status,_e=Ge;try{_e=JSON.parse(Ge).message}catch{}return function(ot,it,dt){return{name:"ApiError",message:ot,status:it,transporterStackTrace:dt}}(_e,We,Ae)}(me,Fy(m))}};return e.requester.send(ye).then(function(me){return function(xe,Ae){return function(Ge){var We=Ge.status;return Ge.isTimedOut||function(_e){var ot=_e.isTimedOut,it=_e.status;return!ot&&~~it==0}(Ge)||~~(We/100)!=2&&~~(We/100)!=4}(xe)?Ae.onRetry(xe):~~(xe.status/100)==2?Ae.onSucess(xe):Ae.onFail(xe)}(me,he)})};return PA(e.hostsCache,i).then(function(L){return F(Vh(L.statelessHosts).reverse(),L.getTimeout)})}function CA(e){var i={value:"Algolia for JavaScript (".concat(e,")"),add:function(s){var u="; ".concat(s.segment).concat(s.version!==void 0?" (".concat(s.version,")"):"");return i.value.indexOf(u)===-1&&(i.value="".concat(i.value).concat(u)),i}};return i}function kA(e,i,s){var u=Ix(s),m="".concat(e.protocol,"://").concat(e.url,"/").concat(i.charAt(0)==="/"?i.substr(1):i);return u.length&&(m+="?".concat(u)),m}function Ix(e){return Object.keys(e).map(function(i){return hd("%s=%s",i,(s=e[i],Object.prototype.toString.call(s)==="[object Object]"||Object.prototype.toString.call(s)==="[object Array]"?JSON.stringify(e[i]):e[i]));var s}).join("&")}function Fy(e){return e.map(function(i){return Ax(i)})}function Ax(e){var i=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return wr(wr({},e),{},{request:wr(wr({},e.request),{},{headers:wr(wr({},e.request.headers),i)})})}var DA=function(e){var i=e.appId,s=function(y,x,l){var T={"x-algolia-api-key":l,"x-algolia-application-id":x};return{headers:function(){return y===Th.WithinHeaders?T:{}},queryParameters:function(){return y===Th.WithinQueryParameters?T:{}}}}(e.authMode!==void 0?e.authMode:Th.WithinHeaders,i,e.apiKey),u=function(y){var x=y.hostsCache,l=y.logger,T=y.requester,C=y.requestsCache,A=y.responsesCache,F=y.timeouts,L=y.userAgent,K=y.hosts,se=y.queryParameters,pe={hostsCache:x,logger:l,requester:T,requestsCache:C,responsesCache:A,timeouts:F,userAgent:L,headers:y.headers,queryParameters:se,hosts:K.map(function(ye){return Tx(ye)}),read:function(ye,Y){var he=Ly(Y,pe.timeouts.read),me=function(){return By(pe,pe.hosts.filter(function(Ae){return(Ae.accept&Wa.Read)!=0}),ye,he)};if((he.cacheable!==void 0?he.cacheable:ye.cacheable)!==!0)return me();var xe={request:ye,mappedRequestOptions:he,transporter:{queryParameters:pe.queryParameters,headers:pe.headers}};return pe.responsesCache.get(xe,function(){return pe.requestsCache.get(xe,function(){return pe.requestsCache.set(xe,me()).then(function(Ae){return Promise.all([pe.requestsCache.delete(xe),Ae])},function(Ae){return Promise.all([pe.requestsCache.delete(xe),Promise.reject(Ae)])}).then(function(Ae){var Ge=jh(Ae,2);return Ge[0],Ge[1]})})},{miss:function(Ae){return pe.responsesCache.set(xe,Ae)}})},write:function(ye,Y){return By(pe,pe.hosts.filter(function(he){return(he.accept&Wa.Write)!=0}),ye,Ly(Y,pe.timeouts.write))}};return pe}(wr(wr({hosts:[{url:"".concat(i,"-dsn.algolia.net"),accept:Wa.Read},{url:"".concat(i,".algolia.net"),accept:Wa.Write}].concat(IA([{url:"".concat(i,"-1.algolianet.com")},{url:"".concat(i,"-2.algolianet.com")},{url:"".concat(i,"-3.algolianet.com")}]))},e),{},{headers:wr(wr(wr({},s.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:wr(wr({},s.queryParameters()),e.queryParameters)})),m={transporter:u,appId:i,addAlgoliaAgent:function(y,x){u.userAgent.add({segment:y,version:x})},clearCache:function(){return Promise.all([u.requestsCache.clear(),u.responsesCache.clear()]).then(function(){})}};return bx(m,e.methods)},Px=function(e){return function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={transporter:e.transporter,appId:e.appId,indexName:i};return bx(u,s.methods)}},Ny=function(e){return function(i,s){var u=i.map(function(m){return wr(wr({},m),{},{params:Ix(m.params||{})})});return e.transporter.read({method:dd,path:"1/indexes/*/queries",data:{requests:u},cacheable:!0},s)}},jy=function(e){return function(i,s){return Promise.all(i.map(function(u){var m=u.params,y=m.facetName,x=m.facetQuery,l=NT(m,SA);return Px(e)(u.indexName,{methods:{searchForFacetValues:Cx}}).searchForFacetValues(y,x,wr(wr({},s),l))}))}},zA=function(e){return function(i,s,u){return e.transporter.read({method:dd,path:hd("1/answers/%s/prediction",e.indexName),data:{query:i,queryLanguages:s},cacheable:!0},u)}},OA=function(e){return function(i,s){return e.transporter.read({method:dd,path:hd("1/indexes/%s/query",e.indexName),data:{query:i},cacheable:!0},s)}},Cx=function(e){return function(i,s,u){return e.transporter.read({method:dd,path:hd("1/indexes/%s/facets/%s/query",e.indexName,i),data:{facetQuery:s},cacheable:!0},u)}},MA=1,LA=2,RA=3;function kx(e,i,s){var u,m={appId:e,apiKey:i,timeouts:{connect:1,read:2,write:30},requester:{send:function(y){return new Promise(function(x){var l=new XMLHttpRequest;l.open(y.method,y.url,!0),Object.keys(y.headers).forEach(function(F){return l.setRequestHeader(F,y.headers[F])});var T,C=function(F,L){return setTimeout(function(){l.abort(),x({status:0,content:L,isTimedOut:!0})},1e3*F)},A=C(y.connectTimeout,"Connection timeout");l.onreadystatechange=function(){l.readyState>l.OPENED&&T===void 0&&(clearTimeout(A),T=C(y.responseTimeout,"Socket timeout"))},l.onerror=function(){l.status===0&&(clearTimeout(A),clearTimeout(T),x({content:l.responseText||"Network request failed",status:l.status,isTimedOut:!1}))},l.onload=function(){clearTimeout(A),clearTimeout(T),x({content:l.responseText,status:l.status,isTimedOut:!1})},l.send(y.data)})}},logger:(u=RA,{debug:function(y,x){return MA>=u&&console.debug(y,x),Promise.resolve()},info:function(y,x){return LA>=u&&console.info(y,x),Promise.resolve()},error:function(y,x){return console.error(y,x),Promise.resolve()}}),responsesCache:jp(),requestsCache:jp({serializable:!1}),hostsCache:Ac({caches:[TA({key:"".concat("4.8.5","-").concat(e)}),jp()]}),userAgent:CA("4.8.5").add({segment:"Browser",version:"lite"}),authMode:Th.WithinQueryParameters};return DA(wr(wr(wr({},m),s),{},{methods:{search:Ny,searchForFacetValues:jy,multipleQueries:Ny,multipleSearchForFacetValues:jy,initIndex:function(y){return function(x){return Px(y)(x,{methods:{search:OA,searchForFacetValues:Cx,findAnswers:zA}})}}}}))}kx.version="4.8.5";var BA=["footer","searchBox"];function Bc(){return Bc=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},Bc.apply(this,arguments)}function Vy(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function Vp(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?Vy(Object(s),!0).forEach(function(u){FA(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Vy(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function FA(e,i,s){return i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function NA(e,i){return function(s){if(Array.isArray(s))return s}(e)||function(s,u){var m=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(m!=null){var y,x,l=[],T=!0,C=!1;try{for(m=m.call(s);!(T=(y=m.next()).done)&&(l.push(y.value),!u||l.length!==u);T=!0);}catch(A){C=!0,x=A}finally{try{T||m.return==null||m.return()}finally{if(C)throw x}}return l}}(e,i)||function(s,u){if(!!s){if(typeof s=="string")return Uy(s,u);var m=Object.prototype.toString.call(s).slice(8,-1);if(m==="Object"&&s.constructor&&(m=s.constructor.name),m==="Map"||m==="Set")return Array.from(s);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Uy(s,u)}}(e,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Uy(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=e[s];return u}function jA(e,i){if(e==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(e,i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(u=0;u<y.length;u++)s=y[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}function VA(e){var i=e.appId,s=e.apiKey,u=e.indexName,m=e.placeholder,y=m===void 0?"Search docs":m,x=e.searchParameters,l=e.onClose,T=l===void 0?cA:l,C=e.transformItems,A=C===void 0?Oy:C,F=e.hitComponent,L=F===void 0?qI:F,K=e.resultsFooterComponent,se=K===void 0?function(){return null}:K,pe=e.navigator,ye=e.initialScrollY,Y=ye===void 0?0:ye,he=e.transformSearchClient,me=he===void 0?Oy:he,xe=e.disableUserPersonalization,Ae=xe!==void 0&&xe,Ge=e.initialQuery,We=Ge===void 0?"":Ge,_e=e.translations,ot=_e===void 0?{}:_e,it=e.getMissingResultsUrl,dt=ot.footer,De=ot.searchBox,Je=jA(ot,BA),Ke=NA(le.useState({query:"",collections:[],completion:null,context:{},isOpen:!1,activeItemId:null,status:"idle"}),2),zt=Ke[0],Le=Ke[1],At=le.useRef(null),Ot=le.useRef(null),dr=le.useRef(null),pr=le.useRef(null),Ir=le.useRef(null),vr=le.useRef(10),Ar=le.useRef(typeof window!="undefined"?window.getSelection().toString().slice(0,64):"").current,Fr=le.useRef(We||Ar).current,Fe=function(W,ne,be){return le.useMemo(function(){var Me=kx(W,ne);return Me.addAlgoliaAgent("docsearch","3.1.1"),/docsearch.js \(.*\)/.test(Me.transporter.userAgent.value)===!1&&Me.addAlgoliaAgent("docsearch-react","3.1.1"),be(Me)},[W,ne,be])}(i,s,me),lt=le.useRef(My({key:"__DOCSEARCH_FAVORITE_SEARCHES__".concat(u),limit:10})).current,Ye=le.useRef(My({key:"__DOCSEARCH_RECENT_SEARCHES__".concat(u),limit:lt.getAll().length===0?7:4})).current,ft=le.useCallback(function(W){if(!Ae){var ne=W.type==="content"?W.__docsearch_parent:W;ne&&lt.getAll().findIndex(function(be){return be.objectID===ne.objectID})===-1&&Ye.add(ne)}},[lt,Ye,Ae]),Zt=le.useMemo(function(){return VI({id:"docsearch",defaultActiveItemId:0,placeholder:y,openOnFocus:!0,initialState:{query:Fr,context:{searchSuggestions:[]}},navigator:pe,onStateChange:function(W){Le(W.state)},getSources:function(W){var ne=W.query,be=W.state,Me=W.setContext,Re=W.setStatus;return ne?Fe.search([{query:ne,indexName:u,params:Vp({attributesToRetrieve:["hierarchy.lvl0","hierarchy.lvl1","hierarchy.lvl2","hierarchy.lvl3","hierarchy.lvl4","hierarchy.lvl5","hierarchy.lvl6","content","type","url"],attributesToSnippet:["hierarchy.lvl1:".concat(vr.current),"hierarchy.lvl2:".concat(vr.current),"hierarchy.lvl3:".concat(vr.current),"hierarchy.lvl4:".concat(vr.current),"hierarchy.lvl5:".concat(vr.current),"hierarchy.lvl6:".concat(vr.current),"content:".concat(vr.current)],snippetEllipsisText:"\u2026",highlightPreTag:"<mark>",highlightPostTag:"</mark>",hitsPerPage:20},x)}]).catch(function(Ve){throw Ve.name==="RetryError"&&Re("error"),Ve}).then(function(Ve){var Qe=Ve.results[0],$e=Qe.hits,tt=Qe.nbHits,He=zy($e,function(et){return xx(et)});return be.context.searchSuggestions.length<Object.keys(He).length&&Me({searchSuggestions:Object.keys(He)}),Me({nbHits:tt}),Object.values(He).map(function(et,bt){return{sourceId:"hits".concat(bt),onSelect:function(yt){var Pt=yt.item,Vt=yt.event;ft(Pt),Vt.shiftKey||Vt.ctrlKey||Vt.metaKey||T()},getItemUrl:function(yt){return yt.item.url},getItems:function(){return Object.values(zy(et,function(yt){return yt.hierarchy.lvl1})).map(A).map(function(yt){return yt.map(function(Pt){return Vp(Vp({},Pt),{},{__docsearch_parent:Pt.type!=="lvl1"&&yt.find(function(Vt){return Vt.type==="lvl1"&&Vt.hierarchy.lvl1===Pt.hierarchy.lvl1})})})}).flat()}}})}):Ae?[]:[{sourceId:"recentSearches",onSelect:function(Ve){var Qe=Ve.item,$e=Ve.event;ft(Qe),$e.shiftKey||$e.ctrlKey||$e.metaKey||T()},getItemUrl:function(Ve){return Ve.item.url},getItems:function(){return Ye.getAll()}},{sourceId:"favoriteSearches",onSelect:function(Ve){var Qe=Ve.item,$e=Ve.event;ft(Qe),$e.shiftKey||$e.ctrlKey||$e.metaKey||T()},getItemUrl:function(Ve){return Ve.item.url},getItems:function(){return lt.getAll()}}]}})},[u,x,Fe,T,Ye,lt,ft,Fr,y,pe,A,Ae]),nr=Zt.getEnvironmentProps,Bt=Zt.getRootProps,Lt=Zt.refresh;return function(W){var ne=W.getEnvironmentProps,be=W.panelElement,Me=W.formElement,Re=W.inputElement;le.useEffect(function(){if(be&&Me&&Re){var Ve=ne({panelElement:be,formElement:Me,inputElement:Re}),Qe=Ve.onTouchStart,$e=Ve.onTouchMove;return window.addEventListener("touchstart",Qe),window.addEventListener("touchmove",$e),function(){window.removeEventListener("touchstart",Qe),window.removeEventListener("touchmove",$e)}}},[ne,be,Me,Re])}({getEnvironmentProps:nr,panelElement:pr.current,formElement:dr.current,inputElement:Ir.current}),function(W){var ne=W.container;le.useEffect(function(){if(ne){var be=ne.querySelectorAll("a[href]:not([disabled]), button:not([disabled]), input:not([disabled])"),Me=be[0],Re=be[be.length-1];return ne.addEventListener("keydown",Ve),function(){ne.removeEventListener("keydown",Ve)}}function Ve(Qe){Qe.key==="Tab"&&(Qe.shiftKey?document.activeElement===Me&&(Qe.preventDefault(),Re.focus()):document.activeElement===Re&&(Qe.preventDefault(),Me.focus()))}},[ne])}({container:At.current}),le.useEffect(function(){return document.body.classList.add("DocSearch--active"),function(){var W,ne;document.body.classList.remove("DocSearch--active"),(W=(ne=window).scrollTo)===null||W===void 0||W.call(ne,0,Y)}},[]),le.useEffect(function(){window.matchMedia("(max-width: 750px)").matches&&(vr.current=5)},[]),le.useEffect(function(){pr.current&&(pr.current.scrollTop=0)},[zt.query]),le.useEffect(function(){Fr.length>0&&(Lt(),Ir.current&&Ir.current.focus())},[Fr,Lt]),le.useEffect(function(){function W(){if(Ot.current){var ne=.01*window.innerHeight;Ot.current.style.setProperty("--docsearch-vh","".concat(ne,"px"))}}return W(),window.addEventListener("resize",W),function(){window.removeEventListener("resize",W)}},[]),le.createElement("div",Bc({ref:At},Bt({"aria-expanded":!0}),{className:["DocSearch","DocSearch-Container",zt.status==="stalled"&&"DocSearch-Container--Stalled",zt.status==="error"&&"DocSearch-Container--Errored"].filter(Boolean).join(" "),role:"button",tabIndex:0,onMouseDown:function(W){W.target===W.currentTarget&&T()}}),le.createElement("div",{className:"DocSearch-Modal",ref:Ot},le.createElement("header",{className:"DocSearch-SearchBar",ref:dr},le.createElement(xA,Bc({},Zt,{state:zt,autoFocus:Fr.length===0,inputRef:Ir,isFromSelection:Boolean(Fr)&&Fr===Ar,translations:De,onClose:T}))),le.createElement("div",{className:"DocSearch-Dropdown",ref:pr},le.createElement(_A,Bc({},Zt,{indexName:u,state:zt,hitComponent:L,resultsFooterComponent:se,disableUserPersonalization:Ae,recentSearches:Ye,favoriteSearches:lt,inputRef:Ir,translations:Je,getMissingResultsUrl:it,onItemClick:function(W){ft(W),T()}}))),le.createElement("footer",{className:"DocSearch-Footer"},le.createElement($I,{translations:dt}))))}function Af(){return Af=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},Af.apply(this,arguments)}function $y(e,i){return function(s){if(Array.isArray(s))return s}(e)||function(s,u){var m=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(m!=null){var y,x,l=[],T=!0,C=!1;try{for(m=m.call(s);!(T=(y=m.next()).done)&&(l.push(y.value),!u||l.length!==u);T=!0);}catch(A){C=!0,x=A}finally{try{T||m.return==null||m.return()}finally{if(C)throw x}}return l}}(e,i)||function(s,u){if(!!s){if(typeof s=="string")return qy(s,u);var m=Object.prototype.toString.call(s).slice(8,-1);if(m==="Object"&&s.constructor&&(m=s.constructor.name),m==="Map"||m==="Set")return Array.from(s);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return qy(s,u)}}(e,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qy(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=e[s];return u}function UA(e){var i,s,u=le.useRef(null),m=$y(le.useState(!1),2),y=m[0],x=m[1],l=$y(le.useState((e==null?void 0:e.initialQuery)||void 0),2),T=l[0],C=l[1],A=le.useCallback(function(){x(!0)},[x]),F=le.useCallback(function(){x(!1)},[x]);return function(L){var K=L.isOpen,se=L.onOpen,pe=L.onClose,ye=L.onInput,Y=L.searchButtonRef;le.useEffect(function(){function he(me){(me.keyCode===27&&K||me.key==="k"&&(me.metaKey||me.ctrlKey)||!function(xe){var Ae=xe.target,Ge=Ae.tagName;return Ae.isContentEditable||Ge==="INPUT"||Ge==="SELECT"||Ge==="TEXTAREA"}(me)&&me.key==="/"&&!K)&&(me.preventDefault(),K?pe():document.body.classList.contains("DocSearch--active")||document.body.classList.contains("DocSearch--active")||se()),Y&&Y.current===document.activeElement&&ye&&/[a-zA-Z0-9]/.test(String.fromCharCode(me.keyCode))&&ye(me)}return window.addEventListener("keydown",he),function(){window.removeEventListener("keydown",he)}},[K,se,pe,ye,Y])}({isOpen:y,onOpen:A,onClose:F,onInput:le.useCallback(function(L){x(!0),C(L.key)},[x,C]),searchButtonRef:u}),le.createElement(le.Fragment,null,le.createElement(sI,{ref:u,translations:e==null||(i=e.translations)===null||i===void 0?void 0:i.button,onClick:A}),y&&hx(le.createElement(VA,Af({},e,{initialScrollY:window.scrollY,initialQuery:T,translations:e==null||(s=e.translations)===null||s===void 0?void 0:s.modal,onClose:F})),document.body))}function $A(e){px(le.createElement(UA,mf({},e,{transformSearchClient:function(i){return i.addAlgoliaAgent("docsearch.js","3.1.1"),e.transformSearchClient?e.transformSearchClient(i):i}})),function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return typeof i=="string"?s.document.querySelector(i):i}(e.container,e.environment))}const qA=e=>e.button===1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey,HA=()=>{const e=cd(),i=b0();return{hitComponent:({hit:s,children:u})=>{const m=TE(s.url,i.value.base);return{type:"a",ref:void 0,constructor:void 0,key:void 0,props:{href:s.url,onClick:y=>{qA(y)||(y.preventDefault(),e.push(m))},children:u},__v:null}},navigator:{navigate:({itemUrl:s})=>{e.push(s)}},transformSearchClient:s=>{const u=em(s.search,500);return{...s,search:async(...m)=>u(...m)}}}};const GA=jn({name:"Docsearch",props:{containerId:{type:String,required:!1,default:"docsearch-container"},options:{type:Object,required:!0}},setup(e){const i=Qf(),s=x0(),u=HA(),m=Pr(()=>{var l;return{...e.options,...(l=e.options.locales)==null?void 0:l[i.value]}}),y=[],x=()=>{var T,C;const l=(C=(T=m.value.searchParameters)==null?void 0:T.facetFilters)!=null?C:[];y.splice(0,y.length,`lang:${s.value}`,...jt(l)?l:[l]),$A({...u,...m.value,container:`#${e.containerId}`,searchParameters:{...m.value.searchParameters,facetFilters:y}})};return Ji(()=>{x(),Ui([i,m],([l,T],[C,A])=>{l!==C&&JSON.stringify(T)!==JSON.stringify(A)&&x()}),Ui(s,(l,T)=>{if(l!==T){const C=y.findIndex(A=>A===`lang:${T}`);C>-1&&y.splice(C,1,`lang:${l}`)}})}),()=>cr("div",{id:e.containerId})}}),ZA={appId:"6KECEJUGJH",apiKey:"9a5c8aa7cb2d5d32ebd66790e1a84789",indexName:"sustech-online-keys",locales:{"/":{placeholder:"\u641C\u7D22\u624B\u518C",translations:{button:{buttonText:"\u641C\u7D22\u624B\u518C",buttonAriaLabel:"\u641C\u7D22\u624B\u518C"},modal:{searchBox:{resetButtonTitle:"\u6E05\u9664\u67E5\u8BE2\u6761\u4EF6",resetButtonAriaLabel:"\u6E05\u9664\u67E5\u8BE2\u6761\u4EF6",cancelButtonText:"\u53D6\u6D88",cancelButtonAriaLabel:"\u53D6\u6D88"},startScreen:{recentSearchesTitle:"\u641C\u7D22\u5386\u53F2",noRecentSearchesText:"\u6CA1\u6709\u641C\u7D22\u5386\u53F2",saveRecentSearchButtonTitle:"\u4FDD\u5B58\u81F3\u641C\u7D22\u5386\u53F2",removeRecentSearchButtonTitle:"\u4ECE\u641C\u7D22\u5386\u53F2\u4E2D\u79FB\u9664",favoriteSearchesTitle:"\u6536\u85CF",removeFavoriteSearchButtonTitle:"\u4ECE\u6536\u85CF\u4E2D\u79FB\u9664"},errorScreen:{titleText:"\u65E0\u6CD5\u83B7\u53D6\u7ED3\u679C",helpText:"\u4F60\u53EF\u80FD\u9700\u8981\u68C0\u67E5\u4F60\u7684\u7F51\u7EDC\u8FDE\u63A5"},footer:{selectText:"\u9009\u62E9",navigateText:"\u5207\u6362",closeText:"\u5173\u95ED",searchByText:"\u641C\u7D22\u63D0\u4F9B\u8005"},noResultsScreen:{noResultsText:"\u65E0\u6CD5\u627E\u5230\u76F8\u5173\u7ED3\u679C",suggestedQueryText:"\u4F60\u53EF\u4EE5\u5C1D\u8BD5\u67E5\u8BE2",reportMissingResultsText:"\u4F60\u8BA4\u4E3A\u8BE5\u67E5\u8BE2\u5E94\u8BE5\u6709\u7ED3\u679C\uFF1F",reportMissingResultsLinkText:"\u70B9\u51FB\u53CD\u9988"}}}}}};var WA=yi({enhance({app:e}){e.component("Docsearch",()=>cr(GA,{options:ZA}))}});const KA=e=>{if(window.dataLayer&&window.gtag)return;const i=document.createElement("script");i.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,i.async=!0,document.head.appendChild(i),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)},XA="G-1BQBXDGY3R";var JA=yi({enhance(){KA(XA)}});function YA(e){return{all:e=e||new Map,on:function(i,s){var u=e.get(i);u?u.push(s):e.set(i,[s])},off:function(i,s){var u=e.get(i);u&&(s?u.splice(u.indexOf(s)>>>0,1):e.set(i,[]))},emit:function(i,s){var u=e.get(i);u&&u.slice().map(function(m){m(s)}),(u=e.get("*"))&&u.slice().map(function(m){m(i,s)})}}}const Dx=Symbol("pwaEvent"),QA=()=>{const e=gn(Dx);if(!e)throw new Error("usePwaEvent() is called without provider.");return e},eP=e=>{const i=e.waiting;if(!i)return;const s=new MessageChannel;i.postMessage({type:"SKIP_WAITING"},[s.port2])},tP="service-worker.js";var rP=yi({setup(){const e=(...s)=>console.log("[@vuepress/plugin-pwa]",...s),i=YA();ss(Dx,i),Ji(async()=>{const{register:s}=await Ie(()=>import("./index.0e8935cb.js"),[]);s(E0(tP),{ready(u){e("Service worker is active."),i.emit("ready",u)},registered(u){e("Service worker has been registered."),i.emit("registered",u)},cached(u){e("Content has been cached for offline use."),i.emit("cached",u)},updatefound(u){e("New content is downloading."),i.emit("updatefound",u)},updated(u){e("New content is available, please refresh."),i.emit("updated",u)},offline(){e("No internet connection found. App is running in offline mode."),i.emit("offline")},error(u){e("Error during service worker registration:",u),i.emit("error",u)}})})}});const nP=jn({name:"PwaPopup",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(e){const i=QA(),s=Qf(),u=Pr(()=>{var l;return(l=e.locales[s.value])!=null?l:{message:"New content is available.",buttonText:"Refresh"}}),m=mn(!1),y=mn(null),x=()=>{m.value=!1,y.value&&(eP(y.value),location.reload(!0))};return i.on("updated",l=>{l&&(y.value=l,m.value=!0)}),()=>cr(sd,{name:"pwa-popup"},()=>m.value?cr("div",{class:"pwa-popup"},[u.value.message,cr("br"),cr("button",{onClick:x},u.value.buttonText)]):null)}}),iP={"/":{message:"\u53D1\u73B0\u65B0\u5185\u5BB9\u53EF\u7528",buttonText:"\u5237\u65B0"}};var oP=yi({rootComponents:[jn(()=>()=>cr(nP,{locales:iP}))]});/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */var Us=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},_h=function(i){return i.tagName==="IMG"},sP=function(i){return NodeList.prototype.isPrototypeOf(i)},Ih=function(i){return i&&i.nodeType===1},Hy=function(i){var s=i.currentSrc||i.src;return s.substr(-4).toLowerCase()===".svg"},Gy=function(i){try{return Array.isArray(i)?i.filter(_h):sP(i)?[].slice.call(i).filter(_h):Ih(i)?[i].filter(_h):typeof i=="string"?[].slice.call(document.querySelectorAll(i)).filter(_h):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},aP=function(i){var s=document.createElement("div");return s.classList.add("medium-zoom-overlay"),s.style.background=i,s},lP=function(i){var s=i.getBoundingClientRect(),u=s.top,m=s.left,y=s.width,x=s.height,l=i.cloneNode(),T=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,C=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return l.removeAttribute("id"),l.style.position="absolute",l.style.top=u+T+"px",l.style.left=m+C+"px",l.style.width=y+"px",l.style.height=x+"px",l.style.transform="",l},Na=function(i,s){var u=Us({bubbles:!1,cancelable:!1,detail:void 0},s);if(typeof window.CustomEvent=="function")return new CustomEvent(i,u);var m=document.createEvent("CustomEvent");return m.initCustomEvent(i,u.bubbles,u.cancelable,u.detail),m},cP=function e(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=window.Promise||function(De){function Je(){}De(Je,Je)},m=function(De){var Je=De.target;if(Je===ot){se();return}me.indexOf(Je)!==-1&&pe({target:Je})},y=function(){if(!(Ae||!_e.original)){var De=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(Ge-De)>We.scrollOffset&&setTimeout(se,150)}},x=function(De){var Je=De.key||De.keyCode;(Je==="Escape"||Je==="Esc"||Je===27)&&se()},l=function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Je=De;if(De.background&&(ot.style.background=De.background),De.container&&De.container instanceof Object&&(Je.container=Us({},We.container,De.container)),De.template){var Ke=Ih(De.template)?De.template:document.querySelector(De.template);Je.template=Ke}return We=Us({},We,Je),me.forEach(function(zt){zt.dispatchEvent(Na("medium-zoom:update",{detail:{zoom:it}}))}),it},T=function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e(Us({},We,De))},C=function(){for(var De=arguments.length,Je=Array(De),Ke=0;Ke<De;Ke++)Je[Ke]=arguments[Ke];var zt=Je.reduce(function(Le,At){return[].concat(Le,Gy(At))},[]);return zt.filter(function(Le){return me.indexOf(Le)===-1}).forEach(function(Le){me.push(Le),Le.classList.add("medium-zoom-image")}),xe.forEach(function(Le){var At=Le.type,Ot=Le.listener,dr=Le.options;zt.forEach(function(pr){pr.addEventListener(At,Ot,dr)})}),it},A=function(){for(var De=arguments.length,Je=Array(De),Ke=0;Ke<De;Ke++)Je[Ke]=arguments[Ke];_e.zoomed&&se();var zt=Je.length>0?Je.reduce(function(Le,At){return[].concat(Le,Gy(At))},[]):me;return zt.forEach(function(Le){Le.classList.remove("medium-zoom-image"),Le.dispatchEvent(Na("medium-zoom:detach",{detail:{zoom:it}}))}),me=me.filter(function(Le){return zt.indexOf(Le)===-1}),it},F=function(De,Je){var Ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return me.forEach(function(zt){zt.addEventListener("medium-zoom:"+De,Je,Ke)}),xe.push({type:"medium-zoom:"+De,listener:Je,options:Ke}),it},L=function(De,Je){var Ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return me.forEach(function(zt){zt.removeEventListener("medium-zoom:"+De,Je,Ke)}),xe=xe.filter(function(zt){return!(zt.type==="medium-zoom:"+De&&zt.listener.toString()===Je.toString())}),it},K=function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Je=De.target,Ke=function(){var Le={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},At=void 0,Ot=void 0;if(We.container)if(We.container instanceof Object)Le=Us({},Le,We.container),At=Le.width-Le.left-Le.right-We.margin*2,Ot=Le.height-Le.top-Le.bottom-We.margin*2;else{var dr=Ih(We.container)?We.container:document.querySelector(We.container),pr=dr.getBoundingClientRect(),Ir=pr.width,vr=pr.height,Ar=pr.left,Fr=pr.top;Le=Us({},Le,{width:Ir,height:vr,left:Ar,top:Fr})}At=At||Le.width-We.margin*2,Ot=Ot||Le.height-We.margin*2;var Fe=_e.zoomedHd||_e.original,lt=Hy(Fe)?At:Fe.naturalWidth||At,Ye=Hy(Fe)?Ot:Fe.naturalHeight||Ot,ft=Fe.getBoundingClientRect(),Zt=ft.top,nr=ft.left,Bt=ft.width,Lt=ft.height,W=Math.min(lt,At)/Bt,ne=Math.min(Ye,Ot)/Lt,be=Math.min(W,ne),Me=(-nr+(At-Bt)/2+We.margin+Le.left)/be,Re=(-Zt+(Ot-Lt)/2+We.margin+Le.top)/be,Ve="scale("+be+") translate3d("+Me+"px, "+Re+"px, 0)";_e.zoomed.style.transform=Ve,_e.zoomedHd&&(_e.zoomedHd.style.transform=Ve)};return new u(function(zt){if(Je&&me.indexOf(Je)===-1){zt(it);return}var Le=function Ir(){Ae=!1,_e.zoomed.removeEventListener("transitionend",Ir),_e.original.dispatchEvent(Na("medium-zoom:opened",{detail:{zoom:it}})),zt(it)};if(_e.zoomed){zt(it);return}if(Je)_e.original=Je;else if(me.length>0){var At=me;_e.original=At[0]}else{zt(it);return}if(_e.original.dispatchEvent(Na("medium-zoom:open",{detail:{zoom:it}})),Ge=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,Ae=!0,_e.zoomed=lP(_e.original),document.body.appendChild(ot),We.template){var Ot=Ih(We.template)?We.template:document.querySelector(We.template);_e.template=document.createElement("div"),_e.template.appendChild(Ot.content.cloneNode(!0)),document.body.appendChild(_e.template)}if(document.body.appendChild(_e.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),_e.original.classList.add("medium-zoom-image--hidden"),_e.zoomed.classList.add("medium-zoom-image--opened"),_e.zoomed.addEventListener("click",se),_e.zoomed.addEventListener("transitionend",Le),_e.original.getAttribute("data-zoom-src")){_e.zoomedHd=_e.zoomed.cloneNode(),_e.zoomedHd.removeAttribute("srcset"),_e.zoomedHd.removeAttribute("sizes"),_e.zoomedHd.src=_e.zoomed.getAttribute("data-zoom-src"),_e.zoomedHd.onerror=function(){clearInterval(dr),console.warn("Unable to reach the zoom image target "+_e.zoomedHd.src),_e.zoomedHd=null,Ke()};var dr=setInterval(function(){_e.zoomedHd.complete&&(clearInterval(dr),_e.zoomedHd.classList.add("medium-zoom-image--opened"),_e.zoomedHd.addEventListener("click",se),document.body.appendChild(_e.zoomedHd),Ke())},10)}else if(_e.original.hasAttribute("srcset")){_e.zoomedHd=_e.zoomed.cloneNode(),_e.zoomedHd.removeAttribute("sizes"),_e.zoomedHd.removeAttribute("loading");var pr=_e.zoomedHd.addEventListener("load",function(){_e.zoomedHd.removeEventListener("load",pr),_e.zoomedHd.classList.add("medium-zoom-image--opened"),_e.zoomedHd.addEventListener("click",se),document.body.appendChild(_e.zoomedHd),Ke()})}else Ke()})},se=function(){return new u(function(De){if(Ae||!_e.original){De(it);return}var Je=function Ke(){_e.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(_e.zoomed),_e.zoomedHd&&document.body.removeChild(_e.zoomedHd),document.body.removeChild(ot),_e.zoomed.classList.remove("medium-zoom-image--opened"),_e.template&&document.body.removeChild(_e.template),Ae=!1,_e.zoomed.removeEventListener("transitionend",Ke),_e.original.dispatchEvent(Na("medium-zoom:closed",{detail:{zoom:it}})),_e.original=null,_e.zoomed=null,_e.zoomedHd=null,_e.template=null,De(it)};Ae=!0,document.body.classList.remove("medium-zoom--opened"),_e.zoomed.style.transform="",_e.zoomedHd&&(_e.zoomedHd.style.transform=""),_e.template&&(_e.template.style.transition="opacity 150ms",_e.template.style.opacity=0),_e.original.dispatchEvent(Na("medium-zoom:close",{detail:{zoom:it}})),_e.zoomed.addEventListener("transitionend",Je)})},pe=function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Je=De.target;return _e.original?se():K({target:Je})},ye=function(){return We},Y=function(){return me},he=function(){return _e.original},me=[],xe=[],Ae=!1,Ge=0,We=s,_e={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(i)==="[object Object]"?We=i:(i||typeof i=="string")&&C(i),We=Us({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},We);var ot=aP(We.background);document.addEventListener("click",m),document.addEventListener("keyup",x),document.addEventListener("scroll",y),window.addEventListener("resize",se);var it={open:K,close:se,toggle:pe,update:l,clone:T,attach:C,detach:A,on:F,off:L,getOptions:ye,getImages:Y,getZoomedImage:he};return it};function uP(e,i){i===void 0&&(i={});var s=i.insertAt;if(!(!e||typeof document=="undefined")){var u=document.head||document.getElementsByTagName("head")[0],m=document.createElement("style");m.type="text/css",s==="top"&&u.firstChild?u.insertBefore(m,u.firstChild):u.appendChild(m),m.styleSheet?m.styleSheet.cssText=e:m.appendChild(document.createTextNode(e))}}var hP=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";uP(hP);var dP=cP;const pP=Symbol("mediumZoom");const fP=":not(a) > img",mP={},gP=500;var _P=yi({enhance({app:e,router:i}){const s=dP(mP);s.refresh=(u=fP)=>{s.detach(),s.attach(u)},e.provide(pP,s),i.afterEach(()=>{setTimeout(()=>s.refresh(),gP)})}});/**
 * NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT
 */const yr={settings:{minimum:.08,easing:"ease",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"></div>'},status:null,set:e=>{const i=yr.isStarted();e=Up(e,yr.settings.minimum,1),yr.status=e===1?null:e;const s=yr.render(!i),u=s.querySelector(yr.settings.barSelector),m=yr.settings.speed,y=yr.settings.easing;return s.offsetWidth,yP(x=>{yh(u,{transform:"translate3d("+Zy(e)+"%,0,0)",transition:"all "+m+"ms "+y}),e===1?(yh(s,{transition:"none",opacity:"1"}),s.offsetWidth,setTimeout(function(){yh(s,{transition:"all "+m+"ms linear",opacity:"0"}),setTimeout(function(){yr.remove(),x()},m)},m)):setTimeout(()=>x(),m)}),yr},isStarted:()=>typeof yr.status=="number",start:()=>{yr.status||yr.set(0);const e=()=>{setTimeout(()=>{!yr.status||(yr.trickle(),e())},yr.settings.trickleSpeed)};return yr.settings.trickle&&e(),yr},done:e=>!e&&!yr.status?yr:yr.inc(.3+.5*Math.random()).set(1),inc:e=>{let i=yr.status;return i?(typeof e!="number"&&(e=(1-i)*Up(Math.random()*i,.1,.95)),i=Up(i+e,0,.994),yr.set(i)):yr.start()},trickle:()=>yr.inc(Math.random()*yr.settings.trickleRate),render:e=>{if(yr.isRendered())return document.getElementById("nprogress");Wy(document.documentElement,"nprogress-busy");const i=document.createElement("div");i.id="nprogress",i.innerHTML=yr.settings.template;const s=i.querySelector(yr.settings.barSelector),u=e?"-100":Zy(yr.status||0),m=document.querySelector(yr.settings.parent);return yh(s,{transition:"all 0 linear",transform:"translate3d("+u+"%,0,0)"}),m!==document.body&&Wy(m,"nprogress-custom-parent"),m==null||m.appendChild(i),i},remove:()=>{Ky(document.documentElement,"nprogress-busy"),Ky(document.querySelector(yr.settings.parent),"nprogress-custom-parent");const e=document.getElementById("nprogress");e&&vP(e)},isRendered:()=>!!document.getElementById("nprogress")},Up=(e,i,s)=>e<i?i:e>s?s:e,Zy=e=>(-1+e)*100,yP=function(){const e=[];function i(){const s=e.shift();s&&s(i)}return function(s){e.push(s),e.length===1&&i()}}(),yh=function(){const e=["Webkit","O","Moz","ms"],i={};function s(x){return x.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(l,T){return T.toUpperCase()})}function u(x){const l=document.body.style;if(x in l)return x;let T=e.length;const C=x.charAt(0).toUpperCase()+x.slice(1);let A;for(;T--;)if(A=e[T]+C,A in l)return A;return x}function m(x){return x=s(x),i[x]||(i[x]=u(x))}function y(x,l,T){l=m(l),x.style[l]=T}return function(x,l){for(const T in l){const C=l[T];C!==void 0&&Object.prototype.hasOwnProperty.call(l,T)&&y(x,T,C)}}}(),zx=(e,i)=>(typeof e=="string"?e:am(e)).indexOf(" "+i+" ")>=0,Wy=(e,i)=>{const s=am(e),u=s+i;zx(s,i)||(e.className=u.substring(1))},Ky=(e,i)=>{const s=am(e);if(!zx(e,i))return;const u=s.replace(" "+i+" "," ");e.className=u.substring(1,u.length-1)},am=e=>(" "+(e.className||"")+" ").replace(/\s+/gi," "),vP=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)};const xP=()=>{Ji(()=>{const e=cd(),i=new Set;i.add(e.currentRoute.value.path),e.beforeEach(s=>{i.has(s.path)||yr.start()}),e.afterEach(s=>{i.add(s.path),yr.done()})})};var bP=yi({setup(){xP()}});const Xy=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,wP=()=>window.scrollTo({top:0,behavior:"smooth"});const EP=jn({name:"BackToTop",setup(){const e=mn(0),i=Pr(()=>e.value>300),s=em(()=>{e.value=Xy()},100);Ji(()=>{e.value=Xy(),window.addEventListener("scroll",()=>s())});const u=cr("div",{class:"back-to-top",onClick:wP});return()=>cr(sd,{name:"back-to-top"},()=>i.value?u:null)}});var SP=yi({rootComponents:[EP]});const TP=(e,i,s)=>{const u=`#${e.slug}`,m=[i.linkClass];return i.linkActiveClass&&s.hash===u&&m.push(i.linkActiveClass),i.linkChildrenActiveClass&&e.children.some(y=>`#${y.slug}`===s.hash)&&m.push(i.linkChildrenActiveClass),i.linkTag==="RouterLink"?cr(M0,{to:u,class:m,ariaLabel:e.title},()=>e.title):cr("a",{href:u,class:m,ariaLabel:e.title},e.title)},Ox=(e,i,s)=>e.length===0?[]:[cr("ul",{class:i.listClass},e.map(u=>cr("li",{class:i.itemClass},[TP(u,i,s),Ox(u.children,i,s)])))],IP=jn({name:"Toc",props:{headers:{type:Array,required:!1,default:null},options:{type:Object,required:!1,default:()=>({})}},setup(e){const{headers:i,options:s}=Lw(e),u=ud(),m=hl(),y=Pr(()=>{var T;const l=i.value||m.value.headers;return((T=l[0])==null?void 0:T.level)===1?l[0].children:l}),x=Pr(()=>({containerTag:"nav",containerClass:"vuepress-toc",listClass:"vuepress-toc-list",itemClass:"vuepress-toc-item",linkTag:"RouterLink",linkClass:"vuepress-toc-link",linkActiveClass:"active",linkChildrenActiveClass:"active",...s.value}));return()=>{const l=Ox(y.value,x.value,u);return x.value.containerTag?cr(x.value.containerTag,{class:x.value.containerClass},l):l}}}),AP={};var PP=yi({enhance({app:e}){e.component("Toc",i=>cr(IP,{headers:i.headers,options:{...AP,...i.options}}))}}),CP=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},lm={exports:{}},Mx=function(i,s){return function(){for(var m=new Array(arguments.length),y=0;y<m.length;y++)m[y]=arguments[y];return i.apply(s,m)}},kP=Mx,cm=Object.prototype.toString,um=function(e){return function(i){var s=cm.call(i);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())}}(Object.create(null));function Ks(e){return e=e.toLowerCase(),function(s){return um(s)===e}}function hm(e){return Array.isArray(e)}function Wh(e){return typeof e=="undefined"}function DP(e){return e!==null&&!Wh(e)&&e.constructor!==null&&!Wh(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var Lx=Ks("ArrayBuffer");function zP(e){var i;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?i=ArrayBuffer.isView(e):i=e&&e.buffer&&Lx(e.buffer),i}function OP(e){return typeof e=="string"}function MP(e){return typeof e=="number"}function Rx(e){return e!==null&&typeof e=="object"}function Ah(e){if(um(e)!=="object")return!1;var i=Object.getPrototypeOf(e);return i===null||i===Object.prototype}var LP=Ks("Date"),RP=Ks("File"),BP=Ks("Blob"),FP=Ks("FileList");function dm(e){return cm.call(e)==="[object Function]"}function NP(e){return Rx(e)&&dm(e.pipe)}function jP(e){var i="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||cm.call(e)===i||dm(e.toString)&&e.toString()===i)}var VP=Ks("URLSearchParams");function UP(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $P(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function pm(e,i){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),hm(e))for(var s=0,u=e.length;s<u;s++)i.call(null,e[s],s,e);else for(var m in e)Object.prototype.hasOwnProperty.call(e,m)&&i.call(null,e[m],m,e)}function Pf(){var e={};function i(m,y){Ah(e[y])&&Ah(m)?e[y]=Pf(e[y],m):Ah(m)?e[y]=Pf({},m):hm(m)?e[y]=m.slice():e[y]=m}for(var s=0,u=arguments.length;s<u;s++)pm(arguments[s],i);return e}function qP(e,i,s){return pm(i,function(m,y){s&&typeof m=="function"?e[y]=kP(m,s):e[y]=m}),e}function HP(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function GP(e,i,s,u){e.prototype=Object.create(i.prototype,u),e.prototype.constructor=e,s&&Object.assign(e.prototype,s)}function ZP(e,i,s){var u,m,y,x={};i=i||{};do{for(u=Object.getOwnPropertyNames(e),m=u.length;m-- >0;)y=u[m],x[y]||(i[y]=e[y],x[y]=!0);e=Object.getPrototypeOf(e)}while(e&&(!s||s(e,i))&&e!==Object.prototype);return i}function WP(e,i,s){e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=i.length;var u=e.indexOf(i,s);return u!==-1&&u===s}function KP(e){if(!e)return null;var i=e.length;if(Wh(i))return null;for(var s=new Array(i);i-- >0;)s[i]=e[i];return s}var XP=function(e){return function(i){return e&&i instanceof e}}(typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array)),zn={isArray:hm,isArrayBuffer:Lx,isBuffer:DP,isFormData:jP,isArrayBufferView:zP,isString:OP,isNumber:MP,isObject:Rx,isPlainObject:Ah,isUndefined:Wh,isDate:LP,isFile:RP,isBlob:BP,isFunction:dm,isStream:NP,isURLSearchParams:VP,isStandardBrowserEnv:$P,forEach:pm,merge:Pf,extend:qP,trim:UP,stripBOM:HP,inherits:GP,toFlatObject:ZP,kindOf:um,kindOfTest:Ks,endsWith:WP,toArray:KP,isTypedArray:XP,isFileList:FP},ja=zn;function Jy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Bx=function(i,s,u){if(!s)return i;var m;if(u)m=u(s);else if(ja.isURLSearchParams(s))m=s.toString();else{var y=[];ja.forEach(s,function(T,C){T===null||typeof T=="undefined"||(ja.isArray(T)?C=C+"[]":T=[T],ja.forEach(T,function(F){ja.isDate(F)?F=F.toISOString():ja.isObject(F)&&(F=JSON.stringify(F)),y.push(Jy(C)+"="+Jy(F))}))}),m=y.join("&")}if(m){var x=i.indexOf("#");x!==-1&&(i=i.slice(0,x)),i+=(i.indexOf("?")===-1?"?":"&")+m}return i},JP=zn;function pd(){this.handlers=[]}pd.prototype.use=function(i,s,u){return this.handlers.push({fulfilled:i,rejected:s,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1};pd.prototype.eject=function(i){this.handlers[i]&&(this.handlers[i]=null)};pd.prototype.forEach=function(i){JP.forEach(this.handlers,function(u){u!==null&&i(u)})};var YP=pd,QP=zn,eC=function(i,s){QP.forEach(i,function(m,y){y!==s&&y.toUpperCase()===s.toUpperCase()&&(i[s]=m,delete i[y])})},Fx=zn;function ol(e,i,s,u,m){Error.call(this),this.message=e,this.name="AxiosError",i&&(this.code=i),s&&(this.config=s),u&&(this.request=u),m&&(this.response=m)}Fx.inherits(ol,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Nx=ol.prototype,jx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){jx[e]={value:e}});Object.defineProperties(ol,jx);Object.defineProperty(Nx,"isAxiosError",{value:!0});ol.from=function(e,i,s,u,m,y){var x=Object.create(Nx);return Fx.toFlatObject(e,x,function(T){return T!==Error.prototype}),ol.call(x,e.message,i,s,u,m),x.name=e.name,y&&Object.assign(x,y),x};var pl=ol,Vx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ri=zn;function tC(e,i){i=i||new FormData;var s=[];function u(y){return y===null?"":Ri.isDate(y)?y.toISOString():Ri.isArrayBuffer(y)||Ri.isTypedArray(y)?typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function m(y,x){if(Ri.isPlainObject(y)||Ri.isArray(y)){if(s.indexOf(y)!==-1)throw Error("Circular reference detected in "+x);s.push(y),Ri.forEach(y,function(T,C){if(!Ri.isUndefined(T)){var A=x?x+"."+C:C,F;if(T&&!x&&typeof T=="object"){if(Ri.endsWith(C,"{}"))T=JSON.stringify(T);else if(Ri.endsWith(C,"[]")&&(F=Ri.toArray(T))){F.forEach(function(L){!Ri.isUndefined(L)&&i.append(A,u(L))});return}}m(T,A)}}),s.pop()}else i.append(x,u(y))}return m(e),i}var Ux=tC,$p=pl,rC=function(i,s,u){var m=u.config.validateStatus;!u.status||!m||m(u.status)?i(u):s(new $p("Request failed with status code "+u.status,[$p.ERR_BAD_REQUEST,$p.ERR_BAD_RESPONSE][Math.floor(u.status/100)-4],u.config,u.request,u))},vh=zn,nC=vh.isStandardBrowserEnv()?function(){return{write:function(s,u,m,y,x,l){var T=[];T.push(s+"="+encodeURIComponent(u)),vh.isNumber(m)&&T.push("expires="+new Date(m).toGMTString()),vh.isString(y)&&T.push("path="+y),vh.isString(x)&&T.push("domain="+x),l===!0&&T.push("secure"),document.cookie=T.join("; ")},read:function(s){var u=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),iC=function(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)},oC=function(i,s){return s?i.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):i},sC=iC,aC=oC,$x=function(i,s){return i&&!sC(s)?aC(i,s):s},qp=zn,lC=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],cC=function(i){var s={},u,m,y;return i&&qp.forEach(i.split(`
`),function(l){if(y=l.indexOf(":"),u=qp.trim(l.substr(0,y)).toLowerCase(),m=qp.trim(l.substr(y+1)),u){if(s[u]&&lC.indexOf(u)>=0)return;u==="set-cookie"?s[u]=(s[u]?s[u]:[]).concat([m]):s[u]=s[u]?s[u]+", "+m:m}}),s},Yy=zn,uC=Yy.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),u;function m(y){var x=y;return i&&(s.setAttribute("href",x),x=s.href),s.setAttribute("href",x),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return u=m(window.location.href),function(x){var l=Yy.isString(x)?m(x):x;return l.protocol===u.protocol&&l.host===u.host}}():function(){return function(){return!0}}(),Cf=pl,hC=zn;function qx(e){Cf.call(this,e==null?"canceled":e,Cf.ERR_CANCELED),this.name="CanceledError"}hC.inherits(qx,Cf,{__CANCEL__:!0});var fd=qx,dC=function(i){var s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return s&&s[1]||""},wc=zn,pC=rC,fC=nC,mC=Bx,gC=$x,_C=cC,yC=uC,vC=Vx,vo=pl,xC=fd,bC=dC,Qy=function(i){return new Promise(function(u,m){var y=i.data,x=i.headers,l=i.responseType,T;function C(){i.cancelToken&&i.cancelToken.unsubscribe(T),i.signal&&i.signal.removeEventListener("abort",T)}wc.isFormData(y)&&wc.isStandardBrowserEnv()&&delete x["Content-Type"];var A=new XMLHttpRequest;if(i.auth){var F=i.auth.username||"",L=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";x.Authorization="Basic "+btoa(F+":"+L)}var K=gC(i.baseURL,i.url);A.open(i.method.toUpperCase(),mC(K,i.params,i.paramsSerializer),!0),A.timeout=i.timeout;function se(){if(!!A){var Y="getAllResponseHeaders"in A?_C(A.getAllResponseHeaders()):null,he=!l||l==="text"||l==="json"?A.responseText:A.response,me={data:he,status:A.status,statusText:A.statusText,headers:Y,config:i,request:A};pC(function(Ae){u(Ae),C()},function(Ae){m(Ae),C()},me),A=null}}if("onloadend"in A?A.onloadend=se:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(se)},A.onabort=function(){!A||(m(new vo("Request aborted",vo.ECONNABORTED,i,A)),A=null)},A.onerror=function(){m(new vo("Network Error",vo.ERR_NETWORK,i,A,A)),A=null},A.ontimeout=function(){var he=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",me=i.transitional||vC;i.timeoutErrorMessage&&(he=i.timeoutErrorMessage),m(new vo(he,me.clarifyTimeoutError?vo.ETIMEDOUT:vo.ECONNABORTED,i,A)),A=null},wc.isStandardBrowserEnv()){var pe=(i.withCredentials||yC(K))&&i.xsrfCookieName?fC.read(i.xsrfCookieName):void 0;pe&&(x[i.xsrfHeaderName]=pe)}"setRequestHeader"in A&&wc.forEach(x,function(he,me){typeof y=="undefined"&&me.toLowerCase()==="content-type"?delete x[me]:A.setRequestHeader(me,he)}),wc.isUndefined(i.withCredentials)||(A.withCredentials=!!i.withCredentials),l&&l!=="json"&&(A.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&A.addEventListener("progress",i.onDownloadProgress),typeof i.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",i.onUploadProgress),(i.cancelToken||i.signal)&&(T=function(Y){!A||(m(!Y||Y&&Y.type?new xC:Y),A.abort(),A=null)},i.cancelToken&&i.cancelToken.subscribe(T),i.signal&&(i.signal.aborted?T():i.signal.addEventListener("abort",T))),y||(y=null);var ye=bC(K);if(ye&&["http","https","file"].indexOf(ye)===-1){m(new vo("Unsupported protocol "+ye+":",vo.ERR_BAD_REQUEST,i));return}A.send(y)})},wC=null,bn=zn,ev=eC,tv=pl,EC=Vx,SC=Ux,TC={"Content-Type":"application/x-www-form-urlencoded"};function rv(e,i){!bn.isUndefined(e)&&bn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=i)}function IC(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Qy),e}function AC(e,i,s){if(bn.isString(e))try{return(i||JSON.parse)(e),bn.trim(e)}catch(u){if(u.name!=="SyntaxError")throw u}return(s||JSON.stringify)(e)}var md={transitional:EC,adapter:IC(),transformRequest:[function(i,s){if(ev(s,"Accept"),ev(s,"Content-Type"),bn.isFormData(i)||bn.isArrayBuffer(i)||bn.isBuffer(i)||bn.isStream(i)||bn.isFile(i)||bn.isBlob(i))return i;if(bn.isArrayBufferView(i))return i.buffer;if(bn.isURLSearchParams(i))return rv(s,"application/x-www-form-urlencoded;charset=utf-8"),i.toString();var u=bn.isObject(i),m=s&&s["Content-Type"],y;if((y=bn.isFileList(i))||u&&m==="multipart/form-data"){var x=this.env&&this.env.FormData;return SC(y?{"files[]":i}:i,x&&new x)}else if(u||m==="application/json")return rv(s,"application/json"),AC(i);return i}],transformResponse:[function(i){var s=this.transitional||md.transitional,u=s&&s.silentJSONParsing,m=s&&s.forcedJSONParsing,y=!u&&this.responseType==="json";if(y||m&&bn.isString(i)&&i.length)try{return JSON.parse(i)}catch(x){if(y)throw x.name==="SyntaxError"?tv.from(x,tv.ERR_BAD_RESPONSE,this,null,this.response):x}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wC},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};bn.forEach(["delete","get","head"],function(i){md.headers[i]={}});bn.forEach(["post","put","patch"],function(i){md.headers[i]=bn.merge(TC)});var fm=md,PC=zn,CC=fm,kC=function(i,s,u){var m=this||CC;return PC.forEach(u,function(x){i=x.call(m,i,s)}),i},Hx=function(i){return!!(i&&i.__CANCEL__)},nv=zn,Hp=kC,DC=Hx,zC=fm,OC=fd;function Gp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new OC}var MC=function(i){Gp(i),i.headers=i.headers||{},i.data=Hp.call(i,i.data,i.headers,i.transformRequest),i.headers=nv.merge(i.headers.common||{},i.headers[i.method]||{},i.headers),nv.forEach(["delete","get","head","post","put","patch","common"],function(m){delete i.headers[m]});var s=i.adapter||zC.adapter;return s(i).then(function(m){return Gp(i),m.data=Hp.call(i,m.data,m.headers,i.transformResponse),m},function(m){return DC(m)||(Gp(i),m&&m.response&&(m.response.data=Hp.call(i,m.response.data,m.response.headers,i.transformResponse))),Promise.reject(m)})},di=zn,Gx=function(i,s){s=s||{};var u={};function m(A,F){return di.isPlainObject(A)&&di.isPlainObject(F)?di.merge(A,F):di.isPlainObject(F)?di.merge({},F):di.isArray(F)?F.slice():F}function y(A){if(di.isUndefined(s[A])){if(!di.isUndefined(i[A]))return m(void 0,i[A])}else return m(i[A],s[A])}function x(A){if(!di.isUndefined(s[A]))return m(void 0,s[A])}function l(A){if(di.isUndefined(s[A])){if(!di.isUndefined(i[A]))return m(void 0,i[A])}else return m(void 0,s[A])}function T(A){if(A in s)return m(i[A],s[A]);if(A in i)return m(void 0,i[A])}var C={url:x,method:x,data:x,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:T};return di.forEach(Object.keys(i).concat(Object.keys(s)),function(F){var L=C[F]||y,K=L(F);di.isUndefined(K)&&L!==T||(u[F]=K)}),u},Zx={version:"0.27.2"},LC=Zx.version,rs=pl,mm={};["object","boolean","number","function","string","symbol"].forEach(function(e,i){mm[e]=function(u){return typeof u===e||"a"+(i<1?"n ":" ")+e}});var iv={};mm.transitional=function(i,s,u){function m(y,x){return"[Axios v"+LC+"] Transitional option '"+y+"'"+x+(u?". "+u:"")}return function(y,x,l){if(i===!1)throw new rs(m(x," has been removed"+(s?" in "+s:"")),rs.ERR_DEPRECATED);return s&&!iv[x]&&(iv[x]=!0,console.warn(m(x," has been deprecated since v"+s+" and will be removed in the near future"))),i?i(y,x,l):!0}};function RC(e,i,s){if(typeof e!="object")throw new rs("options must be an object",rs.ERR_BAD_OPTION_VALUE);for(var u=Object.keys(e),m=u.length;m-- >0;){var y=u[m],x=i[y];if(x){var l=e[y],T=l===void 0||x(l,y,e);if(T!==!0)throw new rs("option "+y+" must be "+T,rs.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new rs("Unknown option "+y,rs.ERR_BAD_OPTION)}}var BC={assertOptions:RC,validators:mm},Wx=zn,FC=Bx,ov=YP,sv=MC,gd=Gx,NC=$x,Kx=BC,Va=Kx.validators;function sl(e){this.defaults=e,this.interceptors={request:new ov,response:new ov}}sl.prototype.request=function(i,s){typeof i=="string"?(s=s||{},s.url=i):s=i||{},s=gd(this.defaults,s),s.method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var u=s.transitional;u!==void 0&&Kx.assertOptions(u,{silentJSONParsing:Va.transitional(Va.boolean),forcedJSONParsing:Va.transitional(Va.boolean),clarifyTimeoutError:Va.transitional(Va.boolean)},!1);var m=[],y=!0;this.interceptors.request.forEach(function(K){typeof K.runWhen=="function"&&K.runWhen(s)===!1||(y=y&&K.synchronous,m.unshift(K.fulfilled,K.rejected))});var x=[];this.interceptors.response.forEach(function(K){x.push(K.fulfilled,K.rejected)});var l;if(!y){var T=[sv,void 0];for(Array.prototype.unshift.apply(T,m),T=T.concat(x),l=Promise.resolve(s);T.length;)l=l.then(T.shift(),T.shift());return l}for(var C=s;m.length;){var A=m.shift(),F=m.shift();try{C=A(C)}catch(L){F(L);break}}try{l=sv(C)}catch(L){return Promise.reject(L)}for(;x.length;)l=l.then(x.shift(),x.shift());return l};sl.prototype.getUri=function(i){i=gd(this.defaults,i);var s=NC(i.baseURL,i.url);return FC(s,i.params,i.paramsSerializer)};Wx.forEach(["delete","get","head","options"],function(i){sl.prototype[i]=function(s,u){return this.request(gd(u||{},{method:i,url:s,data:(u||{}).data}))}});Wx.forEach(["post","put","patch"],function(i){function s(u){return function(y,x,l){return this.request(gd(l||{},{method:i,headers:u?{"Content-Type":"multipart/form-data"}:{},url:y,data:x}))}}sl.prototype[i]=s(),sl.prototype[i+"Form"]=s(!0)});var jC=sl,VC=fd;function al(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(m){i=m});var s=this;this.promise.then(function(u){if(!!s._listeners){var m,y=s._listeners.length;for(m=0;m<y;m++)s._listeners[m](u);s._listeners=null}}),this.promise.then=function(u){var m,y=new Promise(function(x){s.subscribe(x),m=x}).then(u);return y.cancel=function(){s.unsubscribe(m)},y},e(function(m){s.reason||(s.reason=new VC(m),i(s.reason))})}al.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};al.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]};al.prototype.unsubscribe=function(i){if(!!this._listeners){var s=this._listeners.indexOf(i);s!==-1&&this._listeners.splice(s,1)}};al.source=function(){var i,s=new al(function(m){i=m});return{token:s,cancel:i}};var UC=al,$C=function(i){return function(u){return i.apply(null,u)}},qC=zn,HC=function(i){return qC.isObject(i)&&i.isAxiosError===!0},av=zn,GC=Mx,Ph=jC,ZC=Gx,WC=fm;function Xx(e){var i=new Ph(e),s=GC(Ph.prototype.request,i);return av.extend(s,Ph.prototype,i),av.extend(s,i),s.create=function(m){return Xx(ZC(e,m))},s}var ii=Xx(WC);ii.Axios=Ph;ii.CanceledError=fd;ii.CancelToken=UC;ii.isCancel=Hx;ii.VERSION=Zx.version;ii.toFormData=Ux;ii.AxiosError=pl;ii.Cancel=ii.CanceledError;ii.all=function(i){return Promise.all(i)};ii.spread=$C;ii.isAxiosError=HC;lm.exports=ii;lm.exports.default=ii;var gm=lm.exports;function lv(e){let i=Math.abs(e),s=Math.floor(i/3600);i-=s*3600;let u=Math.floor(i/60);return i-=u*60,[s,u,i]}function cv(e){return e<10?"0"+e:e}const KC={props:{secondFromDispatch:{type:Number},stationEstimate:{type:String},startSecond:{type:Number}},computed:{timeToShow:function(){let e=lv(this.secondFromDispatch),i=e[2]>=30;return e[1]>0?[e[0]>0?e[0]+"\u65F6":"",e[1],"\u5206",i?"\u534A":""].join(""):i?"\u534A\u5206\u949F":"\u4E0D\u5230\u534A\u5206"},startTime:function(){let e=lv(this.startSecond);return["",cv(e[0]),":",cv(e[1])].join("")},isWaiting:function(){return this.secondFromDispatch<=0}}},XC={key:0};function JC(e,i,s,u,m,y){return s.secondFromDispatch?(tn(),kn("tr",{key:0,class:us(y.isWaiting?"bus-waiting":"bus-running")},[mi("td",null,Ci(y.startTime),1),mi("td",null,Ci(y.isWaiting?"\u8DDD\u51FA\u53D1":"\u5DF2\u51FA\u53D1"),1),mi("td",null,Ci((y.isWaiting,""+y.timeToShow)),1),s.stationEstimate?(tn(),kn("td",XC,Ci(s.stationEstimate),1)):el("",!0)],2)):el("",!0)}var YC=Yi(KC,[["render",JC],["__scopeId","data-v-5e065402"],["__file","BusItem.vue"]]);function Jx(e,i,s){return e*3600+i*60+s}function QC(e){let i=[];for(let s of e){let u=s.split(":"),m=Jx(Number(u[0].trim()),Number(u[1].trim()),0);i.push(m)}return i.sort((s,u)=>s-u)}const e5={data(){return{secondFromZero:0,second:0,minute:0,hour:0,timeRangeAfterReach:3}},props:{times:{},stations:{},minuteOnRoad:{type:Number,default:20},timeRangeBeforeDispatch:{type:Number,default:60}},components:{BusItem:YC},mounted(){setInterval(()=>{this.tick()},1e3)},methods:{tick:function(){var e=new Date;this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds(),this.secondFromZero=Jx(this.hour,this.minute,this.second)},formatNumber:function(e){return e<10?"0"+e:e},stationEstimate:function(e){if(!this.stationNames)return"null";if(e<=0)return this.stationNames[0];let i=this.stationNames.length;if(e>=this.minuteOnRoad*60)return this.stationNames[i-1];let s=e/60/this.minuteOnRoad,u="";for(let m in this.stationPositions)if(s<this.stationPositions[m]){u=this.stationNames[m];break}return u}},computed:{secondList:function(){return QC(this.times)},busToShow:function(){if(!this.secondList)return null;let e=[],i=[];for(let s of this.secondList){let u=this.secondFromZero-s;u<0&&u>-this.timeRangeBeforeDispatch*60&&i.push([u,s]),u>0&&u<(this.minuteOnRoad+this.timeRangeAfterReach)*60&&e.push([u,s])}return e.concat(i)},stationNames:function(){let e=[];for(let i of this.stations)e.push(i[0]);return e},stationPositions:function(){let e=[];for(let i of this.stations)e.push(i[1]);return e}}},t5=e=>(Gw("data-v-582397f1"),e=e(),Zw(),e),r5={key:0,class:"bus-timer-tb"},n5={colspan:"2"},i5={colspan:"2",style:{"text-align":"right"}},o5={key:0,colspan:"4"},s5=t5(()=>mi("p",{class:"plus-note"},"* \u7AD9\u70B9\u4F30\u8BA1\u4EC5\u4F9B\u53C2\u8003",-1));function a5(e,i,s,u,m,y){const x=Ga("bus-item");return tn(),kn("div",null,[y.busToShow?(tn(),kn("table",r5,[mi("thead",null,[mi("tr",null,[mi("th",n5,Ci(s.stations[0][0])+" > "+Ci(s.stations[s.stations.length-1][0]),1),mi("th",i5,Ci(y.formatNumber(m.hour))+":"+Ci(y.formatNumber(m.minute))+":"+Ci(y.formatNumber(m.second)),1)]),(tn(!0),kn(wn,null,Wf(y.busToShow,(l,T)=>(tn(),qc(x,{secondFromDispatch:l[0],stationEstimate:y.stationEstimate(l[0]),startSecond:l[1],key:T},null,8,["secondFromDispatch","stationEstimate","startSecond"]))),128)),mi("tr",null,[Object.keys(y.busToShow).length==0?(tn(),kn("td",o5," \u77ED\u65F6\u95F4\u5185\u6CA1\u6709\u73ED\u6B21\u4E86 ")):el("",!0)])])])):el("",!0),s5])}var l5=Yi(e5,[["render",a5],["__scopeId","data-v-582397f1"],["__file","BusTimer.vue"]]);const c5={data(){return{keySelected:null}},props:{objs:{},initPos:{type:Number,default:0}},mounted(){this.select(Object.keys(this.objs)[this.initPos])},watch:{objs(e){for(let i in this.objs){this.keySelected=i;break}}},computed:{},methods:{select:function(e){this.keySelected=e}}},u5=["onClick"];function h5(e,i,s,u,m,y){return tn(),kn(wn,null,[(tn(!0),kn(wn,null,Wf(s.objs,(x,l,T)=>(tn(),kn("button",{key:T,onClick:C=>y.select(l),class:us(l==m.keySelected?"selected":"unselected")},Ci(l),11,u5))),128)),nd(e.$slots,"default",{selected:s.objs[m.keySelected]})],64)}var d5=Yi(c5,[["render",h5],["__file","ObjectSelector.vue"]]);const p5={data(){return{data:null}},props:{path:{type:String}},watch:{path(e){if(e)return gm.get(e).then(i=>{this.data=i.data})}}};function f5(e,i,s,u,m,y){return nd(e.$slots,"default",{data:m.data})}var m5=Yi(p5,[["render",f5],["__file","DataRequest.vue"]]);const g5={props:["data"]},_5={class:"cards"};function y5(e,i,s,u,m,y){return tn(),kn("div",_5,[(tn(!0),kn(wn,null,Wf(s.data,(x,l)=>(tn(),kn("div",{key:l,class:"card"},Ci(x),1))),128))])}var v5=Yi(g5,[["render",y5],["__scopeId","data-v-34fd2926"],["__file","GridList.vue"]]);const x5={name:"BusTable",components:{BusTimer:l5,ObjectSelector:d5,DataRequest:m5,GridList:v5},mounted(){function e(i){var s={};for(let F=0;F<i.days.length;F++)s[i.days[F].date]=i.days[F].isOffDay;var u=new Date,m=new Intl.DateTimeFormat("en",{year:"numeric"}).format(u),y=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(u),x=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(u),l=`${m}-${y}-${x}`,T;if(s[l]==null){console.log("Not in GOV declaration");var C=u.getDay(),A=C==6||C==0;T=A}else console.log("In GOV declaration"),T=s[l];T?(console.log("\u8282\u5047\u65E5"),document.getElementById("bustable").getElementsByTagName("button")[1].click()):(console.log("\u5DE5\u4F5C\u65E5"),document.getElementById("bustable").getElementsByTagName("button")[0].click())}gm.get("/2022.json").then(i=>{e(i.data)})}},b5={id:"bustable"},w5=mi("br",null,null,-1);function E5(e,i,s,u,m,y){const x=Ga("bus-timer"),l=Ga("grid-list"),T=Ga("data-request"),C=Ga("object-selector");return tn(),kn("div",b5,[qr(C,{objs:{"\u5DE5\u4F5C\u65E5 Workday":!0,"\u8282\u5047\u65E5 Holiday":!1}},{default:xh(A=>[w5,qr(C,{objs:A.selected?{"Line 1 \u53F7\u7EBF \u2502 \u5DE5\u5B66\u9662\u65B9\u5411 To COE":"/bus_times/one_down.json","Line 1 \u53F7\u7EBF \u2502 \u6B23\u56ED\u65B9\u5411 To Joy Highland":"/bus_times/one_up.json","Line 2 \u53F7\u7EBF \u2502 \u79D1\u7814\u697C\u65B9\u5411 To Research Building":"/bus_times/two_down.json","Line 2 \u53F7\u7EBF \u2502 \u6B23\u56ED\u65B9\u5411 To Joy Highland":"/bus_times/two_up.json"}:{"Line 1 \u53F7\u7EBF \u2502 \u5DE5\u5B66\u9662\u65B9\u5411  To COE":"/bus_times/one_down_holiday.json","Line 1 \u53F7\u7EBF \u2502 \u6B23\u56ED\u65B9\u5411 To Joy Highland":"/bus_times/one_up_holiday.json"}},{default:xh(F=>[qr(T,{path:F.selected},{default:xh(({data:L})=>[L?(tn(),qc(x,Kb(s0({key:0},L)),null,16)):el("",!0),L?(tn(),qc(l,{key:1,data:L.times},null,8,["data"])):el("",!0)]),_:2},1032,["path"])]),_:2},1032,["objs"])]),_:1})])}var S5=Yi(x5,[["render",E5],["__file","BusTable.vue"]]),Yx={exports:{}};(function(e,i){(function(s,u){e.exports=u()})(CP,function(){var s,u,m;function y(l,T){if(!s)s=T;else if(!u)u=T;else{var C="var sharedChunk = {}; ("+s+")(sharedChunk); ("+u+")(sharedChunk);",A={};s(A),m=T(A),typeof window!="undefined"&&(m.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}y(["exports"],function(l){var T=C;function C(n,t,o,c){this.cx=3*n,this.bx=3*(o-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(c-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=o,this.p2y=c}function A(n,t,o,c){const d=new T(n,t,o,c);return function(g){return d.solve(g)}}C.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var o=n,c=0;c<8;c++){var d=this.sampleCurveX(o)-n;if(Math.abs(d)<t)return o;var g=this.sampleCurveDerivativeX(o);if(Math.abs(g)<1e-6)break;o-=d/g}var _=0,b=1;for(o=n,c=0;c<20&&(d=this.sampleCurveX(o),!(Math.abs(d-n)<t));c++)n>d?_=o:b=o,o=.5*(b-_)+_;return o},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};const F=A(.25,.1,.25,1);function L(n,t,o){return Math.min(o,Math.max(t,n))}function K(n,t,o){const c=o-t,d=((n-t)%c+c)%c+t;return d===t?o:d}function se(n,...t){for(const o of t)for(const c in o)n[c]=o[c];return n}let pe=1;function ye(n,t){n.forEach(o=>{t[o]&&(t[o]=t[o].bind(t))})}function Y(n,t,o){const c={};for(const d in n)c[d]=t.call(o||this,n[d],d,n);return c}function he(n,t,o){const c={};for(const d in n)t.call(o||this,n[d],d,n)&&(c[d]=n[d]);return c}function me(n){return Array.isArray(n)?n.map(me):typeof n=="object"&&n?Y(n,me):n}const xe={};function Ae(n){xe[n]||(typeof console!="undefined"&&console.warn(n),xe[n]=!0)}function Ge(n,t,o){return(o.y-n.y)*(t.x-n.x)>(t.y-n.y)*(o.x-n.x)}function We(n){let t=0;for(let o,c,d=0,g=n.length,_=g-1;d<g;_=d++)o=n[d],c=n[_],t+=(c.x-o.x)*(o.y+c.y);return t}function _e(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function ot(n){const t={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,c,d,g)=>{const _=d||g;return t[c]=!_||_.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t}let it,dt,De=null;function Je(n){if(De==null){const t=n.navigator?n.navigator.userAgent:null;De=!!n.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return De}function Ke(n){return typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap}const zt={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(n){const t=requestAnimationFrame(n);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(n,t=0){const o=window.document.createElement("canvas"),c=o.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return o.width=n.width,o.height=n.height,c.drawImage(n,0,0,n.width,n.height),c.getImageData(-t,-t,n.width+2*t,n.height+2*t)},resolveURL:n=>(it||(it=document.createElement("a")),it.href=n,it.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(dt==null&&(dt=matchMedia("(prefers-reduced-motion: reduce)")),dt.matches)}};var Le=At;function At(n,t){this.x=n,this.y=t}At.prototype={clone:function(){return new At(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,t){return this.clone()._rotateAround(n,t)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var t=n.x-this.x,o=n.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,t){return Math.atan2(this.x*t-this.y*n,this.x*n+this.y*t)},_matMult:function(n){var t=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=t,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var t=Math.cos(n),o=Math.sin(n),c=o*this.x+t*this.y;return this.x=t*this.x-o*this.y,this.y=c,this},_rotateAround:function(n,t){var o=Math.cos(n),c=Math.sin(n),d=t.y+c*(this.x-t.x)+o*(this.y-t.y);return this.x=t.x+o*(this.x-t.x)-c*(this.y-t.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},At.convert=function(n){return n instanceof At?n:Array.isArray(n)?new At(n[0],n[1]):n};const Ot={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},dr="mapbox-tiles";let pr,Ir,vr=500,Ar=50;function Fr(){typeof caches=="undefined"||pr||(pr=caches.open(dr))}let Fe=1/0;const lt={supported:!1,testSupport:function(n){!Zt&&ft&&(nr?Bt(n):Ye=n)}};let Ye,ft,Zt=!1,nr=!1;function Bt(n){const t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,ft),n.isContextLost())return;lt.supported=!0}catch{}n.deleteTexture(t),Zt=!0}typeof document!="undefined"&&(ft=document.createElement("img"),ft.onload=function(){Ye&&Bt(Ye),Ye=null,nr=!0},ft.onerror=function(){Zt=!0,Ye=null},ft.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Lt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Lt);class W extends Error{constructor(t,o,c,d){super(`AJAXError: ${o} (${t}): ${c}`),this.status=t,this.statusText=o,this.url=c,this.body=d}}const ne=_e()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function be(n,t){const o=new AbortController,c=new Request(n.url,{method:n.method||"GET",body:n.body,credentials:n.credentials,headers:n.headers,referrer:ne(),signal:o.signal});let d=!1,g=!1;return n.type==="json"&&c.headers.set("Accept","application/json"),((_,b,E)=>{if(g)return;const P=Date.now();fetch(c).then(z=>z.ok?((M,B,j)=>{(n.type==="arrayBuffer"?M.arrayBuffer():n.type==="json"?M.json():M.text()).then(V=>{g||(B&&j&&function(ee,te,fe){if(Fr(),!pr)return;const Ee={status:te.status,statusText:te.statusText,headers:new Headers};te.headers.forEach((ke,je)=>Ee.headers.set(je,ke));const we=ot(te.headers.get("Cache-Control")||"");we["no-store"]||(we["max-age"]&&Ee.headers.set("Expires",new Date(fe+1e3*we["max-age"]).toUTCString()),new Date(Ee.headers.get("Expires")).getTime()-fe<42e4||function(ke,je){if(Ir===void 0)try{new Response(new ReadableStream),Ir=!0}catch{Ir=!1}Ir?je(ke.body):ke.blob().then(je)}(te,ke=>{const je=new Response(ke,Ee);Fr(),pr&&pr.then(Be=>Be.put(function(_t){const Tt=_t.indexOf("?");return Tt<0?_t:_t.slice(0,Tt)}(ee.url),je)).catch(Be=>Ae(Be.message))}))}(c,B,j),d=!0,t(null,V,M.headers.get("Cache-Control"),M.headers.get("Expires")))}).catch(V=>{g||t(new Error(V.message))})})(z,null,P):z.blob().then(M=>t(new W(z.status,z.statusText,n.url,M)))).catch(z=>{z.code!==20&&t(new Error(z.message))})})(),{cancel:()=>{g=!0,d||o.abort()}}}const Me=function(n,t){if(/:\/\//.test(n.url)&&!/^https?:|^file:/.test(n.url)){if(_e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,t);if(!_e()){const c=n.url.substring(0,n.url.indexOf("://"));return(Ot.REGISTERED_PROTOCOLS[c]||be)(n,t)}}if(!(/^file:/.test(o=n.url)||/^file:/.test(ne())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return be(n,t);if(_e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,t,void 0,!0)}var o;return function(c,d){const g=new XMLHttpRequest;g.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const _ in c.headers)g.setRequestHeader(_,c.headers[_]);return c.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=c.credentials==="include",g.onerror=()=>{d(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let _=g.response;if(c.type==="json")try{_=JSON.parse(g.response)}catch(b){return d(b)}d(null,_,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else{const _=new Blob([g.response],{type:g.getResponseHeader("Content-Type")});d(new W(g.status,g.statusText,c.url,_))}},g.send(c.body),{cancel:()=>g.abort()}}(n,t)},Re=function(n,t){return Me(se(n,{type:"arrayBuffer"}),t)};function Ve(n){const t=window.document.createElement("a");return t.href=n,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let $e,tt;$e=[],tt=0;const He=function(n,t){if(lt.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),tt>=Ot.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:n,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return $e.push(g),g}tt++;let o=!1;const c=()=>{if(!o)for(o=!0,tt--;$e.length&&tt<Ot.MAX_PARALLEL_IMAGE_REQUESTS;){const g=$e.shift(),{requestParameters:_,callback:b,cancelled:E}=g;E||(g.cancel=He(_,b).cancel)}},d=Re(n,(g,_,b,E)=>{c(),g?t(g):_&&function(P,z){typeof createImageBitmap=="function"?function(M,B){const j=new Blob([new Uint8Array(M)],{type:"image/png"});createImageBitmap(j).then(V=>{B(null,V)}).catch(V=>{B(new Error(`Could not load image because of ${V.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(P,z):function(M,B){const j=new Image;j.onload=()=>{B(null,j),URL.revokeObjectURL(j.src),j.onload=null,window.requestAnimationFrame(()=>{j.src=Qe})},j.onerror=()=>B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const V=new Blob([new Uint8Array(M)],{type:"image/png"});j.src=M.byteLength?URL.createObjectURL(V):Qe}(P,z)}(_,(P,z)=>{P!=null?t(P):z!=null&&t(null,z,{cacheControl:b,expires:E})})});return{cancel:()=>{d.cancel(),c()}}};function et(n,t,o){o[n]&&o[n].indexOf(t)!==-1||(o[n]=o[n]||[],o[n].push(t))}function bt(n,t,o){if(o&&o[n]){const c=o[n].indexOf(t);c!==-1&&o[n].splice(c,1)}}class yt{constructor(t,o={}){se(this,o),this.type=t}}class Pt extends yt{constructor(t,o={}){super("error",se({error:t},o))}}class Vt{on(t,o){return this._listeners=this._listeners||{},et(t,o,this._listeners),this}off(t,o){return bt(t,o,this._listeners),bt(t,o,this._oneTimeListeners),this}once(t,o){return this._oneTimeListeners=this._oneTimeListeners||{},et(t,o,this._oneTimeListeners),this}fire(t,o){typeof t=="string"&&(t=new yt(t,o||{}));const c=t.type;if(this.listens(c)){t.target=this;const d=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const b of d)b.call(this,t);const g=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const b of g)bt(c,b,this._oneTimeListeners),b.call(this,t);const _=this._eventedParent;_&&(se(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(t))}else t instanceof Pt&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Ue{constructor(t,o,c,d){this.message=(t?`${t}: `:"")+c,d&&(this.identifier=d),o!=null&&o.__line__&&(this.line=o.__line__)}}function ur(n){const t=n.value;return t?[new Ue(n.key,t,"constants have been deprecated as of v8")]:[]}function Hr(n,...t){for(const o of t)for(const c in o)n[c]=o[c];return n}function ir(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Sn(n){if(Array.isArray(n))return n.map(Sn);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const o in n)t[o]=Sn(n[o]);return t}return ir(n)}class Gr extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class vi{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[c,d]of o)this.bindings[c]=d}concat(t){return new vi(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Xt={kind:"null"},Xe={kind:"number"},$t={kind:"string"},qt={kind:"boolean"},Tn={kind:"color"},oi={kind:"object"},Ht={kind:"value"},Qi={kind:"collator"},si={kind:"formatted"},Di={kind:"resolvedImage"};function Kr(n,t){return{kind:"array",itemType:n,N:t}}function Sr(n){if(n.kind==="array"){const t=Sr(n.itemType);return typeof n.N=="number"?`array<${t}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${t}>`}return n.kind}const Yn=[Xt,Xe,$t,qt,Tn,si,oi,Kr(Ht),Di];function eo(n,t){if(t.kind==="error")return null;if(n.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!eo(n.itemType,t.itemType))&&(typeof n.N!="number"||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if(n.kind==="value"){for(const o of Yn)if(!eo(o,t))return null}}return`Expected ${Sr(n)} but found ${Sr(t)} instead.`}function rn(n,t){return t.some(o=>o.kind===n.kind)}function ai(n,t){return t.some(o=>o==="null"?n===null:o==="array"?Array.isArray(n):o==="object"?n&&!Array.isArray(n)&&typeof n=="object":o===typeof n)}var li,hs={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ao(n){return(n=Math.round(n))<0?0:n>255?255:n}function Po(n){return Ao(n[n.length-1]==="%"?parseFloat(n)/100*255:parseInt(n))}function G(n){return(t=n[n.length-1]==="%"?parseFloat(n)/100:parseFloat(n))<0?0:t>1?1:t;var t}function k(n,t,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?n+(t-n)*o*6:2*o<1?t:3*o<2?n+(t-n)*(2/3-o)*6:n}try{li={}.parseCSSColor=function(n){var t,o=n.replace(/ /g,"").toLowerCase();if(o in hs)return hs[o].slice();if(o[0]==="#")return o.length===4?(t=parseInt(o.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:o.length===7&&(t=parseInt(o.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var c=o.indexOf("("),d=o.indexOf(")");if(c!==-1&&d+1===o.length){var g=o.substr(0,c),_=o.substr(c+1,d-(c+1)).split(","),b=1;switch(g){case"rgba":if(_.length!==4)return null;b=G(_.pop());case"rgb":return _.length!==3?null:[Po(_[0]),Po(_[1]),Po(_[2]),b];case"hsla":if(_.length!==4)return null;b=G(_.pop());case"hsl":if(_.length!==3)return null;var E=(parseFloat(_[0])%360+360)%360/360,P=G(_[1]),z=G(_[2]),M=z<=.5?z*(P+1):z+P-z*P,B=2*z-M;return[Ao(255*k(B,M,E+1/3)),Ao(255*k(B,M,E)),Ao(255*k(B,M,E-1/3)),b];default:return null}}return null}}catch{}class O{constructor(t,o,c,d=1){this.r=t,this.g=o,this.b=c,this.a=d}static parse(t){if(!t)return;if(t instanceof O)return t;if(typeof t!="string")return;const o=li(t);return o?new O(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[t,o,c,d]=this.toArray();return`rgba(${Math.round(t)},${Math.round(o)},${Math.round(c)},${d})`}toArray(){const{r:t,g:o,b:c,a:d}=this;return d===0?[0,0,0,0]:[255*t/d,255*o/d,255*c/d,d]}}O.black=new O(0,0,0,1),O.white=new O(1,1,1,1),O.transparent=new O(0,0,0,0),O.red=new O(1,0,0,1);class U{constructor(t,o,c){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Z{constructor(t,o,c,d,g){this.text=t,this.image=o,this.scale=c,this.fontStack=d,this.textColor=g}}class X{constructor(t){this.sections=t}static fromString(t){return new X([new Z(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof X?t:X.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const o of this.sections){if(o.image){t.push(["image",o.image.name]);continue}t.push(o.text);const c={};o.fontStack&&(c["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(c["font-scale"]=o.scale),o.textColor&&(c["text-color"]=["rgba"].concat(o.textColor.toArray())),t.push(c)}return t}}class oe{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new oe({name:t,available:!1}):null}serialize(){return["image",this.name]}}function re(n,t,o,c){return typeof n=="number"&&n>=0&&n<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[n,t,o,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[n,t,o,c]:[n,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ie(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof O||n instanceof U||n instanceof X||n instanceof oe)return!0;if(Array.isArray(n)){for(const t of n)if(!ie(t))return!1;return!0}if(typeof n=="object"){for(const t in n)if(!ie(n[t]))return!1;return!0}return!1}function ae(n){if(n===null)return Xt;if(typeof n=="string")return $t;if(typeof n=="boolean")return qt;if(typeof n=="number")return Xe;if(n instanceof O)return Tn;if(n instanceof U)return Qi;if(n instanceof X)return si;if(n instanceof oe)return Di;if(Array.isArray(n)){const t=n.length;let o;for(const c of n){const d=ae(c);if(o){if(o===d)continue;o=Ht;break}o=d}return Kr(o||Ht,t)}return oi}function Pe(n){const t=typeof n;return n===null?"":t==="string"||t==="number"||t==="boolean"?String(n):n instanceof O||n instanceof X||n instanceof oe?n.toString():JSON.stringify(n)}class Ne{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!ie(t[1]))return o.error("invalid value");const c=t[1];let d=ae(c);const g=o.expectedType;return d.kind!=="array"||d.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(d=g),new Ne(d,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof O?["rgba"].concat(this.value.toArray()):this.value instanceof X?this.value.serialize():this.value}}class Se{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const wt={string:$t,number:Xe,boolean:qt,object:oi};class pt{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let c,d=1;const g=t[0];if(g==="array"){let b,E;if(t.length>2){const P=t[1];if(typeof P!="string"||!(P in wt)||P==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);b=wt[P],d++}else b=Ht;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);E=t[2],d++}c=Kr(b,E)}else c=wt[g];const _=[];for(;d<t.length;d++){const b=o.parse(t[d],d,Ht);if(!b)return null;_.push(b)}return new pt(c,_)}evaluate(t){for(let o=0;o<this.args.length;o++){const c=this.args[o].evaluate(t);if(!eo(this.type,ae(c)))return c;if(o===this.args.length-1)throw new Se(`Expected value to be of type ${Sr(this.type)}, but found ${Sr(ae(c))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,o=[t.kind];if(t.kind==="array"){const c=t.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){o.push(c.kind);const d=t.N;(typeof d=="number"||this.args.length>1)&&o.push(d)}}return o.concat(this.args.map(c=>c.serialize()))}}class St{constructor(t){this.type=si,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[1];if(!Array.isArray(c)&&typeof c=="object")return o.error("First argument must be an image or text section.");const d=[];let g=!1;for(let _=1;_<=t.length-1;++_){const b=t[_];if(g&&typeof b=="object"&&!Array.isArray(b)){g=!1;let E=null;if(b["font-scale"]&&(E=o.parse(b["font-scale"],1,Xe),!E))return null;let P=null;if(b["text-font"]&&(P=o.parse(b["text-font"],1,Kr($t)),!P))return null;let z=null;if(b["text-color"]&&(z=o.parse(b["text-color"],1,Tn),!z))return null;const M=d[d.length-1];M.scale=E,M.font=P,M.textColor=z}else{const E=o.parse(t[_],1,Ht);if(!E)return null;const P=E.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,d.push({content:E,scale:null,font:null,textColor:null})}}return new St(d)}evaluate(t){return new X(this.sections.map(o=>{const c=o.content.evaluate(t);return ae(c)===Di?new Z("",c,null,null,null):new Z(Pe(c),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const o of this.sections){t.push(o.content.serialize());const c={};o.scale&&(c["font-scale"]=o.scale.serialize()),o.font&&(c["text-font"]=o.font.serialize()),o.textColor&&(c["text-color"]=o.textColor.serialize()),t.push(c)}return t}}class Ct{constructor(t){this.type=Di,this.input=t}static parse(t,o){if(t.length!==2)return o.error("Expected two arguments.");const c=o.parse(t[1],1,$t);return c?new Ct(c):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),c=oe.fromString(o);return c&&t.availableImages&&(c.available=t.availableImages.indexOf(o)>-1),c}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const or={"to-boolean":qt,"to-color":Tn,"to-number":Xe,"to-string":$t};class Qt{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[0];if((c==="to-boolean"||c==="to-string")&&t.length!==2)return o.error("Expected one argument.");const d=or[c],g=[];for(let _=1;_<t.length;_++){const b=o.parse(t[_],_,Ht);if(!b)return null;g.push(b)}return new Qt(d,g)}evaluate(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){let o,c;for(const d of this.args){if(o=d.evaluate(t),c=null,o instanceof O)return o;if(typeof o=="string"){const g=t.parseColor(o);if(g)return g}else if(Array.isArray(o)&&(c=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:re(o[0],o[1],o[2],o[3]),!c))return new O(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Se(c||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const c of this.args){if(o=c.evaluate(t),o===null)return 0;const d=Number(o);if(!isNaN(d))return d}throw new Se(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?X.fromString(Pe(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?oe.fromString(Pe(this.args[0].evaluate(t))):Pe(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new St([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ct(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(o=>{t.push(o.serialize())}),t}}const Wt=["Unknown","Point","LineString","Polygon"];class Gt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Wt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=O.parse(t)),o}}class Ut{constructor(t,o,c,d){this.name=t,this.type=o,this._evaluate=c,this.args=d}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,o){const c=t[0],d=Ut.definitions[c];if(!d)return o.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(d)?d[0]:d.type,_=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,b=_.filter(([P])=>!Array.isArray(P)||P.length===t.length-1);let E=null;for(const[P,z]of b){E=new Ys(o.registry,o.path,null,o.scope);const M=[];let B=!1;for(let j=1;j<t.length;j++){const V=t[j],ee=Array.isArray(P)?P[j-1]:P.type,te=E.parse(V,1+M.length,ee);if(!te){B=!0;break}M.push(te)}if(!B)if(Array.isArray(P)&&P.length!==M.length)E.error(`Expected ${P.length} arguments, but found ${M.length} instead.`);else{for(let j=0;j<M.length;j++){const V=Array.isArray(P)?P[j]:P.type,ee=M[j];E.concat(j+1).checkSubtype(V,ee.type)}if(E.errors.length===0)return new Ut(c,g,z,M)}}if(b.length===1)o.errors.push(...E.errors);else{const P=(b.length?b:_).map(([M])=>{return B=M,Array.isArray(B)?`(${B.map(Sr).join(", ")})`:`(${Sr(B.type)}...)`;var B}).join(" | "),z=[];for(let M=1;M<t.length;M++){const B=o.parse(t[M],1+z.length);if(!B)return null;z.push(Sr(B.type))}o.error(`Expected arguments of type ${P}, but found (${z.join(", ")}) instead.`)}return null}static register(t,o){Ut.definitions=o;for(const c in o)t[c]=Ut}}class Zr{constructor(t,o,c){this.type=Qi,this.locale=c,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const c=t[1];if(typeof c!="object"||Array.isArray(c))return o.error("Collator options argument must be an object.");const d=o.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,qt);if(!d)return null;const g=o.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,qt);if(!g)return null;let _=null;return c.locale&&(_=o.parse(c.locale,1,$t),!_)?null:new Zr(d,g,_)}evaluate(t){return new U(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Vr=8192;function an(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function hn(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function fl(n,t){const o=(180+n[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,d=Math.pow(2,t.z);return[Math.round(o*d*Vr),Math.round(c*d*Vr)]}function ml(n,t,o){const c=n[0]-t[0],d=n[1]-t[1],g=n[0]-o[0],_=n[1]-o[1];return c*_-g*d==0&&c*g<=0&&d*_<=0}function Tr(n,t){let o=!1;for(let _=0,b=t.length;_<b;_++){const E=t[_];for(let P=0,z=E.length;P<z-1;P++){if(ml(n,E[P],E[P+1]))return!1;(d=E[P])[1]>(c=n)[1]!=(g=E[P+1])[1]>c[1]&&c[0]<(g[0]-d[0])*(c[1]-d[1])/(g[1]-d[1])+d[0]&&(o=!o)}}var c,d,g;return o}function _d(n,t){for(let o=0;o<t.length;o++)if(Tr(n,t[o]))return!0;return!1}function gl(n,t,o,c){const d=c[0]-o[0],g=c[1]-o[1],_=(n[0]-o[0])*g-d*(n[1]-o[1]),b=(t[0]-o[0])*g-d*(t[1]-o[1]);return _>0&&b<0||_<0&&b>0}function yd(n,t,o){for(const P of o)for(let z=0;z<P.length-1;++z)if((b=[(_=P[z+1])[0]-(g=P[z])[0],_[1]-g[1]])[0]*(E=[(d=t)[0]-(c=n)[0],d[1]-c[1]])[1]-b[1]*E[0]!=0&&gl(c,d,g,_)&&gl(g,_,c,d))return!0;var c,d,g,_,b,E;return!1}function _l(n,t){for(let o=0;o<n.length;++o)if(!Tr(n[o],t))return!1;for(let o=0;o<n.length-1;++o)if(yd(n[o],n[o+1],t))return!1;return!0}function ru(n,t){for(let o=0;o<t.length;o++)if(_l(n,t[o]))return!0;return!1}function yl(n,t,o){const c=[];for(let d=0;d<n.length;d++){const g=[];for(let _=0;_<n[d].length;_++){const b=fl(n[d][_],o);an(t,b),g.push(b)}c.push(g)}return c}function vl(n,t,o){const c=[];for(let d=0;d<n.length;d++){const g=yl(n[d],t,o);c.push(g)}return c}function xl(n,t,o,c){if(n[0]<o[0]||n[0]>o[2]){const d=.5*c;let g=n[0]-o[0]>d?-c:o[0]-n[0]>d?c:0;g===0&&(g=n[0]-o[2]>d?-c:o[2]-n[0]>d?c:0),n[0]+=g}an(t,n)}function nu(n,t,o,c){const d=Math.pow(2,c.z)*Vr,g=[c.x*Vr,c.y*Vr],_=[];for(const b of n)for(const E of b){const P=[E.x+g[0],E.y+g[1]];xl(P,t,o,d),_.push(P)}return _}function iu(n,t,o,c){const d=Math.pow(2,c.z)*Vr,g=[c.x*Vr,c.y*Vr],_=[];for(const E of n){const P=[];for(const z of E){const M=[z.x+g[0],z.y+g[1]];an(t,M),P.push(M)}_.push(P)}if(t[2]-t[0]<=d/2){(b=t)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of _)for(const P of E)xl(P,t,o,d)}var b;return _}class to{constructor(t,o){this.type=qt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ie(t[1])){const c=t[1];if(c.type==="FeatureCollection")for(let d=0;d<c.features.length;++d){const g=c.features[d].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new to(c,c.features[d].geometry)}else if(c.type==="Feature"){const d=c.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new to(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new to(c,c)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,c){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(c.type==="Polygon"){const b=yl(c.coordinates,g,_),E=nu(o.geometry(),d,g,_);if(!hn(d,g))return!1;for(const P of E)if(!Tr(P,b))return!1}if(c.type==="MultiPolygon"){const b=vl(c.coordinates,g,_),E=nu(o.geometry(),d,g,_);if(!hn(d,g))return!1;for(const P of E)if(!_d(P,b))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,c){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(c.type==="Polygon"){const b=yl(c.coordinates,g,_),E=iu(o.geometry(),d,g,_);if(!hn(d,g))return!1;for(const P of E)if(!_l(P,b))return!1}if(c.type==="MultiPolygon"){const b=vl(c.coordinates,g,_),E=iu(o.geometry(),d,g,_);if(!hn(d,g))return!1;for(const P of E)if(!ru(P,b))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Xs(n){if(n instanceof Ut&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof to)return!1;let t=!0;return n.eachChild(o=>{t&&!Xs(o)&&(t=!1)}),t}function Co(n){if(n instanceof Ut&&n.name==="feature-state")return!1;let t=!0;return n.eachChild(o=>{t&&!Co(o)&&(t=!1)}),t}function ds(n,t){if(n instanceof Ut&&t.indexOf(n.name)>=0)return!1;let o=!0;return n.eachChild(c=>{o&&!ds(c,t)&&(o=!1)}),o}class Js{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const c=t[1];return o.scope.has(c)?new Js(c,o.scope.get(c)):o.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ys{constructor(t,o=[],c,d=new vi,g=[]){this.registry=t,this.path=o,this.key=o.map(_=>`[${_}]`).join(""),this.scope=d,this.errors=g,this.expectedType=c}parse(t,o,c,d,g={}){return o?this.concat(o,c,d)._parse(t,g):this._parse(t,g)}_parse(t,o){function c(d,g,_){return _==="assert"?new pt(g,[d]):_==="coerce"?new Qt(g,[d]):d}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=t[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[d];if(g){let _=g.parse(t,this);if(!_)return null;if(this.expectedType){const b=this.expectedType,E=_.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||E.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(b,E))return null}else _=c(_,b,o.typeAnnotation||"coerce");else _=c(_,b,o.typeAnnotation||"assert")}if(!(_ instanceof Ne)&&_.type.kind!=="resolvedImage"&&ps(_)){const b=new Gt;try{_=new Ne(_.type,_.evaluate(b))}catch(E){return this.error(E.message),null}}return _}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,c){const d=typeof t=="number"?this.path.concat(t):this.path,g=c?this.scope.concat(c):this.scope;return new Ys(this.registry,d,o||null,g,this.errors)}error(t,...o){const c=`${this.key}${o.map(d=>`[${d}]`).join("")}`;this.errors.push(new Gr(c,t))}checkSubtype(t,o){const c=eo(t,o);return c&&this.error(c),c}}function ps(n){if(n instanceof Js)return ps(n.boundExpression);if(n instanceof Ut&&n.name==="error"||n instanceof Zr||n instanceof to)return!1;const t=n instanceof Qt||n instanceof pt;let o=!0;return n.eachChild(c=>{o=t?o&&ps(c):o&&c instanceof Ne}),!!o&&Xs(n)&&ds(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Qs(n,t){const o=n.length-1;let c,d,g=0,_=o,b=0;for(;g<=_;)if(b=Math.floor((g+_)/2),c=n[b],d=n[b+1],c<=t){if(b===o||t<d)return b;g=b+1}else{if(!(c>t))throw new Se("Input is not a number.");_=b-1}return 0}class fs{constructor(t,o,c){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[d,g]of c)this.labels.push(d),this.outputs.push(g)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const c=o.parse(t[1],1,Xe);if(!c)return null;const d=[];let g=null;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);for(let _=1;_<t.length;_+=2){const b=_===1?-1/0:t[_],E=t[_+1],P=_,z=_+1;if(typeof b!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(d.length&&d[d.length-1][0]>=b)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const M=o.parse(E,z,g);if(!M)return null;g=g||M.type,d.push([b,M])}return new fs(g,c,d)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const d=this.input.evaluate(t);if(d<=o[0])return c[0].evaluate(t);const g=o.length;return d>=o[g-1]?c[g-1].evaluate(t):c[Qs(o,d)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&t.push(this.labels[o]),t.push(this.outputs[o].serialize());return t}}function Xr(n,t,o){return n*(1-o)+t*o}var ms=Object.freeze({__proto__:null,number:Xr,color:function(n,t,o){return new O(Xr(n.r,t.r,o),Xr(n.g,t.g,o),Xr(n.b,t.b,o),Xr(n.a,t.a,o))},array:function(n,t,o){return n.map((c,d)=>Xr(c,t[d],o))}});const bl=.95047,ou=1.08883,su=4/29,ea=6/29,wl=3*ea*ea,vd=Math.PI/180,xd=180/Math.PI;function El(n){return n>.008856451679035631?Math.pow(n,1/3):n/wl+su}function Sl(n){return n>ea?n*n*n:wl*(n-su)}function Tl(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Il(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function au(n){const t=Il(n.r),o=Il(n.g),c=Il(n.b),d=El((.4124564*t+.3575761*o+.1804375*c)/bl),g=El((.2126729*t+.7151522*o+.072175*c)/1);return{l:116*g-16,a:500*(d-g),b:200*(g-El((.0193339*t+.119192*o+.9503041*c)/ou)),alpha:n.a}}function hr(n){let t=(n.l+16)/116,o=isNaN(n.a)?t:t+n.a/500,c=isNaN(n.b)?t:t-n.b/200;return t=1*Sl(t),o=bl*Sl(o),c=ou*Sl(c),new O(Tl(3.2404542*o-1.5371385*t-.4985314*c),Tl(-.969266*o+1.8760108*t+.041556*c),Tl(.0556434*o-.2040259*t+1.0572252*c),n.alpha)}function bd(n,t,o){const c=t-n;return n+o*(c>180||c<-180?c-360*Math.round(c/360):c)}const gs={forward:au,reverse:hr,interpolate:function(n,t,o){return{l:Xr(n.l,t.l,o),a:Xr(n.a,t.a,o),b:Xr(n.b,t.b,o),alpha:Xr(n.alpha,t.alpha,o)}}},_s={forward:function(n){const{l:t,a:o,b:c}=au(n),d=Math.atan2(c,o)*xd;return{h:d<0?d+360:d,c:Math.sqrt(o*o+c*c),l:t,alpha:n.a}},reverse:function(n){const t=n.h*vd,o=n.c;return hr({l:n.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:n.alpha})},interpolate:function(n,t,o){return{h:bd(n.h,t.h,o),c:Xr(n.c,t.c,o),l:Xr(n.l,t.l,o),alpha:Xr(n.alpha,t.alpha,o)}}};var lu=Object.freeze({__proto__:null,lab:gs,hcl:_s});class Vn{constructor(t,o,c,d,g){this.type=t,this.operator=o,this.interpolation=c,this.input=d,this.labels=[],this.outputs=[];for(const[_,b]of g)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(t,o,c,d){let g=0;if(t.name==="exponential")g=Al(o,t.base,c,d);else if(t.name==="linear")g=Al(o,1,c,d);else if(t.name==="cubic-bezier"){const _=t.controlPoints;g=new T(_[0],_[1],_[2],_[3]).solve(Al(o,1,c,d))}return g}static parse(t,o){let[c,d,g,..._]=t;if(!Array.isArray(d)||d.length===0)return o.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const P=d[1];if(typeof P!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:P}}else{if(d[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const P=d.slice(1);if(P.length!==4||P.some(z=>typeof z!="number"||z<0||z>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:P}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(g=o.parse(g,2,Xe),!g)return null;const b=[];let E=null;c==="interpolate-hcl"||c==="interpolate-lab"?E=Tn:o.expectedType&&o.expectedType.kind!=="value"&&(E=o.expectedType);for(let P=0;P<_.length;P+=2){const z=_[P],M=_[P+1],B=P+3,j=P+4;if(typeof z!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(b.length&&b[b.length-1][0]>=z)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);const V=o.parse(M,j,E);if(!V)return null;E=E||V.type,b.push([z,V])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new Vn(E,c,d,g,b):o.error(`Type ${Sr(E)} is not interpolatable.`)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const d=this.input.evaluate(t);if(d<=o[0])return c[0].evaluate(t);const g=o.length;if(d>=o[g-1])return c[g-1].evaluate(t);const _=Qs(o,d),b=Vn.interpolationFactor(this.interpolation,d,o[_],o[_+1]),E=c[_].evaluate(t),P=c[_+1].evaluate(t);return this.operator==="interpolate"?ms[this.type.kind.toLowerCase()](E,P,b):this.operator==="interpolate-hcl"?_s.reverse(_s.interpolate(_s.forward(E),_s.forward(P),b)):gs.reverse(gs.interpolate(gs.forward(E),gs.forward(P),b))}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,t,this.input.serialize()];for(let c=0;c<this.labels.length;c++)o.push(this.labels[c],this.outputs[c].serialize());return o}}function Al(n,t,o,c){const d=c-o,g=n-o;return d===0?0:t===1?g/d:(Math.pow(t,g)-1)/(Math.pow(t,d)-1)}class ta{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expectected at least one argument.");let c=null;const d=o.expectedType;d&&d.kind!=="value"&&(c=d);const g=[];for(const b of t.slice(1)){const E=o.parse(b,1+g.length,c,void 0,{typeAnnotation:"omit"});if(!E)return null;c=c||E.type,g.push(E)}const _=d&&g.some(b=>eo(d,b.type));return new ta(_?Ht:c,g)}evaluate(t){let o,c=null,d=0;for(const g of this.args)if(d++,c=g.evaluate(t),c&&c instanceof oe&&!c.available&&(o||(o=c.name),c=null,d===this.args.length&&(c=o)),c!==null)break;return c}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class ra{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const c=[];for(let g=1;g<t.length-1;g+=2){const _=t[g];if(typeof _!="string")return o.error(`Expected string, but found ${typeof _} instead.`,g);if(/[^a-zA-Z0-9_]/.test(_))return o.error("Variable names must contain only alphanumeric characters or '_'.",g);const b=o.parse(t[g+1],g+1);if(!b)return null;c.push([_,b])}const d=o.parse(t[t.length-1],t.length-1,o.expectedType,c);return d?new ra(c,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[o,c]of this.bindings)t.push(o,c.serialize());return t.push(this.result.serialize()),t}}class Pl{constructor(t,o,c){this.type=t,this.index=o,this.input=c}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Xe),d=o.parse(t[2],2,Kr(o.expectedType||Ht));return c&&d?new Pl(d.type.itemType,c,d):null}evaluate(t){const o=this.index.evaluate(t),c=this.input.evaluate(t);if(o<0)throw new Se(`Array index out of bounds: ${o} < 0.`);if(o>=c.length)throw new Se(`Array index out of bounds: ${o} > ${c.length-1}.`);if(o!==Math.floor(o))throw new Se(`Array index must be an integer, but found ${o} instead.`);return c[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Cl{constructor(t,o){this.type=qt,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Ht),d=o.parse(t[2],2,Ht);return c&&d?rn(c.type,[qt,$t,Xe,Xt,Ht])?new Cl(c,d):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(c.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!c)return!1;if(!ai(o,["boolean","string","number","null"]))throw new Se(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(ae(o))} instead.`);if(!ai(c,["string","array"]))throw new Se(`Expected second argument to be of type array or string, but found ${Sr(ae(c))} instead.`);return c.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class na{constructor(t,o,c){this.type=Xe,this.needle=t,this.haystack=o,this.fromIndex=c}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Ht),d=o.parse(t[2],2,Ht);if(!c||!d)return null;if(!rn(c.type,[qt,$t,Xe,Xt,Ht]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(c.type)} instead`);if(t.length===4){const g=o.parse(t[3],3,Xe);return g?new na(c,d,g):null}return new na(c,d)}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!ai(o,["boolean","string","number","null"]))throw new Se(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(ae(o))} instead.`);if(!ai(c,["string","array"]))throw new Se(`Expected second argument to be of type array or string, but found ${Sr(ae(c))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(t);return c.indexOf(o,d)}return c.indexOf(o)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class kl{constructor(t,o,c,d,g,_){this.inputType=t,this.type=o,this.input=c,this.cases=d,this.outputs=g,this.otherwise=_}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let c,d;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);const g={},_=[];for(let P=2;P<t.length-1;P+=2){let z=t[P];const M=t[P+1];Array.isArray(z)||(z=[z]);const B=o.concat(P);if(z.length===0)return B.error("Expected at least one branch label.");for(const V of z){if(typeof V!="number"&&typeof V!="string")return B.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return B.error("Numeric branch labels must be integer values.");if(c){if(B.checkSubtype(c,ae(V)))return null}else c=ae(V);if(g[String(V)]!==void 0)return B.error("Branch labels must be unique.");g[String(V)]=_.length}const j=o.parse(M,P,d);if(!j)return null;d=d||j.type,_.push(j)}const b=o.parse(t[1],1,Ht);if(!b)return null;const E=o.parse(t[t.length-1],t.length-1,d);return E?b.type.kind!=="value"&&o.concat(1).checkSubtype(c,b.type)?null:new kl(c,d,b,g,_,E):null}evaluate(t){const o=this.input.evaluate(t);return(ae(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),c=[],d={};for(const _ of o){const b=d[this.cases[_]];b===void 0?(d[this.cases[_]]=c.length,c.push([this.cases[_],[_]])):c[b][1].push(_)}const g=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,b]of c)t.push(b.length===1?g(b[0]):b.map(g)),t.push(this.outputs[_].serialize());return t.push(this.otherwise.serialize()),t}}class Dl{constructor(t,o,c){this.type=t,this.branches=o,this.otherwise=c}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let c;o.expectedType&&o.expectedType.kind!=="value"&&(c=o.expectedType);const d=[];for(let _=1;_<t.length-1;_+=2){const b=o.parse(t[_],_,qt);if(!b)return null;const E=o.parse(t[_+1],_+1,c);if(!E)return null;d.push([b,E]),c=c||E.type}const g=o.parse(t[t.length-1],t.length-1,c);return g?new Dl(c,d,g):null}evaluate(t){for(const[o,c]of this.branches)if(o.evaluate(t))return c.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,c]of this.branches)t(o),t(c);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class ia{constructor(t,o,c,d){this.type=t,this.input=o,this.beginIndex=c,this.endIndex=d}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Ht),d=o.parse(t[2],2,Xe);if(!c||!d)return null;if(!rn(c.type,[Kr(Ht),$t,Ht]))return o.error(`Expected first argument to be of type array or string, but found ${Sr(c.type)} instead`);if(t.length===4){const g=o.parse(t[3],3,Xe);return g?new ia(c.type,c,d,g):null}return new ia(c.type,c,d)}evaluate(t){const o=this.input.evaluate(t),c=this.beginIndex.evaluate(t);if(!ai(o,["string","array"]))throw new Se(`Expected first argument to be of type array or string, but found ${Sr(ae(o))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(t);return o.slice(c,d)}return o.slice(c)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function cu(n,t){return n==="=="||n==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function uu(n,t,o,c){return c.compare(t,o)===0}function ko(n,t,o){const c=n!=="=="&&n!=="!=";return class Qx{constructor(g,_,b){this.type=qt,this.lhs=g,this.rhs=_,this.collator=b,this.hasUntypedArgument=g.type.kind==="value"||_.type.kind==="value"}static parse(g,_){if(g.length!==3&&g.length!==4)return _.error("Expected two or three arguments.");const b=g[0];let E=_.parse(g[1],1,Ht);if(!E)return null;if(!cu(b,E.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${Sr(E.type)}'.`);let P=_.parse(g[2],2,Ht);if(!P)return null;if(!cu(b,P.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${Sr(P.type)}'.`);if(E.type.kind!==P.type.kind&&E.type.kind!=="value"&&P.type.kind!=="value")return _.error(`Cannot compare types '${Sr(E.type)}' and '${Sr(P.type)}'.`);c&&(E.type.kind==="value"&&P.type.kind!=="value"?E=new pt(P.type,[E]):E.type.kind!=="value"&&P.type.kind==="value"&&(P=new pt(E.type,[P])));let z=null;if(g.length===4){if(E.type.kind!=="string"&&P.type.kind!=="string"&&E.type.kind!=="value"&&P.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(z=_.parse(g[3],3,Qi),!z)return null}return new Qx(E,P,z)}evaluate(g){const _=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(c&&this.hasUntypedArgument){const E=ae(_),P=ae(b);if(E.kind!==P.kind||E.kind!=="string"&&E.kind!=="number")throw new Se(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${E.kind}, ${P.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const E=ae(_),P=ae(b);if(E.kind!=="string"||P.kind!=="string")return t(g,_,b)}return this.collator?o(g,_,b,this.collator.evaluate(g)):t(g,_,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[n];return this.eachChild(_=>{g.push(_.serialize())}),g}}}const wd=ko("==",function(n,t,o){return t===o},uu),Ed=ko("!=",function(n,t,o){return t!==o},function(n,t,o,c){return!uu(0,t,o,c)}),Sd=ko("<",function(n,t,o){return t<o},function(n,t,o,c){return c.compare(t,o)<0}),Td=ko(">",function(n,t,o){return t>o},function(n,t,o,c){return c.compare(t,o)>0}),Id=ko("<=",function(n,t,o){return t<=o},function(n,t,o,c){return c.compare(t,o)<=0}),Ad=ko(">=",function(n,t,o){return t>=o},function(n,t,o,c){return c.compare(t,o)>=0});class zl{constructor(t,o,c,d,g){this.type=$t,this.number=t,this.locale=o,this.currency=c,this.minFractionDigits=d,this.maxFractionDigits=g}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const c=o.parse(t[1],1,Xe);if(!c)return null;const d=t[2];if(typeof d!="object"||Array.isArray(d))return o.error("NumberFormat options argument must be an object.");let g=null;if(d.locale&&(g=o.parse(d.locale,1,$t),!g))return null;let _=null;if(d.currency&&(_=o.parse(d.currency,1,$t),!_))return null;let b=null;if(d["min-fraction-digits"]&&(b=o.parse(d["min-fraction-digits"],1,Xe),!b))return null;let E=null;return d["max-fraction-digits"]&&(E=o.parse(d["max-fraction-digits"],1,Xe),!E)?null:new zl(c,g,_,b,E)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Ol{constructor(t){this.type=Xe,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const c=o.parse(t[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Sr(c.type)} instead.`):new Ol(c):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Se(`Expected value to be of type string or array, but found ${Sr(ae(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(o=>{t.push(o.serialize())}),t}}const Do={"==":wd,"!=":Ed,">":Td,"<":Sd,">=":Ad,"<=":Id,array:pt,at:Pl,boolean:pt,case:Dl,coalesce:ta,collator:Zr,format:St,image:Ct,in:Cl,"index-of":na,interpolate:Vn,"interpolate-hcl":Vn,"interpolate-lab":Vn,length:Ol,let:ra,literal:Ne,match:kl,number:pt,"number-format":zl,object:pt,slice:ia,step:fs,string:pt,"to-boolean":Qt,"to-color":Qt,"to-number":Qt,"to-string":Qt,var:Js,within:to};function hu(n,[t,o,c,d]){t=t.evaluate(n),o=o.evaluate(n),c=c.evaluate(n);const g=d?d.evaluate(n):1,_=re(t,o,c,g);if(_)throw new Se(_);return new O(t/255*g,o/255*g,c/255*g,g)}function du(n,t){return n in t}function Ml(n,t){const o=t[n];return o===void 0?null:o}function ro(n){return{type:n}}function pu(n){return{result:"success",value:n}}function no(n){return{result:"error",value:n}}function zo(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function fu(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Ll(n){return!!n.expression&&n.expression.interpolated}function Nt(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function oa(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function _r(n){return n}function sa(n,t){const o=t.type==="color",c=n.stops&&typeof n.stops[0][0]=="object",d=c||!(c||n.property!==void 0),g=n.type||(Ll(t)?"exponential":"interval");if(o&&((n=Hr({},n)).stops&&(n.stops=n.stops.map(P=>[P[0],O.parse(P[1])])),n.default=O.parse(n.default?n.default:t.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!lu[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let _,b,E;if(g==="exponential")_=Rl;else if(g==="interval")_=aa;else if(g==="categorical"){_=Ur,b=Object.create(null);for(const P of n.stops)b[P[0]]=P[1];E=typeof n.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);_=Pd}if(c){const P={},z=[];for(let j=0;j<n.stops.length;j++){const V=n.stops[j],ee=V[0].zoom;P[ee]===void 0&&(P[ee]={zoom:ee,type:n.type,property:n.property,default:n.default,stops:[]},z.push(ee)),P[ee].stops.push([V[0].value,V[1]])}const M=[];for(const j of z)M.push([P[j].zoom,sa(P[j],t)]);const B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:Vn.interpolationFactor.bind(void 0,B),zoomStops:M.map(j=>j[0]),evaluate:({zoom:j},V)=>Rl({stops:M,base:n.base},t,j).evaluate(j,V)}}if(d){const P=g==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Vn.interpolationFactor.bind(void 0,P),zoomStops:n.stops.map(z=>z[0]),evaluate:({zoom:z})=>_(n,t,z,b,E)}}return{kind:"source",evaluate(P,z){const M=z&&z.properties?z.properties[n.property]:void 0;return M===void 0?kr(n.default,t.default):_(n,t,M,b,E)}}}function kr(n,t,o){return n!==void 0?n:t!==void 0?t:o!==void 0?o:void 0}function Ur(n,t,o,c,d){return kr(typeof o===d?c[o]:void 0,n.default,t.default)}function aa(n,t,o){if(Nt(o)!=="number")return kr(n.default,t.default);const c=n.stops.length;if(c===1||o<=n.stops[0][0])return n.stops[0][1];if(o>=n.stops[c-1][0])return n.stops[c-1][1];const d=Qs(n.stops.map(g=>g[0]),o);return n.stops[d][1]}function Rl(n,t,o){const c=n.base!==void 0?n.base:1;if(Nt(o)!=="number")return kr(n.default,t.default);const d=n.stops.length;if(d===1||o<=n.stops[0][0])return n.stops[0][1];if(o>=n.stops[d-1][0])return n.stops[d-1][1];const g=Qs(n.stops.map(z=>z[0]),o),_=function(z,M,B,j){const V=j-B,ee=z-B;return V===0?0:M===1?ee/V:(Math.pow(M,ee)-1)/(Math.pow(M,V)-1)}(o,c,n.stops[g][0],n.stops[g+1][0]),b=n.stops[g][1],E=n.stops[g+1][1];let P=ms[t.type]||_r;if(n.colorSpace&&n.colorSpace!=="rgb"){const z=lu[n.colorSpace];P=(M,B)=>z.reverse(z.interpolate(z.forward(M),z.forward(B),_))}return typeof b.evaluate=="function"?{evaluate(...z){const M=b.evaluate.apply(void 0,z),B=E.evaluate.apply(void 0,z);if(M!==void 0&&B!==void 0)return P(M,B,_)}}:P(b,E,_)}function Pd(n,t,o){return t.type==="color"?o=O.parse(o):t.type==="formatted"?o=X.fromString(o.toString()):t.type==="resolvedImage"?o=oe.fromString(o.toString()):Nt(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0),kr(o,n.default,t.default)}Ut.register(Do,{error:[{kind:"error"},[$t],(n,[t])=>{throw new Se(t.evaluate(n))}],typeof:[$t,[Ht],(n,[t])=>Sr(ae(t.evaluate(n)))],"to-rgba":[Kr(Xe,4),[Tn],(n,[t])=>t.evaluate(n).toArray()],rgb:[Tn,[Xe,Xe,Xe],hu],rgba:[Tn,[Xe,Xe,Xe,Xe],hu],has:{type:qt,overloads:[[[$t],(n,[t])=>du(t.evaluate(n),n.properties())],[[$t,oi],(n,[t,o])=>du(t.evaluate(n),o.evaluate(n))]]},get:{type:Ht,overloads:[[[$t],(n,[t])=>Ml(t.evaluate(n),n.properties())],[[$t,oi],(n,[t,o])=>Ml(t.evaluate(n),o.evaluate(n))]]},"feature-state":[Ht,[$t],(n,[t])=>Ml(t.evaluate(n),n.featureState||{})],properties:[oi,[],n=>n.properties()],"geometry-type":[$t,[],n=>n.geometryType()],id:[Ht,[],n=>n.id()],zoom:[Xe,[],n=>n.globals.zoom],"heatmap-density":[Xe,[],n=>n.globals.heatmapDensity||0],"line-progress":[Xe,[],n=>n.globals.lineProgress||0],accumulated:[Ht,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Xe,ro(Xe),(n,t)=>{let o=0;for(const c of t)o+=c.evaluate(n);return o}],"*":[Xe,ro(Xe),(n,t)=>{let o=1;for(const c of t)o*=c.evaluate(n);return o}],"-":{type:Xe,overloads:[[[Xe,Xe],(n,[t,o])=>t.evaluate(n)-o.evaluate(n)],[[Xe],(n,[t])=>-t.evaluate(n)]]},"/":[Xe,[Xe,Xe],(n,[t,o])=>t.evaluate(n)/o.evaluate(n)],"%":[Xe,[Xe,Xe],(n,[t,o])=>t.evaluate(n)%o.evaluate(n)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(n,[t,o])=>Math.pow(t.evaluate(n),o.evaluate(n))],sqrt:[Xe,[Xe],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[Xe,[Xe],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[Xe,[Xe],(n,[t])=>Math.log(t.evaluate(n))],log2:[Xe,[Xe],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[Xe,[Xe],(n,[t])=>Math.sin(t.evaluate(n))],cos:[Xe,[Xe],(n,[t])=>Math.cos(t.evaluate(n))],tan:[Xe,[Xe],(n,[t])=>Math.tan(t.evaluate(n))],asin:[Xe,[Xe],(n,[t])=>Math.asin(t.evaluate(n))],acos:[Xe,[Xe],(n,[t])=>Math.acos(t.evaluate(n))],atan:[Xe,[Xe],(n,[t])=>Math.atan(t.evaluate(n))],min:[Xe,ro(Xe),(n,t)=>Math.min(...t.map(o=>o.evaluate(n)))],max:[Xe,ro(Xe),(n,t)=>Math.max(...t.map(o=>o.evaluate(n)))],abs:[Xe,[Xe],(n,[t])=>Math.abs(t.evaluate(n))],round:[Xe,[Xe],(n,[t])=>{const o=t.evaluate(n);return o<0?-Math.round(-o):Math.round(o)}],floor:[Xe,[Xe],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[Xe,[Xe],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[qt,[$t,Ht],(n,[t,o])=>n.properties()[t.value]===o.value],"filter-id-==":[qt,[Ht],(n,[t])=>n.id()===t.value],"filter-type-==":[qt,[$t],(n,[t])=>n.geometryType()===t.value],"filter-<":[qt,[$t,Ht],(n,[t,o])=>{const c=n.properties()[t.value],d=o.value;return typeof c==typeof d&&c<d}],"filter-id-<":[qt,[Ht],(n,[t])=>{const o=n.id(),c=t.value;return typeof o==typeof c&&o<c}],"filter->":[qt,[$t,Ht],(n,[t,o])=>{const c=n.properties()[t.value],d=o.value;return typeof c==typeof d&&c>d}],"filter-id->":[qt,[Ht],(n,[t])=>{const o=n.id(),c=t.value;return typeof o==typeof c&&o>c}],"filter-<=":[qt,[$t,Ht],(n,[t,o])=>{const c=n.properties()[t.value],d=o.value;return typeof c==typeof d&&c<=d}],"filter-id-<=":[qt,[Ht],(n,[t])=>{const o=n.id(),c=t.value;return typeof o==typeof c&&o<=c}],"filter->=":[qt,[$t,Ht],(n,[t,o])=>{const c=n.properties()[t.value],d=o.value;return typeof c==typeof d&&c>=d}],"filter-id->=":[qt,[Ht],(n,[t])=>{const o=n.id(),c=t.value;return typeof o==typeof c&&o>=c}],"filter-has":[qt,[Ht],(n,[t])=>t.value in n.properties()],"filter-has-id":[qt,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[qt,[Kr($t)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[qt,[Kr(Ht)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[qt,[$t,Kr(Ht)],(n,[t,o])=>o.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[qt,[$t,Kr(Ht)],(n,[t,o])=>function(c,d,g,_){for(;g<=_;){const b=g+_>>1;if(d[b]===c)return!0;d[b]>c?_=b-1:g=b+1}return!1}(n.properties()[t.value],o.value,0,o.value.length-1)],all:{type:qt,overloads:[[[qt,qt],(n,[t,o])=>t.evaluate(n)&&o.evaluate(n)],[ro(qt),(n,t)=>{for(const o of t)if(!o.evaluate(n))return!1;return!0}]]},any:{type:qt,overloads:[[[qt,qt],(n,[t,o])=>t.evaluate(n)||o.evaluate(n)],[ro(qt),(n,t)=>{for(const o of t)if(o.evaluate(n))return!0;return!1}]]},"!":[qt,[qt],(n,[t])=>!t.evaluate(n)],"is-supported-script":[qt,[$t],(n,[t])=>{const o=n.globals&&n.globals.isSupportedScript;return!o||o(t.evaluate(n))}],upcase:[$t,[$t],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[$t,[$t],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[$t,ro(Ht),(n,t)=>t.map(o=>Pe(o.evaluate(n))).join("")],"resolved-locale":[$t,[Qi],(n,[t])=>t.evaluate(n).resolvedLocale()]});class Bl{constructor(t,o){this.expression=t,this._warningHistory={},this._evaluator=new Gt,this._defaultValue=o?function(c){return c.type==="color"&&oa(c.default)?new O(0,0,0,0):c.type==="color"?O.parse(c.default)||null:c.default===void 0?null:c.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(t,o,c,d,g,_){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=c,this._evaluator.canonical=d,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(t,o,c,d,g,_){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=c||null,this._evaluator.canonical=d,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new Se(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console!="undefined"&&console.warn(b.message)),this._defaultValue}}}function la(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Do}function ca(n,t){const o=new Ys(Do,[],t?function(d){const g={color:Tn,string:$t,number:Xe,enum:$t,boolean:qt,formatted:si,resolvedImage:Di};return d.type==="array"?Kr(g[d.value]||Ht,d.length):g[d.type]}(t):void 0),c=o.parse(n,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?pu(new Bl(c,t)):no(o.errors)}class ua{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent=t!=="constant"&&!Co(o.expression)}evaluateWithoutErrorHandling(t,o,c,d,g,_){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,d,g,_)}evaluate(t,o,c,d,g,_){return this._styleExpression.evaluate(t,o,c,d,g,_)}}class ha{constructor(t,o,c,d){this.kind=t,this.zoomStops=c,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!Co(o.expression),this.interpolationType=d}evaluateWithoutErrorHandling(t,o,c,d,g,_){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,d,g,_)}evaluate(t,o,c,d,g,_){return this._styleExpression.evaluate(t,o,c,d,g,_)}interpolationFactor(t,o,c){return this.interpolationType?Vn.interpolationFactor(this.interpolationType,t,o,c):0}}function Fl(n,t){const o=ca(n,t);if(o.result==="error")return o;const c=o.value.expression,d=Xs(c);if(!d&&!zo(t))return no([new Gr("","data expressions not supported")]);const g=ds(c,["zoom"]);if(!g&&!fu(t))return no([new Gr("","zoom expressions not supported")]);const _=da(c);return _||g?_ instanceof Gr?no([_]):_ instanceof Vn&&!Ll(t)?no([new Gr("",'"interpolate" expressions cannot be used with this property')]):pu(_?new ha(d?"camera":"composite",o.value,_.labels,_ instanceof Vn?_.interpolation:void 0):new ua(d?"constant":"source",o.value)):no([new Gr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Oo{constructor(t,o){this._parameters=t,this._specification=o,Hr(this,sa(this._parameters,this._specification))}static deserialize(t){return new Oo(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function da(n){let t=null;if(n instanceof ra)t=da(n.result);else if(n instanceof ta){for(const o of n.args)if(t=da(o),t)break}else(n instanceof fs||n instanceof Vn)&&n.input instanceof Ut&&n.input.name==="zoom"&&(t=n);return t instanceof Gr||n.eachChild(o=>{const c=da(o);c instanceof Gr?t=c:!t&&c?t=new Gr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&c&&t!==c&&(t=new Gr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function ci(n){const t=n.key,o=n.value,c=n.valueSpec||{},d=n.objectElementValidators||{},g=n.style,_=n.styleSpec;let b=[];const E=Nt(o);if(E!=="object")return[new Ue(t,o,`object expected, ${E} found`)];for(const P in o){const z=P.split(".")[0],M=c[z]||c["*"];let B;if(d[z])B=d[z];else if(c[z])B=On;else if(d["*"])B=d["*"];else{if(!c["*"]){b.push(new Ue(t,o[P],`unknown property "${P}"`));continue}B=On}b=b.concat(B({key:(t&&`${t}.`)+P,value:o[P],valueSpec:M,style:g,styleSpec:_,object:o,objectKey:P},o))}for(const P in c)d[P]||c[P].required&&c[P].default===void 0&&o[P]===void 0&&b.push(new Ue(t,o,`missing required property "${P}"`));return b}function mu(n){const t=n.value,o=n.valueSpec,c=n.style,d=n.styleSpec,g=n.key,_=n.arrayElementValidator||On;if(Nt(t)!=="array")return[new Ue(g,t,`array expected, ${Nt(t)} found`)];if(o.length&&t.length!==o.length)return[new Ue(g,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new Ue(g,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let b={type:o.value,values:o.values};d.$version<7&&(b.function=o.function),Nt(o.value)==="object"&&(b=o.value);let E=[];for(let P=0;P<t.length;P++)E=E.concat(_({array:t,arrayIndex:P,value:t[P],valueSpec:b,style:c,styleSpec:d,key:`${g}[${P}]`}));return E}function gu(n){const t=n.key,o=n.value,c=n.valueSpec;let d=Nt(o);return d==="number"&&o!=o&&(d="NaN"),d!=="number"?[new Ue(t,o,`number expected, ${d} found`)]:"minimum"in c&&o<c.minimum?[new Ue(t,o,`${o} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&o>c.maximum?[new Ue(t,o,`${o} is greater than the maximum value ${c.maximum}`)]:[]}function _u(n){const t=n.valueSpec,o=ir(n.value.type);let c,d,g,_={};const b=o!=="categorical"&&n.value.property===void 0,E=!b,P=Nt(n.value.stops)==="array"&&Nt(n.value.stops[0])==="array"&&Nt(n.value.stops[0][0])==="object",z=ci({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(j){if(o==="identity")return[new Ue(j.key,j.value,'identity function may not have a "stops" property')];let V=[];const ee=j.value;return V=V.concat(mu({key:j.key,value:ee,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:M})),Nt(ee)==="array"&&ee.length===0&&V.push(new Ue(j.key,ee,"array must have at least one stop")),V},default:function(j){return On({key:j.key,value:j.value,valueSpec:t,style:j.style,styleSpec:j.styleSpec})}}});return o==="identity"&&b&&z.push(new Ue(n.key,n.value,'missing required property "property"')),o==="identity"||n.value.stops||z.push(new Ue(n.key,n.value,'missing required property "stops"')),o==="exponential"&&n.valueSpec.expression&&!Ll(n.valueSpec)&&z.push(new Ue(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(E&&!zo(n.valueSpec)?z.push(new Ue(n.key,n.value,"property functions not supported")):b&&!fu(n.valueSpec)&&z.push(new Ue(n.key,n.value,"zoom functions not supported"))),o!=="categorical"&&!P||n.value.property!==void 0||z.push(new Ue(n.key,n.value,'"property" property is required')),z;function M(j){let V=[];const ee=j.value,te=j.key;if(Nt(ee)!=="array")return[new Ue(te,ee,`array expected, ${Nt(ee)} found`)];if(ee.length!==2)return[new Ue(te,ee,`array length 2 expected, length ${ee.length} found`)];if(P){if(Nt(ee[0])!=="object")return[new Ue(te,ee,`object expected, ${Nt(ee[0])} found`)];if(ee[0].zoom===void 0)return[new Ue(te,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new Ue(te,ee,"object stop key must have value")];if(g&&g>ir(ee[0].zoom))return[new Ue(te,ee[0].zoom,"stop zoom values must appear in ascending order")];ir(ee[0].zoom)!==g&&(g=ir(ee[0].zoom),d=void 0,_={}),V=V.concat(ci({key:`${te}[0]`,value:ee[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:gu,value:B}}))}else V=V.concat(B({key:`${te}[0]`,value:ee[0],valueSpec:{},style:j.style,styleSpec:j.styleSpec},ee));return la(Sn(ee[1]))?V.concat([new Ue(`${te}[1]`,ee[1],"expressions are not allowed in function stops.")]):V.concat(On({key:`${te}[1]`,value:ee[1],valueSpec:t,style:j.style,styleSpec:j.styleSpec}))}function B(j,V){const ee=Nt(j.value),te=ir(j.value),fe=j.value!==null?j.value:V;if(c){if(ee!==c)return[new Ue(j.key,fe,`${ee} stop domain type must match previous stop domain type ${c}`)]}else c=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new Ue(j.key,fe,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&o!=="categorical"){let Ee=`number expected, ${ee} found`;return zo(t)&&o===void 0&&(Ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ue(j.key,fe,Ee)]}return o!=="categorical"||ee!=="number"||isFinite(te)&&Math.floor(te)===te?o!=="categorical"&&ee==="number"&&d!==void 0&&te<d?[new Ue(j.key,fe,"stop domain values must appear in ascending order")]:(d=te,o==="categorical"&&te in _?[new Ue(j.key,fe,"stop domain values must be unique")]:(_[te]=!0,[])):[new Ue(j.key,fe,`integer expected, found ${te}`)]}}function Mo(n){const t=(n.expressionContext==="property"?Fl:ca)(Sn(n.value),n.valueSpec);if(t.result==="error")return t.value.map(c=>new Ue(`${n.key}${c.key}`,n.value,c.message));const o=t.value.expression||t.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!o.outputDefined())return[new Ue(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!Co(o))return[new Ue(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!Co(o))return[new Ue(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!ds(o,["zoom","feature-state"]))return[new Ue(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Xs(o))return[new Ue(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pa(n){const t=n.key,o=n.value,c=n.valueSpec,d=[];return Array.isArray(c.values)?c.values.indexOf(ir(o))===-1&&d.push(new Ue(t,o,`expected one of [${c.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(c.values).indexOf(ir(o))===-1&&d.push(new Ue(t,o,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(o)} found`)),d}function Nl(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!Nl(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const yu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fa(n){if(n==null)return{filter:()=>!0,needGeometry:!1};Nl(n)||(n=ys(n));const t=ca(n,yu);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,c,d)=>t.value.evaluate(o,c,{},d),needGeometry:vu(n)}}function ma(n,t){return n<t?-1:n>t?1:0}function vu(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let t=1;t<n.length;t++)if(vu(n[t]))return!0;return!1}function ys(n){if(!n)return!0;const t=n[0];return n.length<=1?t!=="any":t==="=="?jl(n[1],n[2],"=="):t==="!="?Lo(jl(n[1],n[2],"==")):t==="<"||t===">"||t==="<="||t===">="?jl(n[1],n[2],t):t==="any"?(o=n.slice(1),["any"].concat(o.map(ys))):t==="all"?["all"].concat(n.slice(1).map(ys)):t==="none"?["all"].concat(n.slice(1).map(ys).map(Lo)):t==="in"?ga(n[1],n.slice(2)):t==="!in"?Lo(ga(n[1],n.slice(2))):t==="has"?_a(n[1]):t==="!has"?Lo(_a(n[1])):t!=="within"||n;var o}function jl(n,t,o){switch(n){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,n,t]}}function ga(n,t){if(t.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",n,["literal",t.sort(ma)]]:["filter-in-small",n,["literal",t]]}}function _a(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Lo(n){return["!",n]}function vs(n){return Nl(Sn(n.value))?Mo(Hr({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xu(n)}function xu(n){const t=n.value,o=n.key;if(Nt(t)!=="array")return[new Ue(o,t,`array expected, ${Nt(t)} found`)];const c=n.styleSpec;let d,g=[];if(t.length<1)return[new Ue(o,t,"filter array must have at least 1 element")];switch(g=g.concat(pa({key:`${o}[0]`,value:t[0],valueSpec:c.filter_operator,style:n.style,styleSpec:n.styleSpec})),ir(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&ir(t[1])==="$type"&&g.push(new Ue(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&g.push(new Ue(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(d=Nt(t[1]),d!=="string"&&g.push(new Ue(`${o}[1]`,t[1],`string expected, ${d} found`)));for(let _=2;_<t.length;_++)d=Nt(t[_]),ir(t[1])==="$type"?g=g.concat(pa({key:`${o}[${_}]`,value:t[_],valueSpec:c.geometry_type,style:n.style,styleSpec:n.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&g.push(new Ue(`${o}[${_}]`,t[_],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let _=1;_<t.length;_++)g=g.concat(xu({key:`${o}[${_}]`,value:t[_],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":d=Nt(t[1]),t.length!==2?g.push(new Ue(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):d!=="string"&&g.push(new Ue(`${o}[1]`,t[1],`string expected, ${d} found`));break;case"within":d=Nt(t[1]),t.length!==2?g.push(new Ue(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):d!=="object"&&g.push(new Ue(`${o}[1]`,t[1],`object expected, ${d} found`))}return g}function xs(n,t){const o=n.key,c=n.style,d=n.styleSpec,g=n.value,_=n.objectKey,b=d[`${t}_${n.layerType}`];if(!b)return[];const E=_.match(/^(.*)-transition$/);if(t==="paint"&&E&&b[E[1]]&&b[E[1]].transition)return On({key:o,value:g,valueSpec:d.transition,style:c,styleSpec:d});const P=n.valueSpec||b[_];if(!P)return[new Ue(o,g,`unknown property "${_}"`)];let z;if(Nt(g)==="string"&&zo(P)&&!P.tokens&&(z=/^{([^}]+)}$/.exec(g)))return[new Ue(o,g,`"${_}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const M=[];return n.layerType==="symbol"&&(_==="text-field"&&c&&!c.glyphs&&M.push(new Ue(o,g,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&oa(Sn(g))&&ir(g.type)==="identity"&&M.push(new Ue(o,g,'"text-font" does not support identity functions'))),M.concat(On({key:n.key,value:g,valueSpec:P,style:c,styleSpec:d,expressionContext:"property",propertyType:t,propertyKey:_}))}function bu(n){return xs(n,"paint")}function wu(n){return xs(n,"layout")}function Eu(n){let t=[];const o=n.value,c=n.key,d=n.style,g=n.styleSpec;o.type||o.ref||t.push(new Ue(c,o,'either "type" or "ref" is required'));let _=ir(o.type);const b=ir(o.ref);if(o.id){const E=ir(o.id);for(let P=0;P<n.arrayIndex;P++){const z=d.layers[P];ir(z.id)===E&&t.push(new Ue(c,o.id,`duplicate layer id "${o.id}", previously used at line ${z.id.__line__}`))}}if("ref"in o){let E;["type","source","source-layer","filter","layout"].forEach(P=>{P in o&&t.push(new Ue(c,o[P],`"${P}" is prohibited for ref layers`))}),d.layers.forEach(P=>{ir(P.id)===b&&(E=P)}),E?E.ref?t.push(new Ue(c,o.ref,"ref cannot reference another ref layer")):_=ir(E.type):t.push(new Ue(c,o.ref,`ref layer "${b}" not found`))}else if(_!=="background")if(o.source){const E=d.sources&&d.sources[o.source],P=E&&ir(E.type);E?P==="vector"&&_==="raster"?t.push(new Ue(c,o.source,`layer "${o.id}" requires a raster source`)):P==="raster"&&_!=="raster"?t.push(new Ue(c,o.source,`layer "${o.id}" requires a vector source`)):P!=="vector"||o["source-layer"]?P==="raster-dem"&&_!=="hillshade"?t.push(new Ue(c,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!o.paint||!o.paint["line-gradient"]||P==="geojson"&&E.lineMetrics||t.push(new Ue(c,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ue(c,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new Ue(c,o.source,`source "${o.source}" not found`))}else t.push(new Ue(c,o,'missing required property "source"'));return t=t.concat(ci({key:c,value:o,valueSpec:g.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>On({key:`${c}.type`,value:o.type,valueSpec:g.layer.type,style:n.style,styleSpec:n.styleSpec,object:o,objectKey:"type"}),filter:vs,layout:E=>ci({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":P=>wu(Hr({layerType:_},P))}}),paint:E=>ci({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":P=>bu(Hr({layerType:_},P))}})}})),t}function Ro(n){const t=n.value,o=n.key,c=Nt(t);return c!=="string"?[new Ue(o,t,`string expected, ${c} found`)]:[]}const Su={promoteId:function({key:n,value:t}){if(Nt(t)==="string")return Ro({key:n,value:t});{const o=[];for(const c in t)o.push(...Ro({key:`${n}.${c}`,value:t[c]}));return o}}};function bs(n){const t=n.value,o=n.key,c=n.styleSpec,d=n.style;if(!t.type)return[new Ue(o,t,'"type" is required')];const g=ir(t.type);let _;switch(g){case"vector":case"raster":case"raster-dem":return _=ci({key:o,value:t,valueSpec:c[`source_${g.replace("-","_")}`],style:n.style,styleSpec:c,objectElementValidators:Su}),_;case"geojson":if(_=ci({key:o,value:t,valueSpec:c.source_geojson,style:d,styleSpec:c,objectElementValidators:Su}),t.cluster)for(const b in t.clusterProperties){const[E,P]=t.clusterProperties[b],z=typeof E=="string"?[E,["accumulated"],["get",b]]:E;_.push(...Mo({key:`${o}.${b}.map`,value:P,expressionContext:"cluster-map"})),_.push(...Mo({key:`${o}.${b}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return _;case"video":return ci({key:o,value:t,valueSpec:c.source_video,style:d,styleSpec:c});case"image":return ci({key:o,value:t,valueSpec:c.source_image,style:d,styleSpec:c});case"canvas":return[new Ue(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pa({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:d,styleSpec:c})}}function ws(n){const t=n.value,o=n.styleSpec,c=o.light,d=n.style;let g=[];const _=Nt(t);if(t===void 0)return g;if(_!=="object")return g=g.concat([new Ue("light",t,`object expected, ${_} found`)]),g;for(const b in t){const E=b.match(/^(.*)-transition$/);g=g.concat(E&&c[E[1]]&&c[E[1]].transition?On({key:b,value:t[b],valueSpec:o.transition,style:d,styleSpec:o}):c[b]?On({key:b,value:t[b],valueSpec:c[b],style:d,styleSpec:o}):[new Ue(b,t[b],`unknown property "${b}"`)])}return g}const Un={"*":()=>[],array:mu,boolean:function(n){const t=n.value,o=n.key,c=Nt(t);return c!=="boolean"?[new Ue(o,t,`boolean expected, ${c} found`)]:[]},number:gu,color:function(n){const t=n.key,o=n.value,c=Nt(o);return c!=="string"?[new Ue(t,o,`color expected, ${c} found`)]:li(o)===null?[new Ue(t,o,`color expected, "${o}" found`)]:[]},constants:ur,enum:pa,filter:vs,function:_u,layer:Eu,object:ci,source:bs,light:ws,string:Ro,formatted:function(n){return Ro(n).length===0?[]:Mo(n)},resolvedImage:function(n){return Ro(n).length===0?[]:Mo(n)}};function On(n){const t=n.value,o=n.valueSpec,c=n.styleSpec;return o.expression&&oa(ir(t))?_u(n):o.expression&&la(Sn(t))?Mo(n):o.type&&Un[o.type]?Un[o.type](n):ci(Hr({},n,{valueSpec:o.type?c[o.type]:o}))}function Cd(n){const t=n.value,o=n.key,c=Ro(n);return c.length||(t.indexOf("{fontstack}")===-1&&c.push(new Ue(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&c.push(new Ue(o,t,'"glyphs" url must include a "{range}" token'))),c}function io(n,t=ve){let o=[];return o=o.concat(On({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,objectElementValidators:{glyphs:Cd,"*":()=>[]}})),n.constants&&(o=o.concat(ur({key:"constants",value:n.constants,style:n,styleSpec:t}))),Tu(o)}function Tu(n){return[].concat(n).sort((t,o)=>t.line-o.line)}function Bo(n){return function(...t){return Tu(n.apply(this,t))}}io.source=Bo(bs),io.light=Bo(ws),io.layer=Bo(Eu),io.filter=Bo(vs),io.paintProperty=Bo(bu),io.layoutProperty=Bo(wu);const oo=io,kd=oo.light,Vl=oo.paintProperty,Dd=oo.layoutProperty;function Iu(n,t){let o=!1;if(t&&t.length)for(const c of t)n.fire(new Pt(new Error(c.message))),o=!0;return o}class so{constructor(t,o,c){const d=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const _=new Int32Array(this.arrayBuffer);t=_[0],this.d=(o=_[1])+2*(c=_[2]);for(let E=0;E<this.d*this.d;E++){const P=_[3+E],z=_[3+E+1];d.push(P===z?null:_.subarray(P,z))}const b=_[3+d.length+1];this.keys=_.subarray(_[3+d.length],b),this.bboxes=_.subarray(b),this.insert=this._insertReadonly}else{this.d=o+2*c;for(let _=0;_<this.d*this.d;_++)d.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=t,this.padding=c,this.scale=o/t,this.uid=0;const g=c/o*t;this.min=-g,this.max=t+g}insert(t,o,c,d,g){this._forEachCell(o,c,d,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,o,c,d,g,_){this.cells[g].push(_)}query(t,o,c,d,g){const _=this.min,b=this.max;if(t<=_&&o<=_&&b<=c&&b<=d&&!g)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(t,o,c,d,this._queryCell,E,{},g),E}}_queryCell(t,o,c,d,g,_,b,E){const P=this.cells[g];if(P!==null){const z=this.keys,M=this.bboxes;for(let B=0;B<P.length;B++){const j=P[B];if(b[j]===void 0){const V=4*j;(E?E(M[V+0],M[V+1],M[V+2],M[V+3]):t<=M[V+2]&&o<=M[V+3]&&c>=M[V+0]&&d>=M[V+1])?(b[j]=!0,_.push(z[j])):b[j]=!1}}}}_forEachCell(t,o,c,d,g,_,b,E){const P=this._convertToCellCoord(t),z=this._convertToCellCoord(o),M=this._convertToCellCoord(c),B=this._convertToCellCoord(d);for(let j=P;j<=M;j++)for(let V=z;V<=B;V++){const ee=this.d*V+j;if((!E||E(this._convertFromCellCoord(j),this._convertFromCellCoord(V),this._convertFromCellCoord(j+1),this._convertFromCellCoord(V+1)))&&g.call(this,t,o,c,d,ee,_,b,E))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,o=3+this.cells.length+1+1;let c=0;for(let _=0;_<this.cells.length;_++)c+=this.cells[_].length;const d=new Int32Array(o+c+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;let g=o;for(let _=0;_<t.length;_++){const b=t[_];d[3+_]=g,d.set(b,g),g+=b.length}return d[3+t.length]=g,d.set(this.keys,g),g+=this.keys.length,d[3+t.length+1]=g,d.set(this.bboxes,g),g+=this.bboxes.length,d.buffer}static serialize(t,o){const c=t.toArrayBuffer();return o&&o.push(c),{buffer:c}}static deserialize(t){return new so(t.buffer)}}const Fo={};function gt(n,t,o={}){Object.defineProperty(t,"_classRegistryKey",{value:n,writeable:!1}),Fo[n]={klass:t,omit:o.omit||[],shallow:o.shallow||[]}}gt("Object",Object),gt("TransferableGridIndex",so),gt("Color",O),gt("Error",Error),gt("AJAXError",W),gt("ResolvedImage",oe),gt("StylePropertyFunction",Oo),gt("StyleExpression",Bl,{omit:["_evaluator"]}),gt("ZoomDependentExpression",ha),gt("ZoomConstantExpression",ua),gt("CompoundExpression",Ut,{omit:["_evaluate"]});for(const n in Do)Do[n]._classRegistryKey||gt(`Expression_${n}`,Do[n]);function Ul(n){return n&&typeof ArrayBuffer!="undefined"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function Es(n,t){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||n instanceof Blob)return n;if(Ul(n)||Ke(n))return t&&t.push(n),n;if(ArrayBuffer.isView(n)){const o=n;return t&&t.push(o.buffer),o}if(n instanceof ImageData)return t&&t.push(n.data.buffer),n;if(Array.isArray(n)){const o=[];for(const c of n)o.push(Es(c,t));return o}if(typeof n=="object"){const o=n.constructor,c=o._classRegistryKey;if(!c)throw new Error("can't serialize object of unregistered class");const d=o.serialize?o.serialize(n,t):{};if(!o.serialize){for(const g in n){if(!n.hasOwnProperty(g)||Fo[c].omit.indexOf(g)>=0)continue;const _=n[g];d[g]=Fo[c].shallow.indexOf(g)>=0?_:Es(_,t)}n instanceof Error&&(d.message=n.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(d.$name=c),d}throw new Error("can't serialize object of type "+typeof n)}function ao(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||n instanceof Blob||Ul(n)||Ke(n)||ArrayBuffer.isView(n)||n instanceof ImageData)return n;if(Array.isArray(n))return n.map(ao);if(typeof n=="object"){const t=n.$name||"Object";if(!Fo[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:o}=Fo[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(n);const c=Object.create(o.prototype);for(const d of Object.keys(n)){if(d==="$name")continue;const g=n[d];c[d]=Fo[t].shallow.indexOf(d)>=0?g:ao(g)}return c}throw new Error("can't deserialize object of type "+typeof n)}class Ss{constructor(){this.first=!0}update(t,o){const c=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=o),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=c,!0))}}const st={"Latin-1 Supplement":n=>n>=128&&n<=255,Arabic:n=>n>=1536&&n<=1791,"Arabic Supplement":n=>n>=1872&&n<=1919,"Arabic Extended-A":n=>n>=2208&&n<=2303,"Hangul Jamo":n=>n>=4352&&n<=4607,"Unified Canadian Aboriginal Syllabics":n=>n>=5120&&n<=5759,Khmer:n=>n>=6016&&n<=6143,"Unified Canadian Aboriginal Syllabics Extended":n=>n>=6320&&n<=6399,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"CJK Radicals Supplement":n=>n>=11904&&n<=12031,"Kangxi Radicals":n=>n>=12032&&n<=12255,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Hiragana:n=>n>=12352&&n<=12447,Katakana:n=>n>=12448&&n<=12543,Bopomofo:n=>n>=12544&&n<=12591,"Hangul Compatibility Jamo":n=>n>=12592&&n<=12687,Kanbun:n=>n>=12688&&n<=12703,"Bopomofo Extended":n=>n>=12704&&n<=12735,"CJK Strokes":n=>n>=12736&&n<=12783,"Katakana Phonetic Extensions":n=>n>=12784&&n<=12799,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"CJK Unified Ideographs Extension A":n=>n>=13312&&n<=19903,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"CJK Unified Ideographs":n=>n>=19968&&n<=40959,"Yi Syllables":n=>n>=40960&&n<=42127,"Yi Radicals":n=>n>=42128&&n<=42191,"Hangul Jamo Extended-A":n=>n>=43360&&n<=43391,"Hangul Syllables":n=>n>=44032&&n<=55215,"Hangul Jamo Extended-B":n=>n>=55216&&n<=55295,"Private Use Area":n=>n>=57344&&n<=63743,"CJK Compatibility Ideographs":n=>n>=63744&&n<=64255,"Arabic Presentation Forms-A":n=>n>=64336&&n<=65023,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Arabic Presentation Forms-B":n=>n>=65136&&n<=65279,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function $l(n){for(const t of n)if(Ts(t.charCodeAt(0)))return!0;return!1}function Au(n){for(const t of n)if(!zd(t.charCodeAt(0)))return!1;return!0}function zd(n){return!(st.Arabic(n)||st["Arabic Supplement"](n)||st["Arabic Extended-A"](n)||st["Arabic Presentation Forms-A"](n)||st["Arabic Presentation Forms-B"](n))}function Ts(n){return!(n!==746&&n!==747&&(n<4352||!(st["Bopomofo Extended"](n)||st.Bopomofo(n)||st["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||st["CJK Compatibility Ideographs"](n)||st["CJK Compatibility"](n)||st["CJK Radicals Supplement"](n)||st["CJK Strokes"](n)||!(!st["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||st["CJK Unified Ideographs Extension A"](n)||st["CJK Unified Ideographs"](n)||st["Enclosed CJK Letters and Months"](n)||st["Hangul Compatibility Jamo"](n)||st["Hangul Jamo Extended-A"](n)||st["Hangul Jamo Extended-B"](n)||st["Hangul Jamo"](n)||st["Hangul Syllables"](n)||st.Hiragana(n)||st["Ideographic Description Characters"](n)||st.Kanbun(n)||st["Kangxi Radicals"](n)||st["Katakana Phonetic Extensions"](n)||st.Katakana(n)&&n!==12540||!(!st["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!st["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||st["Unified Canadian Aboriginal Syllabics"](n)||st["Unified Canadian Aboriginal Syllabics Extended"](n)||st["Vertical Forms"](n)||st["Yijing Hexagram Symbols"](n)||st["Yi Syllables"](n)||st["Yi Radicals"](n))))}function Pu(n){return!(Ts(n)||function(t){return!!(st["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||st["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||st["Letterlike Symbols"](t)||st["Number Forms"](t)||st["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||st["Control Pictures"](t)&&t!==9251||st["Optical Character Recognition"](t)||st["Enclosed Alphanumerics"](t)||st["Geometric Shapes"](t)||st["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||st["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||st["CJK Symbols and Punctuation"](t)||st.Katakana(t)||st["Private Use Area"](t)||st["CJK Compatibility Forms"](t)||st["Small Form Variants"](t)||st["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(n))}function Cu(n){return n>=1424&&n<=2303||st["Arabic Presentation Forms-A"](n)||st["Arabic Presentation Forms-B"](n)}function Od(n,t){return!(!t&&Cu(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||st.Khmer(n))}function Md(n){for(const t of n)if(Cu(t.charCodeAt(0)))return!0;return!1}const ya="deferred",ql="loading",Hl="loaded";let Gl=null,Mn="unavailable",qi=null;const ku=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(Mn="error"),Gl&&Gl(n)};function Zl(){No.fire(new yt("pluginStateChange",{pluginStatus:Mn,pluginURL:qi}))}const No=new Vt,Wl=function(){return Mn},va=function(){if(Mn!==ya||!qi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Mn=ql,Zl(),qi&&Re({url:qi},n=>{n?ku(n):(Mn=Hl,Zl())})},Qn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Mn===Hl||Qn.applyArabicShaping!=null,isLoading:()=>Mn===ql,setState(n){Mn=n.pluginStatus,qi=n.pluginURL},isParsed:()=>Qn.applyArabicShaping!=null&&Qn.processBidirectionalText!=null&&Qn.processStyledBidirectionalText!=null,getPluginURL:()=>qi};class Dr{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ss,this.transition={})}isSupportedScript(t){return function(o,c){for(const d of o)if(!Od(d.charCodeAt(0),c))return!1;return!0}(t,Qn.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,o=t-Math.floor(t),c=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*o}}}class xa{constructor(t,o){this.property=t,this.value=o,this.expression=function(c,d){if(oa(c))return new Oo(c,d);if(la(c)){const g=Fl(c,d);if(g.result==="error")throw new Error(g.value.map(_=>`${_.key}: ${_.message}`).join(", "));return g.value}{let g=c;return typeof c=="string"&&d.type==="color"&&(g=O.parse(c)),{kind:"constant",evaluate:()=>g}}}(o===void 0?t.specification.default:o,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,c){return this.property.possiblyEvaluate(this,t,o,c)}}class ba{constructor(t){this.property=t,this.value=new xa(t,void 0)}transitioned(t,o){return new Du(this.property,this.value,o,se({},t.transition,this.transition),t.now)}untransitioned(){return new Du(this.property,this.value,null,{},0)}}class Kl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return me(this._values[t].value.value)}setValue(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ba(this._values[t].property)),this._values[t].value=new xa(this._values[t].property,o===null?void 0:me(o))}getTransition(t){return me(this._values[t].transition)}setTransition(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ba(this._values[t].property)),this._values[t].transition=me(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c);const d=this.getTransition(o);d!==void 0&&(t[`${o}-transition`]=d)}return t}transitioned(t,o){const c=new zu(this._properties);for(const d of Object.keys(this._values))c._values[d]=this._values[d].transitioned(t,o._values[d]);return c}untransitioned(){const t=new zu(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class Du{constructor(t,o,c,d,g){this.property=t,this.value=o,this.begin=g+d.delay||0,this.end=this.begin+d.duration||0,t.specification.transition&&(d.delay||d.duration)&&(this.prior=c)}possiblyEvaluate(t,o,c){const d=t.now||0,g=this.value.possiblyEvaluate(t,o,c),_=this.prior;if(_){if(d>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(d<this.begin)return _.possiblyEvaluate(t,o,c);{const b=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(t,o,c),g,function(E){if(E<=0)return 0;if(E>=1)return 1;const P=E*E,z=P*E;return 4*(E<.5?z:3*(E-P)+z-.75)}(b))}}return g}}class zu{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,c){const d=new wa(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(t,o,c);return d}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Ld{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return me(this._values[t].value)}setValue(t,o){this._values[t]=new xa(this._values[t].property,o===null?void 0:me(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c)}return t}possiblyEvaluate(t,o,c){const d=new wa(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(t,o,c);return d}}class xi{constructor(t,o,c){this.property=t,this.value=o,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,c,d){return this.property.evaluate(this.value,this.parameters,t,o,c,d)}}class wa{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Et{constructor(t){this.specification=t}possiblyEvaluate(t,o){return t.expression.evaluate(o)}interpolate(t,o,c){const d=ms[this.specification.type];return d?d(t,o,c):t}}class kt{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,c,d){return new xi(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},c,d)}:t.expression,o)}interpolate(t,o,c){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new xi(this,{kind:"constant",value:void 0},t.parameters);const d=ms[this.specification.type];return d?new xi(this,{kind:"constant",value:d(t.value.value,o.value.value,c)},t.parameters):t}evaluate(t,o,c,d,g,_){return t.kind==="constant"?t.value:t.evaluate(o,c,d,g,_)}}class Is extends kt{possiblyEvaluate(t,o,c,d){if(t.value===void 0)return new xi(this,{kind:"constant",value:void 0},o);if(t.expression.kind==="constant"){const g=t.expression.evaluate(o,null,{},c,d),_=t.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,b=this._calculate(_,_,_,o);return new xi(this,{kind:"constant",value:b},o)}if(t.expression.kind==="camera"){const g=this._calculate(t.expression.evaluate({zoom:o.zoom-1}),t.expression.evaluate({zoom:o.zoom}),t.expression.evaluate({zoom:o.zoom+1}),o);return new xi(this,{kind:"constant",value:g},o)}return new xi(this,t.expression,o)}evaluate(t,o,c,d,g,_){if(t.kind==="source"){const b=t.evaluate(o,c,d,g,_);return this._calculate(b,b,b,o)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(o.zoom)-1},c,d),t.evaluate({zoom:Math.floor(o.zoom)},c,d),t.evaluate({zoom:Math.floor(o.zoom)+1},c,d),o):t.value}_calculate(t,o,c,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:c,to:o}}interpolate(t){return t}}class As{constructor(t){this.specification=t}possiblyEvaluate(t,o,c,d){if(t.value!==void 0){if(t.expression.kind==="constant"){const g=t.expression.evaluate(o,null,{},c,d);return this._calculate(g,g,g,o)}return this._calculate(t.expression.evaluate(new Dr(Math.floor(o.zoom-1),o)),t.expression.evaluate(new Dr(Math.floor(o.zoom),o)),t.expression.evaluate(new Dr(Math.floor(o.zoom+1),o)),o)}}_calculate(t,o,c,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:c,to:o}}interpolate(t){return t}}class Xl{constructor(t){this.specification=t}possiblyEvaluate(t,o,c,d){return!!t.expression.evaluate(o,null,{},c,d)}interpolate(){return!1}}class nn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in t){const c=t[o];c.specification.overridable&&this.overridableProperties.push(o);const d=this.defaultPropertyValues[o]=new xa(c,void 0),g=this.defaultTransitionablePropertyValues[o]=new ba(c);this.defaultTransitioningPropertyValues[o]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=d.possiblyEvaluate({})}}}gt("DataDrivenProperty",kt),gt("DataConstantProperty",Et),gt("CrossFadedDataDrivenProperty",Is),gt("CrossFadedProperty",As),gt("ColorRampProperty",Xl);const lo="-transition";class Ln extends Vt{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new Ld(o.layout)),o.paint)){this._transitionablePaint=new Kl(o.paint);for(const c in t.paint)this.setPaintProperty(c,t.paint[c],{validate:!1});for(const c in t.layout)this.setLayoutProperty(c,t.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new wa(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,c={}){o!=null&&this._validate(Dd,`layers.${this.id}.layout.${t}`,t,o,c)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return t.endsWith(lo)?this._transitionablePaint.getTransition(t.slice(0,-lo.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,c={}){if(o!=null&&this._validate(Vl,`layers.${this.id}.paint.${t}`,t,o,c))return!1;if(t.endsWith(lo))return this._transitionablePaint.setTransition(t.slice(0,-lo.length),o||void 0),!1;{const d=this._transitionablePaint._values[t],g=d.property.specification["property-type"]==="cross-faded-data-driven",_=d.value.isDataDriven(),b=d.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const E=this._transitionablePaint._values[t].value;return E.isDataDriven()||_||g||this._handleOverridablePaintPropertyUpdate(t,b,E)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,o,c){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),he(t,(o,c)=>!(o===void 0||c==="layout"&&!Object.keys(o).length||c==="paint"&&!Object.keys(o).length))}_validate(t,o,c,d,g={}){return(!g||g.validate!==!1)&&Iu(this,t.call(oo,{key:o,layerType:this.type,objectKey:c,value:d,styleSpec:ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof xi&&zo(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const Rd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ps{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Cr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function on(n,t=1){let o=0,c=0;return{members:n.map(d=>{const g=Rd[d.type].BYTES_PER_ELEMENT,_=o=Ou(o,Math.max(t,g)),b=d.components||1;return c=Math.max(c,g),o+=g*b,{name:d.name,type:d.type,components:b,offset:_}}),size:Ou(o,Math.max(c,t)),alignment:t}}function Ou(n,t){return Math.ceil(n/t)*t}class jo extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const d=2*t;return this.int16[d+0]=o,this.int16[d+1]=c,t}}jo.prototype.bytesPerElement=4,gt("StructArrayLayout2i4",jo);class Cs extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c,d)}emplace(t,o,c,d,g){const _=4*t;return this.int16[_+0]=o,this.int16[_+1]=c,this.int16[_+2]=d,this.int16[_+3]=g,t}}Cs.prototype.bytesPerElement=8,gt("StructArrayLayout4i8",Cs);class p extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,d,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,t,o,c,d,g,_)}emplace(t,o,c,d,g,_,b){const E=6*t;return this.int16[E+0]=o,this.int16[E+1]=c,this.int16[E+2]=d,this.int16[E+3]=g,this.int16[E+4]=_,this.int16[E+5]=b,t}}p.prototype.bytesPerElement=12,gt("StructArrayLayout2i4i12",p);class r extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,d,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,t,o,c,d,g,_)}emplace(t,o,c,d,g,_,b){const E=4*t,P=8*t;return this.int16[E+0]=o,this.int16[E+1]=c,this.uint8[P+4]=d,this.uint8[P+5]=g,this.uint8[P+6]=_,this.uint8[P+7]=b,t}}r.prototype.bytesPerElement=8,gt("StructArrayLayout2i4ub8",r);class a extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const d=2*t;return this.float32[d+0]=o,this.float32[d+1]=c,t}}a.prototype.bytesPerElement=8,gt("StructArrayLayout2f8",a);class h extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,d,g,_,b,E,P,z){const M=this.length;return this.resize(M+1),this.emplace(M,t,o,c,d,g,_,b,E,P,z)}emplace(t,o,c,d,g,_,b,E,P,z,M){const B=10*t;return this.uint16[B+0]=o,this.uint16[B+1]=c,this.uint16[B+2]=d,this.uint16[B+3]=g,this.uint16[B+4]=_,this.uint16[B+5]=b,this.uint16[B+6]=E,this.uint16[B+7]=P,this.uint16[B+8]=z,this.uint16[B+9]=M,t}}h.prototype.bytesPerElement=20,gt("StructArrayLayout10ui20",h);class f extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,d,g,_,b,E,P,z,M,B){const j=this.length;return this.resize(j+1),this.emplace(j,t,o,c,d,g,_,b,E,P,z,M,B)}emplace(t,o,c,d,g,_,b,E,P,z,M,B,j){const V=12*t;return this.int16[V+0]=o,this.int16[V+1]=c,this.int16[V+2]=d,this.int16[V+3]=g,this.uint16[V+4]=_,this.uint16[V+5]=b,this.uint16[V+6]=E,this.uint16[V+7]=P,this.int16[V+8]=z,this.int16[V+9]=M,this.int16[V+10]=B,this.int16[V+11]=j,t}}f.prototype.bytesPerElement=24,gt("StructArrayLayout4i4ui4i24",f);class v extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c){const d=this.length;return this.resize(d+1),this.emplace(d,t,o,c)}emplace(t,o,c,d){const g=3*t;return this.float32[g+0]=o,this.float32[g+1]=c,this.float32[g+2]=d,t}}v.prototype.bytesPerElement=12,gt("StructArrayLayout3f12",v);class w extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}w.prototype.bytesPerElement=4,gt("StructArrayLayout1ul4",w);class S extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,d,g,_,b,E,P){const z=this.length;return this.resize(z+1),this.emplace(z,t,o,c,d,g,_,b,E,P)}emplace(t,o,c,d,g,_,b,E,P,z){const M=10*t,B=5*t;return this.int16[M+0]=o,this.int16[M+1]=c,this.int16[M+2]=d,this.int16[M+3]=g,this.int16[M+4]=_,this.int16[M+5]=b,this.uint32[B+3]=E,this.uint16[M+8]=P,this.uint16[M+9]=z,t}}S.prototype.bytesPerElement=20,gt("StructArrayLayout6i1ul2ui20",S);class I extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,d,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,t,o,c,d,g,_)}emplace(t,o,c,d,g,_,b){const E=6*t;return this.int16[E+0]=o,this.int16[E+1]=c,this.int16[E+2]=d,this.int16[E+3]=g,this.int16[E+4]=_,this.int16[E+5]=b,t}}I.prototype.bytesPerElement=12,gt("StructArrayLayout2i2i2i12",I);class D extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,t,o,c,d,g)}emplace(t,o,c,d,g,_){const b=4*t,E=8*t;return this.float32[b+0]=o,this.float32[b+1]=c,this.float32[b+2]=d,this.int16[E+6]=g,this.int16[E+7]=_,t}}D.prototype.bytesPerElement=16,gt("StructArrayLayout2f1f2i16",D);class R extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c,d)}emplace(t,o,c,d,g){const _=12*t,b=3*t;return this.uint8[_+0]=o,this.uint8[_+1]=c,this.float32[b+1]=d,this.float32[b+2]=g,t}}R.prototype.bytesPerElement=12,gt("StructArrayLayout2ub2f12",R);class N extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c){const d=this.length;return this.resize(d+1),this.emplace(d,t,o,c)}emplace(t,o,c,d){const g=3*t;return this.uint16[g+0]=o,this.uint16[g+1]=c,this.uint16[g+2]=d,t}}N.prototype.bytesPerElement=6,gt("StructArrayLayout3ui6",N);class q extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,d,g,_,b,E,P,z,M,B,j,V,ee,te,fe){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,t,o,c,d,g,_,b,E,P,z,M,B,j,V,ee,te,fe)}emplace(t,o,c,d,g,_,b,E,P,z,M,B,j,V,ee,te,fe,Ee){const we=24*t,ke=12*t,je=48*t;return this.int16[we+0]=o,this.int16[we+1]=c,this.uint16[we+2]=d,this.uint16[we+3]=g,this.uint32[ke+2]=_,this.uint32[ke+3]=b,this.uint32[ke+4]=E,this.uint16[we+10]=P,this.uint16[we+11]=z,this.uint16[we+12]=M,this.float32[ke+7]=B,this.float32[ke+8]=j,this.uint8[je+36]=V,this.uint8[je+37]=ee,this.uint8[je+38]=te,this.uint32[ke+10]=fe,this.int16[we+22]=Ee,t}}q.prototype.bytesPerElement=48,gt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",q);class Q extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,d,g,_,b,E,P,z,M,B,j,V,ee,te,fe,Ee,we,ke,je,Be,_t,Tt,ct,ut,nt,mt){const ht=this.length;return this.resize(ht+1),this.emplace(ht,t,o,c,d,g,_,b,E,P,z,M,B,j,V,ee,te,fe,Ee,we,ke,je,Be,_t,Tt,ct,ut,nt,mt)}emplace(t,o,c,d,g,_,b,E,P,z,M,B,j,V,ee,te,fe,Ee,we,ke,je,Be,_t,Tt,ct,ut,nt,mt,ht){const Ze=34*t,Dt=17*t;return this.int16[Ze+0]=o,this.int16[Ze+1]=c,this.int16[Ze+2]=d,this.int16[Ze+3]=g,this.int16[Ze+4]=_,this.int16[Ze+5]=b,this.int16[Ze+6]=E,this.int16[Ze+7]=P,this.uint16[Ze+8]=z,this.uint16[Ze+9]=M,this.uint16[Ze+10]=B,this.uint16[Ze+11]=j,this.uint16[Ze+12]=V,this.uint16[Ze+13]=ee,this.uint16[Ze+14]=te,this.uint16[Ze+15]=fe,this.uint16[Ze+16]=Ee,this.uint16[Ze+17]=we,this.uint16[Ze+18]=ke,this.uint16[Ze+19]=je,this.uint16[Ze+20]=Be,this.uint16[Ze+21]=_t,this.uint16[Ze+22]=Tt,this.uint32[Dt+12]=ct,this.float32[Dt+13]=ut,this.float32[Dt+14]=nt,this.float32[Dt+15]=mt,this.float32[Dt+16]=ht,t}}Q.prototype.bytesPerElement=68,gt("StructArrayLayout8i15ui1ul4f68",Q);class H extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}H.prototype.bytesPerElement=4,gt("StructArrayLayout1f4",H);class J extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c){const d=this.length;return this.resize(d+1),this.emplace(d,t,o,c)}emplace(t,o,c,d){const g=3*t;return this.int16[g+0]=o,this.int16[g+1]=c,this.int16[g+2]=d,t}}J.prototype.bytesPerElement=6,gt("StructArrayLayout3i6",J);class ce extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c){const d=this.length;return this.resize(d+1),this.emplace(d,t,o,c)}emplace(t,o,c,d){const g=4*t;return this.uint32[2*t+0]=o,this.uint16[g+2]=c,this.uint16[g+3]=d,t}}ce.prototype.bytesPerElement=8,gt("StructArrayLayout1ul2ui8",ce);class ue extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const d=2*t;return this.uint16[d+0]=o,this.uint16[d+1]=c,t}}ue.prototype.bytesPerElement=4,gt("StructArrayLayout2ui4",ue);class ge extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}ge.prototype.bytesPerElement=2,gt("StructArrayLayout1ui2",ge);class de extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,c,d)}emplace(t,o,c,d,g){const _=4*t;return this.float32[_+0]=o,this.float32[_+1]=c,this.float32[_+2]=d,this.float32[_+3]=g,t}}de.prototype.bytesPerElement=16,gt("StructArrayLayout4f16",de);class Oe extends Ps{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Le(this.anchorPointX,this.anchorPointY)}}Oe.prototype.size=20;class Te extends S{get(t){return new Oe(this,t)}}gt("CollisionBoxArray",Te);class Ce extends Ps{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ce.prototype.size=48;class qe extends q{get(t){return new Ce(this,t)}}gt("PlacedSymbolArray",qe);class rt extends Ps{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}rt.prototype.size=68;class ze extends Q{get(t){return new rt(this,t)}}gt("SymbolInstanceArray",ze);class vt extends H{getoffsetX(t){return this.float32[1*t+0]}}gt("GlyphOffsetArray",vt);class at extends J{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}gt("SymbolLineVertexArray",at);class Rt extends Ps{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Rt.prototype.size=8;class rr extends ce{get(t){return new Rt(this,t)}}gt("FeatureIndexArray",rr);class Kt extends jo{}class er extends jo{}class jr extends p{}class Ft extends r{}class sr extends a{}class xr extends h{}class dn extends f{}class $n extends v{}class ei extends w{}class ti extends I{}class Hi extends R{}class Rn extends N{}class bi extends ue{}const co=on([{name:"a_pos",components:2,type:"Int16"}],4),{members:qn}=co;class ar{constructor(t=[]){this.segments=t}prepareSegment(t,o,c,d){let g=this.segments[this.segments.length-1];return t>ar.MAX_VERTEX_ARRAY_LENGTH&&Ae(`Max vertices per segment is ${ar.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!g||g.vertexLength+t>ar.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==d)&&(g={vertexOffset:o.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},d!==void 0&&(g.sortKey=d),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,c,d){return new ar([{vertexOffset:t,primitiveOffset:o,vertexLength:c,primitiveLength:d,vaos:{},sortKey:0}])}}function fr(n,t){return 256*(n=L(Math.floor(n),0,255))+L(Math.floor(t),0,255)}ar.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,gt("SegmentVector",ar);const Jr=on([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var In={exports:{}},zr={exports:{}};zr.exports=function(n,t){var o,c,d,g,_,b,E,P;for(c=n.length-(o=3&n.length),d=t,_=3432918353,b=461845907,P=0;P<c;)E=255&n.charCodeAt(P)|(255&n.charCodeAt(++P))<<8|(255&n.charCodeAt(++P))<<16|(255&n.charCodeAt(++P))<<24,++P,d=27492+(65535&(g=5*(65535&(d=(d^=E=(65535&(E=(E=(65535&E)*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(E=0,o){case 3:E^=(255&n.charCodeAt(P+2))<<16;case 2:E^=(255&n.charCodeAt(P+1))<<8;case 1:d^=E=(65535&(E=(E=(65535&(E^=255&n.charCodeAt(P)))*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295}return d^=n.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0};var uo={exports:{}};uo.exports=function(n,t){for(var o,c=n.length,d=t^c,g=0;c>=4;)o=1540483477*(65535&(o=255&n.charCodeAt(g)|(255&n.charCodeAt(++g))<<8|(255&n.charCodeAt(++g))<<16|(255&n.charCodeAt(++g))<<24))+((1540483477*(o>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),c-=4,++g;switch(c){case 3:d^=(255&n.charCodeAt(g+2))<<16;case 2:d^=(255&n.charCodeAt(g+1))<<8;case 1:d=1540483477*(65535&(d^=255&n.charCodeAt(g)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};var wi=zr.exports,Ea=uo.exports;In.exports=wi,In.exports.murmur3=wi,In.exports.murmur2=Ea;var Jl=In.exports;class Sa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,c,d){this.ids.push(Mu(t)),this.positions.push(o,c,d)}getPositions(t){const o=Mu(t);let c=0,d=this.ids.length-1;for(;c<d;){const _=c+d>>1;this.ids[_]>=o?d=_:c=_+1}const g=[];for(;this.ids[c]===o;)g.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return g}static serialize(t,o){const c=new Float64Array(t.ids),d=new Uint32Array(t.positions);return ho(c,d,0,c.length-1),o&&o.push(c.buffer,d.buffer),{ids:c,positions:d}}static deserialize(t){const o=new Sa;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function Mu(n){const t=+n;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Jl(String(n))}function ho(n,t,o,c){for(;o<c;){const d=n[o+c>>1];let g=o-1,_=c+1;for(;;){do g++;while(n[g]<d);do _--;while(n[_]>d);if(g>=_)break;Ta(n,g,_),Ta(t,3*g,3*_),Ta(t,3*g+1,3*_+1),Ta(t,3*g+2,3*_+2)}_-o<c-_?(ho(n,t,o,_),o=_+1):(ho(n,t,_+1,c),c=_)}}function Ta(n,t,o){const c=n[t];n[t]=n[o],n[o]=c}gt("FeaturePositionMap",Sa);class Ei{constructor(t,o){this.gl=t.gl,this.location=o}}class Vo extends Ei{constructor(t,o){super(t,o),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class ym extends Ei{constructor(t,o){super(t,o),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class vm extends Ei{constructor(t,o){super(t,o),this.current=O.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const e1=new Float32Array(16);function Bd(n){return[fr(255*n.r,255*n.g),fr(255*n.b,255*n.a)]}class Yl{constructor(t,o,c){this.value=t,this.uniformNames=o.map(d=>`u_${d}`),this.type=c}setUniform(t,o,c){t.set(c.constantOr(this.value))}getBinding(t,o,c){return this.type==="color"?new vm(t,o):new Vo(t,o)}}class Ia{constructor(t,o){this.uniformNames=o.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=t.tlbr}setUniform(t,o,c,d){const g=d==="u_pattern_to"?this.patternTo:d==="u_pattern_from"?this.patternFrom:d==="u_pixel_ratio_to"?this.pixelRatioTo:d==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&t.set(g)}getBinding(t,o,c){return c.substr(0,9)==="u_pattern"?new ym(t,o):new Vo(t,o)}}class po{constructor(t,o,c,d){this.expression=t,this.type=c,this.maxValue=0,this.paintVertexAttributes=o.map(g=>({name:`a_${g}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(t,o,c,d,g){const _=this.paintVertexArray.length,b=this.expression.evaluate(new Dr(0),o,{},d,[],g);this.paintVertexArray.resize(t),this._setPaintValue(_,t,b)}updatePaintArray(t,o,c,d){const g=this.expression.evaluate({zoom:0},c,d);this._setPaintValue(t,o,g)}_setPaintValue(t,o,c){if(this.type==="color"){const d=Bd(c);for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,d[0],d[1])}else{for(let d=t;d<o;d++)this.paintVertexArray.emplace(d,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zi{constructor(t,o,c,d,g,_){this.expression=t,this.uniformNames=o.map(b=>`u_${b}_t`),this.type=c,this.useIntegerZoom=d,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=o.map(b=>({name:`a_${b}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(t,o,c,d,g){const _=this.expression.evaluate(new Dr(this.zoom),o,{},d,[],g),b=this.expression.evaluate(new Dr(this.zoom+1),o,{},d,[],g),E=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(E,t,_,b)}updatePaintArray(t,o,c,d){const g=this.expression.evaluate({zoom:this.zoom},c,d),_=this.expression.evaluate({zoom:this.zoom+1},c,d);this._setPaintValue(t,o,g,_)}_setPaintValue(t,o,c,d){if(this.type==="color"){const g=Bd(c),_=Bd(d);for(let b=t;b<o;b++)this.paintVertexArray.emplace(b,g[0],g[1],_[0],_[1])}else{for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,c,d);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(d))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o){const c=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,d=L(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);t.set(d)}getBinding(t,o,c){return new Vo(t,o)}}class Uo{constructor(t,o,c,d,g,_){this.expression=t,this.type=o,this.useIntegerZoom=c,this.zoom=d,this.layerId=_,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(t,o,c){const d=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(d,t,o.patterns&&o.patterns[this.layerId],c)}updatePaintArray(t,o,c,d,g){this._setPaintValues(t,o,c.patterns&&c.patterns[this.layerId],g)}_setPaintValues(t,o,c,d){if(!d||!c)return;const{min:g,mid:_,max:b}=c,E=d[g],P=d[_],z=d[b];if(E&&P&&z)for(let M=t;M<o;M++)this.zoomInPaintVertexArray.emplace(M,P.tl[0],P.tl[1],P.br[0],P.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],P.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(M,P.tl[0],P.tl[1],P.br[0],P.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],P.pixelRatio,z.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Jr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Jr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class xm{constructor(t,o,c){this.binders={},this._buffers=[];const d=[];for(const g in t.paint._values){if(!c(g))continue;const _=t.paint.get(g);if(!(_ instanceof xi&&zo(_.property.specification)))continue;const b=t1(g,t.type),E=_.value,P=_.property.specification.type,z=_.property.useIntegerZoom,M=_.property.specification["property-type"],B=M==="cross-faded"||M==="cross-faded-data-driven";if(E.kind==="constant")this.binders[g]=B?new Ia(E.value,b):new Yl(E.value,b,P),d.push(`/u_${g}`);else if(E.kind==="source"||B){const j=bm(g,P,"source");this.binders[g]=B?new Uo(E,P,z,o,j,t.id):new po(E,b,P,j),d.push(`/a_${g}`)}else{const j=bm(g,P,"composite");this.binders[g]=new zi(E,b,P,z,o,j),d.push(`/z_${g}`)}}this.cacheKey=d.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof po||o instanceof zi?o.maxValue:0}populatePaintArrays(t,o,c,d,g){for(const _ in this.binders){const b=this.binders[_];(b instanceof po||b instanceof zi||b instanceof Uo)&&b.populatePaintArray(t,o,c,d,g)}}setConstantPatternPositions(t,o){for(const c in this.binders){const d=this.binders[c];d instanceof Ia&&d.setConstantPatternPositions(t,o)}}updatePaintArrays(t,o,c,d,g){let _=!1;for(const b in t){const E=o.getPositions(b);for(const P of E){const z=c.feature(P.index);for(const M in this.binders){const B=this.binders[M];if((B instanceof po||B instanceof zi||B instanceof Uo)&&B.expression.isStateDependent===!0){const j=d.paint.get(M);B.expression=j.value,B.updatePaintArray(P.start,P.end,z,t[b],g),_=!0}}}}return _}defines(){const t=[];for(const o in this.binders){const c=this.binders[o];(c instanceof Yl||c instanceof Ia)&&t.push(...c.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof po||c instanceof zi)for(let d=0;d<c.paintVertexAttributes.length;d++)t.push(c.paintVertexAttributes[d].name);else if(c instanceof Uo)for(let d=0;d<Jr.members.length;d++)t.push(Jr.members[d].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof Yl||c instanceof Ia||c instanceof zi)for(const d of c.uniformNames)t.push(d)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,o){const c=[];for(const d in this.binders){const g=this.binders[d];if(g instanceof Yl||g instanceof Ia||g instanceof zi){for(const _ of g.uniformNames)if(o[_]){const b=g.getBinding(t,o[_],_);c.push({name:_,property:d,binding:b})}}}return c}setUniforms(t,o,c,d){for(const{name:g,property:_,binding:b}of o)this.binders[_].setUniform(b,d,c.get(_),g)}updatePaintBuffers(t){this._buffers=[];for(const o in this.binders){const c=this.binders[o];if(t&&c instanceof Uo){const d=t.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;d&&this._buffers.push(d)}else(c instanceof po||c instanceof zi)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(t){for(const o in this.binders){const c=this.binders[o];(c instanceof po||c instanceof zi||c instanceof Uo)&&c.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof po||o instanceof zi||o instanceof Uo)&&o.destroy()}}}class ks{constructor(t,o,c=()=>!0){this.programConfigurations={};for(const d of t)this.programConfigurations[d.id]=new xm(d,o,c);this.needsUpload=!1,this._featureMap=new Sa,this._bufferOffset=0}populatePaintArrays(t,o,c,d,g,_){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(t,o,d,g,_);o.id!==void 0&&this._featureMap.add(o.id,c,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,c,d){for(const g of c)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(t,this._featureMap,o,g,d)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function t1(n,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[n]||[n.replace(`${t}-`,"").replace(/-/g,"_")]}function bm(n,t,o){const c={color:{source:a,composite:de},number:{source:H,composite:a}},d=function(g){return{"line-pattern":{source:xr,composite:xr},"fill-pattern":{source:xr,composite:xr},"fill-extrusion-pattern":{source:xr,composite:xr}}[g]}(n);return d&&d[o]||c[t][o]}gt("ConstantBinder",Yl),gt("CrossFadedConstantBinder",Ia),gt("SourceExpressionBinder",po),gt("CrossFadedCompositeBinder",Uo),gt("CompositeExpressionBinder",zi),gt("ProgramConfiguration",xm,{omit:["_buffers"]}),gt("ProgramConfigurationSet",ks);var sn=8192;const Fd=Math.pow(2,14)-1,wm=-Fd-1;function Ds(n){const t=sn/n.extent,o=n.loadGeometry();for(let c=0;c<o.length;c++){const d=o[c];for(let g=0;g<d.length;g++){const _=d[g],b=Math.round(_.x*t),E=Math.round(_.y*t);_.x=L(b,wm,Fd),_.y=L(E,wm,Fd),(b<_.x||b>_.x+1||E<_.y||E>_.y+1)&&Ae("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function zs(n,t){return{type:n.type,id:n.id,properties:n.properties,geometry:t?Ds(n):[]}}function Lu(n,t,o,c,d){n.emplaceBack(2*t+(c+1)/2,2*o+(d+1)/2)}class Nd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Kt,this.indexArray=new Rn,this.segments=new ar,this.programConfigurations=new ks(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){const d=this.layers[0],g=[];let _=null,b=!1;d.type==="circle"&&(_=d.layout.get("circle-sort-key"),b=!_.isConstant());for(const{feature:E,id:P,index:z,sourceLayerIndex:M}of t){const B=this.layers[0]._featureFilter.needGeometry,j=zs(E,B);if(!this.layers[0]._featureFilter.filter(new Dr(this.zoom),j,c))continue;const V=b?_.evaluate(j,{},c):void 0,ee={id:P,properties:E.properties,type:E.type,sourceLayerIndex:M,index:z,geometry:B?j.geometry:Ds(E),patterns:{},sortKey:V};g.push(ee)}b&&g.sort((E,P)=>E.sortKey-P.sortKey);for(const E of g){const{geometry:P,index:z,sourceLayerIndex:M}=E,B=t[z].feature;this.addFeature(E,P,z,c),o.featureIndex.insert(B,P,z,M,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,qn),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,c,d){for(const g of o)for(const _ of g){const b=_.x,E=_.y;if(b<0||b>=sn||E<0||E>=sn)continue;const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),z=P.vertexLength;Lu(this.layoutVertexArray,b,E,-1,-1),Lu(this.layoutVertexArray,b,E,1,-1),Lu(this.layoutVertexArray,b,E,1,1),Lu(this.layoutVertexArray,b,E,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,{},d)}}function Em(n,t){for(let o=0;o<n.length;o++)if(Aa(t,n[o]))return!0;for(let o=0;o<t.length;o++)if(Aa(n,t[o]))return!0;return!!jd(n,t)}function r1(n,t,o){return!!Aa(n,t)||!!Vd(t,n,o)}function Sm(n,t){if(n.length===1)return Im(t,n[0]);for(let o=0;o<t.length;o++){const c=t[o];for(let d=0;d<c.length;d++)if(Aa(n,c[d]))return!0}for(let o=0;o<n.length;o++)if(Im(t,n[o]))return!0;for(let o=0;o<t.length;o++)if(jd(n,t[o]))return!0;return!1}function n1(n,t,o){if(n.length>1){if(jd(n,t))return!0;for(let c=0;c<t.length;c++)if(Vd(t[c],n,o))return!0}for(let c=0;c<n.length;c++)if(Vd(n[c],t,o))return!0;return!1}function jd(n,t){if(n.length===0||t.length===0)return!1;for(let o=0;o<n.length-1;o++){const c=n[o],d=n[o+1];for(let g=0;g<t.length-1;g++)if(i1(c,d,t[g],t[g+1]))return!0}return!1}function i1(n,t,o,c){return Ge(n,o,c)!==Ge(t,o,c)&&Ge(n,t,o)!==Ge(n,t,c)}function Vd(n,t,o){const c=o*o;if(t.length===1)return n.distSqr(t[0])<c;for(let d=1;d<t.length;d++)if(Tm(n,t[d-1],t[d])<c)return!0;return!1}function Tm(n,t,o){const c=t.distSqr(o);if(c===0)return n.distSqr(t);const d=((n.x-t.x)*(o.x-t.x)+(n.y-t.y)*(o.y-t.y))/c;return n.distSqr(d<0?t:d>1?o:o.sub(t)._mult(d)._add(t))}function Im(n,t){let o,c,d,g=!1;for(let _=0;_<n.length;_++){o=n[_];for(let b=0,E=o.length-1;b<o.length;E=b++)c=o[b],d=o[E],c.y>t.y!=d.y>t.y&&t.x<(d.x-c.x)*(t.y-c.y)/(d.y-c.y)+c.x&&(g=!g)}return g}function Aa(n,t){let o=!1;for(let c=0,d=n.length-1;c<n.length;d=c++){const g=n[c],_=n[d];g.y>t.y!=_.y>t.y&&t.x<(_.x-g.x)*(t.y-g.y)/(_.y-g.y)+g.x&&(o=!o)}return o}function o1(n,t,o){const c=o[0],d=o[2];if(n.x<c.x&&t.x<c.x||n.x>d.x&&t.x>d.x||n.y<c.y&&t.y<c.y||n.y>d.y&&t.y>d.y)return!1;const g=Ge(n,t,o[0]);return g!==Ge(n,t,o[1])||g!==Ge(n,t,o[2])||g!==Ge(n,t,o[3])}function Ql(n,t,o){const c=t.paint.get(n).value;return c.kind==="constant"?c.value:o.programConfigurations.get(t.id).getMaxValue(n)}function Ru(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Bu(n,t,o,c,d){if(!t[0]&&!t[1])return n;const g=Le.convert(t)._mult(d);o==="viewport"&&g._rotate(-c);const _=[];for(let b=0;b<n.length;b++)_.push(n[b].sub(g));return _}gt("CircleBucket",Nd,{omit:["layers"]});const s1=new nn({"circle-sort-key":new kt(ve.layout_circle["circle-sort-key"])});var a1={paint:new nn({"circle-radius":new kt(ve.paint_circle["circle-radius"]),"circle-color":new kt(ve.paint_circle["circle-color"]),"circle-blur":new kt(ve.paint_circle["circle-blur"]),"circle-opacity":new kt(ve.paint_circle["circle-opacity"]),"circle-translate":new Et(ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Et(ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Et(ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Et(ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new kt(ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new kt(ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new kt(ve.paint_circle["circle-stroke-opacity"])}),layout:s1},Pa=typeof Float32Array!="undefined"?Float32Array:Array;function Ud(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Am(n,t,o){var c=t[0],d=t[1],g=t[2],_=t[3],b=t[4],E=t[5],P=t[6],z=t[7],M=t[8],B=t[9],j=t[10],V=t[11],ee=t[12],te=t[13],fe=t[14],Ee=t[15],we=o[0],ke=o[1],je=o[2],Be=o[3];return n[0]=we*c+ke*b+je*M+Be*ee,n[1]=we*d+ke*E+je*B+Be*te,n[2]=we*g+ke*P+je*j+Be*fe,n[3]=we*_+ke*z+je*V+Be*Ee,n[4]=(we=o[4])*c+(ke=o[5])*b+(je=o[6])*M+(Be=o[7])*ee,n[5]=we*d+ke*E+je*B+Be*te,n[6]=we*g+ke*P+je*j+Be*fe,n[7]=we*_+ke*z+je*V+Be*Ee,n[8]=(we=o[8])*c+(ke=o[9])*b+(je=o[10])*M+(Be=o[11])*ee,n[9]=we*d+ke*E+je*B+Be*te,n[10]=we*g+ke*P+je*j+Be*fe,n[11]=we*_+ke*z+je*V+Be*Ee,n[12]=(we=o[12])*c+(ke=o[13])*b+(je=o[14])*M+(Be=o[15])*ee,n[13]=we*d+ke*E+je*B+Be*te,n[14]=we*g+ke*P+je*j+Be*fe,n[15]=we*_+ke*z+je*V+Be*Ee,n}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var ec,l1=Am;function Fu(n,t,o){var c=t[0],d=t[1],g=t[2],_=t[3];return n[0]=o[0]*c+o[4]*d+o[8]*g+o[12]*_,n[1]=o[1]*c+o[5]*d+o[9]*g+o[13]*_,n[2]=o[2]*c+o[6]*d+o[10]*g+o[14]*_,n[3]=o[3]*c+o[7]*d+o[11]*g+o[15]*_,n}function Pm(n,t){const o=Fu([],[n.x,n.y,0,1],t);return new Le(o[0]/o[3],o[1]/o[3])}ec=new Pa(4),Pa!=Float32Array&&(ec[0]=0,ec[1]=0,ec[2]=0,ec[3]=0);class Cm extends Nd{}gt("HeatmapBucket",Cm,{omit:["layers"]});var c1={paint:new nn({"heatmap-radius":new kt(ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new kt(ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Et(ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Xl(ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Et(ve.paint_heatmap["heatmap-opacity"])})};function $d(n,{width:t,height:o},c,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==t*o*c)throw new RangeError(`mismatched image size. expected: ${d.length} but got: ${t*o*c}`)}else d=new Uint8Array(t*o*c);return n.width=t,n.height=o,n.data=d,n}function km(n,{width:t,height:o},c){if(t===n.width&&o===n.height)return;const d=$d({},{width:t,height:o},c);qd(n,d,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,t),height:Math.min(n.height,o)},c),n.width=t,n.height=o,n.data=d.data}function qd(n,t,o,c,d,g){if(d.width===0||d.height===0)return t;if(d.width>n.width||d.height>n.height||o.x>n.width-d.width||o.y>n.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>t.width||d.height>t.height||c.x>t.width-d.width||c.y>t.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const _=n.data,b=t.data;for(let E=0;E<d.height;E++){const P=((o.y+E)*n.width+o.x)*g,z=((c.y+E)*t.width+c.x)*g;for(let M=0;M<d.width*g;M++)b[z+M]=_[P+M]}return t}class tc{constructor(t,o){$d(this,t,1,o)}resize(t){km(this,t,1)}clone(){return new tc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,d,g){qd(t,o,c,d,g,1)}}class ui{constructor(t,o){$d(this,t,4,o)}resize(t){km(this,t,4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ui({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,d,g){qd(t,o,c,d,g,4)}}function Dm(n){const t={},o=n.resolution||256,c=n.clips?n.clips.length:1,d=n.image||new ui({width:o,height:c}),g=(_,b,E)=>{t[n.evaluationKey]=E;const P=n.expression.evaluate(t);d.data[_+b+0]=Math.floor(255*P.r/P.a),d.data[_+b+1]=Math.floor(255*P.g/P.a),d.data[_+b+2]=Math.floor(255*P.b/P.a),d.data[_+b+3]=Math.floor(255*P.a)};if(n.clips)for(let _=0,b=0;_<c;++_,b+=4*o)for(let E=0,P=0;E<o;E++,P+=4){const z=E/(o-1),{start:M,end:B}=n.clips[_];g(b,P,M*(1-z)+B*z)}else for(let _=0,b=0;_<o;_++,b+=4)g(0,b,_/(o-1));return d}gt("AlphaImage",tc),gt("RGBAImage",ui);var u1={paint:new nn({"hillshade-illumination-direction":new Et(ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Et(ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Et(ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Et(ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Et(ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Et(ve.paint_hillshade["hillshade-accent-color"])})};const h1=on([{name:"a_pos",components:2,type:"Int16"}],4),{members:d1}=h1;var Hd={exports:{}};function Nu(n,t,o){o=o||2;var c,d,g,_,b,E,P,z=t&&t.length,M=z?t[0]*o:n.length,B=zm(n,0,M,o,!0),j=[];if(!B||B.next===B.prev)return j;if(z&&(B=function(ee,te,fe,Ee){var we,ke,je,Be=[];for(we=0,ke=te.length;we<ke;we++)(je=zm(ee,te[we]*Ee,we<ke-1?te[we+1]*Ee:ee.length,Ee,!1))===je.next&&(je.steiner=!0),Be.push(x1(je));for(Be.sort(_1),we=0;we<Be.length;we++)fe=$o(fe=y1(Be[we],fe),fe.next);return fe}(n,t,B,o)),n.length>80*o){c=g=n[0],d=_=n[1];for(var V=o;V<M;V+=o)(b=n[V])<c&&(c=b),(E=n[V+1])<d&&(d=E),b>g&&(g=b),E>_&&(_=E);P=(P=Math.max(g-c,_-d))!==0?1/P:0}return rc(B,j,o,c,d,P),j}function zm(n,t,o,c,d){var g,_;if(d===Wd(n,t,o,c)>0)for(g=t;g<o;g+=c)_=Lm(g,n[g],n[g+1],_);else for(g=o-c;g>=t;g-=c)_=Lm(g,n[g],n[g+1],_);return _&&ju(_,_.next)&&(ic(_),_=_.next),_}function $o(n,t){if(!n)return n;t||(t=n);var o,c=n;do if(o=!1,c.steiner||!ju(c,c.next)&&Wr(c.prev,c,c.next)!==0)c=c.next;else{if(ic(c),(c=t=c.prev)===c.next)break;o=!0}while(o||c!==t);return t}function rc(n,t,o,c,d,g,_){if(n){!_&&g&&function(z,M,B,j){var V=z;do V.z===null&&(V.z=Gd(V.x,V.y,M,B,j)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==z);V.prevZ.nextZ=null,V.prevZ=null,function(ee){var te,fe,Ee,we,ke,je,Be,_t,Tt=1;do{for(fe=ee,ee=null,ke=null,je=0;fe;){for(je++,Ee=fe,Be=0,te=0;te<Tt&&(Be++,Ee=Ee.nextZ);te++);for(_t=Tt;Be>0||_t>0&&Ee;)Be!==0&&(_t===0||!Ee||fe.z<=Ee.z)?(we=fe,fe=fe.nextZ,Be--):(we=Ee,Ee=Ee.nextZ,_t--),ke?ke.nextZ=we:ee=we,we.prevZ=ke,ke=we;fe=Ee}ke.nextZ=null,Tt*=2}while(je>1)}(V)}(n,c,d,g);for(var b,E,P=n;n.prev!==n.next;)if(b=n.prev,E=n.next,g?f1(n,c,d,g):p1(n))t.push(b.i/o),t.push(n.i/o),t.push(E.i/o),ic(n),n=E.next,P=E.next;else if((n=E)===P){_?_===1?rc(n=m1($o(n),t,o),t,o,c,d,g,2):_===2&&g1(n,t,o,c,d,g):rc($o(n),t,o,c,d,g,1);break}}}function p1(n){var t=n.prev,o=n,c=n.next;if(Wr(t,o,c)>=0)return!1;for(var d=n.next.next;d!==n.prev;){if(Ca(t.x,t.y,o.x,o.y,c.x,c.y,d.x,d.y)&&Wr(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function f1(n,t,o,c){var d=n.prev,g=n,_=n.next;if(Wr(d,g,_)>=0)return!1;for(var b=d.x>g.x?d.x>_.x?d.x:_.x:g.x>_.x?g.x:_.x,E=d.y>g.y?d.y>_.y?d.y:_.y:g.y>_.y?g.y:_.y,P=Gd(d.x<g.x?d.x<_.x?d.x:_.x:g.x<_.x?g.x:_.x,d.y<g.y?d.y<_.y?d.y:_.y:g.y<_.y?g.y:_.y,t,o,c),z=Gd(b,E,t,o,c),M=n.prevZ,B=n.nextZ;M&&M.z>=P&&B&&B.z<=z;){if(M!==n.prev&&M!==n.next&&Ca(d.x,d.y,g.x,g.y,_.x,_.y,M.x,M.y)&&Wr(M.prev,M,M.next)>=0||(M=M.prevZ,B!==n.prev&&B!==n.next&&Ca(d.x,d.y,g.x,g.y,_.x,_.y,B.x,B.y)&&Wr(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;M&&M.z>=P;){if(M!==n.prev&&M!==n.next&&Ca(d.x,d.y,g.x,g.y,_.x,_.y,M.x,M.y)&&Wr(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;B&&B.z<=z;){if(B!==n.prev&&B!==n.next&&Ca(d.x,d.y,g.x,g.y,_.x,_.y,B.x,B.y)&&Wr(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function m1(n,t,o){var c=n;do{var d=c.prev,g=c.next.next;!ju(d,g)&&Om(d,c,c.next,g)&&nc(d,g)&&nc(g,d)&&(t.push(d.i/o),t.push(c.i/o),t.push(g.i/o),ic(c),ic(c.next),c=n=g),c=c.next}while(c!==n);return $o(c)}function g1(n,t,o,c,d,g){var _=n;do{for(var b=_.next.next;b!==_.prev;){if(_.i!==b.i&&b1(_,b)){var E=Mm(_,b);return _=$o(_,_.next),E=$o(E,E.next),rc(_,t,o,c,d,g),void rc(E,t,o,c,d,g)}b=b.next}_=_.next}while(_!==n)}function _1(n,t){return n.x-t.x}function y1(n,t){var o=function(g,_){var b,E=_,P=g.x,z=g.y,M=-1/0;do{if(z<=E.y&&z>=E.next.y&&E.next.y!==E.y){var B=E.x+(z-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(B<=P&&B>M){if(M=B,B===P){if(z===E.y)return E;if(z===E.next.y)return E.next}b=E.x<E.next.x?E:E.next}}E=E.next}while(E!==_);if(!b)return null;if(P===M)return b;var j,V=b,ee=b.x,te=b.y,fe=1/0;E=b;do P>=E.x&&E.x>=ee&&P!==E.x&&Ca(z<te?P:M,z,ee,te,z<te?M:P,z,E.x,E.y)&&(j=Math.abs(z-E.y)/(P-E.x),nc(E,g)&&(j<fe||j===fe&&(E.x>b.x||E.x===b.x&&v1(b,E)))&&(b=E,fe=j)),E=E.next;while(E!==V);return b}(n,t);if(!o)return t;var c=Mm(o,n),d=$o(o,o.next);return $o(c,c.next),t===o?d:t}function v1(n,t){return Wr(n.prev,n,t.prev)<0&&Wr(t.next,n,n.next)<0}function Gd(n,t,o,c,d){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-o)*d)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-c)*d)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function x1(n){var t=n,o=n;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==n);return o}function Ca(n,t,o,c,d,g,_,b){return(d-_)*(t-b)-(n-_)*(g-b)>=0&&(n-_)*(c-b)-(o-_)*(t-b)>=0&&(o-_)*(g-b)-(d-_)*(c-b)>=0}function b1(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function(o,c){var d=o;do{if(d.i!==o.i&&d.next.i!==o.i&&d.i!==c.i&&d.next.i!==c.i&&Om(d,d.next,o,c))return!0;d=d.next}while(d!==o);return!1}(n,t)&&(nc(n,t)&&nc(t,n)&&function(o,c){var d=o,g=!1,_=(o.x+c.x)/2,b=(o.y+c.y)/2;do d.y>b!=d.next.y>b&&d.next.y!==d.y&&_<(d.next.x-d.x)*(b-d.y)/(d.next.y-d.y)+d.x&&(g=!g),d=d.next;while(d!==o);return g}(n,t)&&(Wr(n.prev,n,t.prev)||Wr(n,t.prev,t))||ju(n,t)&&Wr(n.prev,n,n.next)>0&&Wr(t.prev,t,t.next)>0)}function Wr(n,t,o){return(t.y-n.y)*(o.x-t.x)-(t.x-n.x)*(o.y-t.y)}function ju(n,t){return n.x===t.x&&n.y===t.y}function Om(n,t,o,c){var d=Uu(Wr(n,t,o)),g=Uu(Wr(n,t,c)),_=Uu(Wr(o,c,n)),b=Uu(Wr(o,c,t));return d!==g&&_!==b||!(d!==0||!Vu(n,o,t))||!(g!==0||!Vu(n,c,t))||!(_!==0||!Vu(o,n,c))||!(b!==0||!Vu(o,t,c))}function Vu(n,t,o){return t.x<=Math.max(n.x,o.x)&&t.x>=Math.min(n.x,o.x)&&t.y<=Math.max(n.y,o.y)&&t.y>=Math.min(n.y,o.y)}function Uu(n){return n>0?1:n<0?-1:0}function nc(n,t){return Wr(n.prev,n,n.next)<0?Wr(n,t,n.next)>=0&&Wr(n,n.prev,t)>=0:Wr(n,t,n.prev)<0||Wr(n,n.next,t)<0}function Mm(n,t){var o=new Zd(n.i,n.x,n.y),c=new Zd(t.i,t.x,t.y),d=n.next,g=t.prev;return n.next=t,t.prev=n,o.next=d,d.prev=o,c.next=o,o.prev=c,g.next=c,c.prev=g,c}function Lm(n,t,o,c){var d=new Zd(n,t,o);return c?(d.next=c.next,d.prev=c,c.next.prev=d,c.next=d):(d.prev=d,d.next=d),d}function ic(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Zd(n,t,o){this.i=n,this.x=t,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wd(n,t,o,c){for(var d=0,g=t,_=o-c;g<o;g+=c)d+=(n[_]-n[g])*(n[g+1]+n[_+1]),_=g;return d}Hd.exports=Nu,Hd.exports.default=Nu,Nu.deviation=function(n,t,o,c){var d=t&&t.length,g=Math.abs(Wd(n,0,d?t[0]*o:n.length,o));if(d)for(var _=0,b=t.length;_<b;_++)g-=Math.abs(Wd(n,t[_]*o,_<b-1?t[_+1]*o:n.length,o));var E=0;for(_=0;_<c.length;_+=3){var P=c[_]*o,z=c[_+1]*o,M=c[_+2]*o;E+=Math.abs((n[P]-n[M])*(n[z+1]-n[P+1])-(n[P]-n[z])*(n[M+1]-n[P+1]))}return g===0&&E===0?0:Math.abs((E-g)/g)},Nu.flatten=function(n){for(var t=n[0][0].length,o={vertices:[],holes:[],dimensions:t},c=0,d=0;d<n.length;d++){for(var g=0;g<n[d].length;g++)for(var _=0;_<t;_++)o.vertices.push(n[d][g][_]);d>0&&o.holes.push(c+=n[d-1].length)}return o};var Rm=Hd.exports;function w1(n,t,o,c,d){Bm(n,t,o||0,c||n.length-1,d||E1)}function Bm(n,t,o,c,d){for(;c>o;){if(c-o>600){var g=c-o+1,_=t-o+1,b=Math.log(g),E=.5*Math.exp(2*b/3),P=.5*Math.sqrt(b*E*(g-E)/g)*(_-g/2<0?-1:1);Bm(n,t,Math.max(o,Math.floor(t-_*E/g+P)),Math.min(c,Math.floor(t+(g-_)*E/g+P)),d)}var z=n[t],M=o,B=c;for(oc(n,o,t),d(n[c],z)>0&&oc(n,o,c);M<B;){for(oc(n,M,B),M++,B--;d(n[M],z)<0;)M++;for(;d(n[B],z)>0;)B--}d(n[o],z)===0?oc(n,o,B):oc(n,++B,c),B<=t&&(o=B+1),t<=B&&(c=B-1)}}function oc(n,t,o){var c=n[t];n[t]=n[o],n[o]=c}function E1(n,t){return n<t?-1:n>t?1:0}function Kd(n,t){const o=n.length;if(o<=1)return[n];const c=[];let d,g;for(let _=0;_<o;_++){const b=We(n[_]);b!==0&&(n[_].area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(d&&c.push(d),d=[n[_]]):d.push(n[_]))}if(d&&c.push(d),t>1)for(let _=0;_<c.length;_++)c[_].length<=t||(w1(c[_],t,1,c[_].length-1,S1),c[_]=c[_].slice(0,t));return c}function S1(n,t){return t.area-n.area}function Xd(n,t,o){const c=o.patternDependencies;let d=!1;for(const g of t){const _=g.paint.get(`${n}-pattern`);_.isConstant()||(d=!0);const b=_.constantOr(null);b&&(d=!0,c[b.to]=!0,c[b.from]=!0)}return d}function Jd(n,t,o,c,d){const g=d.patternDependencies;for(const _ of t){const b=_.paint.get(`${n}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:c-1},o,{},d.availableImages),P=b.evaluate({zoom:c},o,{},d.availableImages),z=b.evaluate({zoom:c+1},o,{},d.availableImages);E=E&&E.name?E.name:E,P=P&&P.name?P.name:P,z=z&&z.name?z.name:z,g[E]=!0,g[P]=!0,g[z]=!0,o.patterns[_.id]={min:E,mid:P,max:z}}}return o}class Yd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new er,this.indexArray=new Rn,this.indexArray2=new bi,this.programConfigurations=new ks(t.layers,t.zoom),this.segments=new ar,this.segments2=new ar,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.hasPattern=Xd("fill",this.layers,o);const d=this.layers[0].layout.get("fill-sort-key"),g=!d.isConstant(),_=[];for(const{feature:b,id:E,index:P,sourceLayerIndex:z}of t){const M=this.layers[0]._featureFilter.needGeometry,B=zs(b,M);if(!this.layers[0]._featureFilter.filter(new Dr(this.zoom),B,c))continue;const j=g?d.evaluate(B,{},c,o.availableImages):void 0,V={id:E,properties:b.properties,type:b.type,sourceLayerIndex:z,index:P,geometry:M?B.geometry:Ds(b),patterns:{},sortKey:j};_.push(V)}g&&_.sort((b,E)=>b.sortKey-E.sortKey);for(const b of _){const{geometry:E,index:P,sourceLayerIndex:z}=b;if(this.hasPattern){const M=Jd("fill",this.layers,b,this.zoom,o);this.patternFeatures.push(M)}else this.addFeature(b,E,P,c,{});o.featureIndex.insert(t[P].feature,E,P,z,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}addFeatures(t,o,c){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,o,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,d1),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,c,d,g){for(const _ of Kd(o,500)){let b=0;for(const j of _)b+=j.length;const E=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),P=E.vertexLength,z=[],M=[];for(const j of _){if(j.length===0)continue;j!==_[0]&&M.push(z.length/2);const V=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),ee=V.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(ee+j.length-1,ee),z.push(j[0].x),z.push(j[0].y);for(let te=1;te<j.length;te++)this.layoutVertexArray.emplaceBack(j[te].x,j[te].y),this.indexArray2.emplaceBack(ee+te-1,ee+te),z.push(j[te].x),z.push(j[te].y);V.vertexLength+=j.length,V.primitiveLength+=j.length}const B=Rm(z,M);for(let j=0;j<B.length;j+=3)this.indexArray.emplaceBack(P+B[j],P+B[j+1],P+B[j+2]);E.vertexLength+=b,E.primitiveLength+=B.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,g,d)}}gt("FillBucket",Yd,{omit:["layers","patternFeatures"]});const T1=new nn({"fill-sort-key":new kt(ve.layout_fill["fill-sort-key"])});var I1={paint:new nn({"fill-antialias":new Et(ve.paint_fill["fill-antialias"]),"fill-opacity":new kt(ve.paint_fill["fill-opacity"]),"fill-color":new kt(ve.paint_fill["fill-color"]),"fill-outline-color":new kt(ve.paint_fill["fill-outline-color"]),"fill-translate":new Et(ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Et(ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new Is(ve.paint_fill["fill-pattern"])}),layout:T1};const A1=on([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:P1}=A1;var qo={},C1=Le,Fm=ka;function ka(n,t,o,c,d){this.properties={},this.extent=o,this.type=0,this._pbf=n,this._geometry=-1,this._keys=c,this._values=d,n.readFields(k1,this,t)}function k1(n,t,o){n==1?t.id=o.readVarint():n==2?function(c,d){for(var g=c.readVarint()+c.pos;c.pos<g;){var _=d._keys[c.readVarint()],b=d._values[c.readVarint()];d.properties[_]=b}}(o,t):n==3?t.type=o.readVarint():n==4&&(t._geometry=o.pos)}function D1(n){for(var t,o,c=0,d=0,g=n.length,_=g-1;d<g;_=d++)c+=((o=n[_]).x-(t=n[d]).x)*(t.y+o.y);return c}ka.types=["Unknown","Point","LineString","Polygon"],ka.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var t,o=n.readVarint()+n.pos,c=1,d=0,g=0,_=0,b=[];n.pos<o;){if(d<=0){var E=n.readVarint();c=7&E,d=E>>3}if(d--,c===1||c===2)g+=n.readSVarint(),_+=n.readSVarint(),c===1&&(t&&b.push(t),t=[]),t.push(new C1(g,_));else{if(c!==7)throw new Error("unknown command "+c);t&&t.push(t[0].clone())}}return t&&b.push(t),b},ka.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var t=n.readVarint()+n.pos,o=1,c=0,d=0,g=0,_=1/0,b=-1/0,E=1/0,P=-1/0;n.pos<t;){if(c<=0){var z=n.readVarint();o=7&z,c=z>>3}if(c--,o===1||o===2)(d+=n.readSVarint())<_&&(_=d),d>b&&(b=d),(g+=n.readSVarint())<E&&(E=g),g>P&&(P=g);else if(o!==7)throw new Error("unknown command "+o)}return[_,E,b,P]},ka.prototype.toGeoJSON=function(n,t,o){var c,d,g=this.extent*Math.pow(2,o),_=this.extent*n,b=this.extent*t,E=this.loadGeometry(),P=ka.types[this.type];function z(j){for(var V=0;V<j.length;V++){var ee=j[V];j[V]=[360*(ee.x+_)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(ee.y+b)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var M=[];for(c=0;c<E.length;c++)M[c]=E[c][0];z(E=M);break;case 2:for(c=0;c<E.length;c++)z(E[c]);break;case 3:for(E=function(j){var V=j.length;if(V<=1)return[j];for(var ee,te,fe=[],Ee=0;Ee<V;Ee++){var we=D1(j[Ee]);we!==0&&(te===void 0&&(te=we<0),te===we<0?(ee&&fe.push(ee),ee=[j[Ee]]):ee.push(j[Ee]))}return ee&&fe.push(ee),fe}(E),c=0;c<E.length;c++)for(d=0;d<E[c].length;d++)z(E[c][d])}E.length===1?E=E[0]:P="Multi"+P;var B={type:"Feature",geometry:{type:P,coordinates:E},properties:this.properties};return"id"in this&&(B.id=this.id),B};var z1=Fm,Nm=jm;function jm(n,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(O1,this,t),this.length=this._features.length}function O1(n,t,o){n===15?t.version=o.readVarint():n===1?t.name=o.readString():n===5?t.extent=o.readVarint():n===2?t._features.push(o.pos):n===3?t._keys.push(o.readString()):n===4&&t._values.push(function(c){for(var d=null,g=c.readVarint()+c.pos;c.pos<g;){var _=c.readVarint()>>3;d=_===1?c.readString():_===2?c.readFloat():_===3?c.readDouble():_===4?c.readVarint64():_===5?c.readVarint():_===6?c.readSVarint():_===7?c.readBoolean():null}return d}(o))}jm.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var t=this._pbf.readVarint()+this._pbf.pos;return new z1(this._pbf,t,this.extent,this._keys,this._values)};var M1=Nm;function L1(n,t,o){if(n===3){var c=new M1(o,o.readVarint()+o.pos);c.length&&(t[c.name]=c)}}qo.VectorTile=function(n,t){this.layers=n.readFields(L1,{},t)},qo.VectorTileFeature=Fm,qo.VectorTileLayer=Nm;const R1=qo.VectorTileFeature.types,Qd=Math.pow(2,13);function sc(n,t,o,c,d,g,_,b){n.emplaceBack(t,o,2*Math.floor(c*Qd)+_,d*Qd*2,g*Qd*2,Math.round(b))}class ep{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new jr,this.indexArray=new Rn,this.programConfigurations=new ks(t.layers,t.zoom),this.segments=new ar,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.features=[],this.hasPattern=Xd("fill-extrusion",this.layers,o);for(const{feature:d,id:g,index:_,sourceLayerIndex:b}of t){const E=this.layers[0]._featureFilter.needGeometry,P=zs(d,E);if(!this.layers[0]._featureFilter.filter(new Dr(this.zoom),P,c))continue;const z={id:g,sourceLayerIndex:b,index:_,geometry:E?P.geometry:Ds(d),properties:d.properties,type:d.type,patterns:{}};this.hasPattern?this.features.push(Jd("fill-extrusion",this.layers,z,this.zoom,o)):this.addFeature(z,z.geometry,_,c,{}),o.featureIndex.insert(d,z.geometry,_,b,this.index,!0)}}addFeatures(t,o,c){for(const d of this.features){const{geometry:g}=d;this.addFeature(d,g,d.index,o,c)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,P1),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,c,d,g){for(const _ of Kd(o,500)){let b=0;for(const j of _)b+=j.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const j of _){if(j.length===0||F1(j))continue;let V=0;for(let ee=0;ee<j.length;ee++){const te=j[ee];if(ee>=1){const fe=j[ee-1];if(!B1(te,fe)){E.vertexLength+4>ar.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ee=te.sub(fe)._perp()._unit(),we=fe.dist(te);V+we>32768&&(V=0),sc(this.layoutVertexArray,te.x,te.y,Ee.x,Ee.y,0,0,V),sc(this.layoutVertexArray,te.x,te.y,Ee.x,Ee.y,0,1,V),V+=we,sc(this.layoutVertexArray,fe.x,fe.y,Ee.x,Ee.y,0,0,V),sc(this.layoutVertexArray,fe.x,fe.y,Ee.x,Ee.y,0,1,V);const ke=E.vertexLength;this.indexArray.emplaceBack(ke,ke+2,ke+1),this.indexArray.emplaceBack(ke+1,ke+2,ke+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+b>ar.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray)),R1[t.type]!=="Polygon")continue;const P=[],z=[],M=E.vertexLength;for(const j of _)if(j.length!==0){j!==_[0]&&z.push(P.length/2);for(let V=0;V<j.length;V++){const ee=j[V];sc(this.layoutVertexArray,ee.x,ee.y,0,0,1,1,0),P.push(ee.x),P.push(ee.y)}}const B=Rm(P,z);for(let j=0;j<B.length;j+=3)this.indexArray.emplaceBack(M+B[j],M+B[j+2],M+B[j+1]);E.primitiveLength+=B.length/3,E.vertexLength+=b}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,g,d)}}function B1(n,t){return n.x===t.x&&(n.x<0||n.x>sn)||n.y===t.y&&(n.y<0||n.y>sn)}function F1(n){return n.every(t=>t.x<0)||n.every(t=>t.x>sn)||n.every(t=>t.y<0)||n.every(t=>t.y>sn)}gt("FillExtrusionBucket",ep,{omit:["layers","features"]});var N1={paint:new nn({"fill-extrusion-opacity":new Et(ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new kt(ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Et(ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Et(ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Is(ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new kt(ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new kt(ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Et(ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function ac(n,t){return n.x*t.x+n.y*t.y}function Vm(n,t){if(n.length===1){let o=0;const c=t[o++];let d;for(;!d||c.equals(d);)if(d=t[o++],!d)return 1/0;for(;o<t.length;o++){const g=t[o],_=n[0],b=d.sub(c),E=g.sub(c),P=_.sub(c),z=ac(b,b),M=ac(b,E),B=ac(E,E),j=ac(P,b),V=ac(P,E),ee=z*B-M*M,te=(B*j-M*V)/ee,fe=(z*V-M*j)/ee,Ee=c.z*(1-te-fe)+d.z*te+g.z*fe;if(isFinite(Ee))return Ee}return 1/0}{let o=1/0;for(const c of t)o=Math.min(o,c.z);return o}}const j1=on([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:V1}=j1,U1=on([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$1}=U1,q1=qo.VectorTileFeature.types,H1=Math.cos(Math.PI/180*37.5),Um=Math.pow(2,14)/.5;class tp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Ft,this.layoutVertexArray2=new sr,this.indexArray=new Rn,this.programConfigurations=new ks(t.layers,t.zoom),this.segments=new ar,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.hasPattern=Xd("line",this.layers,o);const d=this.layers[0].layout.get("line-sort-key"),g=!d.isConstant(),_=[];for(const{feature:b,id:E,index:P,sourceLayerIndex:z}of t){const M=this.layers[0]._featureFilter.needGeometry,B=zs(b,M);if(!this.layers[0]._featureFilter.filter(new Dr(this.zoom),B,c))continue;const j=g?d.evaluate(B,{},c):void 0,V={id:E,properties:b.properties,type:b.type,sourceLayerIndex:z,index:P,geometry:M?B.geometry:Ds(b),patterns:{},sortKey:j};_.push(V)}g&&_.sort((b,E)=>b.sortKey-E.sortKey);for(const b of _){const{geometry:E,index:P,sourceLayerIndex:z}=b;if(this.hasPattern){const M=Jd("line",this.layers,b,this.zoom,o);this.patternFeatures.push(M)}else this.addFeature(b,E,P,c,{});o.featureIndex.insert(t[P].feature,E,P,z,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}addFeatures(t,o,c){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,o,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,$1)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,V1),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,c,d,g){const _=this.layers[0].layout,b=_.get("line-join").evaluate(t,{}),E=_.get("line-cap"),P=_.get("line-miter-limit"),z=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const M of o)this.addLine(M,t,b,E,P,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,g,d)}addLine(t,o,c,d,g,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<t.length-1;fe++)this.totalDistance+=t[fe].dist(t[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=q1[o.type]==="Polygon";let E=t.length;for(;E>=2&&t[E-1].equals(t[E-2]);)E--;let P=0;for(;P<E-1&&t[P].equals(t[P+1]);)P++;if(E<(b?3:2))return;c==="bevel"&&(g=1.05);const z=this.overscaling<=16?122880/(512*this.overscaling):0,M=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let B,j,V,ee,te;this.e1=this.e2=-1,b&&(B=t[E-2],te=t[P].sub(B)._unit()._perp());for(let fe=P;fe<E;fe++){if(V=fe===E-1?b?t[P+1]:void 0:t[fe+1],V&&t[fe].equals(V))continue;te&&(ee=te),B&&(j=B),B=t[fe],te=V?V.sub(B)._unit()._perp():ee,ee=ee||te;let Ee=ee.add(te);Ee.x===0&&Ee.y===0||Ee._unit();const we=ee.x*te.x+ee.y*te.y,ke=Ee.x*te.x+Ee.y*te.y,je=ke!==0?1/ke:1/0,Be=2*Math.sqrt(2-2*ke),_t=ke<H1&&j&&V,Tt=ee.x*te.y-ee.y*te.x>0;if(_t&&fe>P){const nt=B.dist(j);if(nt>2*z){const mt=B.sub(B.sub(j)._mult(z/nt)._round());this.updateDistance(j,mt),this.addCurrentVertex(mt,ee,0,0,M),j=mt}}const ct=j&&V;let ut=ct?c:b?"butt":d;if(ct&&ut==="round"&&(je<_?ut="miter":je<=2&&(ut="fakeround")),ut==="miter"&&je>g&&(ut="bevel"),ut==="bevel"&&(je>2&&(ut="flipbevel"),je<g&&(ut="miter")),j&&this.updateDistance(j,B),ut==="miter")Ee._mult(je),this.addCurrentVertex(B,Ee,0,0,M);else if(ut==="flipbevel"){if(je>100)Ee=te.mult(-1);else{const nt=je*ee.add(te).mag()/ee.sub(te).mag();Ee._perp()._mult(nt*(Tt?-1:1))}this.addCurrentVertex(B,Ee,0,0,M),this.addCurrentVertex(B,Ee.mult(-1),0,0,M)}else if(ut==="bevel"||ut==="fakeround"){const nt=-Math.sqrt(je*je-1),mt=Tt?nt:0,ht=Tt?0:nt;if(j&&this.addCurrentVertex(B,ee,mt,ht,M),ut==="fakeround"){const Ze=Math.round(180*Be/Math.PI/20);for(let Dt=1;Dt<Ze;Dt++){let It=Dt/Ze;if(It!==.5){const mr=It-.5;It+=It*mr*(It-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*mr*mr+(.848013+we*(.215638*we-1.06021)))}const tr=te.sub(ee)._mult(It)._add(ee)._unit()._mult(Tt?-1:1);this.addHalfVertex(B,tr.x,tr.y,!1,Tt,0,M)}}V&&this.addCurrentVertex(B,te,-mt,-ht,M)}else if(ut==="butt")this.addCurrentVertex(B,Ee,0,0,M);else if(ut==="square"){const nt=j?1:-1;this.addCurrentVertex(B,Ee,nt,nt,M)}else ut==="round"&&(j&&(this.addCurrentVertex(B,ee,0,0,M),this.addCurrentVertex(B,ee,1,1,M,!0)),V&&(this.addCurrentVertex(B,te,-1,-1,M,!0),this.addCurrentVertex(B,te,0,0,M)));if(_t&&fe<E-1){const nt=B.dist(V);if(nt>2*z){const mt=B.add(V.sub(B)._mult(z/nt)._round());this.updateDistance(B,mt),this.addCurrentVertex(mt,te,0,0,M),B=mt}}}}addCurrentVertex(t,o,c,d,g,_=!1){const b=o.y*d-o.x,E=-o.y-o.x*d;this.addHalfVertex(t,o.x+o.y*c,o.y-o.x*c,_,!1,c,g),this.addHalfVertex(t,b,E,_,!0,-d,g),this.distance>Um/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,o,c,d,g,_))}addHalfVertex({x:t,y:o},c,d,g,_,b,E){const P=.5*(this.lineClips?this.scaledDistance*(Um-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(g?1:0),(o<<1)+(_?1:0),Math.round(63*c)+128,Math.round(63*d)+128,1+(b===0?0:b<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),E.primitiveLength++),_?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}gt("LineBucket",tp,{omit:["layers","patternFeatures"]});const G1=new nn({"line-cap":new Et(ve.layout_line["line-cap"]),"line-join":new kt(ve.layout_line["line-join"]),"line-miter-limit":new Et(ve.layout_line["line-miter-limit"]),"line-round-limit":new Et(ve.layout_line["line-round-limit"]),"line-sort-key":new kt(ve.layout_line["line-sort-key"])});var $m={paint:new nn({"line-opacity":new kt(ve.paint_line["line-opacity"]),"line-color":new kt(ve.paint_line["line-color"]),"line-translate":new Et(ve.paint_line["line-translate"]),"line-translate-anchor":new Et(ve.paint_line["line-translate-anchor"]),"line-width":new kt(ve.paint_line["line-width"]),"line-gap-width":new kt(ve.paint_line["line-gap-width"]),"line-offset":new kt(ve.paint_line["line-offset"]),"line-blur":new kt(ve.paint_line["line-blur"]),"line-dasharray":new As(ve.paint_line["line-dasharray"]),"line-pattern":new Is(ve.paint_line["line-pattern"]),"line-gradient":new Xl(ve.paint_line["line-gradient"])}),layout:G1};const qm=new class extends kt{possiblyEvaluate(n,t){return t=new Dr(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(n,t)}evaluate(n,t,o,c){return t=se({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(n,t,o,c)}}($m.paint.properties["line-width"].specification);function Hm(n,t){return t>0?t+2*n:n}qm.useIntegerZoom=!0;const Z1=on([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),W1=on([{name:"a_projected_pos",components:3,type:"Float32"}],4);on([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const K1=on([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);on([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Gm=on([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),X1=on([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function J1(n,t,o){return n.sections.forEach(c=>{c.text=function(d,g,_){const b=g.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?d=d.toLocaleUpperCase():b==="lowercase"&&(d=d.toLocaleLowerCase()),Qn.applyArabicShaping&&(d=Qn.applyArabicShaping(d)),d}(c.text,t,o)}),n}on([{name:"triangle",components:3,type:"Uint16"}]),on([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),on([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),on([{type:"Float32",name:"offsetX"}]),on([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const lc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var pn=24,rp=br,Zm=function(n,t,o,c,d){var g,_,b=8*d-c-1,E=(1<<b)-1,P=E>>1,z=-7,M=o?d-1:0,B=o?-1:1,j=n[t+M];for(M+=B,g=j&(1<<-z)-1,j>>=-z,z+=b;z>0;g=256*g+n[t+M],M+=B,z-=8);for(_=g&(1<<-z)-1,g>>=-z,z+=c;z>0;_=256*_+n[t+M],M+=B,z-=8);if(g===0)g=1-P;else{if(g===E)return _?NaN:1/0*(j?-1:1);_+=Math.pow(2,c),g-=P}return(j?-1:1)*_*Math.pow(2,g-c)},Wm=function(n,t,o,c,d,g){var _,b,E,P=8*g-d-1,z=(1<<P)-1,M=z>>1,B=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=c?0:g-1,V=c?1:-1,ee=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,_=z):(_=Math.floor(Math.log(t)/Math.LN2),t*(E=Math.pow(2,-_))<1&&(_--,E*=2),(t+=_+M>=1?B/E:B*Math.pow(2,1-M))*E>=2&&(_++,E/=2),_+M>=z?(b=0,_=z):_+M>=1?(b=(t*E-1)*Math.pow(2,d),_+=M):(b=t*Math.pow(2,M-1)*Math.pow(2,d),_=0));d>=8;n[o+j]=255&b,j+=V,b/=256,d-=8);for(_=_<<d|b,P+=d;P>0;n[o+j]=255&_,j+=V,_/=256,P-=8);n[o+j-V]|=128*ee};function br(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}br.Varint=0,br.Fixed64=1,br.Bytes=2,br.Fixed32=5;var Ho,np=4294967296,Km=1/np,Xm=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function fo(n){return n.type===br.Bytes?n.readVarint()+n.pos:n.pos+1}function Da(n,t,o){return o?4294967296*t+(n>>>0):4294967296*(t>>>0)+(n>>>0)}function Jm(n,t,o){var c=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));o.realloc(c);for(var d=o.pos-1;d>=n;d--)o.buf[d+c]=o.buf[d]}function Y1(n,t){for(var o=0;o<n.length;o++)t.writeVarint(n[o])}function Q1(n,t){for(var o=0;o<n.length;o++)t.writeSVarint(n[o])}function eb(n,t){for(var o=0;o<n.length;o++)t.writeFloat(n[o])}function tb(n,t){for(var o=0;o<n.length;o++)t.writeDouble(n[o])}function rb(n,t){for(var o=0;o<n.length;o++)t.writeBoolean(n[o])}function nb(n,t){for(var o=0;o<n.length;o++)t.writeFixed32(n[o])}function ib(n,t){for(var o=0;o<n.length;o++)t.writeSFixed32(n[o])}function ob(n,t){for(var o=0;o<n.length;o++)t.writeFixed64(n[o])}function sb(n,t){for(var o=0;o<n.length;o++)t.writeSFixed64(n[o])}function $u(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+16777216*n[t+3]}function za(n,t,o){n[o]=t,n[o+1]=t>>>8,n[o+2]=t>>>16,n[o+3]=t>>>24}function Ym(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+(n[t+3]<<24)}function ab(n,t,o){n===1&&o.readMessage(lb,t)}function lb(n,t,o){if(n===3){const{id:c,bitmap:d,width:g,height:_,left:b,top:E,advance:P}=o.readMessage(cb,{});t.push({id:c,bitmap:new tc({width:g+6,height:_+6},d),metrics:{width:g,height:_,left:b,top:E,advance:P}})}}function cb(n,t,o){n===1?t.id=o.readVarint():n===2?t.bitmap=o.readBytes():n===3?t.width=o.readVarint():n===4?t.height=o.readVarint():n===5?t.left=o.readSVarint():n===6?t.top=o.readSVarint():n===7&&(t.advance=o.readVarint())}function Qm(n){let t=0,o=0;for(const _ of n)t+=_.w*_.h,o=Math.max(o,_.w);n.sort((_,b)=>b.h-_.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let d=0,g=0;for(const _ of n)for(let b=c.length-1;b>=0;b--){const E=c[b];if(!(_.w>E.w||_.h>E.h)){if(_.x=E.x,_.y=E.y,g=Math.max(g,_.y+_.h),d=Math.max(d,_.x+_.w),_.w===E.w&&_.h===E.h){const P=c.pop();b<c.length&&(c[b]=P)}else _.h===E.h?(E.x+=_.w,E.w-=_.w):_.w===E.w?(E.y+=_.h,E.h-=_.h):(c.push({x:E.x+_.w,y:E.y,w:E.w-_.w,h:_.h}),E.y+=_.h,E.h-=_.h);break}}return{w:d,h:g,fill:t/(d*g)||0}}br.prototype={destroy:function(){this.buf=null},readFields:function(n,t,o){for(o=o||this.length;this.pos<o;){var c=this.readVarint(),d=c>>3,g=this.pos;this.type=7&c,n(d,t,this),this.pos===g&&this.skip(c)}return t},readMessage:function(n,t){return this.readFields(n,t,this.readVarint()+this.pos)},readFixed32:function(){var n=$u(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Ym(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=$u(this.buf,this.pos)+$u(this.buf,this.pos+4)*np;return this.pos+=8,n},readSFixed64:function(){var n=$u(this.buf,this.pos)+Ym(this.buf,this.pos+4)*np;return this.pos+=8,n},readFloat:function(){var n=Zm(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Zm(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var t,o,c=this.buf;return t=127&(o=c[this.pos++]),o<128?t:(t|=(127&(o=c[this.pos++]))<<7,o<128?t:(t|=(127&(o=c[this.pos++]))<<14,o<128?t:(t|=(127&(o=c[this.pos++]))<<21,o<128?t:function(d,g,_){var b,E,P=_.buf;if(b=(112&(E=P[_.pos++]))>>4,E<128||(b|=(127&(E=P[_.pos++]))<<3,E<128)||(b|=(127&(E=P[_.pos++]))<<10,E<128)||(b|=(127&(E=P[_.pos++]))<<17,E<128)||(b|=(127&(E=P[_.pos++]))<<24,E<128)||(b|=(1&(E=P[_.pos++]))<<31,E<128))return Da(d,b,g);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(o=c[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var n=this.readVarint()+this.pos,t=this.pos;return this.pos=n,n-t>=12&&Xm?function(o,c,d){return Xm.decode(o.subarray(c,d))}(this.buf,t,n):function(o,c,d){for(var g="",_=c;_<d;){var b,E,P,z=o[_],M=null,B=z>239?4:z>223?3:z>191?2:1;if(_+B>d)break;B===1?z<128&&(M=z):B===2?(192&(b=o[_+1]))==128&&(M=(31&z)<<6|63&b)<=127&&(M=null):B===3?(E=o[_+2],(192&(b=o[_+1]))==128&&(192&E)==128&&((M=(15&z)<<12|(63&b)<<6|63&E)<=2047||M>=55296&&M<=57343)&&(M=null)):B===4&&(E=o[_+2],P=o[_+3],(192&(b=o[_+1]))==128&&(192&E)==128&&(192&P)==128&&((M=(15&z)<<18|(63&b)<<12|(63&E)<<6|63&P)<=65535||M>=1114112)&&(M=null)),M===null?(M=65533,B=1):M>65535&&(M-=65536,g+=String.fromCharCode(M>>>10&1023|55296),M=56320|1023&M),g+=String.fromCharCode(M),_+=B}return g}(this.buf,t,n)},readBytes:function(){var n=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,n);return this.pos=n,t},readPackedVarint:function(n,t){if(this.type!==br.Bytes)return n.push(this.readVarint(t));var o=fo(this);for(n=n||[];this.pos<o;)n.push(this.readVarint(t));return n},readPackedSVarint:function(n){if(this.type!==br.Bytes)return n.push(this.readSVarint());var t=fo(this);for(n=n||[];this.pos<t;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==br.Bytes)return n.push(this.readBoolean());var t=fo(this);for(n=n||[];this.pos<t;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==br.Bytes)return n.push(this.readFloat());var t=fo(this);for(n=n||[];this.pos<t;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==br.Bytes)return n.push(this.readDouble());var t=fo(this);for(n=n||[];this.pos<t;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==br.Bytes)return n.push(this.readFixed32());var t=fo(this);for(n=n||[];this.pos<t;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==br.Bytes)return n.push(this.readSFixed32());var t=fo(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==br.Bytes)return n.push(this.readFixed64());var t=fo(this);for(n=n||[];this.pos<t;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==br.Bytes)return n.push(this.readSFixed64());var t=fo(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed64());return n},skip:function(n){var t=7&n;if(t===br.Varint)for(;this.buf[this.pos++]>127;);else if(t===br.Bytes)this.pos=this.readVarint()+this.pos;else if(t===br.Fixed32)this.pos+=4;else{if(t!==br.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(n,t){this.writeVarint(n<<3|t)},realloc:function(n){for(var t=this.length||16;t<this.pos+n;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),za(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),za(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),za(this.buf,-1&n,this.pos),za(this.buf,Math.floor(n*Km),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),za(this.buf,-1&n,this.pos),za(this.buf,Math.floor(n*Km),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(t,o){var c,d;if(t>=0?(c=t%4294967296|0,d=t/4294967296|0):(d=~(-t/4294967296),4294967295^(c=~(-t%4294967296))?c=c+1|0:(c=0,d=d+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(g,_,b){b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,b.buf[b.pos]=127&(g>>>=7)}(c,0,o),function(g,_){var b=(7&g)<<4;_.buf[_.pos++]|=b|((g>>>=3)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g)))))}(d,o)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(Boolean(n))},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var t=this.pos;this.pos=function(c,d,g){for(var _,b,E=0;E<d.length;E++){if((_=d.charCodeAt(E))>55295&&_<57344){if(!b){_>56319||E+1===d.length?(c[g++]=239,c[g++]=191,c[g++]=189):b=_;continue}if(_<56320){c[g++]=239,c[g++]=191,c[g++]=189,b=_;continue}_=b-55296<<10|_-56320|65536,b=null}else b&&(c[g++]=239,c[g++]=191,c[g++]=189,b=null);_<128?c[g++]=_:(_<2048?c[g++]=_>>6|192:(_<65536?c[g++]=_>>12|224:(c[g++]=_>>18|240,c[g++]=_>>12&63|128),c[g++]=_>>6&63|128),c[g++]=63&_|128)}return g}(this.buf,n,this.pos);var o=this.pos-t;o>=128&&Jm(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(n){this.realloc(4),Wm(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Wm(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var t=n.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=n[o]},writeRawMessage:function(n,t){this.pos++;var o=this.pos;n(t,this);var c=this.pos-o;c>=128&&Jm(o,c,this),this.pos=o-1,this.writeVarint(c),this.pos+=c},writeMessage:function(n,t,o){this.writeTag(n,br.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(n,t){t.length&&this.writeMessage(n,Y1,t)},writePackedSVarint:function(n,t){t.length&&this.writeMessage(n,Q1,t)},writePackedBoolean:function(n,t){t.length&&this.writeMessage(n,rb,t)},writePackedFloat:function(n,t){t.length&&this.writeMessage(n,eb,t)},writePackedDouble:function(n,t){t.length&&this.writeMessage(n,tb,t)},writePackedFixed32:function(n,t){t.length&&this.writeMessage(n,nb,t)},writePackedSFixed32:function(n,t){t.length&&this.writeMessage(n,ib,t)},writePackedFixed64:function(n,t){t.length&&this.writeMessage(n,ob,t)},writePackedSFixed64:function(n,t){t.length&&this.writeMessage(n,sb,t)},writeBytesField:function(n,t){this.writeTag(n,br.Bytes),this.writeBytes(t)},writeFixed32Field:function(n,t){this.writeTag(n,br.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(n,t){this.writeTag(n,br.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(n,t){this.writeTag(n,br.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(n,t){this.writeTag(n,br.Fixed64),this.writeSFixed64(t)},writeVarintField:function(n,t){this.writeTag(n,br.Varint),this.writeVarint(t)},writeSVarintField:function(n,t){this.writeTag(n,br.Varint),this.writeSVarint(t)},writeStringField:function(n,t){this.writeTag(n,br.Bytes),this.writeString(t)},writeFloatField:function(n,t){this.writeTag(n,br.Fixed32),this.writeFloat(t)},writeDoubleField:function(n,t){this.writeTag(n,br.Fixed64),this.writeDouble(t)},writeBooleanField:function(n,t){this.writeVarintField(n,Boolean(t))}};class ip{constructor(t,{pixelRatio:o,version:c,stretchX:d,stretchY:g,content:_}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=d,this.stretchY=g,this.content=_,this.version=c}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class eg{constructor(t,o){const c={},d={};this.haveRenderCallbacks=[];const g=[];this.addImages(t,c,g),this.addImages(o,d,g);const{w:_,h:b}=Qm(g),E=new ui({width:_||1,height:b||1});for(const P in t){const z=t[P],M=c[P].paddedRect;ui.copy(z.data,E,{x:0,y:0},{x:M.x+1,y:M.y+1},z.data)}for(const P in o){const z=o[P],M=d[P].paddedRect,B=M.x+1,j=M.y+1,V=z.data.width,ee=z.data.height;ui.copy(z.data,E,{x:0,y:0},{x:B,y:j},z.data),ui.copy(z.data,E,{x:0,y:ee-1},{x:B,y:j-1},{width:V,height:1}),ui.copy(z.data,E,{x:0,y:0},{x:B,y:j+ee},{width:V,height:1}),ui.copy(z.data,E,{x:V-1,y:0},{x:B-1,y:j},{width:1,height:ee}),ui.copy(z.data,E,{x:0,y:0},{x:B+V,y:j},{width:1,height:ee})}this.image=E,this.iconPositions=c,this.patternPositions=d}addImages(t,o,c){for(const d in t){const g=t[d],_={x:0,y:0,w:g.data.width+2,h:g.data.height+2};c.push(_),o[d]=new ip(_,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(t,o){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in t.updatedImages)this.patchUpdatedImage(this.iconPositions[c],t.getImage(c),o),this.patchUpdatedImage(this.patternPositions[c],t.getImage(c),o)}patchUpdatedImage(t,o,c){if(!t||!o||t.version===o.version)return;t.version=o.version;const[d,g]=t.tl;c.update(o.data,void 0,{x:d,y:g})}}gt("ImagePosition",ip),gt("ImageAtlas",eg),l.WritingMode=void 0,(Ho=l.WritingMode||(l.WritingMode={}))[Ho.none=0]="none",Ho[Ho.horizontal=1]="horizontal",Ho[Ho.vertical=2]="vertical",Ho[Ho.horizontalOnly=3]="horizontalOnly";const qu=-17;class cc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,o){const c=new cc;return c.scale=t||1,c.fontStack=o,c}static forImage(t){const o=new cc;return o.imageName=t,o}}class Oa{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const c=new Oa;for(let d=0;d<t.sections.length;d++){const g=t.sections[d];g.image?c.addImageSection(g):c.addTextSection(g,o)}return c}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let o="";for(let c=0;c<t.length;c++){const d=t.charCodeAt(c+1)||null,g=t.charCodeAt(c-1)||null;o+=d&&Pu(d)&&!lc[t[c+1]]||g&&Pu(g)&&!lc[t[c-1]]||!lc[t[c]]?t[c]:lc[t[c]]}return o}(this.text)}trim(){let t=0;for(let c=0;c<this.text.length&&Gu[this.text.charCodeAt(c)];c++)t++;let o=this.text.length;for(let c=this.text.length-1;c>=0&&c>=t&&Gu[this.text.charCodeAt(c)];c--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const c=new Oa;return c.text=this.text.substring(t,o),c.sectionIndex=this.sectionIndex.slice(t,o),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}addTextSection(t,o){this.text+=t.text,this.sections.push(cc.forText(t.scale,t.fontStack||o));const c=this.sections.length-1;for(let d=0;d<t.text.length;++d)this.sectionIndex.push(c)}addImageSection(t){const o=t.image?t.image.name:"";if(o.length===0)return void Ae("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(cc.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Ae("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Hu(n,t,o,c,d,g,_,b,E,P,z,M,B,j,V,ee){const te=Oa.fromFeature(n,d);let fe;M===l.WritingMode.vertical&&te.verticalizePunctuation();const{processBidirectionalText:Ee,processStyledBidirectionalText:we}=Qn;if(Ee&&te.sections.length===1){fe=[];const Be=Ee(te.toString(),op(te,P,g,t,c,j,V));for(const _t of Be){const Tt=new Oa;Tt.text=_t,Tt.sections=te.sections;for(let ct=0;ct<_t.length;ct++)Tt.sectionIndex.push(0);fe.push(Tt)}}else if(we){fe=[];const Be=we(te.text,te.sectionIndex,op(te,P,g,t,c,j,V));for(const _t of Be){const Tt=new Oa;Tt.text=_t[0],Tt.sectionIndex=_t[1],Tt.sections=te.sections,fe.push(Tt)}}else fe=function(Be,_t){const Tt=[],ct=Be.text;let ut=0;for(const nt of _t)Tt.push(Be.substring(ut,nt)),ut=nt;return ut<ct.length&&Tt.push(Be.substring(ut,ct.length)),Tt}(te,op(te,P,g,t,c,j,V));const ke=[],je={positionedLines:ke,text:te.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:M,iconsInText:!1,verticalizable:!1};return function(Be,_t,Tt,ct,ut,nt,mt,ht,Ze,Dt,It,tr){let mr=0,Or=qu,Mr=0,_n=0;const Yr=ht==="right"?1:ht==="left"?0:.5;let Qr=0;for(const en of ut){en.trim();const vn=en.getMaxScale(),Pn=(vn-1)*pn,Bn={positionedGlyphs:[],lineOffset:0};Be.positionedLines[Qr]=Bn;const Gn=Bn.positionedGlyphs;let Zn=0;if(!en.length()){Or+=nt,++Qr;continue}for(let cn=0;cn<en.length();cn++){const Jt=en.getSection(cn),ri=en.getSectionIndex(cn),xn=en.getCharCode(cn);let Cn=0,Ti=null,Oi=null,Mi=null,go=pn;const Ii=!(Ze===l.WritingMode.horizontal||!It&&!Ts(xn)||It&&(Gu[xn]||(ln=xn,st.Arabic(ln)||st["Arabic Supplement"](ln)||st["Arabic Extended-A"](ln)||st["Arabic Presentation Forms-A"](ln)||st["Arabic Presentation Forms-B"](ln))));if(Jt.imageName){const hi=ct[Jt.imageName];if(!hi)continue;Mi=Jt.imageName,Be.iconsInText=Be.iconsInText||!0,Oi=hi.paddedRect;const Wn=hi.displaySize;Jt.scale=Jt.scale*pn/tr,Ti={width:Wn[0],height:Wn[1],left:1,top:-3,advance:Ii?Wn[1]:Wn[0]},Cn=Pn+(pn-Wn[1]*Jt.scale),go=Ti.advance;const _o=Ii?Wn[0]*Jt.scale-pn*vn:Wn[1]*Jt.scale-pn*vn;_o>0&&_o>Zn&&(Zn=_o)}else{const hi=Tt[Jt.fontStack],Wn=hi&&hi[xn];if(Wn&&Wn.rect)Oi=Wn.rect,Ti=Wn.metrics;else{const _o=_t[Jt.fontStack],dc=_o&&_o[xn];if(!dc)continue;Ti=dc.metrics}Cn=(vn-Jt.scale)*pn}Ii?(Be.verticalizable=!0,Gn.push({glyph:xn,imageName:Mi,x:mr,y:Or+Cn,vertical:Ii,scale:Jt.scale,fontStack:Jt.fontStack,sectionIndex:ri,metrics:Ti,rect:Oi}),mr+=go*Jt.scale+Dt):(Gn.push({glyph:xn,imageName:Mi,x:mr,y:Or+Cn,vertical:Ii,scale:Jt.scale,fontStack:Jt.fontStack,sectionIndex:ri,metrics:Ti,rect:Oi}),mr+=Ti.advance*Jt.scale+Dt)}Gn.length!==0&&(Mr=Math.max(mr-Dt,Mr),db(Gn,0,Gn.length-1,Yr,Zn)),mr=0;const Nr=nt*vn+Zn;Bn.lineOffset=Math.max(Zn,Pn),Or+=Nr,_n=Math.max(Nr,_n),++Qr}var ln;const yn=Or-qu,{horizontalAlign:An,verticalAlign:Hn}=sp(mt);(function(en,vn,Pn,Bn,Gn,Zn,Nr,cn,Jt){const ri=(vn-Pn)*Gn;let xn=0;xn=Zn!==Nr?-cn*Bn-qu:(-Bn*Jt+.5)*Nr;for(const Cn of en)for(const Ti of Cn.positionedGlyphs)Ti.x+=ri,Ti.y+=xn})(Be.positionedLines,Yr,An,Hn,Mr,_n,nt,yn,ut.length),Be.top+=-Hn*yn,Be.bottom=Be.top+yn,Be.left+=-An*Mr,Be.right=Be.left+Mr}(je,t,o,c,fe,_,b,E,M,P,B,ee),!function(Be){for(const _t of Be)if(_t.positionedGlyphs.length!==0)return!1;return!0}(ke)&&je}const Gu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ub={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function tg(n,t,o,c,d,g){if(t.imageName){const _=c[t.imageName];return _?_.displaySize[0]*t.scale*pn/g+d:0}{const _=o[t.fontStack],b=_&&_[n];return b?b.metrics.advance*t.scale+d:0}}function rg(n,t,o,c){const d=Math.pow(n-t,2);return c?n<t?d/2:2*d:d+Math.abs(o)*o}function hb(n,t,o){let c=0;return n===10&&(c-=1e4),o&&(c+=150),n!==40&&n!==65288||(c+=50),t!==41&&t!==65289||(c+=50),c}function ng(n,t,o,c,d,g){let _=null,b=rg(t,o,d,g);for(const E of c){const P=rg(t-E.x,o,d,g)+E.badness;P<=b&&(_=E,b=P)}return{index:n,x:t,priorBreak:_,badness:b}}function ig(n){return n?ig(n.priorBreak).concat(n.index):[]}function op(n,t,o,c,d,g,_){if(g!=="point")return[];if(!n)return[];const b=[],E=function(B,j,V,ee,te,fe){let Ee=0;for(let we=0;we<B.length();we++){const ke=B.getSection(we);Ee+=tg(B.getCharCode(we),ke,ee,te,j,fe)}return Ee/Math.max(1,Math.ceil(Ee/V))}(n,t,o,c,d,_),P=n.text.indexOf("\u200B")>=0;let z=0;for(let B=0;B<n.length();B++){const j=n.getSection(B),V=n.getCharCode(B);if(Gu[V]||(z+=tg(V,j,c,d,t,_)),B<n.length()-1){const ee=!((M=V)<11904||!(st["Bopomofo Extended"](M)||st.Bopomofo(M)||st["CJK Compatibility Forms"](M)||st["CJK Compatibility Ideographs"](M)||st["CJK Compatibility"](M)||st["CJK Radicals Supplement"](M)||st["CJK Strokes"](M)||st["CJK Symbols and Punctuation"](M)||st["CJK Unified Ideographs Extension A"](M)||st["CJK Unified Ideographs"](M)||st["Enclosed CJK Letters and Months"](M)||st["Halfwidth and Fullwidth Forms"](M)||st.Hiragana(M)||st["Ideographic Description Characters"](M)||st["Kangxi Radicals"](M)||st["Katakana Phonetic Extensions"](M)||st.Katakana(M)||st["Vertical Forms"](M)||st["Yi Radicals"](M)||st["Yi Syllables"](M)));(ub[V]||ee||j.imageName)&&b.push(ng(B+1,z,E,b,hb(V,n.getCharCode(B+1),ee&&P),!1))}}var M;return ig(ng(n.length(),z,E,b,0,!0))}function sp(n){let t=.5,o=.5;switch(n){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function db(n,t,o,c,d){if(!c&&!d)return;const g=n[o],_=(n[o].x+g.metrics.advance*g.scale)*c;for(let b=t;b<=o;b++)n[b].x-=_,n[b].y+=d}function pb(n,t,o){const{horizontalAlign:c,verticalAlign:d}=sp(o),g=t[0]-n.displaySize[0]*c,_=t[1]-n.displaySize[1]*d;return{image:n,top:_,bottom:_+n.displaySize[1],left:g,right:g+n.displaySize[0]}}function og(n,t,o,c,d,g){const _=n.image;let b;if(_.content){const te=_.content,fe=_.pixelRatio||1;b=[te[0]/fe,te[1]/fe,_.displaySize[0]-te[2]/fe,_.displaySize[1]-te[3]/fe]}const E=t.left*g,P=t.right*g;let z,M,B,j;o==="width"||o==="both"?(j=d[0]+E-c[3],M=d[0]+P+c[1]):(j=d[0]+(E+P-_.displaySize[0])/2,M=j+_.displaySize[0]);const V=t.top*g,ee=t.bottom*g;return o==="height"||o==="both"?(z=d[1]+V-c[0],B=d[1]+ee+c[2]):(z=d[1]+(V+ee-_.displaySize[1])/2,B=z+_.displaySize[1]),{image:_,top:z,right:M,bottom:B,left:j,collisionPadding:b}}const mo=128;function sg(n,t){const{expression:o}=t;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Dr(n+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:d}=o;let g=0;for(;g<c.length&&c[g]<=n;)g++;g=Math.max(0,g-1);let _=g;for(;_<c.length&&c[_]<n+1;)_++;_=Math.min(c.length-1,_);const b=c[g],E=c[_];return o.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:d}:{kind:"camera",minZoom:b,maxZoom:E,minSize:o.evaluate(new Dr(b)),maxSize:o.evaluate(new Dr(E)),interpolationType:d}}}class Go extends Le{constructor(t,o,c,d){super(t,o),this.angle=c,d!==void 0&&(this.segment=d)}clone(){return new Go(this.x,this.y,this.angle,this.segment)}}function ag(n,t,o,c,d){if(t.segment===void 0)return!0;let g=t,_=t.segment+1,b=0;for(;b>-o/2;){if(_--,_<0)return!1;b-=n[_].dist(g),g=n[_]}b+=n[_].dist(n[_+1]),_++;const E=[];let P=0;for(;b<o/2;){const z=n[_],M=n[_+1];if(!M)return!1;let B=n[_-1].angleTo(z)-z.angleTo(M);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:B}),P+=B;b-E[0].distance>c;)P-=E.shift().angleDelta;if(P>d)return!1;_++,b+=z.dist(M)}return!0}function lg(n){let t=0;for(let o=0;o<n.length-1;o++)t+=n[o].dist(n[o+1]);return t}function cg(n,t,o){return n?.6*t*o:0}function ug(n,t){return Math.max(n?n.right-n.left:0,t?t.right-t.left:0)}function fb(n,t,o,c,d,g){const _=cg(o,d,g),b=ug(o,c)*g;let E=0;const P=lg(n)/2;for(let z=0;z<n.length-1;z++){const M=n[z],B=n[z+1],j=M.dist(B);if(E+j>P){const V=(P-E)/j,ee=Xr(M.x,B.x,V),te=Xr(M.y,B.y,V),fe=new Go(ee,te,B.angleTo(M),z);return fe._round(),!_||ag(n,fe,b,_,t)?fe:void 0}E+=j}}function mb(n,t,o,c,d,g,_,b,E){const P=cg(c,g,_),z=ug(c,d),M=z*_,B=n[0].x===0||n[0].x===E||n[0].y===0||n[0].y===E;return t-M<t/4&&(t=M+t/4),hg(n,B?t/2*b%t:(z/2+2*g)*_*b%t,t,P,o,M,B,!1,E)}function hg(n,t,o,c,d,g,_,b,E){const P=g/2,z=lg(n);let M=0,B=t-o,j=[];for(let V=0;V<n.length-1;V++){const ee=n[V],te=n[V+1],fe=ee.dist(te),Ee=te.angleTo(ee);for(;B+o<M+fe;){B+=o;const we=(B-M)/fe,ke=Xr(ee.x,te.x,we),je=Xr(ee.y,te.y,we);if(ke>=0&&ke<E&&je>=0&&je<E&&B-P>=0&&B+P<=z){const Be=new Go(ke,je,Ee,V);Be._round(),c&&!ag(n,Be,g,c,d)||j.push(Be)}}M+=fe}return b||j.length||_||(j=hg(n,M/2,o,c,d,g,_,!0,E)),j}function dg(n,t,o,c,d){const g=[];for(let _=0;_<n.length;_++){const b=n[_];let E;for(let P=0;P<b.length-1;P++){let z=b[P],M=b[P+1];z.x<t&&M.x<t||(z.x<t?z=new Le(t,z.y+(t-z.x)/(M.x-z.x)*(M.y-z.y))._round():M.x<t&&(M=new Le(t,z.y+(t-z.x)/(M.x-z.x)*(M.y-z.y))._round()),z.y<o&&M.y<o||(z.y<o?z=new Le(z.x+(o-z.y)/(M.y-z.y)*(M.x-z.x),o)._round():M.y<o&&(M=new Le(z.x+(o-z.y)/(M.y-z.y)*(M.x-z.x),o)._round()),z.x>=c&&M.x>=c||(z.x>=c?z=new Le(c,z.y+(c-z.x)/(M.x-z.x)*(M.y-z.y))._round():M.x>=c&&(M=new Le(c,z.y+(c-z.x)/(M.x-z.x)*(M.y-z.y))._round()),z.y>=d&&M.y>=d||(z.y>=d?z=new Le(z.x+(d-z.y)/(M.y-z.y)*(M.x-z.x),d)._round():M.y>=d&&(M=new Le(z.x+(d-z.y)/(M.y-z.y)*(M.x-z.x),d)._round()),E&&z.equals(E[E.length-1])||(E=[z],g.push(E)),E.push(M)))))}}return g}function pg(n,t,o,c){const d=[],g=n.image,_=g.pixelRatio,b=g.paddedRect.w-2,E=g.paddedRect.h-2,P=n.right-n.left,z=n.bottom-n.top,M=g.stretchX||[[0,b]],B=g.stretchY||[[0,E]],j=(nt,mt)=>nt+mt[1]-mt[0],V=M.reduce(j,0),ee=B.reduce(j,0),te=b-V,fe=E-ee;let Ee=0,we=V,ke=0,je=ee,Be=0,_t=te,Tt=0,ct=fe;if(g.content&&c){const nt=g.content;Ee=Zu(M,0,nt[0]),ke=Zu(B,0,nt[1]),we=Zu(M,nt[0],nt[2]),je=Zu(B,nt[1],nt[3]),Be=nt[0]-Ee,Tt=nt[1]-ke,_t=nt[2]-nt[0]-we,ct=nt[3]-nt[1]-je}const ut=(nt,mt,ht,Ze)=>{const Dt=Wu(nt.stretch-Ee,we,P,n.left),It=Ku(nt.fixed-Be,_t,nt.stretch,V),tr=Wu(mt.stretch-ke,je,z,n.top),mr=Ku(mt.fixed-Tt,ct,mt.stretch,ee),Or=Wu(ht.stretch-Ee,we,P,n.left),Mr=Ku(ht.fixed-Be,_t,ht.stretch,V),_n=Wu(Ze.stretch-ke,je,z,n.top),Yr=Ku(Ze.fixed-Tt,ct,Ze.stretch,ee),Qr=new Le(Dt,tr),ln=new Le(Or,tr),yn=new Le(Or,_n),An=new Le(Dt,_n),Hn=new Le(It/_,mr/_),en=new Le(Mr/_,Yr/_),vn=t*Math.PI/180;if(vn){const Gn=Math.sin(vn),Zn=Math.cos(vn),Nr=[Zn,-Gn,Gn,Zn];Qr._matMult(Nr),ln._matMult(Nr),An._matMult(Nr),yn._matMult(Nr)}const Pn=nt.stretch+nt.fixed,Bn=mt.stretch+mt.fixed;return{tl:Qr,tr:ln,bl:An,br:yn,tex:{x:g.paddedRect.x+1+Pn,y:g.paddedRect.y+1+Bn,w:ht.stretch+ht.fixed-Pn,h:Ze.stretch+Ze.fixed-Bn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hn,pixelOffsetBR:en,minFontScaleX:_t/_/P,minFontScaleY:ct/_/z,isSDF:o}};if(c&&(g.stretchX||g.stretchY)){const nt=fg(M,te,V),mt=fg(B,fe,ee);for(let ht=0;ht<nt.length-1;ht++){const Ze=nt[ht],Dt=nt[ht+1];for(let It=0;It<mt.length-1;It++)d.push(ut(Ze,mt[It],Dt,mt[It+1]))}}else d.push(ut({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return d}function Zu(n,t,o){let c=0;for(const d of n)c+=Math.max(t,Math.min(o,d[1]))-Math.max(t,Math.min(o,d[0]));return c}function fg(n,t,o){const c=[{fixed:-1,stretch:0}];for(const[d,g]of n){const _=c[c.length-1];c.push({fixed:d-_.stretch,stretch:_.stretch}),c.push({fixed:d-_.stretch,stretch:_.stretch+(g-d)})}return c.push({fixed:t+1,stretch:o}),c}function Wu(n,t,o,c){return n/t*o+c}function Ku(n,t,o,c){return n-t*o/c}gt("Anchor",Go);class Xu{constructor(t,o,c,d,g,_,b,E,P,z){if(this.boxStartIndex=t.length,P){let M=_.top,B=_.bottom;const j=_.collisionPadding;j&&(M-=j[1],B+=j[3]);let V=B-M;V>0&&(V=Math.max(10,V),this.circleDiameter=V)}else{let M=_.top*b-E,B=_.bottom*b+E,j=_.left*b-E,V=_.right*b+E;const ee=_.collisionPadding;if(ee&&(j-=ee[0]*b,M-=ee[1]*b,V+=ee[2]*b,B+=ee[3]*b),z){const te=new Le(j,M),fe=new Le(V,M),Ee=new Le(j,B),we=new Le(V,B),ke=z*Math.PI/180;te._rotate(ke),fe._rotate(ke),Ee._rotate(ke),we._rotate(ke),j=Math.min(te.x,fe.x,Ee.x,we.x),V=Math.max(te.x,fe.x,Ee.x,we.x),M=Math.min(te.y,fe.y,Ee.y,we.y),B=Math.max(te.y,fe.y,Ee.y,we.y)}t.emplaceBack(o.x,o.y,j,M,V,B,c,d,g)}this.boxEndIndex=t.length}}class gb{constructor(t=[],o=_b){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:c}=this,d=o[t];for(;t>0;){const g=t-1>>1,_=o[g];if(c(d,_)>=0)break;o[t]=_,t=g}o[t]=d}_down(t){const{data:o,compare:c}=this,d=this.length>>1,g=o[t];for(;t<d;){let _=1+(t<<1),b=o[_];const E=_+1;if(E<this.length&&c(o[E],b)<0&&(_=E,b=o[E]),c(b,g)>=0)break;o[t]=b,t=_}o[t]=g}}function _b(n,t){return n<t?-1:n>t?1:0}function yb(n,t=1,o=!1){let c=1/0,d=1/0,g=-1/0,_=-1/0;const b=n[0];for(let j=0;j<b.length;j++){const V=b[j];(!j||V.x<c)&&(c=V.x),(!j||V.y<d)&&(d=V.y),(!j||V.x>g)&&(g=V.x),(!j||V.y>_)&&(_=V.y)}const E=Math.min(g-c,_-d);let P=E/2;const z=new gb([],vb);if(E===0)return new Le(c,d);for(let j=c;j<g;j+=E)for(let V=d;V<_;V+=E)z.push(new Ma(j+P,V+P,P,n));let M=function(j){let V=0,ee=0,te=0;const fe=j[0];for(let Ee=0,we=fe.length,ke=we-1;Ee<we;ke=Ee++){const je=fe[Ee],Be=fe[ke],_t=je.x*Be.y-Be.x*je.y;ee+=(je.x+Be.x)*_t,te+=(je.y+Be.y)*_t,V+=3*_t}return new Ma(ee/V,te/V,0,j)}(n),B=z.length;for(;z.length;){const j=z.pop();(j.d>M.d||!M.d)&&(M=j,o&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,B)),j.max-M.d<=t||(P=j.h/2,z.push(new Ma(j.p.x-P,j.p.y-P,P,n)),z.push(new Ma(j.p.x+P,j.p.y-P,P,n)),z.push(new Ma(j.p.x-P,j.p.y+P,P,n)),z.push(new Ma(j.p.x+P,j.p.y+P,P,n)),B+=4)}return o&&(console.log(`num probes: ${B}`),console.log(`best distance: ${M.d}`)),M.p}function vb(n,t){return t.max-n.max}function Ma(n,t,o,c){this.p=new Le(n,t),this.h=o,this.d=function(d,g){let _=!1,b=1/0;for(let E=0;E<g.length;E++){const P=g[E];for(let z=0,M=P.length,B=M-1;z<M;B=z++){const j=P[z],V=P[B];j.y>d.y!=V.y>d.y&&d.x<(V.x-j.x)*(d.y-j.y)/(V.y-j.y)+j.x&&(_=!_),b=Math.min(b,Tm(d,j,V))}}return(_?1:-1)*Math.sqrt(b)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}const ap=Number.POSITIVE_INFINITY;function mg(n,t){return t[1]!==ap?function(o,c,d){let g=0,_=0;switch(c=Math.abs(c),d=Math.abs(d),o){case"top-right":case"top-left":case"top":_=d-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-d}switch(o){case"top-right":case"bottom-right":case"right":g=-c;break;case"top-left":case"bottom-left":case"left":g=c}return[g,_]}(n,t[0],t[1]):function(o,c){let d=0,g=0;c<0&&(c=0);const _=c/Math.sqrt(2);switch(o){case"top-right":case"top-left":g=_-7;break;case"bottom-right":case"bottom-left":g=7-_;break;case"bottom":g=7-c;break;case"top":g=c-7}switch(o){case"top-right":case"bottom-right":d=-_;break;case"top-left":case"bottom-left":d=_;break;case"left":d=c;break;case"right":d=-c}return[d,g]}(n,t[0])}function lp(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xb(n,t,o,c,d,g,_,b,E,P,z){let M=g.textMaxSize.evaluate(t,{});M===void 0&&(M=_);const B=n.layers[0].layout,j=B.get("icon-offset").evaluate(t,{},z),V=_g(o.horizontal),ee=_/24,te=n.tilePixelRatio*ee,fe=n.tilePixelRatio*M/24,Ee=n.tilePixelRatio*b,we=n.tilePixelRatio*B.get("symbol-spacing"),ke=B.get("text-padding")*n.tilePixelRatio,je=B.get("icon-padding")*n.tilePixelRatio,Be=B.get("text-max-angle")/180*Math.PI,_t=B.get("text-rotation-alignment")!=="viewport"&&B.get("symbol-placement")!=="point",Tt=B.get("icon-rotation-alignment")==="map"&&B.get("symbol-placement")!=="point",ct=B.get("symbol-placement"),ut=we/2,nt=B.get("icon-text-fit");let mt;c&&nt!=="none"&&(n.allowVerticalPlacement&&o.vertical&&(mt=og(c,o.vertical,nt,B.get("icon-text-fit-padding"),j,ee)),V&&(c=og(c,V,nt,B.get("icon-text-fit-padding"),j,ee)));const ht=(Ze,Dt)=>{Dt.x<0||Dt.x>=sn||Dt.y<0||Dt.y>=sn||function(It,tr,mr,Or,Mr,_n,Yr,Qr,ln,yn,An,Hn,en,vn,Pn,Bn,Gn,Zn,Nr,cn,Jt,ri,xn,Cn,Ti){const Oi=It.addToLineVertexArray(tr,mr);let Mi,go,Ii,hi,Wn=0,_o=0,dc=0,Og=0,yp=-1,vp=-1;const yo={};let Mg=Jl(""),xp=0,bp=0;if(Qr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[xp,bp]=Qr.layout.get("text-offset").evaluate(Jt,{},Cn).map(Kn=>Kn*pn):(xp=Qr.layout.get("text-radial-offset").evaluate(Jt,{},Cn)*pn,bp=ap),It.allowVerticalPlacement&&Or.vertical){const Kn=Qr.layout.get("text-rotate").evaluate(Jt,{},Cn)+90;Ii=new Xu(ln,tr,yn,An,Hn,Or.vertical,en,vn,Pn,Kn),Yr&&(hi=new Xu(ln,tr,yn,An,Hn,Yr,Gn,Zn,Pn,Kn))}if(Mr){const Kn=Qr.layout.get("icon-rotate").evaluate(Jt,{}),Gi=Qr.layout.get("icon-text-fit")!=="none",pc=pg(Mr,Kn,xn,Gi),fc=Yr?pg(Yr,Kn,xn,Gi):void 0;go=new Xu(ln,tr,yn,An,Hn,Mr,Gn,Zn,!1,Kn),Wn=4*pc.length;const Bg=It.iconSizeData;let Ms=null;Bg.kind==="source"?(Ms=[mo*Qr.layout.get("icon-size").evaluate(Jt,{})],Ms[0]>Zo&&Ae(`${It.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Bg.kind==="composite"&&(Ms=[mo*ri.compositeIconSizes[0].evaluate(Jt,{},Cn),mo*ri.compositeIconSizes[1].evaluate(Jt,{},Cn)],(Ms[0]>Zo||Ms[1]>Zo)&&Ae(`${It.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),It.addSymbols(It.icon,pc,Ms,cn,Nr,Jt,l.WritingMode.none,tr,Oi.lineStartIndex,Oi.lineLength,-1,Cn),yp=It.icon.placedSymbolArray.length-1,fc&&(_o=4*fc.length,It.addSymbols(It.icon,fc,Ms,cn,Nr,Jt,l.WritingMode.vertical,tr,Oi.lineStartIndex,Oi.lineLength,-1,Cn),vp=It.icon.placedSymbolArray.length-1)}const Lg=Object.keys(Or.horizontal);for(const Kn of Lg){const Gi=Or.horizontal[Kn];if(!Mi){Mg=Jl(Gi.text);const fc=Qr.layout.get("text-rotate").evaluate(Jt,{},Cn);Mi=new Xu(ln,tr,yn,An,Hn,Gi,en,vn,Pn,fc)}const pc=Gi.positionedLines.length===1;if(dc+=gg(It,tr,Gi,_n,Qr,Pn,Jt,Bn,Oi,Or.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,pc?Lg:[Kn],yo,yp,ri,Cn),pc)break}Or.vertical&&(Og+=gg(It,tr,Or.vertical,_n,Qr,Pn,Jt,Bn,Oi,l.WritingMode.vertical,["vertical"],yo,vp,ri,Cn));const Ob=Mi?Mi.boxStartIndex:It.collisionBoxArray.length,Mb=Mi?Mi.boxEndIndex:It.collisionBoxArray.length,Lb=Ii?Ii.boxStartIndex:It.collisionBoxArray.length,Rb=Ii?Ii.boxEndIndex:It.collisionBoxArray.length,Bb=go?go.boxStartIndex:It.collisionBoxArray.length,Fb=go?go.boxEndIndex:It.collisionBoxArray.length,Nb=hi?hi.boxStartIndex:It.collisionBoxArray.length,jb=hi?hi.boxEndIndex:It.collisionBoxArray.length;let Li=-1;const th=(Kn,Gi)=>Kn&&Kn.circleDiameter?Math.max(Kn.circleDiameter,Gi):Gi;Li=th(Mi,Li),Li=th(Ii,Li),Li=th(go,Li),Li=th(hi,Li);const Rg=Li>-1?1:0;Rg&&(Li*=Ti/pn),It.glyphOffsetArray.length>=La.MAX_GLYPHS&&Ae("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jt.sortKey!==void 0&&It.addToSortKeyRanges(It.symbolInstances.length,Jt.sortKey),It.symbolInstances.emplaceBack(tr.x,tr.y,yo.right>=0?yo.right:-1,yo.center>=0?yo.center:-1,yo.left>=0?yo.left:-1,yo.vertical||-1,yp,vp,Mg,Ob,Mb,Lb,Rb,Bb,Fb,Nb,jb,yn,dc,Og,Wn,_o,Rg,0,en,xp,bp,Li)}(n,Dt,Ze,o,c,d,mt,n.layers[0],n.collisionBoxArray,t.index,t.sourceLayerIndex,n.index,te,ke,_t,E,Ee,je,Tt,j,t,g,P,z,_)};if(ct==="line")for(const Ze of dg(t.geometry,0,0,sn,sn)){const Dt=mb(Ze,we,Be,o.vertical||V,c,24,fe,n.overscaling,sn);for(const It of Dt){const tr=V;tr&&bb(n,tr.text,ut,It)||ht(Ze,It)}}else if(ct==="line-center"){for(const Ze of t.geometry)if(Ze.length>1){const Dt=fb(Ze,Be,o.vertical||V,c,24,fe);Dt&&ht(Ze,Dt)}}else if(t.type==="Polygon")for(const Ze of Kd(t.geometry,0)){const Dt=yb(Ze,16);ht(Ze[0],new Go(Dt.x,Dt.y,0))}else if(t.type==="LineString")for(const Ze of t.geometry)ht(Ze,new Go(Ze[0].x,Ze[0].y,0));else if(t.type==="Point")for(const Ze of t.geometry)for(const Dt of Ze)ht([Dt],new Go(Dt.x,Dt.y,0))}const Zo=32640;function gg(n,t,o,c,d,g,_,b,E,P,z,M,B,j,V){const ee=function(Ee,we,ke,je,Be,_t,Tt,ct){const ut=je.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,nt=[];for(const mt of we.positionedLines)for(const ht of mt.positionedGlyphs){if(!ht.rect)continue;const Ze=ht.rect||{};let Dt=4,It=!0,tr=1,mr=0;const Or=(Be||ct)&&ht.vertical,Mr=ht.metrics.advance*ht.scale/2;if(ct&&we.verticalizable){const Nr=(ht.scale-1)*pn,cn=(pn-ht.metrics.width*ht.scale)/2;mr=mt.lineOffset/2-(ht.imageName?-cn:Nr)}if(ht.imageName){const Nr=Tt[ht.imageName];It=Nr.sdf,tr=Nr.pixelRatio,Dt=1/tr}const _n=Be?[ht.x+Mr,ht.y]:[0,0];let Yr=Be?[0,0]:[ht.x+Mr+ke[0],ht.y+ke[1]-mr],Qr=[0,0];Or&&(Qr=Yr,Yr=[0,0]);const ln=(ht.metrics.left-Dt)*ht.scale-Mr+Yr[0],yn=(-ht.metrics.top-Dt)*ht.scale+Yr[1],An=ln+Ze.w*ht.scale/tr,Hn=yn+Ze.h*ht.scale/tr,en=new Le(ln,yn),vn=new Le(An,yn),Pn=new Le(ln,Hn),Bn=new Le(An,Hn);if(Or){const Nr=new Le(-Mr,Mr-qu),cn=-Math.PI/2,Jt=12-Mr,ri=new Le(22-Jt,-(ht.imageName?Jt:0)),xn=new Le(...Qr);en._rotateAround(cn,Nr)._add(ri)._add(xn),vn._rotateAround(cn,Nr)._add(ri)._add(xn),Pn._rotateAround(cn,Nr)._add(ri)._add(xn),Bn._rotateAround(cn,Nr)._add(ri)._add(xn)}if(ut){const Nr=Math.sin(ut),cn=Math.cos(ut),Jt=[cn,-Nr,Nr,cn];en._matMult(Jt),vn._matMult(Jt),Pn._matMult(Jt),Bn._matMult(Jt)}const Gn=new Le(0,0),Zn=new Le(0,0);nt.push({tl:en,tr:vn,bl:Pn,br:Bn,tex:Ze,writingMode:we.writingMode,glyphOffset:_n,sectionIndex:ht.sectionIndex,isSDF:It,pixelOffsetTL:Gn,pixelOffsetBR:Zn,minFontScaleX:0,minFontScaleY:0})}return nt}(0,o,b,d,g,_,c,n.allowVerticalPlacement),te=n.textSizeData;let fe=null;te.kind==="source"?(fe=[mo*d.layout.get("text-size").evaluate(_,{})],fe[0]>Zo&&Ae(`${n.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):te.kind==="composite"&&(fe=[mo*j.compositeTextSizes[0].evaluate(_,{},V),mo*j.compositeTextSizes[1].evaluate(_,{},V)],(fe[0]>Zo||fe[1]>Zo)&&Ae(`${n.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),n.addSymbols(n.text,ee,fe,b,g,_,P,t,E.lineStartIndex,E.lineLength,B,V);for(const Ee of z)M[Ee]=n.text.placedSymbolArray.length-1;return 4*ee.length}function _g(n){for(const t in n)return n[t];return null}function bb(n,t,o,c){const d=n.compareText;if(t in d){const g=d[t];for(let _=g.length-1;_>=0;_--)if(c.dist(g[_])<o)return!0}else d[t]=[];return d[t].push(c),!1}const wb=qo.VectorTileFeature.types,Eb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ju(n,t,o,c,d,g,_,b,E,P,z,M,B){const j=b?Math.min(Zo,Math.round(b[0])):0,V=b?Math.min(Zo,Math.round(b[1])):0;n.emplaceBack(t,o,Math.round(32*c),Math.round(32*d),g,_,(j<<1)+(E?1:0),V,16*P,16*z,256*M,256*B)}function cp(n,t,o){n.emplaceBack(t.x,t.y,o),n.emplaceBack(t.x,t.y,o),n.emplaceBack(t.x,t.y,o),n.emplaceBack(t.x,t.y,o)}function Sb(n){for(const t of n.sections)if(Md(t.text))return!0;return!1}class up{constructor(t){this.layoutVertexArray=new dn,this.indexArray=new Rn,this.programConfigurations=t,this.segments=new ar,this.dynamicLayoutVertexArray=new $n,this.opacityVertexArray=new ei,this.placedSymbolArray=new qe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,o,c,d){this.isEmpty()||(c&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Z1.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,W1.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Eb,!0),this.opacityVertexBuffer.itemSize=1),(c||d)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}gt("SymbolBuffers",up);class hp{constructor(t,o,c){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new c,this.segments=new ar,this.collisionVertexArray=new Hi}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,K1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}gt("CollisionBuffers",hp);class La{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(_=>_.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ud([]),this.placementViewportMatrix=Ud([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=sg(this.zoom,o["text-size"]),this.iconSizeData=sg(this.zoom,o["icon-size"]);const c=this.layers[0].layout,d=c.get("symbol-sort-key"),g=c.get("symbol-z-order");this.canOverlap=pp(c,"text-overlap","text-allow-overlap")!=="never"||pp(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!d.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(_=>l.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=t.sourceID}createArrays(){this.text=new up(new ks(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new up(new ks(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new vt,this.lineVertexArray=new at,this.symbolInstances=new ze}calculateGlyphDependencies(t,o,c,d,g){for(let _=0;_<t.length;_++)if(o[t.charCodeAt(_)]=!0,(c||d)&&g){const b=lc[t.charAt(_)];b&&(o[b.charCodeAt(0)]=!0)}}populate(t,o,c){const d=this.layers[0],g=d.layout,_=g.get("text-font"),b=g.get("text-field"),E=g.get("icon-image"),P=(b.value.kind!=="constant"||b.value.value instanceof X&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),z=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,M=g.get("symbol-sort-key");if(this.features=[],!P&&!z)return;const B=o.iconDependencies,j=o.glyphDependencies,V=o.availableImages,ee=new Dr(this.zoom);for(const{feature:te,id:fe,index:Ee,sourceLayerIndex:we}of t){const ke=d._featureFilter.needGeometry,je=zs(te,ke);if(!d._featureFilter.filter(ee,je,c))continue;let Be,_t;if(ke||(je.geometry=Ds(te)),P){const ct=d.getValueAndResolveTokens("text-field",je,c,V),ut=X.factory(ct);Sb(ut)&&(this.hasRTLText=!0),(!this.hasRTLText||Wl()==="unavailable"||this.hasRTLText&&Qn.isParsed())&&(Be=J1(ut,d,je))}if(z){const ct=d.getValueAndResolveTokens("icon-image",je,c,V);_t=ct instanceof oe?ct:oe.fromString(ct)}if(!Be&&!_t)continue;const Tt=this.sortFeaturesByKey?M.evaluate(je,{},c):void 0;if(this.features.push({id:fe,text:Be,icon:_t,index:Ee,sourceLayerIndex:we,geometry:je.geometry,properties:te.properties,type:wb[te.type],sortKey:Tt}),_t&&(B[_t.name]=!0),Be){const ct=_.evaluate(je,{},c).join(","),ut=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const nt of Be.sections)if(nt.image)B[nt.image.name]=!0;else{const mt=$l(Be.toString()),ht=nt.fontStack||ct,Ze=j[ht]=j[ht]||{};this.calculateGlyphDependencies(nt.text,Ze,ut,this.allowVerticalPlacement,mt)}}}g.get("symbol-placement")==="line"&&(this.features=function(te){const fe={},Ee={},we=[];let ke=0;function je(ct){we.push(te[ct]),ke++}function Be(ct,ut,nt){const mt=Ee[ct];return delete Ee[ct],Ee[ut]=mt,we[mt].geometry[0].pop(),we[mt].geometry[0]=we[mt].geometry[0].concat(nt[0]),mt}function _t(ct,ut,nt){const mt=fe[ut];return delete fe[ut],fe[ct]=mt,we[mt].geometry[0].shift(),we[mt].geometry[0]=nt[0].concat(we[mt].geometry[0]),mt}function Tt(ct,ut,nt){const mt=nt?ut[0][ut[0].length-1]:ut[0][0];return`${ct}:${mt.x}:${mt.y}`}for(let ct=0;ct<te.length;ct++){const ut=te[ct],nt=ut.geometry,mt=ut.text?ut.text.toString():null;if(!mt){je(ct);continue}const ht=Tt(mt,nt),Ze=Tt(mt,nt,!0);if(ht in Ee&&Ze in fe&&Ee[ht]!==fe[Ze]){const Dt=_t(ht,Ze,nt),It=Be(ht,Ze,we[Dt].geometry);delete fe[ht],delete Ee[Ze],Ee[Tt(mt,we[It].geometry,!0)]=It,we[Dt].geometry=null}else ht in Ee?Be(ht,Ze,nt):Ze in fe?_t(ht,Ze,nt):(je(ct),fe[ht]=ke-1,Ee[Ze]=ke-1)}return we.filter(ct=>ct.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((te,fe)=>te.sortKey-fe.sortKey)}update(t,o,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,c),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const c=this.lineVertexArray.length;if(t.segment!==void 0){let d=t.dist(o[t.segment+1]),g=t.dist(o[t.segment]);const _={};for(let b=t.segment+1;b<o.length;b++)_[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:d},b<o.length-1&&(d+=o[b+1].dist(o[b]));for(let b=t.segment||0;b>=0;b--)_[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:g},b>0&&(g+=o[b-1].dist(o[b]));for(let b=0;b<o.length;b++){const E=_[b];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(t,o,c,d,g,_,b,E,P,z,M,B){const j=t.indexArray,V=t.layoutVertexArray,ee=t.segments.prepareSegment(4*o.length,V,j,this.canOverlap?_.sortKey:void 0),te=this.glyphOffsetArray.length,fe=ee.vertexLength,Ee=this.allowVerticalPlacement&&b===l.WritingMode.vertical?Math.PI/2:0,we=_.text&&_.text.sections;for(let ke=0;ke<o.length;ke++){const{tl:je,tr:Be,bl:_t,br:Tt,tex:ct,pixelOffsetTL:ut,pixelOffsetBR:nt,minFontScaleX:mt,minFontScaleY:ht,glyphOffset:Ze,isSDF:Dt,sectionIndex:It}=o[ke],tr=ee.vertexLength,mr=Ze[1];Ju(V,E.x,E.y,je.x,mr+je.y,ct.x,ct.y,c,Dt,ut.x,ut.y,mt,ht),Ju(V,E.x,E.y,Be.x,mr+Be.y,ct.x+ct.w,ct.y,c,Dt,nt.x,ut.y,mt,ht),Ju(V,E.x,E.y,_t.x,mr+_t.y,ct.x,ct.y+ct.h,c,Dt,ut.x,nt.y,mt,ht),Ju(V,E.x,E.y,Tt.x,mr+Tt.y,ct.x+ct.w,ct.y+ct.h,c,Dt,nt.x,nt.y,mt,ht),cp(t.dynamicLayoutVertexArray,E,Ee),j.emplaceBack(tr,tr+1,tr+2),j.emplaceBack(tr+1,tr+2,tr+3),ee.vertexLength+=4,ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ze[0]),ke!==o.length-1&&It===o[ke+1].sectionIndex||t.programConfigurations.populatePaintArrays(V.length,_,_.index,{},B,we&&we[It])}t.placedSymbolArray.emplaceBack(E.x,E.y,te,this.glyphOffsetArray.length-te,fe,P,z,E.segment,c?c[0]:0,c?c[1]:0,d[0],d[1],b,0,!1,0,M)}_addCollisionDebugVertex(t,o,c,d,g,_){return o.emplaceBack(0,0),t.emplaceBack(c.x,c.y,d,g,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(t,o,c,d,g,_,b){const E=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),P=E.vertexLength,z=g.layoutVertexArray,M=g.collisionVertexArray,B=b.anchorX,j=b.anchorY;this._addCollisionDebugVertex(z,M,_,B,j,new Le(t,o)),this._addCollisionDebugVertex(z,M,_,B,j,new Le(c,o)),this._addCollisionDebugVertex(z,M,_,B,j,new Le(c,d)),this._addCollisionDebugVertex(z,M,_,B,j,new Le(t,d)),E.vertexLength+=4;const V=g.indexArray;V.emplaceBack(P,P+1),V.emplaceBack(P+1,P+2),V.emplaceBack(P+2,P+3),V.emplaceBack(P+3,P),E.primitiveLength+=4}addDebugCollisionBoxes(t,o,c,d){for(let g=t;g<o;g++){const _=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,d?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hp(ti,Gm.members,bi),this.iconCollisionBox=new hp(ti,Gm.members,bi);for(let t=0;t<this.symbolInstances.length;t++){const o=this.symbolInstances.get(t);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(t,o,c,d,g,_,b,E,P){const z={};for(let M=o;M<c;M++){const B=t.get(M);z.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},z.textFeatureIndex=B.featureIndex;break}for(let M=d;M<g;M++){const B=t.get(M);z.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},z.verticalTextFeatureIndex=B.featureIndex;break}for(let M=_;M<b;M++){const B=t.get(M);z.iconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},z.iconFeatureIndex=B.featureIndex;break}for(let M=E;M<P;M++){const B=t.get(M);z.verticalIconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},z.verticalIconFeatureIndex=B.featureIndex;break}return z}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const c=t.placedSymbolArray.get(o),d=c.vertexStartIndex+4*c.numGlyphs;for(let g=c.vertexStartIndex;g<d;g+=4)t.indexArray.emplaceBack(g,g+1,g+2),t.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),c=Math.cos(t),d=[],g=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const E=this.symbolInstances.get(b);d.push(0|Math.round(o*E.anchorX+c*E.anchorY)),g.push(E.featureIndex)}return _.sort((b,E)=>d[b]-d[E]||g[E]-g[b]),_}addToSortKeyRanges(t,o){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===o?c.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const c=this.symbolInstances.get(o);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((d,g,_)=>{d>=0&&_.indexOf(d)===g&&this.addIndicesForPlacedSymbol(this.text,d)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}gt("SymbolBucket",La,{omit:["layers","collisionBoxArray","features","compareText"]}),La.MAX_GLYPHS=65535,La.addDynamicAttributes=cp;const Tb=new nn({"symbol-placement":new Et(ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Et(ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Et(ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new kt(ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Et(ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Et(ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Et(ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Et(ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Et(ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Et(ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new kt(ve.layout_symbol["icon-size"]),"icon-text-fit":new Et(ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Et(ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new kt(ve.layout_symbol["icon-image"]),"icon-rotate":new kt(ve.layout_symbol["icon-rotate"]),"icon-padding":new Et(ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Et(ve.layout_symbol["icon-keep-upright"]),"icon-offset":new kt(ve.layout_symbol["icon-offset"]),"icon-anchor":new kt(ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Et(ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Et(ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Et(ve.layout_symbol["text-rotation-alignment"]),"text-field":new kt(ve.layout_symbol["text-field"]),"text-font":new kt(ve.layout_symbol["text-font"]),"text-size":new kt(ve.layout_symbol["text-size"]),"text-max-width":new kt(ve.layout_symbol["text-max-width"]),"text-line-height":new Et(ve.layout_symbol["text-line-height"]),"text-letter-spacing":new kt(ve.layout_symbol["text-letter-spacing"]),"text-justify":new kt(ve.layout_symbol["text-justify"]),"text-radial-offset":new kt(ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Et(ve.layout_symbol["text-variable-anchor"]),"text-anchor":new kt(ve.layout_symbol["text-anchor"]),"text-max-angle":new Et(ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Et(ve.layout_symbol["text-writing-mode"]),"text-rotate":new kt(ve.layout_symbol["text-rotate"]),"text-padding":new Et(ve.layout_symbol["text-padding"]),"text-keep-upright":new Et(ve.layout_symbol["text-keep-upright"]),"text-transform":new kt(ve.layout_symbol["text-transform"]),"text-offset":new kt(ve.layout_symbol["text-offset"]),"text-allow-overlap":new Et(ve.layout_symbol["text-allow-overlap"]),"text-overlap":new Et(ve.layout_symbol["text-overlap"]),"text-ignore-placement":new Et(ve.layout_symbol["text-ignore-placement"]),"text-optional":new Et(ve.layout_symbol["text-optional"])});var dp={paint:new nn({"icon-opacity":new kt(ve.paint_symbol["icon-opacity"]),"icon-color":new kt(ve.paint_symbol["icon-color"]),"icon-halo-color":new kt(ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new kt(ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new kt(ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Et(ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Et(ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new kt(ve.paint_symbol["text-opacity"]),"text-color":new kt(ve.paint_symbol["text-color"],{runtimeType:Tn,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new kt(ve.paint_symbol["text-halo-color"]),"text-halo-width":new kt(ve.paint_symbol["text-halo-width"]),"text-halo-blur":new kt(ve.paint_symbol["text-halo-blur"]),"text-translate":new Et(ve.paint_symbol["text-translate"]),"text-translate-anchor":new Et(ve.paint_symbol["text-translate-anchor"])}),layout:Tb};class yg{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Xt,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}gt("FormatSectionOverride",yg,{omit:["defaultValue"]});class Yu extends Ln{constructor(t){super(t,dp)}recalculate(t,o){if(super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const d=[];for(const g of c)d.indexOf(g)<0&&d.push(g);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,o,c,d){const g=this.layout.get(t).evaluate(o,{},c,d),_=this._unevaluatedLayout._values[t];return _.isDataDriven()||la(_.value)||!g?g:function(b,E){return E.replace(/{([^{}]+)}/g,(P,z)=>z in b?String(b[z]):"")}(o.properties,g)}createBucket(t){return new La(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of dp.paint.overridableProperties){if(!Yu.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),c=new yg(o),d=new Bl(c,o.property.specification);let g=null;g=o.value.kind==="constant"||o.value.kind==="source"?new ua("source",d):new ha("composite",d,o.value.zoomStops,o.value._interpolationType),this.paint._values[t]=new xi(o.property,g,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,c){return!(!this.layout||o.isDataDriven()||c.isDataDriven())&&Yu.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const c=t.get("text-field"),d=dp.paint.properties[o];let g=!1;const _=b=>{for(const E of b)if(d.overrides&&d.overrides.hasOverride(E))return void(g=!0)};if(c.value.kind==="constant"&&c.value.value instanceof X)_(c.value.value.sections);else if(c.value.kind==="source"){const b=P=>{g||(P instanceof Ne&&ae(P.value)===si?_(P.value.sections):P instanceof St?_(P.sections):P.eachChild(b))},E=c.value;E._styleExpression&&b(E._styleExpression.expression)}return g}}function pp(n,t,o){let c="never";const d=n.get(t);return d?c=d:n.get(o)&&(c="always"),c}var Ib={paint:new nn({"background-color":new Et(ve.paint_background["background-color"]),"background-pattern":new As(ve.paint_background["background-pattern"]),"background-opacity":new Et(ve.paint_background["background-opacity"])})},Ab={paint:new nn({"raster-opacity":new Et(ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Et(ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Et(ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Et(ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Et(ve.paint_raster["raster-saturation"]),"raster-contrast":new Et(ve.paint_raster["raster-contrast"]),"raster-resampling":new Et(ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Et(ve.paint_raster["raster-fade-duration"])})};class Pb extends Ln{constructor(t){super(t,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const Cb={circle:class extends Ln{constructor(n){super(n,a1)}createBucket(n){return new Nd(n)}queryRadius(n){const t=n;return Ql("circle-radius",this,t)+Ql("circle-stroke-width",this,t)+Ru(this.paint.get("circle-translate"))}queryIntersectsFeature(n,t,o,c,d,g,_,b){const E=Bu(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,_),P=this.paint.get("circle-radius").evaluate(t,o)+this.paint.get("circle-stroke-width").evaluate(t,o),z=this.paint.get("circle-pitch-alignment")==="map",M=z?E:function(j,V){return j.map(ee=>Pm(ee,V))}(E,b),B=z?P*_:P;for(const j of c)for(const V of j){const ee=z?V:Pm(V,b);let te=B;const fe=Fu([],[V.x,V.y,0,1],b);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?te*=fe[3]/g.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(te*=g.cameraToCenterDistance/fe[3]),r1(M,ee,te))return!0}return!1}},heatmap:class extends Ln{constructor(n){super(n,c1),this._updateColorRamp()}createBucket(n){return new Cm(n)}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Dm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Ln{constructor(n){super(n,u1)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Ln{constructor(n){super(n,I1)}recalculate(n,t){super.recalculate(n,t);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Yd(n)}queryRadius(){return Ru(this.paint.get("fill-translate"))}queryIntersectsFeature(n,t,o,c,d,g,_){return Sm(Bu(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,_),c)}isTileClipped(){return!0}},"fill-extrusion":class extends Ln{constructor(n){super(n,N1)}createBucket(n){return new ep(n)}queryRadius(){return Ru(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,t,o,c,d,g,_,b){const E=Bu(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,_),P=this.paint.get("fill-extrusion-height").evaluate(t,o),z=this.paint.get("fill-extrusion-base").evaluate(t,o),M=function(j,V,ee,te){const fe=[];for(const Ee of j){const we=[Ee.x,Ee.y,0,1];Fu(we,we,V),fe.push(new Le(we[0]/we[3],we[1]/we[3]))}return fe}(E,b),B=function(j,V,ee,te){const fe=[],Ee=[],we=te[8]*V,ke=te[9]*V,je=te[10]*V,Be=te[11]*V,_t=te[8]*ee,Tt=te[9]*ee,ct=te[10]*ee,ut=te[11]*ee;for(const nt of j){const mt=[],ht=[];for(const Ze of nt){const Dt=Ze.x,It=Ze.y,tr=te[0]*Dt+te[4]*It+te[12],mr=te[1]*Dt+te[5]*It+te[13],Or=te[2]*Dt+te[6]*It+te[14],Mr=te[3]*Dt+te[7]*It+te[15],_n=Or+je,Yr=Mr+Be,Qr=tr+_t,ln=mr+Tt,yn=Or+ct,An=Mr+ut,Hn=new Le((tr+we)/Yr,(mr+ke)/Yr);Hn.z=_n/Yr,mt.push(Hn);const en=new Le(Qr/An,ln/An);en.z=yn/An,ht.push(en)}fe.push(mt),Ee.push(ht)}return[fe,Ee]}(c,z,P,b);return function(j,V,ee){let te=1/0;Sm(ee,V)&&(te=Vm(ee,V[0]));for(let fe=0;fe<V.length;fe++){const Ee=V[fe],we=j[fe];for(let ke=0;ke<Ee.length-1;ke++){const je=Ee[ke],Be=[je,Ee[ke+1],we[ke+1],we[ke],je];Em(ee,Be)&&(te=Math.min(te,Vm(ee,Be)))}}return te!==1/0&&te}(B[0],B[1],M)}},line:class extends Ln{constructor(n){super(n,$m),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){n==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,t){super.recalculate(n,t),this.paint._values["line-floorwidth"]=qm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new tp(n)}queryRadius(n){const t=n,o=Hm(Ql("line-width",this,t),Ql("line-gap-width",this,t)),c=Ql("line-offset",this,t);return o/2+Math.abs(c)+Ru(this.paint.get("line-translate"))}queryIntersectsFeature(n,t,o,c,d,g,_){const b=Bu(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,_),E=_/2*Hm(this.paint.get("line-width").evaluate(t,o),this.paint.get("line-gap-width").evaluate(t,o)),P=this.paint.get("line-offset").evaluate(t,o);return P&&(c=function(z,M){const B=[];for(let j=0;j<z.length;j++){const V=z[j],ee=[];for(let te=0;te<V.length;te++){const fe=V[te-1],Ee=V[te],we=V[te+1],ke=te===0?new Le(0,0):Ee.sub(fe)._unit()._perp(),je=te===V.length-1?new Le(0,0):we.sub(Ee)._unit()._perp(),Be=ke._add(je)._unit(),_t=Be.x*je.x+Be.y*je.y;_t!==0&&Be._mult(1/_t),ee.push(Be._mult(M)._add(Ee))}B.push(ee)}return B}(c,P*_)),function(z,M,B){for(let j=0;j<M.length;j++){const V=M[j];if(z.length>=3){for(let ee=0;ee<V.length;ee++)if(Aa(z,V[ee]))return!0}if(n1(z,V,B))return!0}return!1}(b,c,E)}isTileClipped(){return!0}},symbol:Yu,background:class extends Ln{constructor(n){super(n,Ib)}},raster:class extends Ln{constructor(n){super(n,Ab)}}};class kb{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const vg=63710088e-1;class $r{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new $r(K(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,c=this.lat*o,d=t.lat*o,g=Math.sin(c)*Math.sin(d)+Math.cos(c)*Math.cos(d)*Math.cos((t.lng-this.lng)*o);return vg*Math.acos(Math.min(g,1))}toBounds(t=0){const o=360*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return new Os(new $r(this.lng-c,this.lat-o),new $r(this.lng+c,this.lat+o))}static convert(t){if(t instanceof $r)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new $r(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new $r(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Os{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof $r?new $r(t.lng,t.lat):$r.convert(t),this}setSouthWest(t){return this._sw=t instanceof $r?new $r(t.lng,t.lat):$r.convert(t),this}extend(t){const o=this._sw,c=this._ne;let d,g;if(t instanceof $r)d=t,g=t;else{if(!(t instanceof Os))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Os.convert(t)):this.extend($r.convert(t)):this;if(d=t._sw,g=t._ne,!d||!g)return this}return o||c?(o.lng=Math.min(d.lng,o.lng),o.lat=Math.min(d.lat,o.lat),c.lng=Math.max(g.lng,c.lng),c.lat=Math.max(g.lat,c.lat)):(this._sw=new $r(d.lng,d.lat),this._ne=new $r(g.lng,g.lat)),this}getCenter(){return new $r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new $r(this.getWest(),this.getNorth())}getSouthEast(){return new $r(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:c}=$r.convert(t);let d=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&d}static convert(t){return t instanceof Os?t:t&&new Os(t)}}const xg=2*Math.PI*vg;function bg(n){return xg*Math.cos(n*Math.PI/180)}function wg(n){return(180+n)/360}function Eg(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Sg(n,t){return n/bg(t)}function fp(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}class Qu{constructor(t,o,c=0){this.x=+t,this.y=+o,this.z=+c}static fromLngLat(t,o=0){const c=$r.convert(t);return new Qu(wg(c.lng),Eg(c.lat),Sg(o,c.lat))}toLngLat(){return new $r(360*this.x-180,fp(this.y))}toAltitude(){return this.z*bg(fp(this.y))}meterInMercatorCoordinateUnits(){return 1/xg*(t=fp(this.y),1/Math.cos(t*Math.PI/180));var t}}function Tg(n,t,o){var c=2*Math.PI*6378137/256/Math.pow(2,o);return[n*c-2*Math.PI*6378137/2,t*c-2*Math.PI*6378137/2]}class mp{constructor(t,o,c){this.z=t,this.x=o,this.y=c,this.key=uc(0,t,t,o,c)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o,c){const d=(_=this.y,b=this.z,E=Tg(256*(g=this.x),256*(_=Math.pow(2,b)-_-1),b),P=Tg(256*(g+1),256*(_+1),b),E[0]+","+E[1]+","+P[0]+","+P[1]);var g,_,b,E,P;const z=function(M,B,j){let V,ee="";for(let te=M;te>0;te--)V=1<<te-1,ee+=(B&V?1:0)+(j&V?2:0);return ee}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,d)}getTilePoint(t){const o=Math.pow(2,this.z);return new Le((t.x*o-this.x)*sn,(t.y*o-this.y)*sn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ig{constructor(t,o){this.wrap=t,this.canonical=o,this.key=uc(t,o.z,o.z,o.x,o.y)}}class Si{constructor(t,o,c,d,g){this.overscaledZ=t,this.wrap=o,this.canonical=new mp(c,+d,+g),this.key=uc(o,t,c,d,g)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const o=this.canonical.z-t;return t>this.canonical.z?new Si(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Si(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o){const c=this.canonical.z-t;return t>this.canonical.z?uc(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y):uc(this.wrap*+o,t,t,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new Si(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,c=2*this.canonical.x,d=2*this.canonical.y;return[new Si(o,this.wrap,o,c,d),new Si(o,this.wrap,o,c+1,d),new Si(o,this.wrap,o,c,d+1),new Si(o,this.wrap,o,c+1,d+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Si(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Si(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ig(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Qu(t.x-this.wrap,t.y))}}function uc(n,t,o,c,d){(n*=2)<0&&(n=-1*n-1);const g=1<<o;return(g*g*n+g*d+c).toString(36)+o.toString(36)+t.toString(36)}gt("CanonicalTileID",mp),gt("OverscaledTileID",Si,{omit:["posMatrix"]});class Ag{constructor(t,o,c){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return void Ae(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const d=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=c||"mapbox";for(let g=0;g<d;g++)this.data[this._idx(-1,g)]=this.data[this._idx(0,g)],this.data[this._idx(d,g)]=this.data[this._idx(d-1,g)],this.data[this._idx(g,-1)]=this.data[this._idx(g,0)],this.data[this._idx(g,d)]=this.data[this._idx(g,d-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(d,-1)]=this.data[this._idx(d-1,0)],this.data[this._idx(-1,d)]=this.data[this._idx(0,d-1)],this.data[this._idx(d,d)]=this.data[this._idx(d-1,d-1)]}get(t,o){const c=new Uint8Array(this.data.buffer),d=4*this._idx(t,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(c[d],c[d+1],c[d+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}_unpackMapbox(t,o,c){return(256*t*256+256*o+c)/10-1e4}_unpackTerrarium(t,o,c){return 256*t+o+c/256-32768}getPixels(){return new ui({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,o,c){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let d=o*this.dim,g=o*this.dim+this.dim,_=c*this.dim,b=c*this.dim+this.dim;switch(o){case-1:d=g-1;break;case 1:g=d+1}switch(c){case-1:_=b-1;break;case 1:b=_+1}const E=-o*this.dim,P=-c*this.dim;for(let z=_;z<b;z++)for(let M=d;M<g;M++)this.data[this._idx(M,z)]=t.data[this._idx(M+E,z+P)]}}gt("DEMData",Ag);class Pg{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const c=t[o];this._stringToNumber[c]=o,this._numberToString[o]=c}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class Cg{constructor(t,o,c,d,g){this.type="Feature",this._vectorTileFeature=t,t._z=o,t._x=c,t._y=d,this.properties=t.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(t[o]=this[o]);return t}}class kg{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new so(sn,16,0),this.grid3D=new so(sn,16,0),this.featureIndexArray=new rr,this.promoteId=o}insert(t,o,c,d,g,_){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,d,g);const E=_?this.grid3D:this.grid;for(let P=0;P<o.length;P++){const z=o[P],M=[1/0,1/0,-1/0,-1/0];for(let B=0;B<z.length;B++){const j=z[B];M[0]=Math.min(M[0],j.x),M[1]=Math.min(M[1],j.y),M[2]=Math.max(M[2],j.x),M[3]=Math.max(M[3],j.y)}M[0]<sn&&M[1]<sn&&M[2]>=0&&M[3]>=0&&E.insert(b,M[0],M[1],M[2],M[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new qo.VectorTile(new rp(this.rawTileData)).layers,this.sourceLayerCoder=new Pg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,o,c,d){this.loadVTLayers();const g=t.params||{},_=sn/t.tileSize/t.scale,b=fa(g.filter),E=t.queryGeometry,P=t.queryPadding*_,z=zg(E),M=this.grid.query(z.minX-P,z.minY-P,z.maxX+P,z.maxY+P),B=zg(t.cameraQueryGeometry),j=this.grid3D.query(B.minX-P,B.minY-P,B.maxX+P,B.maxY+P,(te,fe,Ee,we)=>function(ke,je,Be,_t,Tt){for(const ut of ke)if(je<=ut.x&&Be<=ut.y&&_t>=ut.x&&Tt>=ut.y)return!0;const ct=[new Le(je,Be),new Le(je,Tt),new Le(_t,Tt),new Le(_t,Be)];if(ke.length>2){for(const ut of ct)if(Aa(ke,ut))return!0}for(let ut=0;ut<ke.length-1;ut++)if(o1(ke[ut],ke[ut+1],ct))return!0;return!1}(t.cameraQueryGeometry,te-P,fe-P,Ee+P,we+P));for(const te of j)M.push(te);M.sort(Db);const V={};let ee;for(let te=0;te<M.length;te++){const fe=M[te];if(fe===ee)continue;ee=fe;const Ee=this.featureIndexArray.get(fe);let we=null;this.loadMatchingFeature(V,Ee.bucketIndex,Ee.sourceLayerIndex,Ee.featureIndex,b,g.layers,g.availableImages,o,c,d,(ke,je,Be)=>(we||(we=Ds(ke)),je.queryIntersectsFeature(E,ke,Be,we,this.z,t.transform,_,t.pixelPosMatrix)))}return V}loadMatchingFeature(t,o,c,d,g,_,b,E,P,z,M){const B=this.bucketLayerIDs[o];if(_&&!function(te,fe){for(let Ee=0;Ee<te.length;Ee++)if(fe.indexOf(te[Ee])>=0)return!0;return!1}(_,B))return;const j=this.sourceLayerCoder.decode(c),V=this.vtLayers[j].feature(d);if(g.needGeometry){const te=zs(V,!0);if(!g.filter(new Dr(this.tileID.overscaledZ),te,this.tileID.canonical))return}else if(!g.filter(new Dr(this.tileID.overscaledZ),V))return;const ee=this.getId(V,j);for(let te=0;te<B.length;te++){const fe=B[te];if(_&&_.indexOf(fe)<0)continue;const Ee=E[fe];if(!Ee)continue;let we={};ee&&z&&(we=z.getState(Ee.sourceLayer||"_geojsonTileLayer",ee));const ke=se({},P[fe]);ke.paint=Dg(ke.paint,Ee.paint,V,we,b),ke.layout=Dg(ke.layout,Ee.layout,V,we,b);const je=!M||M(V,Ee,we);if(!je)continue;const Be=new Cg(V,this.z,this.x,this.y,ee);Be.layer=ke;let _t=t[fe];_t===void 0&&(_t=t[fe]=[]),_t.push({featureIndex:d,feature:Be,intersectionZ:je})}}lookupSymbolFeatures(t,o,c,d,g,_,b,E){const P={};this.loadVTLayers();const z=fa(g);for(const M of t)this.loadMatchingFeature(P,c,d,M,z,_,b,E,o);return P}hasLayer(t){for(const o of this.bucketLayerIDs)for(const c of o)if(t===c)return!0;return!1}getId(t,o){let c=t.id;return this.promoteId&&(c=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof c=="boolean"&&(c=Number(c))),c}}function Dg(n,t,o,c,d){return Y(n,(g,_)=>{const b=t instanceof wa?t.get(_):null;return b&&b.evaluate?b.evaluate(o,c,d):b})}function zg(n){let t=1/0,o=1/0,c=-1/0,d=-1/0;for(const g of n)t=Math.min(t,g.x),o=Math.min(o,g.y),c=Math.max(c,g.x),d=Math.max(d,g.y);return{minX:t,minY:o,maxX:c,maxY:d}}function Db(n,t){return t-n}var gp;gt("FeatureIndex",kg,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(gp=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",gp.load="load",gp.fullLoad="fullLoad";let eh=null,hc=[];const _p=1e3/30,zb={mark(n){performance.mark(n)},frame(n){const t=n;eh!=null&&hc.push(t-eh),eh=t},clearMetrics(){eh=null,hc=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const n in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[n])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const n=performance.getEntriesByName("loadTime")[0].duration,t=performance.getEntriesByName("fullLoadTime")[0].duration,o=hc.length,c=1/(hc.reduce((g,_)=>g+_,0)/o/1e3),d=hc.filter(g=>g>_p).reduce((g,_)=>g+(_-_p)/_p,0);return{loadTime:n,fullLoadTime:t,fps:c,percentDroppedFrames:d/(o+d)*100}}};l.AJAXError=W,l.ARRAY_TYPE=Pa,l.Actor=class{constructor(n,t,o){this.target=n,this.parent=t,this.mapId=o,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ye(["receive","process"],this),this.invoker=new kb(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=_e()?n:window}send(n,t,o,c,d=!1){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(this.callbacks[g]=o);const _=Je(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:n,hasCallback:!!o,targetMapId:c,mustQueue:d,sourceMapId:this.mapId,data:Es(t,_)},_),{cancel:()=>{o&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(n){const t=n.data,o=t.id;if(o&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[o];const c=this.cancelCallbacks[o];delete this.cancelCallbacks[o],c&&c()}else _e()||t.mustQueue?(this.tasks[o]=t,this.taskQueue.push(o),this.invoker.trigger()):this.processTask(o,t)}process(){if(!this.taskQueue.length)return;const n=this.taskQueue.shift(),t=this.tasks[n];delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(n,t)}processTask(n,t){if(t.type==="<response>"){const o=this.callbacks[n];delete this.callbacks[n],o&&(t.error?o(ao(t.error)):o(null,ao(t.data)))}else{let o=!1;const c=Je(this.globalScope)?void 0:[],d=t.hasCallback?(b,E)=>{o=!0,delete this.cancelCallbacks[n],this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:b?Es(b):null,data:Es(E,c)},c)}:b=>{o=!0};let g=null;const _=ao(t.data);if(this.parent[t.type])g=this.parent[t.type](t.sourceMapId,_,d);else if(this.parent.getWorkerSource){const b=t.type.split(".");g=this.parent.getWorkerSource(t.sourceMapId,b[0],_.source)[b[1]](_,d)}else d(new Error(`Could not find function ${t.type}`));!o&&g&&g.cancel&&(this.cancelCallbacks[n]=g.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=tc,l.CanonicalTileID=mp,l.CollisionBoxArray=Te,l.CollisionCircleLayoutArray=class extends D{},l.Color=O,l.DEMData=Ag,l.DataConstantProperty=Et,l.DictionaryCoder=Pg,l.EXTENT=sn,l.ErrorEvent=Pt,l.EvaluationParameters=Dr,l.Event=yt,l.Evented=Vt,l.FeatureIndex=kg,l.FillBucket=Yd,l.FillExtrusionBucket=ep,l.GeoJSONFeature=Cg,l.ImageAtlas=eg,l.ImagePosition=ip,l.LineBucket=tp,l.LineStripIndexArray=class extends ge{},l.LngLat=$r,l.LngLatBounds=Os,l.MercatorCoordinate=Qu,l.ONE_EM=pn,l.OverscaledTileID=Si,l.PerformanceUtils=zb,l.PosArray=class extends jo{},l.Properties=nn,l.QuadTriangleArray=class extends N{},l.RGBAImage=ui,l.RasterBoundsArray=class extends Cs{},l.RequestPerformance=class{constructor(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let n=performance.getEntriesByName(this._marks.measure);return n.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),n=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),n}},l.ResourceType=Lt,l.SegmentVector=ar,l.SymbolBucket=La,l.Transitionable=Kl,l.TriangleIndexArray=Rn,l.Uniform1f=Vo,l.Uniform1i=class extends Ei{constructor(n,t){super(n,t),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},l.Uniform2f=class extends Ei{constructor(n,t){super(n,t),this.current=[0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))}},l.Uniform3f=class extends Ei{constructor(n,t){super(n,t),this.current=[0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))}},l.Uniform4f=ym,l.UniformColor=vm,l.UniformMatrix4f=class extends Ei{constructor(n,t){super(n,t),this.current=e1}set(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}},l.UnwrappedTileID=Ig,l.ValidationError=Ue,l.ZoomHistory=Ss,l.addDynamicAttributes=cp,l.asyncAll=function(n,t,o){if(!n.length)return o(null,[]);let c=n.length;const d=new Array(n.length);let g=null;n.forEach((_,b)=>{t(_,(E,P)=>{E&&(g=E),d[b]=P,--c==0&&o(g,d)})})},l.bezier=A,l.bindAll=ye,l.cacheEntryPossiblyAdded=function(n){Fe++,Fe>Ar&&(n.getActor().send("enforceCacheSizeLimit",vr),Fe=0)},l.clamp=L,l.clearTileCache=function(n){const t=caches.delete(dr);n&&t.catch(n).then(()=>n())},l.clipLine=dg,l.clone=function(n){var t=new Pa(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},l.clone$1=me,l.collisionCircleLayout=X1,l.config=Ot,l.create=function(){var n=new Pa(16);return Pa!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},l.createExpression=ca,l.createFilter=fa,l.createLayout=on,l.createStyleLayer=function(n){return n.type==="custom"?new Pb(n):new Cb[n.type](n)},l.dot=function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]},l.ease=F,l.emitValidationErrors=Iu,l.enforceCacheSizeLimit=function(n){Fr(),pr&&pr.then(t=>{t.keys().then(o=>{for(let c=0;c<o.length-n;c++)t.delete(o[c])})})},l.evaluateSizeForFeature=function(n,{uSize:t,uSizeT:o},{lowerSize:c,upperSize:d}){return n.kind==="source"?c/mo:n.kind==="composite"?Xr(c/mo,d/mo,o):t},l.evaluateSizeForZoom=function(n,t){let o=0,c=0;if(n.kind==="constant")c=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:d,minZoom:g,maxZoom:_}=n,b=d?L(Vn.interpolationFactor(d,t,g,_),0,1):0;n.kind==="camera"?c=Xr(n.minSize,n.maxSize,b):o=b}return{uSizeT:o,uSize:c}},l.evaluateVariableOffset=mg,l.evented=No,l.exported=zt,l.exported$1=lt,l.extend=se,l.filterObject=he,l.getAnchorAlignment=sp,l.getAnchorJustification=lp,l.getArrayBuffer=Re,l.getImage=He,l.getJSON=function(n,t){return Me(se(n,{type:"json"}),t)},l.getOverlapMode=pp,l.getRTLTextPluginStatus=Wl,l.getReferrer=ne,l.getVideo=function(n,t){const o=window.document.createElement("video");o.muted=!0,o.onloadstart=function(){t(null,o)};for(let c=0;c<n.length;c++){const d=window.document.createElement("source");Ve(n[c])||(o.crossOrigin="Anonymous"),d.src=n[c],o.appendChild(d)}return{cancel:()=>{}}},l.identity=Ud,l.invert=function(n,t){var o=t[0],c=t[1],d=t[2],g=t[3],_=t[4],b=t[5],E=t[6],P=t[7],z=t[8],M=t[9],B=t[10],j=t[11],V=t[12],ee=t[13],te=t[14],fe=t[15],Ee=o*b-c*_,we=o*E-d*_,ke=o*P-g*_,je=c*E-d*b,Be=c*P-g*b,_t=d*P-g*E,Tt=z*ee-M*V,ct=z*te-B*V,ut=z*fe-j*V,nt=M*te-B*ee,mt=M*fe-j*ee,ht=B*fe-j*te,Ze=Ee*ht-we*mt+ke*nt+je*ut-Be*ct+_t*Tt;return Ze?(n[0]=(b*ht-E*mt+P*nt)*(Ze=1/Ze),n[1]=(d*mt-c*ht-g*nt)*Ze,n[2]=(ee*_t-te*Be+fe*je)*Ze,n[3]=(B*Be-M*_t-j*je)*Ze,n[4]=(E*ut-_*ht-P*ct)*Ze,n[5]=(o*ht-d*ut+g*ct)*Ze,n[6]=(te*ke-V*_t-fe*we)*Ze,n[7]=(z*_t-B*ke+j*we)*Ze,n[8]=(_*mt-b*ut+P*Tt)*Ze,n[9]=(c*ut-o*mt-g*Tt)*Ze,n[10]=(V*Be-ee*ke+fe*Ee)*Ze,n[11]=(M*ke-z*Be-j*Ee)*Ze,n[12]=(b*ct-_*nt-E*Tt)*Ze,n[13]=(o*nt-c*ct+d*Tt)*Ze,n[14]=(ee*we-V*je-te*Ee)*Ze,n[15]=(z*je-M*we+B*Ee)*Ze,n):null},l.isImageBitmap=Ke,l.isSafari=Je,l.keysDifference=function(n,t){const o=[];for(const c in n)c in t||o.push(c);return o},l.lazyLoadRTLTextPlugin=function(){Qn.isLoading()||Qn.isLoaded()||Wl()!=="deferred"||va()},l.makeRequest=Me,l.mapObject=Y,l.mercatorXfromLng=wg,l.mercatorYfromLat=Eg,l.mercatorZfromAltitude=Sg,l.mul=l1,l.multiply=Am,l.nextPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},l.number=Xr,l.ortho=function(n,t,o,c,d,g,_){var b=1/(t-o),E=1/(c-d),P=1/(g-_);return n[0]=-2*b,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*E,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*P,n[11]=0,n[12]=(t+o)*b,n[13]=(d+c)*E,n[14]=(_+g)*P,n[15]=1,n},l.parseCacheControl=ot,l.parseGlyphPBF=function(n){return new rp(n).readFields(ab,[])},l.pbf=rp,l.performSymbolLayout=function(n,t,o,c,d,g,_){n.createArrays(),n.tilePixelRatio=sn/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const b=n.layers[0].layout,E=n.layers[0]._unevaluatedLayout._values,P={layoutIconSize:E["icon-size"].possiblyEvaluate(new Dr(n.zoom+1),_),layoutTextSize:E["text-size"].possiblyEvaluate(new Dr(n.zoom+1),_),textMaxSize:E["text-size"].possiblyEvaluate(new Dr(18))};if(n.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:ee}=n.textSizeData;P.compositeTextSizes=[E["text-size"].possiblyEvaluate(new Dr(V),_),E["text-size"].possiblyEvaluate(new Dr(ee),_)]}if(n.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:ee}=n.iconSizeData;P.compositeIconSizes=[E["icon-size"].possiblyEvaluate(new Dr(V),_),E["icon-size"].possiblyEvaluate(new Dr(ee),_)]}const z=b.get("text-line-height")*pn,M=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point",B=b.get("text-keep-upright"),j=b.get("text-size");for(const V of n.features){const ee=b.get("text-font").evaluate(V,{},_).join(","),te=j.evaluate(V,{},_),fe=P.layoutTextSize.evaluate(V,{},_),Ee=P.layoutIconSize.evaluate(V,{},_),we={horizontal:{},vertical:void 0},ke=V.text;let je,Be=[0,0];if(ke){const ct=ke.toString(),ut=b.get("text-letter-spacing").evaluate(V,{},_)*pn,nt=Au(ct)?ut:0,mt=b.get("text-anchor").evaluate(V,{},_),ht=b.get("text-variable-anchor");if(!ht){const mr=b.get("text-radial-offset").evaluate(V,{},_);Be=mr?mg(mt,[mr*pn,ap]):b.get("text-offset").evaluate(V,{},_).map(Or=>Or*pn)}let Ze=M?"center":b.get("text-justify").evaluate(V,{},_);const Dt=b.get("symbol-placement"),It=Dt==="point"?b.get("text-max-width").evaluate(V,{},_)*pn:0,tr=()=>{n.allowVerticalPlacement&&$l(ct)&&(we.vertical=Hu(ke,t,o,d,ee,It,z,mt,"left",nt,Be,l.WritingMode.vertical,!0,Dt,fe,te))};if(!M&&ht){const mr=Ze==="auto"?ht.map(Mr=>lp(Mr)):[Ze];let Or=!1;for(let Mr=0;Mr<mr.length;Mr++){const _n=mr[Mr];if(!we.horizontal[_n])if(Or)we.horizontal[_n]=we.horizontal[0];else{const Yr=Hu(ke,t,o,d,ee,It,z,"center",_n,nt,Be,l.WritingMode.horizontal,!1,Dt,fe,te);Yr&&(we.horizontal[_n]=Yr,Or=Yr.positionedLines.length===1)}}tr()}else{Ze==="auto"&&(Ze=lp(mt));const mr=Hu(ke,t,o,d,ee,It,z,mt,Ze,nt,Be,l.WritingMode.horizontal,!1,Dt,fe,te);mr&&(we.horizontal[Ze]=mr),tr(),$l(ct)&&M&&B&&(we.vertical=Hu(ke,t,o,d,ee,It,z,mt,Ze,nt,Be,l.WritingMode.vertical,!1,Dt,fe,te))}}let _t=!1;if(V.icon&&V.icon.name){const ct=c[V.icon.name];ct&&(je=pb(d[V.icon.name],b.get("icon-offset").evaluate(V,{},_),b.get("icon-anchor").evaluate(V,{},_)),_t=!!ct.sdf,n.sdfIcons===void 0?n.sdfIcons=_t:n.sdfIcons!==_t&&Ae("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ct.pixelRatio!==n.pixelRatio||b.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}const Tt=_g(we.horizontal)||we.vertical;n.iconsInText=!!Tt&&Tt.iconsInText,(Tt||je)&&xb(n,V,we,je,c,P,fe,Ee,Be,_t,_)}g&&n.generateCollisionDebugBuffers()},l.perspective=function(n,t,o,c,d){var g,_=1/Math.tan(t/2);return n[0]=_/o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=_,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,d!=null&&d!==1/0?(n[10]=(d+c)*(g=1/(c-d)),n[14]=2*d*c*g):(n[10]=-1,n[14]=-2*c),n},l.pick=function(n,t){const o={};for(let c=0;c<t.length;c++){const d=t[c];d in n&&(o[d]=n[d])}return o},l.plugin=Qn,l.pointGeometry=Le,l.polygonIntersectsPolygon=Em,l.potpack=Qm,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=gt,l.registerForPluginStateChange=function(n){return n({pluginStatus:Mn,pluginURL:qi}),No.on("pluginStateChange",n),n},l.renderColorRamp=Dm,l.rotateX=function(n,t,o){var c=Math.sin(o),d=Math.cos(o),g=t[4],_=t[5],b=t[6],E=t[7],P=t[8],z=t[9],M=t[10],B=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=g*d+P*c,n[5]=_*d+z*c,n[6]=b*d+M*c,n[7]=E*d+B*c,n[8]=P*d-g*c,n[9]=z*d-_*c,n[10]=M*d-b*c,n[11]=B*d-E*c,n},l.rotateZ=function(n,t,o){var c=Math.sin(o),d=Math.cos(o),g=t[0],_=t[1],b=t[2],E=t[3],P=t[4],z=t[5],M=t[6],B=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=g*d+P*c,n[1]=_*d+z*c,n[2]=b*d+M*c,n[3]=E*d+B*c,n[4]=P*d-g*c,n[5]=z*d-_*c,n[6]=M*d-b*c,n[7]=B*d-E*c,n},l.scale=function(n,t,o){var c=o[0],d=o[1],g=o[2];return n[0]=t[0]*c,n[1]=t[1]*c,n[2]=t[2]*c,n[3]=t[3]*c,n[4]=t[4]*d,n[5]=t[5]*d,n[6]=t[6]*d,n[7]=t[7]*d,n[8]=t[8]*g,n[9]=t[9]*g,n[10]=t[10]*g,n[11]=t[11]*g,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},l.scale$1=function(n,t,o){return n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n[3]=t[3]*o,n},l.setCacheLimits=function(n,t){vr=n,Ar=t},l.setRTLTextPlugin=function(n,t,o=!1){if(Mn===ya||Mn===ql||Mn===Hl)throw new Error("setRTLTextPlugin cannot be called multiple times.");qi=zt.resolveURL(n),Mn=ya,Gl=t,Zl(),o||va()},l.spec=ve,l.sphericalToCartesian=function([n,t,o]){return t+=90,t*=Math.PI/180,o*=Math.PI/180,{x:n*Math.cos(t)*Math.sin(o),y:n*Math.sin(t)*Math.sin(o),z:n*Math.cos(o)}},l.toEvaluationFeature=zs,l.transformMat4=Fu,l.translate=function(n,t,o){var c,d,g,_,b,E,P,z,M,B,j,V,ee=o[0],te=o[1],fe=o[2];return t===n?(n[12]=t[0]*ee+t[4]*te+t[8]*fe+t[12],n[13]=t[1]*ee+t[5]*te+t[9]*fe+t[13],n[14]=t[2]*ee+t[6]*te+t[10]*fe+t[14],n[15]=t[3]*ee+t[7]*te+t[11]*fe+t[15]):(d=t[1],g=t[2],_=t[3],b=t[4],E=t[5],P=t[6],z=t[7],M=t[8],B=t[9],j=t[10],V=t[11],n[0]=c=t[0],n[1]=d,n[2]=g,n[3]=_,n[4]=b,n[5]=E,n[6]=P,n[7]=z,n[8]=M,n[9]=B,n[10]=j,n[11]=V,n[12]=c*ee+b*te+M*fe+t[12],n[13]=d*ee+E*te+B*fe+t[13],n[14]=g*ee+P*te+j*fe+t[14],n[15]=_*ee+z*te+V*fe+t[15]),n},l.triggerPluginCompletionEvent=ku,l.unicodeBlockLookup=st,l.uniqueId=function(){return pe++},l.validateCustomStyleLayer=function(n){const t=[],o=n.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),n.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},l.validateLight=kd,l.validateStyle=oo,l.vectorTile=qo,l.warnOnce=Ae,l.wrap=K}),y(["./shared"],function(l){function T(G){const k=typeof G;if(k==="number"||k==="boolean"||k==="string"||G==null)return JSON.stringify(G);if(Array.isArray(G)){let Z="[";for(const X of G)Z+=`${T(X)},`;return`${Z}]`}const O=Object.keys(G).sort();let U="{";for(let Z=0;Z<O.length;Z++)U+=`${JSON.stringify(O[Z])}:${T(G[O[Z]])},`;return`${U}}`}function C(G){let k="";for(const O of l.refProperties)k+=`/${T(G[O])}`;return k}class A{constructor(k){this.keyCache={},k&&this.replace(k)}replace(k){this._layerConfigs={},this._layers={},this.update(k,[])}update(k,O){for(const Z of k){this._layerConfigs[Z.id]=Z;const X=this._layers[Z.id]=l.createStyleLayer(Z);X._featureFilter=l.createFilter(X.filter),this.keyCache[Z.id]&&delete this.keyCache[Z.id]}for(const Z of O)delete this.keyCache[Z],delete this._layerConfigs[Z],delete this._layers[Z];this.familiesBySource={};const U=function(Z,X){const oe={};for(let ie=0;ie<Z.length;ie++){const ae=X&&X[Z[ie].id]||C(Z[ie]);X&&(X[Z[ie].id]=ae);let Pe=oe[ae];Pe||(Pe=oe[ae]=[]),Pe.push(Z[ie])}const re=[];for(const ie in oe)re.push(oe[ie]);return re}(Object.values(this._layerConfigs),this.keyCache);for(const Z of U){const X=Z.map(Ne=>this._layers[Ne.id]),oe=X[0];if(oe.visibility==="none")continue;const re=oe.source||"";let ie=this.familiesBySource[re];ie||(ie=this.familiesBySource[re]={});const ae=oe.sourceLayer||"_geojsonTileLayer";let Pe=ie[ae];Pe||(Pe=ie[ae]=[]),Pe.push(X)}}}class F{constructor(k){const O={},U=[];for(const re in k){const ie=k[re],ae=O[re]={};for(const Pe in ie){const Ne=ie[+Pe];if(!Ne||Ne.bitmap.width===0||Ne.bitmap.height===0)continue;const Se={x:0,y:0,w:Ne.bitmap.width+2,h:Ne.bitmap.height+2};U.push(Se),ae[Pe]={rect:Se,metrics:Ne.metrics}}}const{w:Z,h:X}=l.potpack(U),oe=new l.AlphaImage({width:Z||1,height:X||1});for(const re in k){const ie=k[re];for(const ae in ie){const Pe=ie[+ae];if(!Pe||Pe.bitmap.width===0||Pe.bitmap.height===0)continue;const Ne=O[re][ae].rect;l.AlphaImage.copy(Pe.bitmap,oe,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},Pe.bitmap)}}this.image=oe,this.positions=O}}l.register("GlyphAtlas",F);class L{constructor(k){this.tileID=new l.OverscaledTileID(k.tileID.overscaledZ,k.tileID.wrap,k.tileID.canonical.z,k.tileID.canonical.x,k.tileID.canonical.y),this.uid=k.uid,this.zoom=k.zoom,this.pixelRatio=k.pixelRatio,this.tileSize=k.tileSize,this.source=k.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=k.showCollisionBoxes,this.collectResourceTiming=!!k.collectResourceTiming,this.returnDependencies=!!k.returnDependencies,this.promoteId=k.promoteId}parse(k,O,U,Z,X){this.status="parsing",this.data=k,this.collisionBoxArray=new l.CollisionBoxArray;const oe=new l.DictionaryCoder(Object.keys(k.layers).sort()),re=new l.FeatureIndex(this.tileID,this.promoteId);re.bucketLayerIDs=[];const ie={},ae={featureIndex:re,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:U},Pe=O.familiesBySource[this.source];for(const Wt in Pe){const Gt=k.layers[Wt];if(!Gt)continue;Gt.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${Wt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ut=oe.encode(Wt),Zr=[];for(let Vr=0;Vr<Gt.length;Vr++){const an=Gt.feature(Vr),hn=re.getId(an,Wt);Zr.push({feature:an,id:hn,index:Vr,sourceLayerIndex:Ut})}for(const Vr of Pe[Wt]){const an=Vr[0];an.minzoom&&this.zoom<Math.floor(an.minzoom)||an.maxzoom&&this.zoom>=an.maxzoom||an.visibility!=="none"&&(K(Vr,this.zoom,U),(ie[an.id]=an.createBucket({index:re.bucketLayerIDs.length,layers:Vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ut,sourceID:this.source})).populate(Zr,ae,this.tileID.canonical),re.bucketLayerIDs.push(Vr.map(hn=>hn.id)))}}let Ne,Se,wt,pt;const St=l.mapObject(ae.glyphDependencies,Wt=>Object.keys(Wt).map(Number));Object.keys(St).length?Z.send("getGlyphs",{uid:this.uid,stacks:St},(Wt,Gt)=>{Ne||(Ne=Wt,Se=Gt,Qt.call(this))}):Se={};const Ct=Object.keys(ae.iconDependencies);Ct.length?Z.send("getImages",{icons:Ct,source:this.source,tileID:this.tileID,type:"icons"},(Wt,Gt)=>{Ne||(Ne=Wt,wt=Gt,Qt.call(this))}):wt={};const or=Object.keys(ae.patternDependencies);function Qt(){if(Ne)return X(Ne);if(Se&&wt&&pt){const Wt=new F(Se),Gt=new l.ImageAtlas(wt,pt);for(const Ut in ie){const Zr=ie[Ut];Zr instanceof l.SymbolBucket?(K(Zr.layers,this.zoom,U),l.performSymbolLayout(Zr,Se,Wt.positions,wt,Gt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Zr.hasPattern&&(Zr instanceof l.LineBucket||Zr instanceof l.FillBucket||Zr instanceof l.FillExtrusionBucket)&&(K(Zr.layers,this.zoom,U),Zr.addFeatures(ae,this.tileID.canonical,Gt.patternPositions))}this.status="done",X(null,{buckets:Object.values(ie).filter(Ut=>!Ut.isEmpty()),featureIndex:re,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wt.image,imageAtlas:Gt,glyphMap:this.returnDependencies?Se:null,iconMap:this.returnDependencies?wt:null,glyphPositions:this.returnDependencies?Wt.positions:null})}}or.length?Z.send("getImages",{icons:or,source:this.source,tileID:this.tileID,type:"patterns"},(Wt,Gt)=>{Ne||(Ne=Wt,pt=Gt,Qt.call(this))}):pt={},Qt.call(this)}}function K(G,k,O){const U=new l.EvaluationParameters(k);for(const Z of G)Z.recalculate(U,O)}function se(G,k){const O=l.getArrayBuffer(G.request,(U,Z,X,oe)=>{U?k(U):Z&&k(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(Z)),rawData:Z,cacheControl:X,expires:oe})});return()=>{O.cancel(),k()}}class pe{constructor(k,O,U,Z){this.actor=k,this.layerIndex=O,this.availableImages=U,this.loadVectorData=Z||se,this.loading={},this.loaded={}}loadTile(k,O){const U=k.uid;this.loading||(this.loading={});const Z=!!(k&&k.request&&k.request.collectResourceTiming)&&new l.RequestPerformance(k.request),X=this.loading[U]=new L(k);X.abort=this.loadVectorData(k,(oe,re)=>{if(delete this.loading[U],oe||!re)return X.status="done",this.loaded[U]=X,O(oe);const ie=re.rawData,ae={};re.expires&&(ae.expires=re.expires),re.cacheControl&&(ae.cacheControl=re.cacheControl);const Pe={};if(Z){const Ne=Z.finish();Ne&&(Pe.resourceTiming=JSON.parse(JSON.stringify(Ne)))}X.vectorTile=re.vectorTile,X.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ne,Se)=>{if(Ne||!Se)return O(Ne);O(null,l.extend({rawTileData:ie.slice(0)},Se,ae,Pe))}),this.loaded=this.loaded||{},this.loaded[U]=X})}reloadTile(k,O){const U=this.loaded,Z=k.uid,X=this;if(U&&U[Z]){const oe=U[Z];oe.showCollisionBoxes=k.showCollisionBoxes;const re=(ie,ae)=>{const Pe=oe.reloadCallback;Pe&&(delete oe.reloadCallback,oe.parse(oe.vectorTile,X.layerIndex,this.availableImages,X.actor,Pe)),O(ie,ae)};oe.status==="parsing"?oe.reloadCallback=re:oe.status==="done"&&(oe.vectorTile?oe.parse(oe.vectorTile,this.layerIndex,this.availableImages,this.actor,re):re())}}abortTile(k,O){const U=this.loading,Z=k.uid;U&&U[Z]&&U[Z].abort&&(U[Z].abort(),delete U[Z]),O()}removeTile(k,O){const U=this.loaded,Z=k.uid;U&&U[Z]&&delete U[Z],O()}}class ye{constructor(){this.loaded={}}loadTile(k,O){const{uid:U,encoding:Z,rawImageData:X}=k,oe=l.isImageBitmap(X)?this.getImageData(X):X,re=new l.DEMData(U,oe,Z);this.loaded=this.loaded||{},this.loaded[U]=re,O(null,re)}getImageData(k){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(k.width,k.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=k.width,this.offscreenCanvas.height=k.height,this.offscreenCanvasContext.drawImage(k,0,0,k.width,k.height);const O=this.offscreenCanvasContext.getImageData(-1,-1,k.width+2,k.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:O.width,height:O.height},O.data)}removeTile(k){const O=this.loaded,U=k.uid;O&&O[U]&&delete O[U]}}var Y=function G(k,O){var U,Z=k&&k.type;if(Z==="FeatureCollection")for(U=0;U<k.features.length;U++)G(k.features[U],O);else if(Z==="GeometryCollection")for(U=0;U<k.geometries.length;U++)G(k.geometries[U],O);else if(Z==="Feature")G(k.geometry,O);else if(Z==="Polygon")he(k.coordinates,O);else if(Z==="MultiPolygon")for(U=0;U<k.coordinates.length;U++)he(k.coordinates[U],O);return k};function he(G,k){if(G.length!==0){me(G[0],k);for(var O=1;O<G.length;O++)me(G[O],!k)}}function me(G,k){for(var O=0,U=0,Z=0,X=G.length,oe=X-1;Z<X;oe=Z++){var re=(G[Z][0]-G[oe][0])*(G[oe][1]+G[Z][1]),ie=O+re;U+=Math.abs(O)>=Math.abs(re)?O-ie+re:re-ie+O,O=ie}O+U>=0!=!!k&&G.reverse()}const xe=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Ae{constructor(k){this._feature=k,this.extent=l.EXTENT,this.type=k.type,this.properties=k.tags,"id"in k&&!isNaN(k.id)&&(this.id=parseInt(k.id,10))}loadGeometry(){if(this._feature.type===1){const k=[];for(const O of this._feature.geometry)k.push([new l.pointGeometry(O[0],O[1])]);return k}{const k=[];for(const O of this._feature.geometry){const U=[];for(const Z of O)U.push(new l.pointGeometry(Z[0],Z[1]));k.push(U)}return k}}toGeoJSON(k,O,U){return xe.call(this,k,O,U)}}class Ge{constructor(k){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=k.length,this._features=k}feature(k){return new Ae(this._features[k])}}var We={exports:{}},_e=l.pointGeometry,ot=l.vectorTile.VectorTileFeature,it=dt;function dt(G,k){this.options=k||{},this.features=G,this.length=G.length}function De(G,k){this.id=typeof G.id=="number"?G.id:void 0,this.type=G.type,this.rawGeometry=G.type===1?[G.geometry]:G.geometry,this.properties=G.tags,this.extent=k||4096}dt.prototype.feature=function(G){return new De(this.features[G],this.options.extent)},De.prototype.loadGeometry=function(){var G=this.rawGeometry;this.geometry=[];for(var k=0;k<G.length;k++){for(var O=G[k],U=[],Z=0;Z<O.length;Z++)U.push(new _e(O[Z][0],O[Z][1]));this.geometry.push(U)}return this.geometry},De.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var G=this.geometry,k=1/0,O=-1/0,U=1/0,Z=-1/0,X=0;X<G.length;X++)for(var oe=G[X],re=0;re<oe.length;re++){var ie=oe[re];k=Math.min(k,ie.x),O=Math.max(O,ie.x),U=Math.min(U,ie.y),Z=Math.max(Z,ie.y)}return[k,U,O,Z]},De.prototype.toGeoJSON=ot.prototype.toGeoJSON;var Je=l.pbf,Ke=it;function zt(G){var k=new Je;return function(O,U){for(var Z in O.layers)U.writeMessage(3,Le,O.layers[Z])}(G,k),k.finish()}function Le(G,k){var O;k.writeVarintField(15,G.version||1),k.writeStringField(1,G.name||""),k.writeVarintField(5,G.extent||4096);var U={keys:[],values:[],keycache:{},valuecache:{}};for(O=0;O<G.length;O++)U.feature=G.feature(O),k.writeMessage(2,At,U);var Z=U.keys;for(O=0;O<Z.length;O++)k.writeStringField(3,Z[O]);var X=U.values;for(O=0;O<X.length;O++)k.writeMessage(4,vr,X[O])}function At(G,k){var O=G.feature;O.id!==void 0&&k.writeVarintField(1,O.id),k.writeMessage(2,Ot,G),k.writeVarintField(3,O.type),k.writeMessage(4,Ir,O)}function Ot(G,k){var O=G.feature,U=G.keys,Z=G.values,X=G.keycache,oe=G.valuecache;for(var re in O.properties){var ie=O.properties[re],ae=X[re];if(ie!==null){ae===void 0&&(U.push(re),X[re]=ae=U.length-1),k.writeVarint(ae);var Pe=typeof ie;Pe!=="string"&&Pe!=="boolean"&&Pe!=="number"&&(ie=JSON.stringify(ie));var Ne=Pe+":"+ie,Se=oe[Ne];Se===void 0&&(Z.push(ie),oe[Ne]=Se=Z.length-1),k.writeVarint(Se)}}}function dr(G,k){return(k<<3)+(7&G)}function pr(G){return G<<1^G>>31}function Ir(G,k){for(var O=G.loadGeometry(),U=G.type,Z=0,X=0,oe=O.length,re=0;re<oe;re++){var ie=O[re],ae=1;U===1&&(ae=ie.length),k.writeVarint(dr(1,ae));for(var Pe=U===3?ie.length-1:ie.length,Ne=0;Ne<Pe;Ne++){Ne===1&&U!==1&&k.writeVarint(dr(2,Pe-1));var Se=ie[Ne].x-Z,wt=ie[Ne].y-X;k.writeVarint(pr(Se)),k.writeVarint(pr(wt)),Z+=Se,X+=wt}U===3&&k.writeVarint(dr(7,1))}}function vr(G,k){var O=typeof G;O==="string"?k.writeStringField(1,G):O==="boolean"?k.writeBooleanField(7,G):O==="number"&&(G%1!=0?k.writeDoubleField(3,G):G<0?k.writeSVarintField(6,G):k.writeVarintField(5,G))}We.exports=zt,We.exports.fromVectorTileJs=zt,We.exports.fromGeojsonVt=function(G,k){k=k||{};var O={};for(var U in G)O[U]=new Ke(G[U].features,k),O[U].name=U,O[U].version=k.version,O[U].extent=k.extent;return zt({layers:O})},We.exports.GeoJSONWrapper=Ke;var Ar=We.exports;function Fr(G,k,O,U,Z,X){if(Z-U<=O)return;const oe=U+Z>>1;Fe(G,k,oe,U,Z,X%2),Fr(G,k,O,U,oe-1,X+1),Fr(G,k,O,oe+1,Z,X+1)}function Fe(G,k,O,U,Z,X){for(;Z>U;){if(Z-U>600){const ae=Z-U+1,Pe=O-U+1,Ne=Math.log(ae),Se=.5*Math.exp(2*Ne/3),wt=.5*Math.sqrt(Ne*Se*(ae-Se)/ae)*(Pe-ae/2<0?-1:1);Fe(G,k,O,Math.max(U,Math.floor(O-Pe*Se/ae+wt)),Math.min(Z,Math.floor(O+(ae-Pe)*Se/ae+wt)),X)}const oe=k[2*O+X];let re=U,ie=Z;for(lt(G,k,U,O),k[2*Z+X]>oe&&lt(G,k,U,Z);re<ie;){for(lt(G,k,re,ie),re++,ie--;k[2*re+X]<oe;)re++;for(;k[2*ie+X]>oe;)ie--}k[2*U+X]===oe?lt(G,k,U,ie):(ie++,lt(G,k,ie,Z)),ie<=O&&(U=ie+1),O<=ie&&(Z=ie-1)}}function lt(G,k,O,U){Ye(G,O,U),Ye(k,2*O,2*U),Ye(k,2*O+1,2*U+1)}function Ye(G,k,O){const U=G[k];G[k]=G[O],G[O]=U}function ft(G,k,O,U){const Z=G-O,X=k-U;return Z*Z+X*X}const Zt=G=>G[0],nr=G=>G[1];class Bt{constructor(k,O=Zt,U=nr,Z=64,X=Float64Array){this.nodeSize=Z,this.points=k;const oe=k.length<65536?Uint16Array:Uint32Array,re=this.ids=new oe(k.length),ie=this.coords=new X(2*k.length);for(let ae=0;ae<k.length;ae++)re[ae]=ae,ie[2*ae]=O(k[ae]),ie[2*ae+1]=U(k[ae]);Fr(re,ie,Z,0,re.length-1,0)}range(k,O,U,Z){return function(X,oe,re,ie,ae,Pe,Ne){const Se=[0,X.length-1,0],wt=[];let pt,St;for(;Se.length;){const Ct=Se.pop(),or=Se.pop(),Qt=Se.pop();if(or-Qt<=Ne){for(let Ut=Qt;Ut<=or;Ut++)pt=oe[2*Ut],St=oe[2*Ut+1],pt>=re&&pt<=ae&&St>=ie&&St<=Pe&&wt.push(X[Ut]);continue}const Wt=Math.floor((Qt+or)/2);pt=oe[2*Wt],St=oe[2*Wt+1],pt>=re&&pt<=ae&&St>=ie&&St<=Pe&&wt.push(X[Wt]);const Gt=(Ct+1)%2;(Ct===0?re<=pt:ie<=St)&&(Se.push(Qt),Se.push(Wt-1),Se.push(Gt)),(Ct===0?ae>=pt:Pe>=St)&&(Se.push(Wt+1),Se.push(or),Se.push(Gt))}return wt}(this.ids,this.coords,k,O,U,Z,this.nodeSize)}within(k,O,U){return function(Z,X,oe,re,ie,ae){const Pe=[0,Z.length-1,0],Ne=[],Se=ie*ie;for(;Pe.length;){const wt=Pe.pop(),pt=Pe.pop(),St=Pe.pop();if(pt-St<=ae){for(let Gt=St;Gt<=pt;Gt++)ft(X[2*Gt],X[2*Gt+1],oe,re)<=Se&&Ne.push(Z[Gt]);continue}const Ct=Math.floor((St+pt)/2),or=X[2*Ct],Qt=X[2*Ct+1];ft(or,Qt,oe,re)<=Se&&Ne.push(Z[Ct]);const Wt=(wt+1)%2;(wt===0?oe-ie<=or:re-ie<=Qt)&&(Pe.push(St),Pe.push(Ct-1),Pe.push(Wt)),(wt===0?oe+ie>=or:re+ie>=Qt)&&(Pe.push(Ct+1),Pe.push(pt),Pe.push(Wt))}return Ne}(this.ids,this.coords,k,O,U,this.nodeSize)}}const Lt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:G=>G},W=Math.fround||(ne=new Float32Array(1),G=>(ne[0]=+G,ne[0]));var ne;class be{constructor(k){this.options=et(Object.create(Lt),k),this.trees=new Array(this.options.maxZoom+1)}load(k){const{log:O,minZoom:U,maxZoom:Z,nodeSize:X}=this.options;O&&console.time("total time");const oe=`prepare ${k.length} points`;O&&console.time(oe),this.points=k;let re=[];for(let ie=0;ie<k.length;ie++)k[ie].geometry&&re.push(Re(k[ie],ie));this.trees[Z+1]=new Bt(re,bt,yt,X,Float32Array),O&&console.timeEnd(oe);for(let ie=Z;ie>=U;ie--){const ae=+Date.now();re=this._cluster(re,ie),this.trees[ie]=new Bt(re,bt,yt,X,Float32Array),O&&console.log("z%d: %d clusters in %dms",ie,re.length,+Date.now()-ae)}return O&&console.timeEnd("total time"),this}getClusters(k,O){let U=((k[0]+180)%360+360)%360-180;const Z=Math.max(-90,Math.min(90,k[1]));let X=k[2]===180?180:((k[2]+180)%360+360)%360-180;const oe=Math.max(-90,Math.min(90,k[3]));if(k[2]-k[0]>=360)U=-180,X=180;else if(U>X){const Pe=this.getClusters([U,Z,180,oe],O),Ne=this.getClusters([-180,Z,X,oe],O);return Pe.concat(Ne)}const re=this.trees[this._limitZoom(O)],ie=re.range($e(U),tt(oe),$e(X),tt(Z)),ae=[];for(const Pe of ie){const Ne=re.points[Pe];ae.push(Ne.numPoints?Ve(Ne):this.points[Ne.index])}return ae}getChildren(k){const O=this._getOriginId(k),U=this._getOriginZoom(k),Z="No cluster with the specified id.",X=this.trees[U];if(!X)throw new Error(Z);const oe=X.points[O];if(!oe)throw new Error(Z);const re=this.options.radius/(this.options.extent*Math.pow(2,U-1)),ie=X.within(oe.x,oe.y,re),ae=[];for(const Pe of ie){const Ne=X.points[Pe];Ne.parentId===k&&ae.push(Ne.numPoints?Ve(Ne):this.points[Ne.index])}if(ae.length===0)throw new Error(Z);return ae}getLeaves(k,O,U){const Z=[];return this._appendLeaves(Z,k,O=O||10,U=U||0,0),Z}getTile(k,O,U){const Z=this.trees[this._limitZoom(k)],X=Math.pow(2,k),{extent:oe,radius:re}=this.options,ie=re/oe,ae=(U-ie)/X,Pe=(U+1+ie)/X,Ne={features:[]};return this._addTileFeatures(Z.range((O-ie)/X,ae,(O+1+ie)/X,Pe),Z.points,O,U,X,Ne),O===0&&this._addTileFeatures(Z.range(1-ie/X,ae,1,Pe),Z.points,X,U,X,Ne),O===X-1&&this._addTileFeatures(Z.range(0,ae,ie/X,Pe),Z.points,-1,U,X,Ne),Ne.features.length?Ne:null}getClusterExpansionZoom(k){let O=this._getOriginZoom(k)-1;for(;O<=this.options.maxZoom;){const U=this.getChildren(k);if(O++,U.length!==1)break;k=U[0].properties.cluster_id}return O}_appendLeaves(k,O,U,Z,X){const oe=this.getChildren(O);for(const re of oe){const ie=re.properties;if(ie&&ie.cluster?X+ie.point_count<=Z?X+=ie.point_count:X=this._appendLeaves(k,ie.cluster_id,U,Z,X):X<Z?X++:k.push(re),k.length===U)break}return X}_addTileFeatures(k,O,U,Z,X,oe){for(const re of k){const ie=O[re],ae=ie.numPoints;let Pe,Ne,Se;if(ae)Pe=Qe(ie),Ne=ie.x,Se=ie.y;else{const St=this.points[ie.index];Pe=St.properties,Ne=$e(St.geometry.coordinates[0]),Se=tt(St.geometry.coordinates[1])}const wt={type:1,geometry:[[Math.round(this.options.extent*(Ne*X-U)),Math.round(this.options.extent*(Se*X-Z))]],tags:Pe};let pt;ae?pt=ie.id:this.options.generateId?pt=ie.index:this.points[ie.index].id&&(pt=this.points[ie.index].id),pt!==void 0&&(wt.id=pt),oe.features.push(wt)}}_limitZoom(k){return Math.max(this.options.minZoom,Math.min(+k,this.options.maxZoom+1))}_cluster(k,O){const U=[],{radius:Z,extent:X,reduce:oe,minPoints:re}=this.options,ie=Z/(X*Math.pow(2,O));for(let ae=0;ae<k.length;ae++){const Pe=k[ae];if(Pe.zoom<=O)continue;Pe.zoom=O;const Ne=this.trees[O+1],Se=Ne.within(Pe.x,Pe.y,ie),wt=Pe.numPoints||1;let pt=wt;for(const St of Se){const Ct=Ne.points[St];Ct.zoom>O&&(pt+=Ct.numPoints||1)}if(pt>wt&&pt>=re){let St=Pe.x*wt,Ct=Pe.y*wt,or=oe&&wt>1?this._map(Pe,!0):null;const Qt=(ae<<5)+(O+1)+this.points.length;for(const Wt of Se){const Gt=Ne.points[Wt];if(Gt.zoom<=O)continue;Gt.zoom=O;const Ut=Gt.numPoints||1;St+=Gt.x*Ut,Ct+=Gt.y*Ut,Gt.parentId=Qt,oe&&(or||(or=this._map(Pe,!0)),oe(or,this._map(Gt)))}Pe.parentId=Qt,U.push(Me(St/pt,Ct/pt,Qt,pt,or))}else if(U.push(Pe),pt>1)for(const St of Se){const Ct=Ne.points[St];Ct.zoom<=O||(Ct.zoom=O,U.push(Ct))}}return U}_getOriginId(k){return k-this.points.length>>5}_getOriginZoom(k){return(k-this.points.length)%32}_map(k,O){if(k.numPoints)return O?et({},k.properties):k.properties;const U=this.points[k.index].properties,Z=this.options.map(U);return O&&Z===U?et({},Z):Z}}function Me(G,k,O,U,Z){return{x:W(G),y:W(k),zoom:1/0,id:O,parentId:-1,numPoints:U,properties:Z}}function Re(G,k){const[O,U]=G.geometry.coordinates;return{x:W($e(O)),y:W(tt(U)),zoom:1/0,index:k,parentId:-1}}function Ve(G){return{type:"Feature",id:G.id,properties:Qe(G),geometry:{type:"Point",coordinates:[(k=G.x,360*(k-.5)),He(G.y)]}};var k}function Qe(G){const k=G.numPoints,O=k>=1e4?`${Math.round(k/1e3)}k`:k>=1e3?Math.round(k/100)/10+"k":k;return et(et({},G.properties),{cluster:!0,cluster_id:G.id,point_count:k,point_count_abbreviated:O})}function $e(G){return G/360+.5}function tt(G){const k=Math.sin(G*Math.PI/180),O=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return O<0?0:O>1?1:O}function He(G){const k=(180-360*G)*Math.PI/180;return 360*Math.atan(Math.exp(k))/Math.PI-90}function et(G,k){for(const O in k)G[O]=k[O];return G}function bt(G){return G.x}function yt(G){return G.y}function Pt(G,k,O,U){for(var Z,X=U,oe=O-k>>1,re=O-k,ie=G[k],ae=G[k+1],Pe=G[O],Ne=G[O+1],Se=k+3;Se<O;Se+=3){var wt=Vt(G[Se],G[Se+1],ie,ae,Pe,Ne);if(wt>X)Z=Se,X=wt;else if(wt===X){var pt=Math.abs(Se-oe);pt<re&&(Z=Se,re=pt)}}X>U&&(Z-k>3&&Pt(G,k,Z,U),G[Z+2]=X,O-Z>3&&Pt(G,Z,O,U))}function Vt(G,k,O,U,Z,X){var oe=Z-O,re=X-U;if(oe!==0||re!==0){var ie=((G-O)*oe+(k-U)*re)/(oe*oe+re*re);ie>1?(O=Z,U=X):ie>0&&(O+=oe*ie,U+=re*ie)}return(oe=G-O)*oe+(re=k-U)*re}function ve(G,k,O,U){var Z={id:G===void 0?null:G,type:k,geometry:O,tags:U,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(X){var oe=X.geometry,re=X.type;if(re==="Point"||re==="MultiPoint"||re==="LineString")Ue(X,oe);else if(re==="Polygon"||re==="MultiLineString")for(var ie=0;ie<oe.length;ie++)Ue(X,oe[ie]);else if(re==="MultiPolygon")for(ie=0;ie<oe.length;ie++)for(var ae=0;ae<oe[ie].length;ae++)Ue(X,oe[ie][ae])}(Z),Z}function Ue(G,k){for(var O=0;O<k.length;O+=3)G.minX=Math.min(G.minX,k[O]),G.minY=Math.min(G.minY,k[O+1]),G.maxX=Math.max(G.maxX,k[O]),G.maxY=Math.max(G.maxY,k[O+1])}function ur(G,k,O,U){if(k.geometry){var Z=k.geometry.coordinates,X=k.geometry.type,oe=Math.pow(O.tolerance/((1<<O.maxZoom)*O.extent),2),re=[],ie=k.id;if(O.promoteId?ie=k.properties[O.promoteId]:O.generateId&&(ie=U||0),X==="Point")Hr(Z,re);else if(X==="MultiPoint")for(var ae=0;ae<Z.length;ae++)Hr(Z[ae],re);else if(X==="LineString")ir(Z,re,oe,!1);else if(X==="MultiLineString"){if(O.lineMetrics){for(ae=0;ae<Z.length;ae++)ir(Z[ae],re=[],oe,!1),G.push(ve(ie,"LineString",re,k.properties));return}Sn(Z,re,oe,!1)}else if(X==="Polygon")Sn(Z,re,oe,!0);else{if(X!=="MultiPolygon"){if(X==="GeometryCollection"){for(ae=0;ae<k.geometry.geometries.length;ae++)ur(G,{id:ie,geometry:k.geometry.geometries[ae],properties:k.properties},O,U);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ae=0;ae<Z.length;ae++){var Pe=[];Sn(Z[ae],Pe,oe,!0),re.push(Pe)}}G.push(ve(ie,X,re,k.properties))}}function Hr(G,k){k.push(Gr(G[0])),k.push(vi(G[1])),k.push(0)}function ir(G,k,O,U){for(var Z,X,oe=0,re=0;re<G.length;re++){var ie=Gr(G[re][0]),ae=vi(G[re][1]);k.push(ie),k.push(ae),k.push(0),re>0&&(oe+=U?(Z*ae-ie*X)/2:Math.sqrt(Math.pow(ie-Z,2)+Math.pow(ae-X,2))),Z=ie,X=ae}var Pe=k.length-3;k[2]=1,Pt(k,0,Pe,O),k[Pe+2]=1,k.size=Math.abs(oe),k.start=0,k.end=k.size}function Sn(G,k,O,U){for(var Z=0;Z<G.length;Z++){var X=[];ir(G[Z],X,O,U),k.push(X)}}function Gr(G){return G/360+.5}function vi(G){var k=Math.sin(G*Math.PI/180),O=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return O<0?0:O>1?1:O}function Xt(G,k,O,U,Z,X,oe,re){if(U/=k,X>=(O/=k)&&oe<U)return G;if(oe<O||X>=U)return null;for(var ie=[],ae=0;ae<G.length;ae++){var Pe=G[ae],Ne=Pe.geometry,Se=Pe.type,wt=Z===0?Pe.minX:Pe.minY,pt=Z===0?Pe.maxX:Pe.maxY;if(wt>=O&&pt<U)ie.push(Pe);else if(!(pt<O||wt>=U)){var St=[];if(Se==="Point"||Se==="MultiPoint")Xe(Ne,St,O,U,Z);else if(Se==="LineString")$t(Ne,St,O,U,Z,!1,re.lineMetrics);else if(Se==="MultiLineString")Tn(Ne,St,O,U,Z,!1);else if(Se==="Polygon")Tn(Ne,St,O,U,Z,!0);else if(Se==="MultiPolygon")for(var Ct=0;Ct<Ne.length;Ct++){var or=[];Tn(Ne[Ct],or,O,U,Z,!0),or.length&&St.push(or)}if(St.length){if(re.lineMetrics&&Se==="LineString"){for(Ct=0;Ct<St.length;Ct++)ie.push(ve(Pe.id,Se,St[Ct],Pe.tags));continue}Se!=="LineString"&&Se!=="MultiLineString"||(St.length===1?(Se="LineString",St=St[0]):Se="MultiLineString"),Se!=="Point"&&Se!=="MultiPoint"||(Se=St.length===3?"Point":"MultiPoint"),ie.push(ve(Pe.id,Se,St,Pe.tags))}}}return ie.length?ie:null}function Xe(G,k,O,U,Z){for(var X=0;X<G.length;X+=3){var oe=G[X+Z];oe>=O&&oe<=U&&(k.push(G[X]),k.push(G[X+1]),k.push(G[X+2]))}}function $t(G,k,O,U,Z,X,oe){for(var re,ie,ae=qt(G),Pe=Z===0?Ht:Qi,Ne=G.start,Se=0;Se<G.length-3;Se+=3){var wt=G[Se],pt=G[Se+1],St=G[Se+2],Ct=G[Se+3],or=G[Se+4],Qt=Z===0?wt:pt,Wt=Z===0?Ct:or,Gt=!1;oe&&(re=Math.sqrt(Math.pow(wt-Ct,2)+Math.pow(pt-or,2))),Qt<O?Wt>O&&(ie=Pe(ae,wt,pt,Ct,or,O),oe&&(ae.start=Ne+re*ie)):Qt>U?Wt<U&&(ie=Pe(ae,wt,pt,Ct,or,U),oe&&(ae.start=Ne+re*ie)):oi(ae,wt,pt,St),Wt<O&&Qt>=O&&(ie=Pe(ae,wt,pt,Ct,or,O),Gt=!0),Wt>U&&Qt<=U&&(ie=Pe(ae,wt,pt,Ct,or,U),Gt=!0),!X&&Gt&&(oe&&(ae.end=Ne+re*ie),k.push(ae),ae=qt(G)),oe&&(Ne+=re)}var Ut=G.length-3;wt=G[Ut],pt=G[Ut+1],St=G[Ut+2],(Qt=Z===0?wt:pt)>=O&&Qt<=U&&oi(ae,wt,pt,St),Ut=ae.length-3,X&&Ut>=3&&(ae[Ut]!==ae[0]||ae[Ut+1]!==ae[1])&&oi(ae,ae[0],ae[1],ae[2]),ae.length&&k.push(ae)}function qt(G){var k=[];return k.size=G.size,k.start=G.start,k.end=G.end,k}function Tn(G,k,O,U,Z,X){for(var oe=0;oe<G.length;oe++)$t(G[oe],k,O,U,Z,X,!1)}function oi(G,k,O,U){G.push(k),G.push(O),G.push(U)}function Ht(G,k,O,U,Z,X){var oe=(X-k)/(U-k);return G.push(X),G.push(O+(Z-O)*oe),G.push(1),oe}function Qi(G,k,O,U,Z,X){var oe=(X-O)/(Z-O);return G.push(k+(U-k)*oe),G.push(X),G.push(1),oe}function si(G,k){for(var O=[],U=0;U<G.length;U++){var Z,X=G[U],oe=X.type;if(oe==="Point"||oe==="MultiPoint"||oe==="LineString")Z=Di(X.geometry,k);else if(oe==="MultiLineString"||oe==="Polygon"){Z=[];for(var re=0;re<X.geometry.length;re++)Z.push(Di(X.geometry[re],k))}else if(oe==="MultiPolygon")for(Z=[],re=0;re<X.geometry.length;re++){for(var ie=[],ae=0;ae<X.geometry[re].length;ae++)ie.push(Di(X.geometry[re][ae],k));Z.push(ie)}O.push(ve(X.id,oe,Z,X.tags))}return O}function Di(G,k){var O=[];O.size=G.size,G.start!==void 0&&(O.start=G.start,O.end=G.end);for(var U=0;U<G.length;U+=3)O.push(G[U]+k,G[U+1],G[U+2]);return O}function Kr(G,k){if(G.transformed)return G;var O,U,Z,X=1<<G.z,oe=G.x,re=G.y;for(O=0;O<G.features.length;O++){var ie=G.features[O],ae=ie.geometry,Pe=ie.type;if(ie.geometry=[],Pe===1)for(U=0;U<ae.length;U+=2)ie.geometry.push(Sr(ae[U],ae[U+1],k,X,oe,re));else for(U=0;U<ae.length;U++){var Ne=[];for(Z=0;Z<ae[U].length;Z+=2)Ne.push(Sr(ae[U][Z],ae[U][Z+1],k,X,oe,re));ie.geometry.push(Ne)}}return G.transformed=!0,G}function Sr(G,k,O,U,Z,X){return[Math.round(O*(G*U-Z)),Math.round(O*(k*U-X))]}function Yn(G,k,O,U,Z){for(var X=k===Z.maxZoom?0:Z.tolerance/((1<<k)*Z.extent),oe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:O,y:U,z:k,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},re=0;re<G.length;re++){oe.numFeatures++,eo(oe,G[re],X,Z);var ie=G[re].minX,ae=G[re].minY,Pe=G[re].maxX,Ne=G[re].maxY;ie<oe.minX&&(oe.minX=ie),ae<oe.minY&&(oe.minY=ae),Pe>oe.maxX&&(oe.maxX=Pe),Ne>oe.maxY&&(oe.maxY=Ne)}return oe}function eo(G,k,O,U){var Z=k.geometry,X=k.type,oe=[];if(X==="Point"||X==="MultiPoint")for(var re=0;re<Z.length;re+=3)oe.push(Z[re]),oe.push(Z[re+1]),G.numPoints++,G.numSimplified++;else if(X==="LineString")rn(oe,Z,G,O,!1,!1);else if(X==="MultiLineString"||X==="Polygon")for(re=0;re<Z.length;re++)rn(oe,Z[re],G,O,X==="Polygon",re===0);else if(X==="MultiPolygon")for(var ie=0;ie<Z.length;ie++){var ae=Z[ie];for(re=0;re<ae.length;re++)rn(oe,ae[re],G,O,!0,re===0)}if(oe.length){var Pe=k.tags||null;if(X==="LineString"&&U.lineMetrics){for(var Ne in Pe={},k.tags)Pe[Ne]=k.tags[Ne];Pe.mapbox_clip_start=Z.start/Z.size,Pe.mapbox_clip_end=Z.end/Z.size}var Se={geometry:oe,type:X==="Polygon"||X==="MultiPolygon"?3:X==="LineString"||X==="MultiLineString"?2:1,tags:Pe};k.id!==null&&(Se.id=k.id),G.features.push(Se)}}function rn(G,k,O,U,Z,X){var oe=U*U;if(U>0&&k.size<(Z?oe:U))O.numPoints+=k.length/3;else{for(var re=[],ie=0;ie<k.length;ie+=3)(U===0||k[ie+2]>oe)&&(O.numSimplified++,re.push(k[ie]),re.push(k[ie+1])),O.numPoints++;Z&&function(ae,Pe){for(var Ne=0,Se=0,wt=ae.length,pt=wt-2;Se<wt;pt=Se,Se+=2)Ne+=(ae[Se]-ae[pt])*(ae[Se+1]+ae[pt+1]);if(Ne>0===Pe)for(Se=0,wt=ae.length;Se<wt/2;Se+=2){var St=ae[Se],Ct=ae[Se+1];ae[Se]=ae[wt-2-Se],ae[Se+1]=ae[wt-1-Se],ae[wt-2-Se]=St,ae[wt-1-Se]=Ct}}(re,X),G.push(re)}}function ai(G,k){var O=(k=this.options=function(Z,X){for(var oe in X)Z[oe]=X[oe];return Z}(Object.create(this.options),k)).debug;if(O&&console.time("preprocess data"),k.maxZoom<0||k.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(k.promoteId&&k.generateId)throw new Error("promoteId and generateId cannot be used together.");var U=function(Z,X){var oe=[];if(Z.type==="FeatureCollection")for(var re=0;re<Z.features.length;re++)ur(oe,Z.features[re],X,re);else ur(oe,Z.type==="Feature"?Z:{geometry:Z},X);return oe}(G,k);this.tiles={},this.tileCoords=[],O&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",k.indexMaxZoom,k.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),U=function(Z,X){var oe=X.buffer/X.extent,re=Z,ie=Xt(Z,1,-1-oe,oe,0,-1,2,X),ae=Xt(Z,1,1-oe,2+oe,0,-1,2,X);return(ie||ae)&&(re=Xt(Z,1,-oe,1+oe,0,-1,2,X)||[],ie&&(re=si(ie,1).concat(re)),ae&&(re=re.concat(si(ae,-1)))),re}(U,k),U.length&&this.splitTile(U,0,0,0),O&&(U.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function li(G,k,O){return 32*((1<<G)*O+k)+G}function hs(G,k){const O=G.tileID.canonical;if(!this._geoJSONIndex)return k(null,null);const U=this._geoJSONIndex.getTile(O.z,O.x,O.y);if(!U)return k(null,null);const Z=new Ge(U.features);let X=Ar(Z);X.byteOffset===0&&X.byteLength===X.buffer.byteLength||(X=new Uint8Array(X)),k(null,{vectorTile:Z,rawData:X.buffer})}ai.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ai.prototype.splitTile=function(G,k,O,U,Z,X,oe){for(var re=[G,k,O,U],ie=this.options,ae=ie.debug;re.length;){U=re.pop(),O=re.pop(),k=re.pop(),G=re.pop();var Pe=1<<k,Ne=li(k,O,U),Se=this.tiles[Ne];if(!Se&&(ae>1&&console.time("creation"),Se=this.tiles[Ne]=Yn(G,k,O,U,ie),this.tileCoords.push({z:k,x:O,y:U}),ae)){ae>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",k,O,U,Se.numFeatures,Se.numPoints,Se.numSimplified),console.timeEnd("creation"));var wt="z"+k;this.stats[wt]=(this.stats[wt]||0)+1,this.total++}if(Se.source=G,Z){if(k===ie.maxZoom||k===Z)continue;var pt=1<<Z-k;if(O!==Math.floor(X/pt)||U!==Math.floor(oe/pt))continue}else if(k===ie.indexMaxZoom||Se.numPoints<=ie.indexMaxPoints)continue;if(Se.source=null,G.length!==0){ae>1&&console.time("clipping");var St,Ct,or,Qt,Wt,Gt,Ut=.5*ie.buffer/ie.extent,Zr=.5-Ut,Vr=.5+Ut,an=1+Ut;St=Ct=or=Qt=null,Wt=Xt(G,Pe,O-Ut,O+Vr,0,Se.minX,Se.maxX,ie),Gt=Xt(G,Pe,O+Zr,O+an,0,Se.minX,Se.maxX,ie),G=null,Wt&&(St=Xt(Wt,Pe,U-Ut,U+Vr,1,Se.minY,Se.maxY,ie),Ct=Xt(Wt,Pe,U+Zr,U+an,1,Se.minY,Se.maxY,ie),Wt=null),Gt&&(or=Xt(Gt,Pe,U-Ut,U+Vr,1,Se.minY,Se.maxY,ie),Qt=Xt(Gt,Pe,U+Zr,U+an,1,Se.minY,Se.maxY,ie),Gt=null),ae>1&&console.timeEnd("clipping"),re.push(St||[],k+1,2*O,2*U),re.push(Ct||[],k+1,2*O,2*U+1),re.push(or||[],k+1,2*O+1,2*U),re.push(Qt||[],k+1,2*O+1,2*U+1)}}},ai.prototype.getTile=function(G,k,O){var U=this.options,Z=U.extent,X=U.debug;if(G<0||G>24)return null;var oe=1<<G,re=li(G,k=(k%oe+oe)%oe,O);if(this.tiles[re])return Kr(this.tiles[re],Z);X>1&&console.log("drilling down to z%d-%d-%d",G,k,O);for(var ie,ae=G,Pe=k,Ne=O;!ie&&ae>0;)ae--,Pe=Math.floor(Pe/2),Ne=Math.floor(Ne/2),ie=this.tiles[li(ae,Pe,Ne)];return ie&&ie.source?(X>1&&console.log("found parent tile z%d-%d-%d",ae,Pe,Ne),X>1&&console.time("drilling down"),this.splitTile(ie.source,ae,Pe,Ne,G,k,O),X>1&&console.timeEnd("drilling down"),this.tiles[re]?Kr(this.tiles[re],Z):null):null};class Ao extends pe{constructor(k,O,U,Z){super(k,O,U,hs),Z&&(this.loadGeoJSON=Z)}loadData(k,O){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=O,this._pendingLoadDataParams=k,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const k=this._pendingCallback,O=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const U=!!(O&&O.request&&O.request.collectResourceTiming)&&new l.RequestPerformance(O.request);this.loadGeoJSON(O,(Z,X)=>{if(Z||!X)return k(Z);if(typeof X!="object")return k(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`));{Y(X,!0);try{if(O.filter){const re=l.createExpression(O.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(re.result==="error")throw new Error(re.value.map(ae=>`${ae.key}: ${ae.message}`).join(", "));const ie=X.features.filter(ae=>re.value.evaluate({zoom:0},ae));X={type:"FeatureCollection",features:ie}}this._geoJSONIndex=O.cluster?new be(function({superclusterOptions:re,clusterProperties:ie}){if(!ie||!re)return re;const ae={},Pe={},Ne={accumulated:null,zoom:0},Se={properties:null},wt=Object.keys(ie);for(const pt of wt){const[St,Ct]=ie[pt],or=l.createExpression(Ct),Qt=l.createExpression(typeof St=="string"?[St,["accumulated"],["get",pt]]:St);ae[pt]=or.value,Pe[pt]=Qt.value}return re.map=pt=>{Se.properties=pt;const St={};for(const Ct of wt)St[Ct]=ae[Ct].evaluate(Ne,Se);return St},re.reduce=(pt,St)=>{Se.properties=St;for(const Ct of wt)Ne.accumulated=pt[Ct],pt[Ct]=Pe[Ct].evaluate(Ne,Se)},re}(O)).load(X.features):function(re,ie){return new ai(re,ie)}(X,O.geojsonVtOptions)}catch(re){return k(re)}this.loaded={};const oe={};if(U){const re=U.finish();re&&(oe.resourceTiming={},oe.resourceTiming[O.source]=JSON.parse(JSON.stringify(re)))}k(null,oe)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(k,O){const U=this.loaded;return U&&U[k.uid]?super.reloadTile(k,O):this.loadTile(k,O)}loadGeoJSON(k,O){if(k.request)l.getJSON(k.request,O);else{if(typeof k.data!="string")return O(new Error(`Input data given to '${k.source}' is not a valid GeoJSON object.`));try{return O(null,JSON.parse(k.data))}catch{return O(new Error(`Input data given to '${k.source}' is not a valid GeoJSON object.`))}}}removeSource(k,O){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),O()}getClusterExpansionZoom(k,O){try{O(null,this._geoJSONIndex.getClusterExpansionZoom(k.clusterId))}catch(U){O(U)}}getClusterChildren(k,O){try{O(null,this._geoJSONIndex.getChildren(k.clusterId))}catch(U){O(U)}}getClusterLeaves(k,O){try{O(null,this._geoJSONIndex.getLeaves(k.clusterId,k.limit,k.offset))}catch(U){O(U)}}}class Po{constructor(k){this.self=k,this.actor=new l.Actor(k,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:pe,geojson:Ao},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(O,U)=>{if(this.workerSourceTypes[O])throw new Error(`Worker source with name "${O}" already registered.`);this.workerSourceTypes[O]=U},this.self.registerRTLTextPlugin=O=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=O.applyArabicShaping,l.plugin.processBidirectionalText=O.processBidirectionalText,l.plugin.processStyledBidirectionalText=O.processStyledBidirectionalText}}setReferrer(k,O){this.referrer=O}setImages(k,O,U){this.availableImages[k]=O;for(const Z in this.workerSources[k]){const X=this.workerSources[k][Z];for(const oe in X)X[oe].availableImages=O}U()}setLayers(k,O,U){this.getLayerIndex(k).replace(O),U()}updateLayers(k,O,U){this.getLayerIndex(k).update(O.layers,O.removedIds),U()}loadTile(k,O,U){this.getWorkerSource(k,O.type,O.source).loadTile(O,U)}loadDEMTile(k,O,U){this.getDEMWorkerSource(k,O.source).loadTile(O,U)}reloadTile(k,O,U){this.getWorkerSource(k,O.type,O.source).reloadTile(O,U)}abortTile(k,O,U){this.getWorkerSource(k,O.type,O.source).abortTile(O,U)}removeTile(k,O,U){this.getWorkerSource(k,O.type,O.source).removeTile(O,U)}removeDEMTile(k,O){this.getDEMWorkerSource(k,O.source).removeTile(O)}removeSource(k,O,U){if(!this.workerSources[k]||!this.workerSources[k][O.type]||!this.workerSources[k][O.type][O.source])return;const Z=this.workerSources[k][O.type][O.source];delete this.workerSources[k][O.type][O.source],Z.removeSource!==void 0?Z.removeSource(O,U):U()}loadWorkerSource(k,O,U){try{this.self.importScripts(O.url),U()}catch(Z){U(Z.toString())}}syncRTLPluginState(k,O,U){try{l.plugin.setState(O);const Z=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Z!=null){this.self.importScripts(Z);const X=l.plugin.isParsed();U(X?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Z}`),X)}}catch(Z){U(Z.toString())}}getAvailableImages(k){let O=this.availableImages[k];return O||(O=[]),O}getLayerIndex(k){let O=this.layerIndexes[k];return O||(O=this.layerIndexes[k]=new A),O}getWorkerSource(k,O,U){if(this.workerSources[k]||(this.workerSources[k]={}),this.workerSources[k][O]||(this.workerSources[k][O]={}),!this.workerSources[k][O][U]){const Z={send:(X,oe,re)=>{this.actor.send(X,oe,re,k)}};this.workerSources[k][O][U]=new this.workerSourceTypes[O](Z,this.getLayerIndex(k),this.getAvailableImages(k))}return this.workerSources[k][O][U]}getDEMWorkerSource(k,O){return this.demWorkerSources[k]||(this.demWorkerSources[k]={}),this.demWorkerSources[k][O]||(this.demWorkerSources[k][O]=new ye),this.demWorkerSources[k][O]}enforceCacheSizeLimit(k,O){l.enforceCacheSizeLimit(O)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Po(self)),Po}),y(["./shared"],function(l){var T=C;function C(p){return!function(r){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var h,f,v=new Blob([""],{type:"text/javascript"}),w=URL.createObjectURL(v);try{f=new Worker(w),h=!0}catch{h=!1}return f&&f.terminate(),URL.revokeObjectURL(w),h}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var h=document.createElement("canvas");h.width=h.height=1;var f=h.getContext("2d");if(!f)return!1;var v=f.getImageData(0,0,1,1);return v&&v.width===h.width}()?(A[a=r&&r.failIfMajorPerformanceCaveat]===void 0&&(A[a]=function(h){var f,v=function(w){var S=document.createElement("canvas"),I=Object.create(C.webGLContextAttributes);return I.failIfMajorPerformanceCaveat=w,S.getContext("webgl",I)||S.getContext("experimental-webgl",I)}(h);if(!v)return!1;try{f=v.createShader(v.VERTEX_SHADER)}catch{return!1}return!(!f||v.isContextLost())&&(v.shaderSource(f,"void main() {}"),v.compileShader(f),v.getShaderParameter(f,v.COMPILE_STATUS)===!0)}(a)),A[a]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var a}(p)}var A={};function F(p,r){if(Array.isArray(p)){if(!Array.isArray(r)||p.length!==r.length)return!1;for(let a=0;a<p.length;a++)if(!F(p[a],r[a]))return!1;return!0}if(typeof p=="object"&&p!==null&&r!==null){if(typeof r!="object"||Object.keys(p).length!==Object.keys(r).length)return!1;for(const a in p)if(!F(p[a],r[a]))return!1;return!0}return p===r}C.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class L{static testProp(r){if(!L.docStyle)return r[0];for(let a=0;a<r.length;a++)if(r[a]in L.docStyle)return r[a];return r[0]}static create(r,a,h){const f=window.document.createElement(r);return a!==void 0&&(f.className=a),h&&h.appendChild(f),f}static createNS(r,a){return window.document.createElementNS(r,a)}static disableDrag(){L.docStyle&&L.selectProp&&(L.userSelect=L.docStyle[L.selectProp],L.docStyle[L.selectProp]="none")}static enableDrag(){L.docStyle&&L.selectProp&&(L.docStyle[L.selectProp]=L.userSelect)}static setTransform(r,a){r.style[L.transformProp]=a}static addEventListener(r,a,h,f={}){r.addEventListener(a,h,"passive"in f?f:f.capture)}static removeEventListener(r,a,h,f={}){r.removeEventListener(a,h,"passive"in f?f:f.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",L.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",L.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",L.suppressClickInternal,!0)},0)}static mousePos(r,a){const h=r.getBoundingClientRect();return new l.pointGeometry(a.clientX-h.left-r.clientLeft,a.clientY-h.top-r.clientTop)}static touchPos(r,a){const h=r.getBoundingClientRect(),f=[];for(let v=0;v<a.length;v++)f.push(new l.pointGeometry(a[v].clientX-h.left-r.clientLeft,a[v].clientY-h.top-r.clientTop));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}L.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,L.selectProp=L.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),L.transformProp=L.testProp(["transform","WebkitTransform"]);class K{constructor(r){this._transformRequestFn=r}transformRequest(r,a){return this._transformRequestFn&&this._transformRequestFn(r,a)||{url:r}}normalizeSpriteURL(r,a,h){const f=function(v){const w=v.match(se);if(!w)throw new Error(`Unable to parse URL "${v}"`);return{protocol:w[1],authority:w[2],path:w[3]||"/",params:w[4]?w[4].split("&"):[]}}(r);return f.path+=`${a}${h}`,function(v){const w=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${w}`}(f)}setTransformRequest(r){this._transformRequestFn=r}}const se=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function pe(p){var r=new l.ARRAY_TYPE(3);return r[0]=p[0],r[1]=p[1],r[2]=p[2],r}var ye,Y=function(p,r,a){return p[0]=r[0]-a[0],p[1]=r[1]-a[1],p[2]=r[2]-a[2],p};ye=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(ye[0]=0,ye[1]=0,ye[2]=0);var he=function(p){var r=p[0],a=p[1];return r*r+a*a};(function(){var p=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0)})();class me{constructor(r,a,h,f){this.context=r,this.format=h,this.texture=r.gl.createTexture(),this.update(a,f)}update(r,a,h){const{width:f,height:v}=r,w=!(this.size&&this.size[0]===f&&this.size[1]===v||h),{context:S}=this,{gl:I}=S;if(this.useMipmap=Boolean(a&&a.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!a||a.premultiply!==!1)),w)this.size=[f,v],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,r):I.texImage2D(I.TEXTURE_2D,0,this.format,f,v,0,this.format,I.UNSIGNED_BYTE,r.data);else{const{x:D,y:R}=h||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?I.texSubImage2D(I.TEXTURE_2D,0,D,R,I.RGBA,I.UNSIGNED_BYTE,r):I.texSubImage2D(I.TEXTURE_2D,0,D,R,f,v,I.RGBA,I.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(r,a,h){const{context:f}=this,{gl:v}=f;v.bindTexture(v.TEXTURE_2D,this.texture),h!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=v.LINEAR),r!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,h||r),this.filter=r),a!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,a),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function xe(p){const{userImage:r}=p;return!!(r&&r.render&&r.render())&&(p.data.replace(new Uint8Array(r.data.buffer)),!0)}class Ae extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:a,callback:h}of this.requestors)this._notify(a,h);this.requestors=[]}}getImage(r){return this.images[r]}addImage(r,a){this._validate(r,a)&&(this.images[r]=a)}_validate(r,a){let h=!0;return this._validateStretch(a.stretchX,a.data&&a.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchX" value`))),h=!1),this._validateStretch(a.stretchY,a.data&&a.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchY" value`))),h=!1),this._validateContent(a.content,a)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "content" value`))),h=!1),h}_validateStretch(r,a){if(!r)return!0;let h=0;for(const f of r){if(f[0]<h||f[1]<f[0]||a<f[1])return!1;h=f[1]}return!0}_validateContent(r,a){return!(r&&(r.length!==4||r[0]<0||a.data.width<r[0]||r[1]<0||a.data.height<r[1]||r[2]<0||a.data.width<r[2]||r[3]<0||a.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))}updateImage(r,a){a.version=this.images[r].version+1,this.images[r]=a,this.updatedImages[r]=!0}removeImage(r){const a=this.images[r];delete this.images[r],delete this.patterns[r],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,a){let h=!0;if(!this.isLoaded())for(const f of r)this.images[f]||(h=!1);this.isLoaded()||h?this._notify(r,a):this.requestors.push({ids:r,callback:a})}_notify(r,a){const h={};for(const f of r){this.images[f]||this.fire(new l.Event("styleimagemissing",{id:f}));const v=this.images[f];v?h[f]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:Boolean(v.userImage&&v.userImage.render)}:l.warnOnce(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}a(null,h)}getPixelSize(){const{width:r,height:a}=this.atlasImage;return{width:r,height:a}}getPattern(r){const a=this.patterns[r],h=this.getImage(r);if(!h)return null;if(a&&a.position.version===h.version)return a.position;if(a)a.position.version=h.version;else{const f={w:h.data.width+2,h:h.data.height+2,x:0,y:0},v=new l.ImagePosition(f,h);this.patterns[r]={bin:f,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const a=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new me(r,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const v in this.patterns)r.push(this.patterns[v].bin);const{w:a,h}=l.potpack(r),f=this.atlasImage;f.resize({width:a||1,height:h||1});for(const v in this.patterns){const{bin:w}=this.patterns[v],S=w.x+1,I=w.y+1,D=this.images[v].data,R=D.width,N=D.height;l.RGBAImage.copy(D,f,{x:0,y:0},{x:S,y:I},{width:R,height:N}),l.RGBAImage.copy(D,f,{x:0,y:N-1},{x:S,y:I-1},{width:R,height:1}),l.RGBAImage.copy(D,f,{x:0,y:0},{x:S,y:I+N},{width:R,height:1}),l.RGBAImage.copy(D,f,{x:R-1,y:0},{x:S-1,y:I},{width:1,height:N}),l.RGBAImage.copy(D,f,{x:0,y:0},{x:S+R,y:I},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const a of r){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const h=this.images[a];xe(h)&&this.updateImage(a,h)}}}const Ge=1e20;function We(p,r,a,h,f,v,w,S,I){for(let D=r;D<r+h;D++)_e(p,a*v+D,v,f,w,S,I);for(let D=a;D<a+f;D++)_e(p,D*v+r,1,h,w,S,I)}function _e(p,r,a,h,f,v,w){v[0]=0,w[0]=-Ge,w[1]=Ge,f[0]=p[r];for(let S=1,I=0,D=0;S<h;S++){f[S]=p[r+S*a];const R=S*S;do{const N=v[I];D=(f[S]-f[N]+R-N*N)/(S-N)/2}while(D<=w[I]&&--I>-1);I++,v[I]=S,w[I]=D,w[I+1]=Ge}for(let S=0,I=0;S<h;S++){for(;w[I+1]<S;)I++;const D=v[I],R=S-D;p[r+S*a]=f[D]+R*R}}class ot{constructor(r,a){this.requestManager=r,this.localIdeographFontFamily=a,this.entries={}}setURL(r){this.url=r}getGlyphs(r,a){const h=[];for(const f in r)for(const v of r[f])h.push({stack:f,id:v});l.asyncAll(h,({stack:f,id:v},w)=>{let S=this.entries[f];S||(S=this.entries[f]={glyphs:{},requests:{},ranges:{}});let I=S.glyphs[v];if(I!==void 0)return void w(null,{stack:f,id:v,glyph:I});if(I=this._tinySDF(S,f,v),I)return S.glyphs[v]=I,void w(null,{stack:f,id:v,glyph:I});const D=Math.floor(v/256);if(256*D>65535)return void w(new Error("glyphs > 65535 not supported"));if(S.ranges[D])return void w(null,{stack:f,id:v,glyph:I});let R=S.requests[D];R||(R=S.requests[D]=[],ot.loadGlyphRange(f,D,this.url,this.requestManager,(N,q)=>{if(q){for(const Q in q)this._doesCharSupportLocalGlyph(+Q)||(S.glyphs[+Q]=q[+Q]);S.ranges[D]=!0}for(const Q of R)Q(N,q);delete S.requests[D]})),R.push((N,q)=>{N?w(N):q&&w(null,{stack:f,id:v,glyph:q[v]||null})})},(f,v)=>{if(f)a(f);else if(v){const w={};for(const{stack:S,id:I,glyph:D}of v)(w[S]||(w[S]={}))[I]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};a(null,w)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](r)||l.unicodeBlockLookup["Hangul Syllables"](r)||l.unicodeBlockLookup.Hiragana(r)||l.unicodeBlockLookup.Katakana(r))}_tinySDF(r,a,h){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(h))return;let v=r.tinySDF;if(!v){let S="400";/bold/i.test(a)?S="900":/medium/i.test(a)?S="500":/light/i.test(a)&&(S="200"),v=r.tinySDF=new ot.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:f,fontWeight:S})}const w=v.draw(String.fromCharCode(h));return{id:h,bitmap:new l.AlphaImage({width:w.width||30,height:w.height||30},w.data),metrics:{width:w.glyphWidth||24,height:w.glyphHeight||24,left:w.glyphLeft||0,top:w.glyphTop-27||-8,advance:w.glyphAdvance||24}}}}ot.loadGlyphRange=function(p,r,a,h,f){const v=256*r,w=v+255,S=h.transformRequest(a.replace("{fontstack}",p).replace("{range}",`${v}-${w}`),l.ResourceType.Glyphs);l.getArrayBuffer(S,(I,D)=>{if(I)f(I);else if(D){const R={};for(const N of l.parseGlyphPBF(D))R[N.id]=N;f(null,R)}})},ot.TinySDF=class{constructor({fontSize:p=24,buffer:r=3,radius:a=8,cutoff:h=.25,fontFamily:f="sans-serif",fontWeight:v="normal",fontStyle:w="normal"}={}){this.buffer=r,this.cutoff=h,this.radius=a;const S=this.size=p+4*r,I=this._createCanvas(S),D=this.ctx=I.getContext("2d",{willReadFrequently:!0});D.font=`${w} ${v} ${p}px ${f}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(p){const r=document.createElement("canvas");return r.width=r.height=p,r}draw(p){const{width:r,actualBoundingBoxAscent:a,actualBoundingBoxDescent:h,actualBoundingBoxLeft:f,actualBoundingBoxRight:v}=this.ctx.measureText(p),w=Math.ceil(a),S=Math.min(this.size-this.buffer,Math.ceil(v-f)),I=Math.min(this.size-this.buffer,w+Math.ceil(h)),D=S+2*this.buffer,R=I+2*this.buffer,N=Math.max(D*R,0),q=new Uint8ClampedArray(N),Q={data:q,width:D,height:R,glyphWidth:S,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:r};if(S===0||I===0)return Q;const{ctx:H,buffer:J,gridInner:ce,gridOuter:ue}=this;H.clearRect(J,J,S,I),H.fillText(p,J,J+w);const ge=H.getImageData(J,J,S,I);ue.fill(Ge,0,N),ce.fill(0,0,N);for(let de=0;de<I;de++)for(let Oe=0;Oe<S;Oe++){const Te=ge.data[4*(de*S+Oe)+3]/255;if(Te===0)continue;const Ce=(de+J)*D+Oe+J;if(Te===1)ue[Ce]=0,ce[Ce]=Ge;else{const qe=.5-Te;ue[Ce]=qe>0?qe*qe:0,ce[Ce]=qe<0?qe*qe:0}}We(ue,0,0,D,R,D,this.f,this.v,this.z),We(ce,J,J,S,I,D,this.f,this.v,this.z);for(let de=0;de<N;de++){const Oe=Math.sqrt(ue[de])-Math.sqrt(ce[de]);q[de]=Math.round(255-255*(Oe/this.radius+this.cutoff))}return Q}};const it=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(p,r){return l.sphericalToCartesian(p.expression.evaluate(r))}interpolate(p,r,a){return{x:l.number(p.x,r.x,a),y:l.number(p.y,r.y,a),z:l.number(p.z,r.z,a)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),dt="-transition";class De extends l.Evented{constructor(r){super(),this._transitionable=new l.Transitionable(it),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,a={}){if(!this._validate(l.validateLight,r,a))for(const h in r){const f=r[h];h.endsWith(dt)?this._transitionable.setTransition(h.slice(0,-dt.length),f):this._transitionable.setValue(h,f)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,a,h){return(!h||h.validate!==!1)&&l.emitValidationErrors(this,r.call(l.validateStyle,l.extend({value:a,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class Je{constructor(r,a){this.width=r,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,a){const h=r.join(",")+String(a);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(r,a)),this.dashEntry[h]}getDashRanges(r,a,h){const f=[];let v=r.length%2==1?-r[r.length-1]*h:0,w=r[0]*h,S=!0;f.push({left:v,right:w,isDash:S,zeroLength:r[0]===0});let I=r[0];for(let D=1;D<r.length;D++){S=!S;const R=r[D];v=I*h,I+=R,w=I*h,f.push({left:v,right:w,isDash:S,zeroLength:R===0})}return f}addRoundDash(r,a,h){const f=a/2;for(let v=-h;v<=h;v++){const w=this.width*(this.nextRow+h+v);let S=0,I=r[S];for(let D=0;D<this.width;D++){D/I.right>1&&(I=r[++S]);const R=Math.abs(D-I.left),N=Math.abs(D-I.right),q=Math.min(R,N);let Q;const H=v/h*(f+1);if(I.isDash){const J=f-Math.abs(H);Q=Math.sqrt(q*q+J*J)}else Q=f-Math.sqrt(q*q+H*H);this.data[w+D]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(r){for(let S=r.length-1;S>=0;--S){const I=r[S],D=r[S+1];I.zeroLength?r.splice(S,1):D&&D.isDash===I.isDash&&(D.left=I.left,r.splice(S,1))}const a=r[0],h=r[r.length-1];a.isDash===h.isDash&&(a.left=h.left-this.width,h.right=a.right+this.width);const f=this.width*this.nextRow;let v=0,w=r[v];for(let S=0;S<this.width;S++){S/w.right>1&&(w=r[++v]);const I=Math.abs(S-w.left),D=Math.abs(S-w.right),R=Math.min(I,D);this.data[f+S]=Math.max(0,Math.min(255,(w.isDash?R:-R)+128))}}addDash(r,a){const h=a?7:0,f=2*h+1;if(this.nextRow+f>this.height)return l.warnOnce("LineAtlas out of space"),null;let v=0;for(let S=0;S<r.length;S++)v+=r[S];if(v!==0){const S=this.width/v,I=this.getDashRanges(r,this.width,S);a?this.addRoundDash(I,S,h):this.addRegularDash(I)}const w={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:v};return this.nextRow+=f,this.dirty=!0,w}bind(r){const a=r.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}class Ke{constructor(r,a){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const h=this.workerPool.acquire(this.id);for(let f=0;f<h.length;f++){const v=new Ke.Actor(h[f],a,this.id);v.name=`Worker ${f}`,this.actors.push(v)}}broadcast(r,a,h){l.asyncAll(this.actors,(f,v)=>{f.send(r,a,v)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(r=>{r.remove()}),this.actors=[],this.workerPool.release(this.id)}}function zt(p,r,a){const h=function(f,v){if(f)return a(f);if(v){const w=l.pick(l.extend(v,p),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);v.vector_layers&&(w.vectorLayers=v.vector_layers,w.vectorLayerIds=w.vectorLayers.map(S=>S.id)),a(null,w)}};return p.url?l.getJSON(r.transformRequest(p.url,l.ResourceType.Source),h):l.exported.frame(()=>h(null,p))}Ke.Actor=l.Actor;class Le{constructor(r,a,h){this.bounds=l.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=a||0,this.maxzoom=h||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const a=Math.pow(2,r.z),h=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*a),f=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*a),v=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*a),w=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*a);return r.x>=h&&r.x<v&&r.y>=f&&r.y<w}}class At extends l.Evented{constructor(r,a,h,f){if(super(),this.id=r,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(a,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=zt(this._options,this.map._requestManager,(r,a)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r?this.fire(new l.ErrorEvent(r)):a&&(l.extend(this,a),a.bounds&&(this.tileBounds=new Le(a.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(r,a){const h=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(h,l.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function v(w,S){return delete r.request,r.aborted?a(null):w&&w.status!==404?a(w):(S&&S.resourceTiming&&(r.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&r.setExpiryData(S),r.loadVectorData(S,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),a(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}f.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=a:r.request=r.actor.send("reloadTile",f,v.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",f,v.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ot extends l.Evented{constructor(r,a,h,f){super(),this.id=r,this.dispatcher=h,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},a),l.extend(this,l.pick(a,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=zt(this._options,this.map._requestManager,(r,a)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.ErrorEvent(r)):a&&(l.extend(this,a),a.bounds&&(this.tileBounds=new Le(a.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,a){const h=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=l.getImage(this.map._requestManager.transformRequest(h,l.ResourceType.Tile),(f,v,w)=>{if(delete r.request,r.aborted)r.state="unloaded",a(null);else if(f)r.state="errored",a(f);else if(v){this.map._refreshExpiredTiles&&r.setExpiryData(w);const S=this.map.painter.context,I=S.gl;r.texture=this.map.painter.getTileTexture(v.width),r.texture?r.texture.update(v,{useMipmap:!0}):(r.texture=new me(S,v,I.RGBA,{useMipmap:!0}),r.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),S.extTextureFilterAnisotropic&&I.texParameterf(I.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax)),r.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),a(null)}})}abortTile(r,a){r.request&&(r.request.cancel(),delete r.request),a()}unloadTile(r,a){r.texture&&this.map.painter.saveTileTexture(r.texture),a()}hasTransition(){return!1}}let dr;class pr extends Ot{constructor(r,a,h,f){super(r,a,h,f),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(r,a){const h=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function f(v,w){v&&(r.state="errored",a(v)),w&&(r.dem=w,r.needsHillshadePrepare=!0,r.state="loaded",a(null))}r.request=l.getImage(this.map._requestManager.transformRequest(h,l.ResourceType.Tile),function(v,w){if(delete r.request,r.aborted)r.state="unloaded",a(null);else if(v)r.state="errored",a(v);else if(w){this.map._refreshExpiredTiles&&r.setExpiryData(w),delete w.cacheControl,delete w.expires;const S=l.isImageBitmap(w)&&(dr==null&&(dr=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),dr)?w:l.exported.getImageData(w,1),I={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:S,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",I,f.bind(this)))}}.bind(this)),r.neighboringTiles=this._getNeighboringTiles(r.tileID)}_getNeighboringTiles(r){const a=r.canonical,h=Math.pow(2,a.z),f=(a.x-1+h)%h,v=a.x===0?r.wrap-1:r.wrap,w=(a.x+1+h)%h,S=a.x+1===h?r.wrap+1:r.wrap,I={};return I[new l.OverscaledTileID(r.overscaledZ,v,a.z,f,a.y).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,S,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(I[new l.OverscaledTileID(r.overscaledZ,v,a.z,f,a.y-1).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,r.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,S,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<h&&(I[new l.OverscaledTileID(r.overscaledZ,v,a.z,f,a.y+1).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,r.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,S,a.z,w,a.y+1).key]={backfilled:!1}),I}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class Ir extends l.Evented{constructor(r,a,h,f){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(f),this._data=a.data,this._options=l.extend({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const v=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*v,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*v,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:l.EXTENT,radius:(a.clusterRadius||50)*v,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData("content"),this}getClusterExpansionZoom(r,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},a),this}getClusterChildren(r,a){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},a),this}getClusterLeaves(r,a,h,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:a,offset:h},f),this}_updateWorkerData(r){const a=l.extend({},this.workerOptions),h=this._data;typeof h=="string"?(a.request=this.map._requestManager.transformRequest(l.exported.resolveURL(h),l.ResourceType.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(h),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,a,(f,v)=>{if(this._pendingLoads--,this._removed||v&&v.abandoned)return;let w=null;if(v&&v.resourceTiming&&v.resourceTiming[this.id]&&(w=v.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:a.source},null),f)return void this.fire(new l.ErrorEvent(f));const S={dataType:"source",sourceDataType:r};this._collectResourceTiming&&w&&w.length>0&&l.extend(S,{resourceTiming:w}),this.fire(new l.Event("data",S))})}loaded(){return this._pendingLoads===0}loadTile(r,a){const h=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(h,f,(v,w)=>(delete r.request,r.unloadVectorData(),r.aborted?a(null):v?a(v):(r.loadVectorData(w,this.map.painter,h==="reloadTile"),a(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var vr=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ar extends l.Evented{constructor(r,a,h,f){super(),this.id=r,this.dispatcher=h,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=a}load(r,a){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(h,f)=>{this._loaded=!0,h?this.fire(new l.ErrorEvent(h)):f&&(this.image=f,r&&(this.coordinates=r),a&&a(),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return this.image&&r.url?(this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}setCoordinates(r){this.coordinates=r;const a=r.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(f){let v=1/0,w=1/0,S=-1/0,I=-1/0;for(const q of f)v=Math.min(v,q.x),w=Math.min(w,q.y),S=Math.max(S,q.x),I=Math.max(I,q.y);const D=Math.max(S-v,I-w),R=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),N=Math.pow(2,R);return new l.CanonicalTileID(R,Math.floor((v+S)/2*N),Math.floor((w+I)/2*N))}(a),this.minzoom=this.maxzoom=this.tileID.z;const h=a.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(h[2].x,h[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,vr.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new me(r,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}loadTile(r,a){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},a(null)):(r.state="errored",a(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Fr extends Ar{constructor(r,a,h,f){super(r,a,h,f),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const r=this.options;this.urls=[];for(const a of r.urls)this.urls.push(this.map._requestManager.transformRequest(a,l.ResourceType.Source).url);l.getVideo(this.urls,(a,h)=>{this._loaded=!0,a?this.fire(new l.ErrorEvent(a)):h&&(this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const a=this.video.seekable;r<a.start(0)||r>a.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,vr.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new me(r,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Fe extends Ar{constructor(r,a,h,f){super(r,a,h,f),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(w=>typeof w!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,h=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,vr.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new me(a,this.canvas,h.RGBA,{premultiply:!0});for(const f in this.tiles){const v=this.tiles[f];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const lt={vector:At,raster:Ot,"raster-dem":pr,geojson:Ir,video:Fr,image:Ar,canvas:Fe};function Ye(p,r){const a=l.create();return l.translate(a,a,[1,1,0]),l.scale(a,a,[.5*p.width,.5*p.height,1]),l.multiply(a,a,p.calculatePosMatrix(r.toUnwrapped()))}function ft(p,r,a,h,f,v){const w=function(N,q,Q){if(N)for(const H of N){const J=q[H];if(J&&J.source===Q&&J.type==="fill-extrusion")return!0}else for(const H in q){const J=q[H];if(J.source===Q&&J.type==="fill-extrusion")return!0}return!1}(f&&f.layers,r,p.id),S=v.maxPitchScaleFactor(),I=p.tilesIn(h,S,w);I.sort(Zt);const D=[];for(const N of I)D.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(r,a,p._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,f,v,S,Ye(p.transform,N.tileID))});const R=function(N){const q={},Q={};for(const H of N){const J=H.queryResults,ce=H.wrappedTileID,ue=Q[ce]=Q[ce]||{};for(const ge in J){const de=J[ge],Oe=ue[ge]=ue[ge]||{},Te=q[ge]=q[ge]||[];for(const Ce of de)Oe[Ce.featureIndex]||(Oe[Ce.featureIndex]=!0,Te.push(Ce))}}return q}(D);for(const N in R)R[N].forEach(q=>{const Q=q.feature,H=p.getFeatureState(Q.layer["source-layer"],Q.id);Q.source=Q.layer.source,Q.layer["source-layer"]&&(Q.sourceLayer=Q.layer["source-layer"]),Q.state=H});return R}function Zt(p,r){const a=p.tileID,h=r.tileID;return a.overscaledZ-h.overscaledZ||a.canonical.y-h.canonical.y||a.wrap-h.wrap||a.canonical.x-h.canonical.x}class nr{constructor(r,a){this.tileID=r,this.uid=l.uniqueId(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const a=r+this.timeAdded;a<l.exported.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(r,a,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(f,v){const w={};if(!v)return w;for(const S of f){const I=S.layerIds.map(D=>v.getLayer(D)).filter(Boolean);if(I.length!==0){S.layers=I,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(D=>I.filter(R=>R.id===D)[0]));for(const D of I)w[D.id]=S}}return w}(r.buckets,a.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const v=this.buckets[f];if(v instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!h)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const v=this.buckets[f];if(v instanceof l.SymbolBucket&&v.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const f in this.buckets){const v=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(f).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const h in this.buckets){const f=this.buckets[h];f.uploadPending()&&f.upload(r)}const a=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new me(r,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new me(r,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,a,h,f,v,w,S,I,D,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:v,scale:w,tileSize:this.tileSize,pixelPosMatrix:R,transform:I,params:S,queryPadding:this.queryPadding*D},r,a,h):{}}querySourceFeatures(r,a){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const f=h.loadVTLayers(),v=a?a.sourceLayer:"",w=f._geojsonTileLayer||f[v];if(!w)return;const S=l.createFilter(a&&a.filter),{z:I,x:D,y:R}=this.tileID.canonical,N={z:I,x:D,y:R};for(let q=0;q<w.length;q++){const Q=w.feature(q);if(S.needGeometry){const ce=l.toEvaluationFeature(Q,!0);if(!S.filter(new l.EvaluationParameters(this.tileID.overscaledZ),ce,this.tileID.canonical))continue}else if(!S.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Q))continue;const H=h.getId(Q,v),J=new l.GeoJSONFeature(Q,I,D,R,H);J.tile=N,r.push(J)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const a=this.expirationTime;if(r.cacheControl){const h=l.parseCacheControl(r.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const h=Date.now();let f=!1;if(this.expirationTime>h)f=!1;else if(a)if(this.expirationTime<a)f=!0;else{const v=this.expirationTime-a;v?this.expirationTime=h+Math.max(v,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!a.style.hasLayer(f))continue;const v=this.buckets[f],w=v.layers[0].sourceLayer||"_geojsonTileLayer",S=h[w],I=r[w];if(!S||!I||Object.keys(I).length===0)continue;v.update(I,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=a&&a.style&&a.style.getLayer(f);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.exported.now()+r}setDependencies(r,a){const h={};for(const f of a)h[f]=!0;this.dependencies[r]=h}hasDependency(r,a){for(const h of r){const f=this.dependencies[h];if(f){for(const v of a)if(f[v])return!0}}return!1}}class Bt{constructor(r,a){this.max=r,this.onRemove=a,this.reset()}reset(){for(const r in this.data)for(const a of this.data[r])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(r,a,h){const f=r.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const v={value:a,timeout:void 0};if(h!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},h)),this.data[f].push(v),this.order.push(f),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const a=this.data[r].shift();return a.timeout&&clearTimeout(a.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),a.value}getByKey(r){const a=this.data[r];return a?a[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,a){if(!this.has(r))return this;const h=r.wrapped().key,f=a===void 0?0:this.data[h].indexOf(a),v=this.data[h][f];return this.data[h].splice(f,1),v.timeout&&clearTimeout(v.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(v.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(r){const a=[];for(const h in this.data)for(const f of this.data[h])r(f.value)||a.push(f);for(const h of a)this.remove(h.value.tileID,h)}}class Lt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,a,h){const f=String(a);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][f]=this.stateChanges[r][f]||{},l.extend(this.stateChanges[r][f],h),this.deletedStates[r]===null){this.deletedStates[r]={};for(const v in this.state[r])v!==f&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][f]===null){this.deletedStates[r][f]={};for(const v in this.state[r][f])h[v]||(this.deletedStates[r][f][v]=null)}else for(const v in h)this.deletedStates[r]&&this.deletedStates[r][f]&&this.deletedStates[r][f][v]===null&&delete this.deletedStates[r][f][v]}removeFeatureState(r,a,h){if(this.deletedStates[r]===null)return;const f=String(a);if(this.deletedStates[r]=this.deletedStates[r]||{},h&&a!==void 0)this.deletedStates[r][f]!==null&&(this.deletedStates[r][f]=this.deletedStates[r][f]||{},this.deletedStates[r][f][h]=null);else if(a!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][f])for(h in this.deletedStates[r][f]={},this.stateChanges[r][f])this.deletedStates[r][f][h]=null;else this.deletedStates[r][f]=null;else this.deletedStates[r]=null}getState(r,a){const h=String(a),f=l.extend({},(this.state[r]||{})[h],(this.stateChanges[r]||{})[h]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const v=this.deletedStates[r][a];if(v===null)return{};for(const w in v)delete f[w]}return f}initializeTileState(r,a){r.setFeatureState(this.state,a)}coalesceChanges(r,a){const h={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const v={};for(const w in this.stateChanges[f])this.state[f][w]||(this.state[f][w]={}),l.extend(this.state[f][w],this.stateChanges[f][w]),v[w]=this.state[f][w];h[f]=v}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const v={};if(this.deletedStates[f]===null)for(const w in this.state[f])v[w]={},this.state[f][w]={};else for(const w in this.deletedStates[f]){if(this.deletedStates[f][w]===null)this.state[f][w]={};else for(const S of Object.keys(this.deletedStates[f][w]))delete this.state[f][w][S];v[w]=this.state[f][w]}h[f]=h[f]||{},l.extend(h[f],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const f in r)r[f].setFeatureState(h,a)}}class W extends l.Evented{constructor(r,a,h){super(),this.id=r,this.dispatcher=h,this.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(f,v,w,S){const I=new lt[v.type](f,v,w,S);if(I.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${I.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],I),I}(r,a,h,this),this._tiles={},this._cache=new Bt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Lt}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const a=this._tiles[r];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(r,a){return this._source.loadTile(r,a)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.Event("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const h=this._tiles[a];h.upload(r),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(ne).map(r=>r.key)}getRenderableIds(r){const a=[];for(const h in this._tiles)this._isIdRenderable(h,r)&&a.push(this._tiles[h]);return r?a.sort((h,f)=>{const v=h.tileID,w=f.tileID,S=new l.pointGeometry(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),I=new l.pointGeometry(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-w.overscaledZ||I.y-S.y||I.x-S.x}).map(h=>h.tileID.key):a.map(h=>h.tileID).sort(ne).map(h=>h.key)}hasRenderableParent(r){const a=this.findLoadedParent(r,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(r,a){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(a||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,a){const h=this._tiles[r];h&&(h.state!=="loading"&&(h.state=a),this._loadTile(h,this._tileLoaded.bind(this,h,r,a)))}_tileLoaded(r,a,h,f){if(f)return r.state="errored",void(f.status!==404?this._source.fire(new l.ErrorEvent(f,{tile:r})):this.update(this.transform));r.timeAdded=l.exported.now(),h==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(a,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const a=this.getRenderableIds();for(let f=0;f<a.length;f++){const v=a[f];if(r.neighboringTiles&&r.neighboringTiles[v]){const w=this.getTileByID(v);h(r,w),h(w,r)}}function h(f,v){f.needsHillshadePrepare=!0;let w=v.tileID.canonical.x-f.tileID.canonical.x;const S=v.tileID.canonical.y-f.tileID.canonical.y,I=Math.pow(2,f.tileID.canonical.z),D=v.tileID.key;w===0&&S===0||Math.abs(S)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),v.dem&&f.dem&&(f.dem.backfillBorder(v.dem,w,S),f.neighboringTiles&&f.neighboringTiles[D]&&(f.neighboringTiles[D].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,a,h,f){for(const v in this._tiles){let w=this._tiles[v];if(f[v]||!w.hasData()||w.tileID.overscaledZ<=a||w.tileID.overscaledZ>h)continue;let S=w.tileID;for(;w&&w.tileID.overscaledZ>a+1;){const D=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[D.key],w&&w.hasData()&&(S=D)}let I=S;for(;I.overscaledZ>a;)if(I=I.scaledTo(I.overscaledZ-1),r[I.key]){f[S.key]=S;break}}}findLoadedParent(r,a){if(r.key in this._loadedParentTiles){const h=this._loadedParentTiles[r.key];return h&&h.tileID.overscaledZ>=a?h:null}for(let h=r.overscaledZ-1;h>=a;h--){const f=r.scaledTo(h),v=this._getLoadedTile(f);if(v)return v}}_getLoadedTile(r){const a=this._tiles[r.key];return a&&a.hasData()?a:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const a=Math.ceil(r.width/this._source.tileSize)+1,h=Math.ceil(r.height/this._source.tileSize)+1,f=Math.floor(a*h*5),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(v)}handleWrapJump(r){const a=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,a){const h={};for(const f in this._tiles){const v=this._tiles[f];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+a),h[v.tileID.key]=v}this._tiles=h;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}update(r){if(this.transform=r,!this._sourceLoaded||this._paused)return;let a;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?a=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(I=>new l.OverscaledTileID(I.canonical.z,I.wrap,I.canonical.z,I.canonical.x,I.canonical.y)):(a=r.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(a=a.filter(I=>this._source.hasTile(I)))):a=[];const h=r.coveringZoomLevel(this._source),f=Math.max(h-W.maxOverzooming,this._source.minzoom),v=Math.max(h+W.maxUnderzooming,this._source.minzoom),w=this._updateRetainedTiles(a,h);if(be(this._source.type)){const I={},D={},R=Object.keys(w);for(const N of R){const q=w[N],Q=this._tiles[N];if(!Q||Q.fadeEndTime&&Q.fadeEndTime<=l.exported.now())continue;const H=this.findLoadedParent(q,f);H&&(this._addTile(H.tileID),I[H.tileID.key]=H.tileID),D[N]=q}this._retainLoadedChildren(D,h,v,w);for(const N in I)w[N]||(this._coveredTiles[N]=!0,w[N]=I[N])}for(const I in w)this._tiles[I].clearFadeHold();const S=l.keysDifference(this._tiles,w);for(const I of S){const D=this._tiles[I];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(I)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,a){const h={},f={},v=Math.max(a-W.maxOverzooming,this._source.minzoom),w=Math.max(a+W.maxUnderzooming,this._source.minzoom),S={};for(const I of r){const D=this._addTile(I);h[I.key]=I,D.hasData()||a<this._source.maxzoom&&(S[I.key]=I)}this._retainLoadedChildren(S,a,w,h);for(const I of r){let D=this._tiles[I.key];if(D.hasData())continue;if(a+1>this._source.maxzoom){const N=I.children(this._source.maxzoom)[0],q=this.getTile(N);if(q&&q.hasData()){h[N.key]=N;continue}}else{const N=I.children(this._source.maxzoom);if(h[N[0].key]&&h[N[1].key]&&h[N[2].key]&&h[N[3].key])continue}let R=D.wasRequested();for(let N=I.overscaledZ-1;N>=v;--N){const q=I.scaledTo(N);if(f[q.key]||(f[q.key]=!0,D=this.getTile(q),!D&&R&&(D=this._addTile(q)),D&&(h[q.key]=q,R=D.wasRequested(),D.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const a=[];let h,f=this._tiles[r].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){h=this._loadedParentTiles[f.key];break}a.push(f.key);const v=f.scaledTo(f.overscaledZ-1);if(h=this._getLoadedTile(v),h)break;f=v}for(const v of a)this._loadedParentTiles[v]=h}}_addTile(r){let a=this._tiles[r.key];if(a)return a;a=this._cache.getAndRemove(r),a&&(this._setTileReloadTimer(r.key,a),a.tileID=r,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,a)));const h=a;return a||(a=new nr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(a,this._tileLoaded.bind(this,a,r.key,a.state))),a.uses++,this._tiles[r.key]=a,h||this._source.fire(new l.Event("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(r,a){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const h=a.getExpiryTimeout();h&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},h))}_removeTile(r){const a=this._tiles[r];a&&(a.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,a,h){const f=[],v=this.transform;if(!v)return f;const w=h?v.getCameraQueryGeometry(r):r,S=r.map(H=>v.pointCoordinate(H)),I=w.map(H=>v.pointCoordinate(H)),D=this.getIds();let R=1/0,N=1/0,q=-1/0,Q=-1/0;for(const H of I)R=Math.min(R,H.x),N=Math.min(N,H.y),q=Math.max(q,H.x),Q=Math.max(Q,H.y);for(let H=0;H<D.length;H++){const J=this._tiles[D[H]];if(J.holdingForFade())continue;const ce=J.tileID,ue=Math.pow(2,v.zoom-J.tileID.overscaledZ),ge=a*J.queryPadding*l.EXTENT/J.tileSize/ue,de=[ce.getTilePoint(new l.MercatorCoordinate(R,N)),ce.getTilePoint(new l.MercatorCoordinate(q,Q))];if(de[0].x-ge<l.EXTENT&&de[0].y-ge<l.EXTENT&&de[1].x+ge>=0&&de[1].y+ge>=0){const Oe=S.map(Ce=>ce.getTilePoint(Ce)),Te=I.map(Ce=>ce.getTilePoint(Ce));f.push({tile:J,tileID:ce,queryGeometry:Oe,cameraQueryGeometry:Te,scale:ue})}}return f}getVisibleCoordinates(r){const a=this.getRenderableIds(r).map(h=>this._tiles[h].tileID);for(const h of a)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(be(this._source.type))for(const r in this._tiles){const a=this._tiles[r];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(r,a,h){this._state.updateState(r=r||"_geojsonTileLayer",a,h)}removeFeatureState(r,a,h){this._state.removeFeatureState(r=r||"_geojsonTileLayer",a,h)}getFeatureState(r,a){return this._state.getState(r=r||"_geojsonTileLayer",a)}setDependencies(r,a,h){const f=this._tiles[r];f&&f.setDependencies(a,h)}reloadTilesForDependencies(r,a){for(const h in this._tiles)this._tiles[h].hasDependency(r,a)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(r,a))}}function ne(p,r){const a=Math.abs(2*p.wrap)-+(p.wrap<0),h=Math.abs(2*r.wrap)-+(r.wrap<0);return p.overscaledZ-r.overscaledZ||h-a||r.canonical.y-p.canonical.y||r.canonical.x-p.canonical.x}function be(p){return p==="raster"||p==="image"||p==="video"}W.maxOverzooming=10,W.maxUnderzooming=3;const Me="mapboxgl_preloaded_worker_pool";class Re{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Re.workerCount;)this.workers.push(new Worker(Cs.workerUrl));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Me]}numActive(){return Object.keys(this.active).length}}const Ve=Math.floor(l.exported.hardwareConcurrency/2);let Qe;function $e(){return Qe||(Qe=new Re),Qe}function tt(p,r){const a={};for(const h in p)h!=="ref"&&(a[h]=p[h]);return l.refProperties.forEach(h=>{h in r&&(a[h]=r[h])}),a}function He(p){p=p.slice();const r=Object.create(null);for(let a=0;a<p.length;a++)r[p[a].id]=p[a];for(let a=0;a<p.length;a++)"ref"in p[a]&&(p[a]=tt(p[a],r[p[a].ref]));return p}Re.workerCount=Math.max(Math.min(Ve,6),1);const et={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function bt(p,r,a){a.push({command:et.addSource,args:[p,r[p]]})}function yt(p,r,a){r.push({command:et.removeSource,args:[p]}),a[p]=!0}function Pt(p,r,a,h){yt(p,a,h),bt(p,r,a)}function Vt(p,r,a){let h;for(h in p[a])if(Object.prototype.hasOwnProperty.call(p[a],h)&&h!=="data"&&!F(p[a][h],r[a][h]))return!1;for(h in r[a])if(Object.prototype.hasOwnProperty.call(r[a],h)&&h!=="data"&&!F(p[a][h],r[a][h]))return!1;return!0}function ve(p,r,a,h,f,v){let w;for(w in r=r||{},p=p||{})Object.prototype.hasOwnProperty.call(p,w)&&(F(p[w],r[w])||a.push({command:v,args:[h,w,r[w],f]}));for(w in r)Object.prototype.hasOwnProperty.call(r,w)&&!Object.prototype.hasOwnProperty.call(p,w)&&(F(p[w],r[w])||a.push({command:v,args:[h,w,r[w],f]}))}function Ue(p){return p.id}function ur(p,r){return p[r.id]=r,p}class Hr{constructor(r,a){this.reset(r,a)}reset(r,a){this.points=r||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.clamp(r,0,1);let a=1,h=this._distances[a];const f=r*this.paddedLength+this.padding;for(;h<f&&a<this._distances.length;)h=this._distances[++a];const v=a-1,w=this._distances[v],S=h-w,I=S>0?(f-w)/S:0;return this.points[v].mult(1-I).add(this.points[a].mult(I))}}function ir(p,r){let a=!0;return p==="always"||p!=="never"&&r!=="never"||(a=!1),a}class Sn{constructor(r,a,h){const f=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/h),this.yCellCount=Math.ceil(a/h);for(let w=0;w<this.xCellCount*this.yCellCount;w++)f.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=a,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,a,h,f,v){this._forEachCell(a,h,f,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(v)}insertCircle(r,a,h,f){this._forEachCell(a-f,h-f,a+f,h+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(a),this.circles.push(h),this.circles.push(f)}_insertBoxCell(r,a,h,f,v,w){this.boxCells[v].push(w)}_insertCircleCell(r,a,h,f,v,w){this.circleCells[v].push(w)}_query(r,a,h,f,v,w,S){if(h<0||r>this.width||f<0||a>this.height)return[];const I=[];if(r<=0&&a<=0&&this.width<=h&&this.height<=f){if(v)return[{key:null,x1:r,y1:a,x2:h,y2:f}];for(let D=0;D<this.boxKeys.length;D++)I.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const R=this.circles[3*D],N=this.circles[3*D+1],q=this.circles[3*D+2];I.push({key:this.circleKeys[D],x1:R-q,y1:N-q,x2:R+q,y2:N+q})}}else this._forEachCell(r,a,h,f,this._queryCell,I,{hitTest:v,overlapMode:w,seenUids:{box:{},circle:{}}},S);return I}query(r,a,h,f){return this._query(r,a,h,f,!1,null)}hitTest(r,a,h,f,v,w){return this._query(r,a,h,f,!0,v,w).length>0}hitTestCircle(r,a,h,f,v){const w=r-h,S=r+h,I=a-h,D=a+h;if(S<0||w>this.width||D<0||I>this.height)return!1;const R=[];return this._forEachCell(w,I,S,D,this._queryCellCircle,R,{hitTest:!0,overlapMode:f,circle:{x:r,y:a,radius:h},seenUids:{box:{},circle:{}}},v),R.length>0}_queryCell(r,a,h,f,v,w,S,I){const{seenUids:D,hitTest:R,overlapMode:N}=S,q=this.boxCells[v];if(q!==null){const H=this.bboxes;for(const J of q)if(!D.box[J]){D.box[J]=!0;const ce=4*J,ue=this.boxKeys[J];if(r<=H[ce+2]&&a<=H[ce+3]&&h>=H[ce+0]&&f>=H[ce+1]&&(!I||I(ue))&&(!R||!ir(N,ue.overlapMode))&&(w.push({key:ue,x1:H[ce],y1:H[ce+1],x2:H[ce+2],y2:H[ce+3]}),R))return!0}}const Q=this.circleCells[v];if(Q!==null){const H=this.circles;for(const J of Q)if(!D.circle[J]){D.circle[J]=!0;const ce=3*J,ue=this.circleKeys[J];if(this._circleAndRectCollide(H[ce],H[ce+1],H[ce+2],r,a,h,f)&&(!I||I(ue))&&(!R||!ir(N,ue.overlapMode))){const ge=H[ce],de=H[ce+1],Oe=H[ce+2];if(w.push({key:ue,x1:ge-Oe,y1:de-Oe,x2:ge+Oe,y2:de+Oe}),R)return!0}}}return!1}_queryCellCircle(r,a,h,f,v,w,S,I){const{circle:D,seenUids:R,overlapMode:N}=S,q=this.boxCells[v];if(q!==null){const H=this.bboxes;for(const J of q)if(!R.box[J]){R.box[J]=!0;const ce=4*J,ue=this.boxKeys[J];if(this._circleAndRectCollide(D.x,D.y,D.radius,H[ce+0],H[ce+1],H[ce+2],H[ce+3])&&(!I||I(ue))&&!ir(N,ue.overlapMode))return w.push(!0),!0}}const Q=this.circleCells[v];if(Q!==null){const H=this.circles;for(const J of Q)if(!R.circle[J]){R.circle[J]=!0;const ce=3*J,ue=this.circleKeys[J];if(this._circlesCollide(H[ce],H[ce+1],H[ce+2],D.x,D.y,D.radius)&&(!I||I(ue))&&!ir(N,ue.overlapMode))return w.push(!0),!0}}}_forEachCell(r,a,h,f,v,w,S,I){const D=this._convertToXCellCoord(r),R=this._convertToYCellCoord(a),N=this._convertToXCellCoord(h),q=this._convertToYCellCoord(f);for(let Q=D;Q<=N;Q++)for(let H=R;H<=q;H++)if(v.call(this,r,a,h,f,this.xCellCount*H+Q,w,S,I))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,a,h,f,v,w){const S=f-r,I=v-a,D=h+w;return D*D>S*S+I*I}_circleAndRectCollide(r,a,h,f,v,w,S){const I=(w-f)/2,D=Math.abs(r-(f+I));if(D>I+h)return!1;const R=(S-v)/2,N=Math.abs(a-(v+R));if(N>R+h)return!1;if(D<=I||N<=R)return!0;const q=D-I,Q=N-R;return q*q+Q*Q<=h*h}}function Gr(p,r,a,h,f){const v=l.create();return r?(l.scale(v,v,[1/f,1/f,1]),a||l.rotateZ(v,v,h.angle)):l.multiply(v,h.labelPlaneMatrix,p),v}function vi(p,r,a,h,f){if(r){const v=l.clone(p);return l.scale(v,v,[f,f,1]),a||l.rotateZ(v,v,-h.angle),v}return h.glCoordMatrix}function Xt(p,r){const a=[p.x,p.y,0,1];Sr(a,a,r);const h=a[3];return{point:new l.pointGeometry(a[0]/h,a[1]/h),signedDistanceFromCamera:h}}function Xe(p,r){return .5+p/r*.5}function $t(p,r){const a=p[0]/p[3],h=p[1]/p[3];return a>=-r[0]&&a<=r[0]&&h>=-r[1]&&h<=r[1]}function qt(p,r,a,h,f,v,w,S,I){const D=h?p.textSizeData:p.iconSizeData,R=l.evaluateSizeForZoom(D,a.transform.zoom),N=[256/a.width*2+1,256/a.height*2+1],q=h?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;q.clear();const Q=p.lineVertexArray,H=h?p.text.placedSymbolArray:p.icon.placedSymbolArray,J=a.transform.width/a.transform.height;let ce=!1;for(let ue=0;ue<H.length;ue++){const ge=H.get(ue);if(ge.hidden||ge.writingMode===l.WritingMode.vertical&&!ce){Kr(ge.numGlyphs,q);continue}ce=!1;const de=[ge.anchorX,ge.anchorY,0,1];if(l.transformMat4(de,de,r),!$t(de,N)){Kr(ge.numGlyphs,q);continue}const Oe=Xe(a.transform.cameraToCenterDistance,de[3]),Te=l.evaluateSizeForFeature(D,R,ge),Ce=w?Te/Oe:Te*Oe,qe=new l.pointGeometry(ge.anchorX,ge.anchorY),rt=Xt(qe,f).point,ze={},vt=Ht(ge,Ce,!1,S,r,f,v,p.glyphOffsetArray,Q,q,rt,qe,ze,J,I);ce=vt.useVertical,(vt.notEnoughRoom||ce||vt.needsFlipping&&Ht(ge,Ce,!0,S,r,f,v,p.glyphOffsetArray,Q,q,rt,qe,ze,J,I).notEnoughRoom)&&Kr(ge.numGlyphs,q)}h?p.text.dynamicLayoutVertexBuffer.updateData(q):p.icon.dynamicLayoutVertexBuffer.updateData(q)}function Tn(p,r,a,h,f,v,w,S,I,D,R,N){const q=S.glyphStartIndex+S.numGlyphs,Q=S.lineStartIndex,H=S.lineStartIndex+S.lineLength,J=r.getoffsetX(S.glyphStartIndex),ce=r.getoffsetX(q-1),ue=si(p*J,a,h,f,v,w,S.segment,Q,H,I,D,R,N);if(!ue)return null;const ge=si(p*ce,a,h,f,v,w,S.segment,Q,H,I,D,R,N);return ge?{first:ue,last:ge}:null}function oi(p,r,a,h){return p===l.WritingMode.horizontal&&Math.abs(a.y-r.y)>Math.abs(a.x-r.x)*h?{useVertical:!0}:(p===l.WritingMode.vertical?r.y<a.y:r.x>a.x)?{needsFlipping:!0}:null}function Ht(p,r,a,h,f,v,w,S,I,D,R,N,q,Q,H){const J=r/24,ce=p.lineOffsetX*J,ue=p.lineOffsetY*J;let ge;if(p.numGlyphs>1){const de=p.glyphStartIndex+p.numGlyphs,Oe=p.lineStartIndex,Te=p.lineStartIndex+p.lineLength,Ce=Tn(J,S,ce,ue,a,R,N,p,I,v,q,H);if(!Ce)return{notEnoughRoom:!0};const qe=Xt(Ce.first.point,w).point,rt=Xt(Ce.last.point,w).point;if(h&&!a){const ze=oi(p.writingMode,qe,rt,Q);if(ze)return ze}ge=[Ce.first];for(let ze=p.glyphStartIndex+1;ze<de-1;ze++)ge.push(si(J*S.getoffsetX(ze),ce,ue,a,R,N,p.segment,Oe,Te,I,v,q,H));ge.push(Ce.last)}else{if(h&&!a){const Oe=Xt(N,f).point,Te=p.lineStartIndex+p.segment+1,Ce=new l.pointGeometry(I.getx(Te),I.gety(Te)),qe=Xt(Ce,f),rt=qe.signedDistanceFromCamera>0?qe.point:Qi(N,Ce,Oe,1,f),ze=oi(p.writingMode,Oe,rt,Q);if(ze)return ze}const de=si(J*S.getoffsetX(p.glyphStartIndex),ce,ue,a,R,N,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,I,v,q,H);if(!de)return{notEnoughRoom:!0};ge=[de]}for(const de of ge)l.addDynamicAttributes(D,de.point,de.angle);return{}}function Qi(p,r,a,h,f){const v=Xt(p.add(p.sub(r)._unit()),f).point,w=a.sub(v);return a.add(w._mult(h/w.mag()))}function si(p,r,a,h,f,v,w,S,I,D,R,N,q){const Q=h?p-r:p+r;let H=Q>0?1:-1,J=0;h&&(H*=-1,J=Math.PI),H<0&&(J+=Math.PI);let ce=H>0?S+w:S+w+1,ue=f,ge=f,de=0,Oe=0;const Te=Math.abs(Q),Ce=[];for(;de+Oe<=Te;){if(ce+=H,ce<S||ce>=I)return null;if(ge=ue,Ce.push(ue),ue=N[ce],ue===void 0){const at=new l.pointGeometry(D.getx(ce),D.gety(ce)),Rt=Xt(at,R);if(Rt.signedDistanceFromCamera>0)ue=N[ce]=Rt.point;else{const rr=ce-H;ue=Qi(de===0?v:new l.pointGeometry(D.getx(rr),D.gety(rr)),at,ge,Te-de+1,R)}}de+=Oe,Oe=ge.dist(ue)}const qe=(Te-de)/Oe,rt=ue.sub(ge),ze=rt.mult(qe)._add(ge);ze._add(rt._unit()._perp()._mult(a*H));const vt=J+Math.atan2(ue.y-ge.y,ue.x-ge.x);return Ce.push(ze),{point:ze,angle:q?vt:0,path:Ce}}const Di=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Kr(p,r){for(let a=0;a<p;a++){const h=r.length;r.resize(h+4),r.float32.set(Di,3*h)}}function Sr(p,r,a){const h=r[0],f=r[1];return p[0]=a[0]*h+a[4]*f+a[12],p[1]=a[1]*h+a[5]*f+a[13],p[3]=a[3]*h+a[7]*f+a[15],p}const Yn=100;class eo{constructor(r,a=new Sn(r.width+200,r.height+200,25),h=new Sn(r.width+200,r.height+200,25)){this.transform=r,this.grid=a,this.ignoredGrid=h,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Yn,this.screenBottomBoundary=r.height+Yn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200}placeCollisionBox(r,a,h,f,v){const w=this.projectAndGetPerspectiveRatio(f,r.anchorPointX,r.anchorPointY),S=h*w.perspectiveRatio,I=r.x1*S+w.point.x,D=r.y1*S+w.point.y,R=r.x2*S+w.point.x,N=r.y2*S+w.point.y;return!this.isInsideGrid(I,D,R,N)||a!=="always"&&this.grid.hitTest(I,D,R,N,a,v)?{box:[],offscreen:!1}:{box:[I,D,R,N],offscreen:this.isOffscreen(I,D,R,N)}}placeCollisionCircles(r,a,h,f,v,w,S,I,D,R,N,q,Q){const H=[],J=new l.pointGeometry(a.anchorX,a.anchorY),ce=Xt(J,w),ue=Xe(this.transform.cameraToCenterDistance,ce.signedDistanceFromCamera),ge=(R?v/ue:v*ue)/l.ONE_EM,de=Xt(J,S).point,Oe=Tn(ge,f,a.lineOffsetX*ge,a.lineOffsetY*ge,!1,de,J,a,h,S,{},!1);let Te=!1,Ce=!1,qe=!0;if(Oe){const rt=.5*q*ue+Q,ze=new l.pointGeometry(-100,-100),vt=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),at=new Hr,Rt=Oe.first,rr=Oe.last;let Kt=[];for(let Ft=Rt.path.length-1;Ft>=1;Ft--)Kt.push(Rt.path[Ft]);for(let Ft=1;Ft<rr.path.length;Ft++)Kt.push(rr.path[Ft]);const er=2.5*rt;if(I){const Ft=Kt.map(sr=>Xt(sr,I));Kt=Ft.some(sr=>sr.signedDistanceFromCamera<=0)?[]:Ft.map(sr=>sr.point)}let jr=[];if(Kt.length>0){const Ft=Kt[0].clone(),sr=Kt[0].clone();for(let xr=1;xr<Kt.length;xr++)Ft.x=Math.min(Ft.x,Kt[xr].x),Ft.y=Math.min(Ft.y,Kt[xr].y),sr.x=Math.max(sr.x,Kt[xr].x),sr.y=Math.max(sr.y,Kt[xr].y);jr=Ft.x>=ze.x&&sr.x<=vt.x&&Ft.y>=ze.y&&sr.y<=vt.y?[Kt]:sr.x<ze.x||Ft.x>vt.x||sr.y<ze.y||Ft.y>vt.y?[]:l.clipLine([Kt],ze.x,ze.y,vt.x,vt.y)}for(const Ft of jr){at.reset(Ft,.25*rt);let sr=0;sr=at.length<=.5*rt?1:Math.ceil(at.paddedLength/er)+1;for(let xr=0;xr<sr;xr++){const dn=xr/Math.max(sr-1,1),$n=at.lerp(dn),ei=$n.x+Yn,ti=$n.y+Yn;H.push(ei,ti,rt,0);const Hi=ei-rt,Rn=ti-rt,bi=ei+rt,co=ti+rt;if(qe=qe&&this.isOffscreen(Hi,Rn,bi,co),Ce=Ce||this.isInsideGrid(Hi,Rn,bi,co),r!=="always"&&this.grid.hitTestCircle(ei,ti,rt,r,N)&&(Te=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Te}}}}return{circles:!D&&Te||!Ce?[]:H,offscreen:qe,collisionDetected:Te}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let h=1/0,f=1/0,v=-1/0,w=-1/0;for(const R of r){const N=new l.pointGeometry(R.x+Yn,R.y+Yn);h=Math.min(h,N.x),f=Math.min(f,N.y),v=Math.max(v,N.x),w=Math.max(w,N.y),a.push(N)}const S=this.grid.query(h,f,v,w).concat(this.ignoredGrid.query(h,f,v,w)),I={},D={};for(const R of S){const N=R.key;if(I[N.bucketInstanceId]===void 0&&(I[N.bucketInstanceId]={}),I[N.bucketInstanceId][N.featureIndex])continue;const q=[new l.pointGeometry(R.x1,R.y1),new l.pointGeometry(R.x2,R.y1),new l.pointGeometry(R.x2,R.y2),new l.pointGeometry(R.x1,R.y2)];l.polygonIntersectsPolygon(a,q)&&(I[N.bucketInstanceId][N.featureIndex]=!0,D[N.bucketInstanceId]===void 0&&(D[N.bucketInstanceId]=[]),D[N.bucketInstanceId].push(N.featureIndex))}return D}insertCollisionBox(r,a,h,f,v,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:v,collisionGroupID:w,overlapMode:a},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,a,h,f,v,w){const S=h?this.ignoredGrid:this.grid,I={bucketInstanceId:f,featureIndex:v,collisionGroupID:w,overlapMode:a};for(let D=0;D<r.length;D+=4)S.insertCircle(I,r[D],r[D+1],r[D+2])}projectAndGetPerspectiveRatio(r,a,h){const f=[a,h,0,1];return Sr(f,f,r),{point:new l.pointGeometry((f[0]/f[3]+1)/2*this.transform.width+Yn,(-f[1]/f[3]+1)/2*this.transform.height+Yn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/f[3]*.5}}isOffscreen(r,a,h,f){return h<Yn||r>=this.screenRightBoundary||f<Yn||a>this.screenBottomBoundary}isInsideGrid(r,a,h,f){return h>=0&&r<this.gridRightBoundary&&f>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const r=l.identity([]);return l.translate(r,r,[-100,-100,0]),r}}function rn(p,r,a){return r*(l.EXTENT/(p.tileSize*Math.pow(2,a-p.tileID.overscaledZ)))}class ai{constructor(r,a,h,f){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?a:-a))):f&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class li{constructor(r,a,h,f,v){this.text=new ai(r?r.text:null,a,h,v),this.icon=new ai(r?r.icon:null,a,f,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class hs{constructor(r,a,h){this.text=r,this.icon=a,this.skipFade=h}}class Ao{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class Po{constructor(r,a,h,f,v){this.bucketInstanceId=r,this.featureIndex=a,this.sourceLayerIndex=h,this.bucketIndex=f,this.tileID=v}}class G{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const a=++this.maxGroupID;this.collisionGroups[r]={ID:a,predicate:h=>h.collisionGroupID===a}}return this.collisionGroups[r]}}function k(p,r,a,h,f){const{horizontalAlign:v,verticalAlign:w}=l.getAnchorAlignment(p),S=-(v-.5)*r,I=-(w-.5)*a,D=l.evaluateVariableOffset(p,h);return new l.pointGeometry(S+D[0]*f,I+D[1]*f)}function O(p,r,a,h,f,v){const{x1:w,x2:S,y1:I,y2:D,anchorPointX:R,anchorPointY:N}=p,q=new l.pointGeometry(r,a);return h&&q._rotate(f?v:-v),{x1:w+q.x,y1:I+q.y,x2:S+q.x,y2:D+q.y,anchorPointX:R,anchorPointY:N}}class U{constructor(r,a,h,f){this.transform=r.clone(),this.collisionIndex=new eo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=a,this.retainedQueryData={},this.collisionGroups=new G(h),this.collisionCircleArrays={},this.prevPlacement=f,f&&(f.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,a,h,f){const v=h.getBucket(a),w=h.latestFeatureIndex;if(!v||!w||a.id!==v.layerIds[0])return;const S=h.collisionBoxArray,I=v.layers[0].layout,D=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),R=h.tileSize/l.EXTENT,N=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),q=I.get("text-pitch-alignment")==="map",Q=I.get("text-rotation-alignment")==="map",H=rn(h,1,this.transform.zoom),J=Gr(N,q,Q,this.transform,H);let ce=null;if(q){const ge=vi(N,q,Q,this.transform,H);ce=l.multiply([],this.transform.labelPlaneMatrix,ge)}this.retainedQueryData[v.bucketInstanceId]=new Po(v.bucketInstanceId,w,v.sourceLayerIndex,v.index,h.tileID);const ue={bucket:v,layout:I,posMatrix:N,textLabelPlaneMatrix:J,labelToScreenMatrix:ce,scale:D,textPixelRatio:R,holdingForFade:h.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(f)for(const ge of v.sortKeyRanges){const{sortKey:de,symbolInstanceStart:Oe,symbolInstanceEnd:Te}=ge;r.push({sortKey:de,symbolInstanceStart:Oe,symbolInstanceEnd:Te,parameters:ue})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:ue})}attemptAnchorPlacement(r,a,h,f,v,w,S,I,D,R,N,q,Q,H,J){const ce=[q.textOffset0,q.textOffset1],ue=k(r,h,f,ce,v),ge=this.collisionIndex.placeCollisionBox(O(a,ue.x,ue.y,w,S,this.transform.angle),N,I,D,R.predicate);if((!J||this.collisionIndex.placeCollisionBox(O(J,ue.x,ue.y,w,S,this.transform.angle),N,I,D,R.predicate).box.length!==0)&&ge.box.length>0){let de;return this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(de=this.prevPlacement.variableOffsets[q.crossTileID].anchor),this.variableOffsets[q.crossTileID]={textOffset:ce,width:h,height:f,anchor:r,textBoxScale:v,prevAnchor:de},this.markUsedJustification(Q,r,q,H),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,H,q),this.placedOrientations[q.crossTileID]=H),{shift:ue,placedGlyphBoxes:ge}}}placeLayerBucketPart(r,a,h){const{bucket:f,layout:v,posMatrix:w,textLabelPlaneMatrix:S,labelToScreenMatrix:I,textPixelRatio:D,holdingForFade:R,collisionBoxArray:N,partiallyEvaluatedTextSize:q,collisionGroup:Q}=r.parameters,H=v.get("text-optional"),J=v.get("icon-optional"),ce=l.getOverlapMode(v,"text-overlap","text-allow-overlap"),ue=ce==="always",ge=l.getOverlapMode(v,"icon-overlap","icon-allow-overlap"),de=ge==="always",Oe=v.get("text-rotation-alignment")==="map",Te=v.get("text-pitch-alignment")==="map",Ce=v.get("icon-text-fit")!=="none",qe=v.get("symbol-z-order")==="viewport-y",rt=ue&&(de||!f.hasIconData()||J),ze=de&&(ue||!f.hasTextData()||H);!f.collisionArrays&&N&&f.deserializeCollisionBoxes(N);const vt=(at,Rt)=>{if(a[at.crossTileID])return;if(R)return void(this.placements[at.crossTileID]=new hs(!1,!1,!1));let rr=!1,Kt=!1,er=!0,jr=null,Ft={box:null,offscreen:null},sr={box:null,offscreen:null},xr=null,dn=null,$n=null,ei=0,ti=0,Hi=0;Rt.textFeatureIndex?ei=Rt.textFeatureIndex:at.useRuntimeCollisionCircles&&(ei=at.featureIndex),Rt.verticalTextFeatureIndex&&(ti=Rt.verticalTextFeatureIndex);const Rn=Rt.textBox;if(Rn){const qn=fr=>{let Jr=l.WritingMode.horizontal;if(f.allowVerticalPlacement&&!fr&&this.prevPlacement){const In=this.prevPlacement.placedOrientations[at.crossTileID];In&&(this.placedOrientations[at.crossTileID]=In,Jr=In,this.markUsedOrientation(f,Jr,at))}return Jr},ar=(fr,Jr)=>{if(f.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&Rt.verticalTextBox){for(const In of f.writingModes)if(In===l.WritingMode.vertical?(Ft=Jr(),sr=Ft):Ft=fr(),Ft&&Ft.box&&Ft.box.length)break}else Ft=fr()};if(v.get("text-variable-anchor")){let fr=v.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[at.crossTileID]){const zr=this.prevPlacement.variableOffsets[at.crossTileID];fr.indexOf(zr.anchor)>0&&(fr=fr.filter(uo=>uo!==zr.anchor),fr.unshift(zr.anchor))}const Jr=(zr,uo,wi)=>{const Ea=zr.x2-zr.x1,Jl=zr.y2-zr.y1,Sa=at.textBoxScale,Mu=Ce&&ge==="never"?uo:null;let ho={box:[],offscreen:!1};const Ta=ce!=="never"?2*fr.length:fr.length;for(let Ei=0;Ei<Ta;++Ei){const Vo=this.attemptAnchorPlacement(fr[Ei%fr.length],zr,Ea,Jl,Sa,Oe,Te,D,w,Q,Ei>=fr.length?ce:"never",at,f,wi,Mu);if(Vo&&(ho=Vo.placedGlyphBoxes,ho&&ho.box&&ho.box.length)){rr=!0,jr=Vo.shift;break}}return ho};ar(()=>Jr(Rn,Rt.iconBox,l.WritingMode.horizontal),()=>{const zr=Rt.verticalTextBox;return f.allowVerticalPlacement&&!(Ft&&Ft.box&&Ft.box.length)&&at.numVerticalGlyphVertices>0&&zr?Jr(zr,Rt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Ft&&(rr=Ft.box,er=Ft.offscreen);const In=qn(Ft&&Ft.box);if(!rr&&this.prevPlacement){const zr=this.prevPlacement.variableOffsets[at.crossTileID];zr&&(this.variableOffsets[at.crossTileID]=zr,this.markUsedJustification(f,zr.anchor,at,In))}}else{const fr=(Jr,In)=>{const zr=this.collisionIndex.placeCollisionBox(Jr,ce,D,w,Q.predicate);return zr&&zr.box&&zr.box.length&&(this.markUsedOrientation(f,In,at),this.placedOrientations[at.crossTileID]=In),zr};ar(()=>fr(Rn,l.WritingMode.horizontal),()=>{const Jr=Rt.verticalTextBox;return f.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&Jr?fr(Jr,l.WritingMode.vertical):{box:null,offscreen:null}}),qn(Ft&&Ft.box&&Ft.box.length)}}if(xr=Ft,rr=xr&&xr.box&&xr.box.length>0,er=xr&&xr.offscreen,at.useRuntimeCollisionCircles){const qn=f.text.placedSymbolArray.get(at.centerJustifiedTextSymbolIndex),ar=l.evaluateSizeForFeature(f.textSizeData,q,qn),fr=v.get("text-padding");dn=this.collisionIndex.placeCollisionCircles(ce,qn,f.lineVertexArray,f.glyphOffsetArray,ar,w,S,I,h,Te,Q.predicate,at.collisionCircleDiameter,fr),rr=ue||dn.circles.length>0&&!dn.collisionDetected,er=er&&dn.offscreen}if(Rt.iconFeatureIndex&&(Hi=Rt.iconFeatureIndex),Rt.iconBox){const qn=ar=>{const fr=Ce&&jr?O(ar,jr.x,jr.y,Oe,Te,this.transform.angle):ar;return this.collisionIndex.placeCollisionBox(fr,ge,D,w,Q.predicate)};sr&&sr.box&&sr.box.length&&Rt.verticalIconBox?($n=qn(Rt.verticalIconBox),Kt=$n.box.length>0):($n=qn(Rt.iconBox),Kt=$n.box.length>0),er=er&&$n.offscreen}const bi=H||at.numHorizontalGlyphVertices===0&&at.numVerticalGlyphVertices===0,co=J||at.numIconVertices===0;if(bi||co?co?bi||(Kt=Kt&&rr):rr=Kt&&rr:Kt=rr=Kt&&rr,rr&&xr&&xr.box&&this.collisionIndex.insertCollisionBox(xr.box,ce,v.get("text-ignore-placement"),f.bucketInstanceId,sr&&sr.box&&ti?ti:ei,Q.ID),Kt&&$n&&this.collisionIndex.insertCollisionBox($n.box,ge,v.get("icon-ignore-placement"),f.bucketInstanceId,Hi,Q.ID),dn&&(rr&&this.collisionIndex.insertCollisionCircles(dn.circles,ce,v.get("text-ignore-placement"),f.bucketInstanceId,ei,Q.ID),h)){const qn=f.bucketInstanceId;let ar=this.collisionCircleArrays[qn];ar===void 0&&(ar=this.collisionCircleArrays[qn]=new Ao);for(let fr=0;fr<dn.circles.length;fr+=4)ar.circles.push(dn.circles[fr+0]),ar.circles.push(dn.circles[fr+1]),ar.circles.push(dn.circles[fr+2]),ar.circles.push(dn.collisionDetected?1:0)}this.placements[at.crossTileID]=new hs(rr||rt,Kt||ze,er||f.justReloaded),a[at.crossTileID]=!0};if(qe){const at=f.getSortedSymbolIndexes(this.transform.angle);for(let Rt=at.length-1;Rt>=0;--Rt){const rr=at[Rt];vt(f.symbolInstances.get(rr),f.collisionArrays[rr])}}else for(let at=r.symbolInstanceStart;at<r.symbolInstanceEnd;at++)vt(f.symbolInstances.get(at),f.collisionArrays[at]);if(h&&f.bucketInstanceId in this.collisionCircleArrays){const at=this.collisionCircleArrays[f.bucketInstanceId];l.invert(at.invProjMatrix,w),at.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}markUsedJustification(r,a,h,f){let v;v=f===l.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(a)];const w=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const S of w)S>=0&&(r.text.placedSymbolArray.get(S).crossTileID=v>=0&&S!==v?0:h.crossTileID)}markUsedOrientation(r,a,h){const f=a===l.WritingMode.horizontal||a===l.WritingMode.horizontalOnly?a:0,v=a===l.WritingMode.vertical?a:0,w=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const S of w)r.text.placedSymbolArray.get(S).placedOrientation=f;h.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let h=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const f=a?a.symbolFadeChange(r):1,v=a?a.opacities:{},w=a?a.variableOffsets:{},S=a?a.placedOrientations:{};for(const I in this.placements){const D=this.placements[I],R=v[I];R?(this.opacities[I]=new li(R,f,D.text,D.icon),h=h||D.text!==R.text.placed||D.icon!==R.icon.placed):(this.opacities[I]=new li(null,f,D.text,D.icon,D.skipFade),h=h||D.text||D.icon)}for(const I in v){const D=v[I];if(!this.opacities[I]){const R=new li(D,f,!1,!1);R.isHidden()||(this.opacities[I]=R,h=h||D.text.placed||D.icon.placed)}}for(const I in w)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=w[I]);for(const I in S)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=S[I]);h?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:r)}updateLayerOpacities(r,a){const h={};for(const f of a){const v=f.getBucket(r);v&&f.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,h,f.collisionBoxArray)}}updateBucketOpacities(r,a,h){r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const f=r.layers[0].layout,v=new li(null,0,!1,!1,!0),w=f.get("text-allow-overlap"),S=f.get("icon-allow-overlap"),I=f.get("text-variable-anchor"),D=f.get("text-rotation-alignment")==="map",R=f.get("text-pitch-alignment")==="map",N=f.get("icon-text-fit")!=="none",q=new li(null,0,w&&(S||!r.hasIconData()||f.get("icon-optional")),S&&(w||!r.hasTextData()||f.get("text-optional")),!0);!r.collisionArrays&&h&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(h);const Q=(H,J,ce)=>{for(let ue=0;ue<J/4;ue++)H.opacityVertexArray.emplaceBack(ce)};for(let H=0;H<r.symbolInstances.length;H++){const J=r.symbolInstances.get(H),{numHorizontalGlyphVertices:ce,numVerticalGlyphVertices:ue,crossTileID:ge}=J;let de=this.opacities[ge];a[ge]?de=v:de||(de=q,this.opacities[ge]=de),a[ge]=!0;const Oe=J.numIconVertices>0,Te=this.placedOrientations[J.crossTileID],Ce=Te===l.WritingMode.vertical,qe=Te===l.WritingMode.horizontal||Te===l.WritingMode.horizontalOnly;if(ce>0||ue>0){const rt=Se(de.text);Q(r.text,ce,Ce?wt:rt),Q(r.text,ue,qe?wt:rt);const ze=de.text.isHidden();[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(Rt=>{Rt>=0&&(r.text.placedSymbolArray.get(Rt).hidden=ze||Ce?1:0)}),J.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).hidden=ze||qe?1:0);const vt=this.variableOffsets[J.crossTileID];vt&&this.markUsedJustification(r,vt.anchor,J,Te);const at=this.placedOrientations[J.crossTileID];at&&(this.markUsedJustification(r,"left",J,at),this.markUsedOrientation(r,at,J))}if(Oe){const rt=Se(de.icon),ze=!(N&&J.verticalPlacedIconSymbolIndex&&Ce);J.placedIconSymbolIndex>=0&&(Q(r.icon,J.numIconVertices,ze?rt:wt),r.icon.placedSymbolArray.get(J.placedIconSymbolIndex).hidden=de.icon.isHidden()),J.verticalPlacedIconSymbolIndex>=0&&(Q(r.icon,J.numVerticalIconVertices,ze?wt:rt),r.icon.placedSymbolArray.get(J.verticalPlacedIconSymbolIndex).hidden=de.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const rt=r.collisionArrays[H];if(rt){let ze=new l.pointGeometry(0,0);if(rt.textBox||rt.verticalTextBox){let at=!0;if(I){const Rt=this.variableOffsets[ge];Rt?(ze=k(Rt.anchor,Rt.width,Rt.height,Rt.textOffset,Rt.textBoxScale),D&&ze._rotate(R?this.transform.angle:-this.transform.angle)):at=!1}rt.textBox&&Z(r.textCollisionBox.collisionVertexArray,de.text.placed,!at||Ce,ze.x,ze.y),rt.verticalTextBox&&Z(r.textCollisionBox.collisionVertexArray,de.text.placed,!at||qe,ze.x,ze.y)}const vt=Boolean(!qe&&rt.verticalIconBox);rt.iconBox&&Z(r.iconCollisionBox.collisionVertexArray,de.icon.placed,vt,N?ze.x:0,N?ze.y:0),rt.verticalIconBox&&Z(r.iconCollisionBox.collisionVertexArray,de.icon.placed,!vt,N?ze.x:0,N?ze.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.bucketInstanceId in this.collisionCircleArrays){const H=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=H.invProjMatrix,r.placementViewportMatrix=H.viewportMatrix,r.collisionCircleArray=H.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,a){const h=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*h>r}setStale(){this.stale=!0}}function Z(p,r,a,h,f){p.emplaceBack(r?1:0,a?1:0,h||0,f||0),p.emplaceBack(r?1:0,a?1:0,h||0,f||0),p.emplaceBack(r?1:0,a?1:0,h||0,f||0),p.emplaceBack(r?1:0,a?1:0,h||0,f||0)}const X=Math.pow(2,25),oe=Math.pow(2,24),re=Math.pow(2,17),ie=Math.pow(2,16),ae=Math.pow(2,9),Pe=Math.pow(2,8),Ne=Math.pow(2,1);function Se(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const r=p.placed?1:0,a=Math.floor(127*p.opacity);return a*X+r*oe+a*re+r*ie+a*ae+r*Pe+a*Ne+r}const wt=0;class pt{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,a,h,f,v){const w=this._bucketParts;for(;this._currentTileIndex<r.length;)if(a.getBucketParts(w,f,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((S,I)=>S.sortKey-I.sortKey));this._currentPartIndex<w.length;)if(a.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,v())return!0;return!1}}class St{constructor(r,a,h,f,v,w,S){this.placement=new U(r,v,w,S),this._currentPlacementIndex=a.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=f,this._done=!1}isDone(){return this._done}continuePlacement(r,a,h){const f=l.exported.now(),v=()=>{const w=l.exported.now()-f;return!this._forceFullPlacement&&w>2};for(;this._currentPlacementIndex>=0;){const w=a[r[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=S)&&(!w.maxzoom||w.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new pt(w)),this._inProgressLayer.continuePlacement(h[w.source],this.placement,this._showCollisionBoxes,w,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Ct=512/l.EXTENT/2;class or{constructor(r,a,h){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(let f=0;f<a.length;f++){const v=a.get(f),w=v.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:v.crossTileID,coord:this.getScaledCoordinates(v,r)})}}getScaledCoordinates(r,a){const h=Ct/Math.pow(2,a.canonical.z-this.tileID.canonical.z);return{x:Math.floor((a.canonical.x*l.EXTENT+r.anchorX)*h),y:Math.floor((a.canonical.y*l.EXTENT+r.anchorY)*h)}}findMatches(r,a,h){const f=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let v=0;v<r.length;v++){const w=r.get(v);if(w.crossTileID)continue;const S=this.indexedSymbolInstances[w.key];if(!S)continue;const I=this.getScaledCoordinates(w,a);for(const D of S)if(Math.abs(D.coord.x-I.x)<=f&&Math.abs(D.coord.y-I.y)<=f&&!h[D.crossTileID]){h[D.crossTileID]=!0,w.crossTileID=D.crossTileID;break}}}}class Qt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const a=Math.round((r-this.lng)/360);if(a!==0)for(const h in this.indexes){const f=this.indexes[h],v={};for(const w in f){const S=f[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+a),v[S.tileID.key]=S}this.indexes[h]=v}this.lng=r}addBucket(r,a,h){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<a.symbolInstances.length;v++)a.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const f=this.usedCrossTileIDs[r.overscaledZ];for(const v in this.indexes){const w=this.indexes[v];if(Number(v)>r.overscaledZ)for(const S in w){const I=w[S];I.tileID.isChildOf(r)&&I.findMatches(a.symbolInstances,r,f)}else{const S=w[r.scaledTo(Number(v)).key];S&&S.findMatches(a.symbolInstances,r,f)}}for(let v=0;v<a.symbolInstances.length;v++){const w=a.symbolInstances.get(v);w.crossTileID||(w.crossTileID=h.generate(),f[w.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new or(r,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(r,a){for(const h in a.indexedSymbolInstances)for(const f of a.indexedSymbolInstances[h])delete this.usedCrossTileIDs[r][f.crossTileID]}removeStaleBuckets(r){let a=!1;for(const h in this.indexes){const f=this.indexes[h];for(const v in f)r[f[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,f[v]),delete f[v],a=!0)}return a}}class Gt{constructor(){this.layerIndexes={},this.crossTileIDs=new Qt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,a,h){let f=this.layerIndexes[r.id];f===void 0&&(f=this.layerIndexes[r.id]=new Wt);let v=!1;const w={};f.handleWrapJump(h);for(const S of a){const I=S.getBucket(r);I&&r.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(S.tileID,I,this.crossTileIDs)&&(v=!0),w[I.bucketInstanceId]=!0)}return f.removeStaleBuckets(w)&&(v=!0),v}pruneUnusedLayers(r){const a={};r.forEach(h=>{a[h]=!0});for(const h in this.layerIndexes)a[h]||delete this.layerIndexes[h]}}const Ut=(p,r)=>l.emitValidationErrors(p,r&&r.filter(a=>a.identifier!=="source.canvas")),Zr=l.pick(et,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Vr=l.pick(et,["setCenter","setZoom","setBearing","setPitch"]),an=function(){const p={},r=l.spec.$version;for(const a in l.spec.$root){const h=l.spec.$root[a];if(h.required){let f=null;f=a==="version"?r:h.type==="array"?[]:{},f!=null&&(p[a]=f)}}return p}();class hn extends l.Evented{constructor(r,a={}){super(),this.map=r,this.dispatcher=new Ke($e(),this),this.imageManager=new Ae,this.imageManager.setEventedParent(this),this.glyphManager=new ot(r._requestManager,a.localIdeographFontFamily),this.lineAtlas=new Je(256,512),this.crossTileSymbolIndex=new Gt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const h=this;this._rtlTextPluginCallback=hn.registerForPluginStateChange(f=>{h.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:f.pluginStatus,pluginURL:f.pluginURL},(v,w)=>{if(l.triggerPluginCompletionEvent(v),w&&w.every(S=>S))for(const S in h.sourceCaches)h.sourceCaches[S].reload()})}),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const v=this.sourceCaches[f.sourceId];if(!v)return;const w=v.getSource();if(w&&w.vectorLayerIds)for(const S in this._layers){const I=this._layers[S];I.source===w.id&&this._validateLayer(I)}})}loadURL(r,a={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const h=typeof a.validate!="boolean"||a.validate,f=this.map._requestManager.transformRequest(r,l.ResourceType.Style);this._request=l.getJSON(f,(v,w)=>{this._request=null,v?this.fire(new l.ErrorEvent(v)):w&&this._load(w,h)})}loadJSON(r,a={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(r,a.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(an,!1)}_load(r,a){if(a&&Ut(this,l.validateStyle(r)))return;this._loaded=!0,this.stylesheet=r;for(const f in r.sources)this.addSource(f,r.sources[f],{validate:!1});r.sprite?this._loadSprite(r.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(r.glyphs);const h=He(this.stylesheet.layers);this._order=h.map(f=>f.id),this._layers={},this._serializedLayers={};for(let f of h)f=l.createStyleLayer(f),f.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=f,this._serializedLayers[f.id]=f.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new De(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(r){this._spriteRequest=function(a,h,f,v){let w,S,I;const D=f>1?"@2x":"";let R=l.getJSON(h.transformRequest(h.normalizeSpriteURL(a,D,".json"),l.ResourceType.SpriteJSON),(Q,H)=>{R=null,I||(I=Q,w=H,q())}),N=l.getImage(h.transformRequest(h.normalizeSpriteURL(a,D,".png"),l.ResourceType.SpriteImage),(Q,H)=>{N=null,I||(I=Q,S=H,q())});function q(){if(I)v(I);else if(w&&S){const Q=l.exported.getImageData(S),H={};for(const J in w){const{width:ce,height:ue,x:ge,y:de,sdf:Oe,pixelRatio:Te,stretchX:Ce,stretchY:qe,content:rt}=w[J],ze=new l.RGBAImage({width:ce,height:ue});l.RGBAImage.copy(Q,ze,{x:ge,y:de},{x:0,y:0},{width:ce,height:ue}),H[J]={data:ze,pixelRatio:Te,sdf:Oe,stretchX:Ce,stretchY:qe,content:rt}}v(null,H)}}return{cancel(){R&&(R.cancel(),R=null),N&&(N.cancel(),N=null)}}}(r,this.map._requestManager,this.map.getPixelRatio(),(a,h)=>{if(this._spriteRequest=null,a)this.fire(new l.ErrorEvent(a));else if(h)for(const f in h)this.imageManager.addImage(f,h[f]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(r){const a=this.sourceCaches[r.source];if(!a)return;const h=r.sourceLayer;if(!h)return;const f=a.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(h)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${h}" does not exist on source "${f.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(r){const a=[];for(const h of r){const f=this._layers[h];f.type!=="custom"&&a.push(f.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const a=this._changed;if(this._changed){const f=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(f.length||v.length)&&this._updateWorkerLayers(f,v);for(const w in this._updatedSources){const S=this._updatedSources[w];S==="reload"?this._reloadSource(w):S==="clear"&&this._clearSource(w)}this._updateTilesForChangedImages();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const h={};for(const f in this.sourceCaches){const v=this.sourceCaches[f];h[f]=v.used,v.used=!1}for(const f of this._order){const v=this._layers[f];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const f in h){const v=this.sourceCaches[f];h[f]!==v.used&&v.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(r),this.z=r.zoom,a&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateWorkerLayers(r,a){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(r){if(this._checkLoaded(),Ut(this,l.validateStyle(r)))return!1;(r=l.clone$1(r)).layers=He(r.layers);const a=function(f,v){if(!f)return[{command:et.setStyle,args:[v]}];let w=[];try{if(!F(f.version,v.version))return[{command:et.setStyle,args:[v]}];F(f.center,v.center)||w.push({command:et.setCenter,args:[v.center]}),F(f.zoom,v.zoom)||w.push({command:et.setZoom,args:[v.zoom]}),F(f.bearing,v.bearing)||w.push({command:et.setBearing,args:[v.bearing]}),F(f.pitch,v.pitch)||w.push({command:et.setPitch,args:[v.pitch]}),F(f.sprite,v.sprite)||w.push({command:et.setSprite,args:[v.sprite]}),F(f.glyphs,v.glyphs)||w.push({command:et.setGlyphs,args:[v.glyphs]}),F(f.transition,v.transition)||w.push({command:et.setTransition,args:[v.transition]}),F(f.light,v.light)||w.push({command:et.setLight,args:[v.light]});const S={},I=[];(function(R,N,q,Q){let H;for(H in N=N||{},R=R||{})Object.prototype.hasOwnProperty.call(R,H)&&(Object.prototype.hasOwnProperty.call(N,H)||yt(H,q,Q));for(H in N)Object.prototype.hasOwnProperty.call(N,H)&&(Object.prototype.hasOwnProperty.call(R,H)?F(R[H],N[H])||(R[H].type==="geojson"&&N[H].type==="geojson"&&Vt(R,N,H)?q.push({command:et.setGeoJSONSourceData,args:[H,N[H].data]}):Pt(H,N,q,Q)):bt(H,N,q))})(f.sources,v.sources,I,S);const D=[];f.layers&&f.layers.forEach(R=>{S[R.source]?w.push({command:et.removeLayer,args:[R.id]}):D.push(R)}),w=w.concat(I),function(R,N,q){N=N||[];const Q=(R=R||[]).map(Ue),H=N.map(Ue),J=R.reduce(ur,{}),ce=N.reduce(ur,{}),ue=Q.slice(),ge=Object.create(null);let de,Oe,Te,Ce,qe,rt,ze;for(de=0,Oe=0;de<Q.length;de++)Te=Q[de],Object.prototype.hasOwnProperty.call(ce,Te)?Oe++:(q.push({command:et.removeLayer,args:[Te]}),ue.splice(ue.indexOf(Te,Oe),1));for(de=0,Oe=0;de<H.length;de++)Te=H[H.length-1-de],ue[ue.length-1-de]!==Te&&(Object.prototype.hasOwnProperty.call(J,Te)?(q.push({command:et.removeLayer,args:[Te]}),ue.splice(ue.lastIndexOf(Te,ue.length-Oe),1)):Oe++,rt=ue[ue.length-de],q.push({command:et.addLayer,args:[ce[Te],rt]}),ue.splice(ue.length-de,0,Te),ge[Te]=!0);for(de=0;de<H.length;de++)if(Te=H[de],Ce=J[Te],qe=ce[Te],!ge[Te]&&!F(Ce,qe))if(F(Ce.source,qe.source)&&F(Ce["source-layer"],qe["source-layer"])&&F(Ce.type,qe.type)){for(ze in ve(Ce.layout,qe.layout,q,Te,null,et.setLayoutProperty),ve(Ce.paint,qe.paint,q,Te,null,et.setPaintProperty),F(Ce.filter,qe.filter)||q.push({command:et.setFilter,args:[Te,qe.filter]}),F(Ce.minzoom,qe.minzoom)&&F(Ce.maxzoom,qe.maxzoom)||q.push({command:et.setLayerZoomRange,args:[Te,qe.minzoom,qe.maxzoom]}),Ce)Object.prototype.hasOwnProperty.call(Ce,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?ve(Ce[ze],qe[ze],q,Te,ze.slice(6),et.setPaintProperty):F(Ce[ze],qe[ze])||q.push({command:et.setLayerProperty,args:[Te,ze,qe[ze]]}));for(ze in qe)Object.prototype.hasOwnProperty.call(qe,ze)&&!Object.prototype.hasOwnProperty.call(Ce,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?ve(Ce[ze],qe[ze],q,Te,ze.slice(6),et.setPaintProperty):F(Ce[ze],qe[ze])||q.push({command:et.setLayerProperty,args:[Te,ze,qe[ze]]}))}else q.push({command:et.removeLayer,args:[Te]}),rt=ue[ue.lastIndexOf(Te)+1],q.push({command:et.addLayer,args:[qe,rt]})}(D,v.layers,w)}catch(S){console.warn("Unable to compute style diff:",S),w=[{command:et.setStyle,args:[v]}]}return w}(this.serialize(),r).filter(f=>!(f.command in Vr));if(a.length===0)return!1;const h=a.filter(f=>!(f.command in Zr));if(h.length>0)throw new Error(`Unimplemented: ${h.map(f=>f.command).join(", ")}.`);return a.forEach(f=>{f.command!=="setTransition"&&this[f.command].apply(this,f.args)}),this.stylesheet=r,!0}addImage(r,a){if(this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,a),this._afterImageUpdated(r)}updateImage(r,a){this.imageManager.updateImage(r,a)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,a,h={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(l.validateStyle.source,`sources.${r}`,a,null,h))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const f=this.sourceCaches[r]=new W(r,a,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:f.serialize(),sourceId:r})),f.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===r)return this.fire(new l.ErrorEvent(new Error(`Source "${r}" cannot be removed while layer "${h}" is using it.`)));const a=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],a.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,a){this._checkLoaded(),this.sourceCaches[r].getSource().setData(a),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,a,h={}){this._checkLoaded();const f=r.id;if(this.getLayer(f))return void this.fire(new l.ErrorEvent(new Error(`Layer "${f}" already exists on this map.`)));let v;if(r.type==="custom"){if(Ut(this,l.validateCustomStyleLayer(r)))return;v=l.createStyleLayer(r)}else{if(typeof r.source=="object"&&(this.addSource(f,r.source),r=l.clone$1(r),r=l.extend(r,{source:f})),this._validate(l.validateStyle.layer,`layers.${f}`,r,{arrayIndex:-1},h))return;v=l.createStyleLayer(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:f}}),this._serializedLayers[v.id]=v.serialize()}const w=a?this._order.indexOf(a):this._order.length;if(a&&w===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${f}" before non-existing layer "${a}".`)));else{if(this._order.splice(w,0,f),this._layerOrderChanged=!0,this._layers[f]=v,this._removedLayers[f]&&v.source&&v.type!=="custom"){const S=this._removedLayers[f];delete this._removedLayers[f],S.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,a){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===a)return;const h=this._order.indexOf(r);this._order.splice(h,1);const f=a?this._order.indexOf(a):this._order.length;a&&f===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${r}" before non-existing layer "${a}".`))):(this._order.splice(f,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const a=this._layers[r];if(!a)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${r}".`)));a.setEventedParent(null);const h=this._order.indexOf(r);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=a,delete this._layers[r],delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],a.onRemove&&a.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,a,h){this._checkLoaded();const f=this.getLayer(r);f?f.minzoom===a&&f.maxzoom===h||(a!=null&&(f.minzoom=a),h!=null&&(f.maxzoom=h),this._updateLayer(f)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,a,h={}){this._checkLoaded();const f=this.getLayer(r);if(f){if(!F(f.filter,a))return a==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(l.validateStyle.filter,`layers.${f.id}.filter`,a,null,h)||(f.filter=l.clone$1(a),this._updateLayer(f)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.clone$1(this.getLayer(r).filter)}setLayoutProperty(r,a,h,f={}){this._checkLoaded();const v=this.getLayer(r);v?F(v.getLayoutProperty(a),h)||(v.setLayoutProperty(a,h,f),this._updateLayer(v)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,a){const h=this.getLayer(r);if(h)return h.getLayoutProperty(a);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,a,h,f={}){this._checkLoaded();const v=this.getLayer(r);v?F(v.getPaintProperty(a),h)||(v.setPaintProperty(a,h,f)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,a){return this.getLayer(r).getPaintProperty(a)}setFeatureState(r,a){this._checkLoaded();const h=r.source,f=r.sourceLayer,v=this.sourceCaches[h];if(v===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const w=v.getSource().type;w==="geojson"&&f?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||f?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),v.setFeatureState(f,r.id,a)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,a){this._checkLoaded();const h=r.source,f=this.sourceCaches[h];if(f===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const v=f.getSource().type,w=v==="vector"?r.sourceLayer:void 0;v!=="vector"||w?a&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(w,r.id,a):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const a=r.source,h=r.sourceLayer,f=this.sourceCaches[a];if(f!==void 0)return f.getSource().type!=="vector"||h?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),f.getFeatureState(h,r.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,r=>r.serialize()),layers:this._serializeLayers(this._order)},r=>r!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(r){const a=w=>this._layers[w].type==="fill-extrusion",h={},f=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(a(S)){h[S]=w;for(const I of r){const D=I[S];if(D)for(const R of D)f.push(R)}}}f.sort((w,S)=>S.intersectionZ-w.intersectionZ);const v=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(a(S))for(let I=f.length-1;I>=0;I--){const D=f[I].feature;if(h[D.layer.id]<w)break;v.push(D),f.pop()}else for(const I of r){const D=I[S];if(D)for(const R of D)v.push(R.feature)}}return v}queryRenderedFeatures(r,a,h){a&&a.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",a.filter,null,a);const f={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const w of a.layers){const S=this._layers[w];if(!S)return this.fire(new l.ErrorEvent(new Error(`The layer '${w}' does not exist in the map's style and cannot be queried for features.`))),[];f[S.source]=!0}}const v=[];a.availableImages=this._availableImages;for(const w in this.sourceCaches)a.layers&&!f[w]||v.push(ft(this.sourceCaches[w],this._layers,this._serializedLayers,r,a,h));return this.placement&&v.push(function(w,S,I,D,R,N,q){const Q={},H=N.queryRenderedSymbols(D),J=[];for(const ce of Object.keys(H).map(Number))J.push(q[ce]);J.sort(Zt);for(const ce of J){const ue=ce.featureIndex.lookupSymbolFeatures(H[ce.bucketInstanceId],S,ce.bucketIndex,ce.sourceLayerIndex,R.filter,R.layers,R.availableImages,w);for(const ge in ue){const de=Q[ge]=Q[ge]||[],Oe=ue[ge];Oe.sort((Te,Ce)=>{const qe=ce.featureSortOrder;if(qe){const rt=qe.indexOf(Te.featureIndex);return qe.indexOf(Ce.featureIndex)-rt}return Ce.featureIndex-Te.featureIndex});for(const Te of Oe)de.push(Te)}}for(const ce in Q)Q[ce].forEach(ue=>{const ge=ue.feature,de=I[w[ce].source].getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=de});return Q}(this._layers,this._serializedLayers,this.sourceCaches,r,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,a){a&&a.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",a.filter,null,a);const h=this.sourceCaches[r];return h?function(f,v){const w=f.getRenderableIds().map(D=>f.getTileByID(D)),S=[],I={};for(let D=0;D<w.length;D++){const R=w[D],N=R.tileID.canonical.key;I[N]||(I[N]=!0,R.querySourceFeatures(S,v))}return S}(h,a):[]}addSourceType(r,a,h){return hn.getSourceType(r)?h(new Error(`A source type called "${r}" already exists.`)):(hn.setSourceType(r,a),a.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:a.workerSourceURL},h):h(null,null))}getLight(){return this.light.getLight()}setLight(r,a={}){this._checkLoaded();const h=this.light.getLight();let f=!1;for(const w in r)if(!F(r[w],h[w])){f=!0;break}if(!f)return;const v={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,a),this.light.updateTransitions(v)}_validate(r,a,h,f,v={}){return(!v||v.validate!==!1)&&Ut(this,r.call(l.validateStyle,l.extend({key:a,style:this.serialize(),value:h,styleSpec:l.spec},f)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const r in this._layers)this._layers[r].setEventedParent(null);for(const r in this.sourceCaches){const a=this.sourceCaches[r];a.setEventedParent(null),a.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const a in this.sourceCaches)this.sourceCaches[a].update(r)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,a,h,f,v=!1){let w=!1,S=!1;const I={};for(const D of this._order){const R=this._layers[D];if(R.type!=="symbol")continue;if(!I[R.source]){const q=this.sourceCaches[R.source];I[R.source]=q.getRenderableIds(!0).map(Q=>q.getTileByID(Q)).sort((Q,H)=>H.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(H.tileID)?-1:1))}const N=this.crossTileSymbolIndex.addLayer(R,I[R.source],r.center.lng);w=w||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),r.zoom))&&(this.pauseablePlacement=new St(r,this._order,v,a,h,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),S=!0),w&&this.pauseablePlacement.placement.setStale()),S||w)for(const D of this._order){const R=this._layers[D];R.type==="symbol"&&this.placement.updateLayerOpacities(R,I[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,a,h){this.imageManager.getImages(a.icons,h),this._updateTilesForChangedImages();const f=this.sourceCaches[a.source];f&&f.setDependencies(a.tileID.key,a.type,a.icons)}getGlyphs(r,a,h){this.glyphManager.getGlyphs(a.stacks,h)}getResource(r,a,h){return l.makeRequest(a,h)}}hn.getSourceType=function(p){return lt[p]},hn.setSourceType=function(p,r){lt[p]=r},hn.registerForPluginStateChange=l.registerForPluginStateChange;var fl=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ml={prelude:Tr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:Tr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Tr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Tr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Tr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Tr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Tr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Tr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:Tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Tr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Tr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Tr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Tr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Tr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Tr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:Tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:Tr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Tr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:Tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function Tr(p,r){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=r.match(/attribute ([\w]+) ([\w]+)/g),f=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=v?v.concat(f):f,S={};return{fragmentSource:p=p.replace(a,(I,D,R,N,q)=>(S[q]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${R} ${N} ${q};
#else
uniform ${R} ${N} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${R} ${N} ${q} = u_${q};
#endif
`)),vertexSource:r=r.replace(a,(I,D,R,N,q)=>{const Q=N==="float"?"vec2":"vec4",H=q.match(/color/)?"color":Q;return S[q]?D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${R} ${Q} a_${q};
varying ${R} ${N} ${q};
#else
uniform ${R} ${N} u_${q};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${R} ${N} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${H}(a_${q}, u_${q}_t);
#else
    ${R} ${N} ${q} = u_${q};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${R} ${Q} a_${q};
#else
uniform ${R} ${N} u_${q};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${R} ${N} ${q} = a_${q};
#else
    ${R} ${N} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${R} ${N} ${q} = unpack_mix_${H}(a_${q}, u_${q}_t);
#else
    ${R} ${N} ${q} = u_${q};
#endif
`}),staticAttributes:h,staticUniforms:w}}class _d{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,a,h,f,v,w,S,I){this.context=r;let D=this.boundPaintVertexBuffers.length!==f.length;for(let R=0;!D&&R<f.length;R++)this.boundPaintVertexBuffers[R]!==f[R]&&(D=!0);r.extVertexArrayObject&&this.vao&&this.boundProgram===a&&this.boundLayoutVertexBuffer===h&&!D&&this.boundIndexBuffer===v&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===S&&this.boundDynamicVertexBuffer2===I?(r.bindVertexArrayOES.set(this.vao),S&&S.bind(),v&&v.dynamicDraw&&v.bind(),I&&I.bind()):this.freshBind(a,h,f,v,w,S,I)}freshBind(r,a,h,f,v,w,S){let I;const D=r.numAttributes,R=this.context,N=R.gl;if(R.extVertexArrayObject)this.vao&&this.destroy(),this.vao=R.extVertexArrayObject.createVertexArrayOES(),R.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=r,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=f,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=S;else{I=R.currentNumAttributes||0;for(let q=D;q<I;q++)N.disableVertexAttribArray(q)}a.enableAttributes(N,r);for(const q of h)q.enableAttributes(N,r);w&&w.enableAttributes(N,r),S&&S.enableAttributes(N,r),a.bind(),a.setVertexAttribPointers(N,r,v);for(const q of h)q.bind(),q.setVertexAttribPointers(N,r,v);w&&(w.bind(),w.setVertexAttribPointers(N,r,v)),f&&f.bind(),S&&(S.bind(),S.setVertexAttribPointers(N,r,v)),R.currentNumAttributes=D}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function gl(p){const r=[];for(let a=0;a<p.length;a++){if(p[a]===null)continue;const h=p[a].split(" ");r.push(h.pop())}return r}class yd{constructor(r,a,h,f,v,w){const S=r.gl;this.program=S.createProgram();const I=gl(h.staticAttributes),D=f?f.getBinderAttributes():[],R=I.concat(D),N=h.staticUniforms?gl(h.staticUniforms):[],q=f?f.getBinderUniforms():[],Q=N.concat(q),H=[];for(const Te of Q)H.indexOf(Te)<0&&H.push(Te);const J=f?f.defines():[];w&&J.push("#define OVERDRAW_INSPECTOR;");const ce=J.concat(ml.prelude.fragmentSource,h.fragmentSource).join(`
`),ue=J.concat(ml.prelude.vertexSource,h.vertexSource).join(`
`),ge=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(ge,ce),S.compileShader(ge),S.attachShader(this.program,ge);const de=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(de,ue),S.compileShader(de),S.attachShader(this.program,de),this.attributes={};const Oe={};this.numAttributes=R.length;for(let Te=0;Te<this.numAttributes;Te++)R[Te]&&(S.bindAttribLocation(this.program,Te,R[Te]),this.attributes[R[Te]]=Te);S.linkProgram(this.program),S.deleteShader(de),S.deleteShader(ge);for(let Te=0;Te<H.length;Te++){const Ce=H[Te];if(Ce&&!Oe[Ce]){const qe=S.getUniformLocation(this.program,Ce);qe&&(Oe[Ce]=qe)}}this.fixedUniforms=v(r,Oe),this.binderUniforms=f?f.getUniforms(r,Oe):[]}draw(r,a,h,f,v,w,S,I,D,R,N,q,Q,H,J,ce){const ue=r.gl;if(this.failedToCreate)return;r.program.set(this.program),r.setDepthMode(h),r.setStencilMode(f),r.setColorMode(v),r.setCullFace(w);for(const de in this.fixedUniforms)this.fixedUniforms[de].set(S[de]);H&&H.setUniforms(r,this.binderUniforms,q,{zoom:Q});const ge={[ue.LINES]:2,[ue.TRIANGLES]:3,[ue.LINE_STRIP]:1}[a];for(const de of N.get()){const Oe=de.vaos||(de.vaos={});(Oe[I]||(Oe[I]=new _d)).bind(r,this,D,H?H.getPaintVertexBuffers():[],R,de.vertexOffset,J,ce),ue.drawElements(a,de.primitiveLength*ge,ue.UNSIGNED_SHORT,de.primitiveOffset*ge*2)}}}function _l(p,r,a){const h=1/rn(a,1,r.transform.tileZoom),f=Math.pow(2,a.tileID.overscaledZ),v=a.tileSize*Math.pow(2,r.transform.tileZoom)/f,w=v*(a.tileID.canonical.x+a.tileID.wrap*f),S=v*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[h,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[w>>16,S>>16],u_pixel_coord_lower:[65535&w,65535&S]}}const ru=(p,r,a,h)=>{const f=r.style.light,v=f.properties.get("position"),w=[v.x,v.y,v.z],S=function(){var D=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();f.properties.get("anchor")==="viewport"&&function(D,R){var N=Math.sin(R),q=Math.cos(R);D[0]=q,D[1]=N,D[2]=0,D[3]=-N,D[4]=q,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(S,-r.transform.angle),function(D,R,N){var q=R[0],Q=R[1],H=R[2];D[0]=q*N[0]+Q*N[3]+H*N[6],D[1]=q*N[1]+Q*N[4]+H*N[7],D[2]=q*N[2]+Q*N[5]+H*N[8]}(w,w,S);const I=f.properties.get("color");return{u_matrix:p,u_lightpos:w,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+a,u_opacity:h}},yl=(p,r,a,h,f,v,w)=>l.extend(ru(p,r,a,h),_l(v,r,w),{u_height_factor:-Math.pow(2,f.overscaledZ)/w.tileSize/8}),vl=p=>({u_matrix:p}),xl=(p,r,a,h)=>l.extend(vl(p),_l(a,r,h)),nu=(p,r)=>({u_matrix:p,u_world:r}),iu=(p,r,a,h,f)=>l.extend(xl(p,r,a,h),{u_world:f}),to=(p,r,a,h)=>{const f=p.transform;let v,w;if(h.paint.get("circle-pitch-alignment")==="map"){const S=rn(a,1,f.zoom);v=!0,w=[S,S]}else v=!1,w=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(r.posMatrix,a,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:w}},Xs=(p,r,a)=>{const h=rn(a,1,r.zoom),f=Math.pow(2,r.zoom-a.tileID.overscaledZ),v=a.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[r.pixelsToGLUnits[0]/(h*f),r.pixelsToGLUnits[1]/(h*f)],u_overscale_factor:v}},Co=(p,r,a=1)=>({u_matrix:p,u_color:r,u_overlay:0,u_overlay_scale:a}),ds=p=>({u_matrix:p}),Js=(p,r,a,h)=>({u_matrix:p,u_extrude_scale:rn(r,1,a),u_intensity:h});function Ys(p,r){const a=Math.pow(2,r.canonical.z),h=r.canonical.y;return[new l.MercatorCoordinate(0,h/a).toLngLat().lat,new l.MercatorCoordinate(0,(h+1)/a).toLngLat().lat]}const ps=(p,r,a)=>{const h=p.transform;return{u_matrix:bl(p,r,a),u_ratio:1/rn(r,1,h.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},Qs=(p,r,a,h)=>l.extend(ps(p,r,a),{u_image:0,u_image_height:h}),fs=(p,r,a,h)=>{const f=p.transform,v=ms(r,f);return{u_matrix:bl(p,r,a),u_texsize:r.imageAtlasTexture.size,u_ratio:1/rn(r,1,f.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[v,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},Xr=(p,r,a,h,f)=>{const v=p.lineAtlas,w=ms(r,p.transform),S=a.layout.get("line-cap")==="round",I=v.getDash(h.from,S),D=v.getDash(h.to,S),R=I.width*f.fromScale,N=D.width*f.toScale;return l.extend(ps(p,r,a),{u_patternscale_a:[w/R,-I.height/2],u_patternscale_b:[w/N,-D.height/2],u_sdfgamma:v.width/(256*Math.min(R,N)*p.pixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:D.y,u_mix:f.t})};function ms(p,r){return 1/rn(p,1,r.tileZoom)}function bl(p,r,a){return p.translatePosMatrix(r.tileID.posMatrix,r,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const ou=(p,r,a,h,f)=>{return{u_matrix:p,u_tl_parent:r,u_scale_parent:a,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(w=f.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(v=f.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:su(f.paint.get("raster-hue-rotate"))};var v,w};function su(p){p*=Math.PI/180;const r=Math.sin(p),a=Math.cos(p);return[(2*a+1)/3,(-Math.sqrt(3)*r-a+1)/3,(Math.sqrt(3)*r-a+1)/3]}const ea=(p,r,a,h,f,v,w,S,I,D)=>{const R=f.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:R.cameraToCenterDistance,u_pitch:R.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:R.width/R.height,u_fade_change:f.options.fadeDuration?f.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:w,u_coord_matrix:S,u_is_text:+I,u_pitch_with_map:+h,u_texsize:D,u_texture:0}},wl=(p,r,a,h,f,v,w,S,I,D,R)=>{const N=f.transform;return l.extend(ea(p,r,a,h,f,v,w,S,I,D),{u_gamma_scale:h?Math.cos(N._pitch)*N.cameraToCenterDistance:1,u_device_pixel_ratio:f.pixelRatio,u_is_halo:+R})},vd=(p,r,a,h,f,v,w,S,I,D)=>l.extend(wl(p,r,a,h,f,v,w,S,!0,I,!0),{u_texsize_icon:D,u_texture_icon:1}),xd=(p,r,a)=>({u_matrix:p,u_opacity:r,u_color:a}),El=(p,r,a,h,f,v)=>l.extend(function(w,S,I,D){const R=I.imageManager.getPattern(w.from.toString()),N=I.imageManager.getPattern(w.to.toString()),{width:q,height:Q}=I.imageManager.getPixelSize(),H=Math.pow(2,D.tileID.overscaledZ),J=D.tileSize*Math.pow(2,I.transform.tileZoom)/H,ce=J*(D.tileID.canonical.x+D.tileID.wrap*H),ue=J*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[q,Q],u_mix:S.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/rn(D,1,I.transform.tileZoom),u_pixel_coord_upper:[ce>>16,ue>>16],u_pixel_coord_lower:[65535&ce,65535&ue]}}(h,v,a,f),{u_matrix:p,u_opacity:r}),Sl={fillExtrusion:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_lightpos:new l.Uniform3f(p,r.u_lightpos),u_lightintensity:new l.Uniform1f(p,r.u_lightintensity),u_lightcolor:new l.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,r.u_vertical_gradient),u_opacity:new l.Uniform1f(p,r.u_opacity)}),fillExtrusionPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_lightpos:new l.Uniform3f(p,r.u_lightpos),u_lightintensity:new l.Uniform1f(p,r.u_lightintensity),u_lightcolor:new l.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,r.u_vertical_gradient),u_height_factor:new l.Uniform1f(p,r.u_height_factor),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade),u_opacity:new l.Uniform1f(p,r.u_opacity)}),fill:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),fillPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),fillOutline:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world)}),fillOutlinePattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),circle:(p,r)=>({u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(p,r.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(p,r.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),collisionBox:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(p,r.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(p,r.u_extrude_scale),u_overscale_factor:new l.Uniform1f(p,r.u_overscale_factor)}),collisionCircle:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_inv_matrix:new l.UniformMatrix4f(p,r.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(p,r.u_viewport_size)}),debug:(p,r)=>({u_color:new l.UniformColor(p,r.u_color),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_overlay:new l.Uniform1i(p,r.u_overlay),u_overlay_scale:new l.Uniform1f(p,r.u_overlay_scale)}),clippingMask:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),heatmap:(p,r)=>({u_extrude_scale:new l.Uniform1f(p,r.u_extrude_scale),u_intensity:new l.Uniform1f(p,r.u_intensity),u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),heatmapTexture:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world),u_image:new l.Uniform1i(p,r.u_image),u_color_ramp:new l.Uniform1i(p,r.u_color_ramp),u_opacity:new l.Uniform1f(p,r.u_opacity)}),hillshade:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_latrange:new l.Uniform2f(p,r.u_latrange),u_light:new l.Uniform2f(p,r.u_light),u_shadow:new l.UniformColor(p,r.u_shadow),u_highlight:new l.UniformColor(p,r.u_highlight),u_accent:new l.UniformColor(p,r.u_accent)}),hillshadePrepare:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_dimension:new l.Uniform2f(p,r.u_dimension),u_zoom:new l.Uniform1f(p,r.u_zoom),u_unpack:new l.Uniform4f(p,r.u_unpack)}),line:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels)}),lineGradient:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_image:new l.Uniform1i(p,r.u_image),u_image_height:new l.Uniform1f(p,r.u_image_height)}),linePattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_texsize:new l.Uniform2f(p,r.u_texsize),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_image:new l.Uniform1i(p,r.u_image),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),lineSDF:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(p,r.u_patternscale_a),u_patternscale_b:new l.Uniform2f(p,r.u_patternscale_b),u_sdfgamma:new l.Uniform1f(p,r.u_sdfgamma),u_image:new l.Uniform1i(p,r.u_image),u_tex_y_a:new l.Uniform1f(p,r.u_tex_y_a),u_tex_y_b:new l.Uniform1f(p,r.u_tex_y_b),u_mix:new l.Uniform1f(p,r.u_mix)}),raster:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_tl_parent:new l.Uniform2f(p,r.u_tl_parent),u_scale_parent:new l.Uniform1f(p,r.u_scale_parent),u_buffer_scale:new l.Uniform1f(p,r.u_buffer_scale),u_fade_t:new l.Uniform1f(p,r.u_fade_t),u_opacity:new l.Uniform1f(p,r.u_opacity),u_image0:new l.Uniform1i(p,r.u_image0),u_image1:new l.Uniform1i(p,r.u_image1),u_brightness_low:new l.Uniform1f(p,r.u_brightness_low),u_brightness_high:new l.Uniform1f(p,r.u_brightness_high),u_saturation_factor:new l.Uniform1f(p,r.u_saturation_factor),u_contrast_factor:new l.Uniform1f(p,r.u_contrast_factor),u_spin_weights:new l.Uniform3f(p,r.u_spin_weights)}),symbolIcon:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texture:new l.Uniform1i(p,r.u_texture)}),symbolSDF:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texture:new l.Uniform1i(p,r.u_texture),u_gamma_scale:new l.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,r.u_is_halo)}),symbolTextAndIcon:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texsize_icon:new l.Uniform2f(p,r.u_texsize_icon),u_texture:new l.Uniform1i(p,r.u_texture),u_texture_icon:new l.Uniform1i(p,r.u_texture_icon),u_gamma_scale:new l.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,r.u_is_halo)}),background:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_opacity:new l.Uniform1f(p,r.u_opacity),u_color:new l.UniformColor(p,r.u_color)}),backgroundPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_opacity:new l.Uniform1f(p,r.u_opacity),u_image:new l.Uniform1i(p,r.u_image),u_pattern_tl_a:new l.Uniform2f(p,r.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(p,r.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(p,r.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(p,r.u_pattern_br_b),u_texsize:new l.Uniform2f(p,r.u_texsize),u_mix:new l.Uniform1f(p,r.u_mix),u_pattern_size_a:new l.Uniform2f(p,r.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(p,r.u_pattern_size_b),u_scale_a:new l.Uniform1f(p,r.u_scale_a),u_scale_b:new l.Uniform1f(p,r.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(p,r.u_tile_units_to_pixels)})};class Tl{constructor(r,a,h){this.context=r;const f=r.gl;this.buffer=f.createBuffer(),this.dynamicDraw=Boolean(h),this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const a=this.context.gl;this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Il={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class au{constructor(r,a,h,f){this.length=a.length,this.attributes=h,this.itemSize=a.bytesPerElement,this.dynamicDraw=f,this.context=r;const v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,a){for(let h=0;h<this.attributes.length;h++){const f=a.attributes[this.attributes[h].name];f!==void 0&&r.enableVertexAttribArray(f)}}setVertexAttribPointers(r,a,h){for(let f=0;f<this.attributes.length;f++){const v=this.attributes[f],w=a.attributes[v.name];w!==void 0&&r.vertexAttribPointer(w,v.components,r[Il[v.type]],!1,this.itemSize,v.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class hr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class bd extends hr{getDefault(){return l.Color.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class gs extends hr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class _s extends hr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class lu extends hr{getDefault(){return[!0,!0,!0,!0]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Vn extends hr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Al extends hr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class ta extends hr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const a=this.current;(r.func!==a.func||r.ref!==a.ref||r.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class ra extends hr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Pl extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=r,this.dirty=!1}}class Cl extends hr{getDefault(){return[0,1]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class na extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=r,this.dirty=!1}}class kl extends hr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Dl extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.BLEND):a.disable(a.BLEND),this.current=r,this.dirty=!1}}class ia extends hr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class cu extends hr{getDefault(){return l.Color.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class uu extends hr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ko extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=r,this.dirty=!1}}class wd extends hr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Ed extends hr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Sd extends hr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Td extends hr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Id extends hr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ad extends hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class zl extends hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ol extends hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Do extends hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class hu extends hr{getDefault(){return null}set(r){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class du extends hr{constructor(r){super(r),this.vao=r.extVertexArrayObject}getDefault(){return null}set(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)}}class Ml extends hr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ro extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class pu extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class no extends hr{constructor(r,a){super(r),this.context=r,this.parent=a}getDefault(){return null}}class zo extends no{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class fu extends no{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ll{constructor(r,a,h,f){this.context=r,this.width=a,this.height=h;const v=this.framebuffer=r.gl.createFramebuffer();this.colorAttachment=new zo(r,v),f&&(this.depthAttachment=new fu(r,v))}destroy(){const r=this.context.gl,a=this.colorAttachment.get();if(a&&r.deleteTexture(a),this.depthAttachment){const h=this.depthAttachment.get();h&&r.deleteRenderbuffer(h)}r.deleteFramebuffer(this.framebuffer)}}class Nt{constructor(r,a,h){this.blendFunction=r,this.blendColor=a,this.mask=h}}Nt.Replace=[1,0],Nt.disabled=new Nt(Nt.Replace,l.Color.transparent,[!1,!1,!1,!1]),Nt.unblended=new Nt(Nt.Replace,l.Color.transparent,[!0,!0,!0,!0]),Nt.alphaBlended=new Nt([1,771],l.Color.transparent,[!0,!0,!0,!0]);class oa{constructor(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new bd(this),this.clearDepth=new gs(this),this.clearStencil=new _s(this),this.colorMask=new lu(this),this.depthMask=new Vn(this),this.stencilMask=new Al(this),this.stencilFunc=new ta(this),this.stencilOp=new ra(this),this.stencilTest=new Pl(this),this.depthRange=new Cl(this),this.depthTest=new na(this),this.depthFunc=new kl(this),this.blend=new Dl(this),this.blendFunc=new ia(this),this.blendColor=new cu(this),this.blendEquation=new uu(this),this.cullFace=new ko(this),this.cullFaceSide=new wd(this),this.frontFace=new Ed(this),this.program=new Sd(this),this.activeTexture=new Td(this),this.viewport=new Id(this),this.bindFramebuffer=new Ad(this),this.bindRenderbuffer=new zl(this),this.bindTexture=new Ol(this),this.bindVertexBuffer=new Do(this),this.bindElementBuffer=new hu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new du(this),this.pixelStoreUnpack=new Ml(this),this.pixelStoreUnpackPremultiplyAlpha=new ro(this),this.pixelStoreUnpackFlipY=new pu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(r.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,a){return new Tl(this,r,a)}createVertexBuffer(r,a,h){return new au(this,r,a,h)}createRenderbuffer(r,a,h){const f=this.gl,v=f.createRenderbuffer();return this.bindRenderbuffer.set(v),f.renderbufferStorage(f.RENDERBUFFER,r,a,h),this.bindRenderbuffer.set(null),v}createFramebuffer(r,a,h){return new Ll(this,r,a,h)}clear({color:r,depth:a}){const h=this.gl;let f=0;r&&(f|=h.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(f|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),h.clear(f)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){F(r.blendFunction,Nt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class _r{constructor(r,a,h){this.func=r,this.mask=a,this.range=h}}_r.ReadOnly=!1,_r.ReadWrite=!0,_r.disabled=new _r(519,_r.ReadOnly,[0,1]);const sa=7680;class kr{constructor(r,a,h,f,v,w){this.test=r,this.ref=a,this.mask=h,this.fail=f,this.depthFail=v,this.pass=w}}kr.disabled=new kr({func:519,mask:0},0,0,sa,sa,sa);class Ur{constructor(r,a,h){this.enable=r,this.mode=a,this.frontFace=h}}let aa;function Rl(p,r,a,h,f,v,w){const S=p.context,I=S.gl,D=p.useProgram("collisionBox"),R=[];let N=0,q=0;for(let de=0;de<h.length;de++){const Oe=h[de],Te=r.getTile(Oe),Ce=Te.getBucket(a);if(!Ce)continue;let qe=Oe.posMatrix;f[0]===0&&f[1]===0||(qe=p.translatePosMatrix(Oe.posMatrix,Te,f,v));const rt=w?Ce.textCollisionBox:Ce.iconCollisionBox,ze=Ce.collisionCircleArray;if(ze.length>0){const vt=l.create(),at=qe;l.mul(vt,Ce.placementInvProjMatrix,p.transform.glCoordMatrix),l.mul(vt,vt,Ce.placementViewportMatrix),R.push({circleArray:ze,circleOffset:q,transform:at,invTransform:vt}),N+=ze.length/4,q=N}rt&&D.draw(S,I.LINES,_r.disabled,kr.disabled,p.colorModeForRenderPass(),Ur.disabled,Xs(qe,p.transform,Te),a.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,null,p.transform.zoom,null,null,rt.collisionVertexBuffer)}if(!w||!R.length)return;const Q=p.useProgram("collisionCircle"),H=new l.CollisionCircleLayoutArray;H.resize(4*N),H._trim();let J=0;for(const de of R)for(let Oe=0;Oe<de.circleArray.length/4;Oe++){const Te=4*Oe,Ce=de.circleArray[Te+0],qe=de.circleArray[Te+1],rt=de.circleArray[Te+2],ze=de.circleArray[Te+3];H.emplace(J++,Ce,qe,rt,ze,0),H.emplace(J++,Ce,qe,rt,ze,1),H.emplace(J++,Ce,qe,rt,ze,2),H.emplace(J++,Ce,qe,rt,ze,3)}(!aa||aa.length<2*N)&&(aa=function(de){const Oe=2*de,Te=new l.QuadTriangleArray;Te.resize(Oe),Te._trim();for(let Ce=0;Ce<Oe;Ce++){const qe=6*Ce;Te.uint16[qe+0]=4*Ce+0,Te.uint16[qe+1]=4*Ce+1,Te.uint16[qe+2]=4*Ce+2,Te.uint16[qe+3]=4*Ce+2,Te.uint16[qe+4]=4*Ce+3,Te.uint16[qe+5]=4*Ce+0}return Te}(N));const ce=S.createIndexBuffer(aa,!0),ue=S.createVertexBuffer(H,l.collisionCircleLayout.members,!0);for(const de of R){const Oe={u_matrix:de.transform,u_inv_matrix:de.invTransform,u_camera_to_center_distance:(ge=p.transform).cameraToCenterDistance,u_viewport_size:[ge.width,ge.height]};Q.draw(S,I.TRIANGLES,_r.disabled,kr.disabled,p.colorModeForRenderPass(),Ur.disabled,Oe,a.id,ue,ce,l.SegmentVector.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,p.transform.zoom,null,null,null)}var ge;ue.destroy(),ce.destroy()}Ur.disabled=new Ur(!1,1029,2305),Ur.backCCW=new Ur(!0,1029,2305);const Pd=l.identity(new Float32Array(16));function Bl(p,r,a,h,f,v){const{horizontalAlign:w,verticalAlign:S}=l.getAnchorAlignment(p),I=-(w-.5)*r,D=-(S-.5)*a,R=l.evaluateVariableOffset(p,h);return new l.pointGeometry((I/f+R[0])*v,(D/f+R[1])*v)}function la(p,r,a,h,f,v,w,S,I,D){const R=p.text.placedSymbolArray,N=p.text.dynamicLayoutVertexArray,q=p.icon.dynamicLayoutVertexArray,Q={};N.clear();for(let H=0;H<R.length;H++){const J=R.get(H),ce=p.allowVerticalPlacement&&!J.placedOrientation,ue=J.hidden||!J.crossTileID||ce?null:h[J.crossTileID];if(ue){const ge=new l.pointGeometry(J.anchorX,J.anchorY),de=Xt(ge,a?w:v),Oe=Xe(f.cameraToCenterDistance,de.signedDistanceFromCamera);let Te=l.evaluateSizeForFeature(p.textSizeData,I,J)*Oe/l.ONE_EM;a&&(Te*=p.tilePixelRatio/S);const{width:Ce,height:qe,anchor:rt,textOffset:ze,textBoxScale:vt}=ue,at=Bl(rt,Ce,qe,ze,vt,Te),Rt=a?Xt(ge.add(at),v).point:de.point.add(r?at.rotate(-f.angle):at),rr=p.allowVerticalPlacement&&J.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Kt=0;Kt<J.numGlyphs;Kt++)l.addDynamicAttributes(N,Rt,rr);D&&J.associatedIconIndex>=0&&(Q[J.associatedIconIndex]={shiftedAnchor:Rt,angle:rr})}else Kr(J.numGlyphs,N)}if(D){q.clear();const H=p.icon.placedSymbolArray;for(let J=0;J<H.length;J++){const ce=H.get(J);if(ce.hidden)Kr(ce.numGlyphs,q);else{const ue=Q[J];if(ue)for(let ge=0;ge<ce.numGlyphs;ge++)l.addDynamicAttributes(q,ue.shiftedAnchor,ue.angle);else Kr(ce.numGlyphs,q)}}p.icon.dynamicLayoutVertexBuffer.updateData(q)}p.text.dynamicLayoutVertexBuffer.updateData(N)}function ca(p,r,a){return a.iconsInText&&r?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function ua(p,r,a,h,f,v,w,S,I,D,R,N){const q=p.context,Q=q.gl,H=p.transform,J=S==="map",ce=I==="map",ue=S!=="viewport"&&a.layout.get("symbol-placement")!=="point",ge=J&&!ce&&!ue,de=!a.layout.get("symbol-sort-key").isConstant();let Oe=!1;const Te=p.depthModeForSublayer(0,_r.ReadOnly),Ce=a.layout.get("text-variable-anchor"),qe=[];for(const rt of h){const ze=r.getTile(rt),vt=ze.getBucket(a);if(!vt)continue;const at=f?vt.text:vt.icon;if(!at||!at.segments.get().length)continue;const Rt=at.programConfigurations.get(a.id),rr=f||vt.sdfIcons,Kt=f?vt.textSizeData:vt.iconSizeData,er=ce||H.pitch!==0,jr=p.useProgram(ca(rr,f,vt),Rt),Ft=l.evaluateSizeForZoom(Kt,H.zoom);let sr,xr,dn,$n,ei=[0,0],ti=null;if(f){if(xr=ze.glyphAtlasTexture,dn=Q.LINEAR,sr=ze.glyphAtlasTexture.size,vt.iconsInText){ei=ze.imageAtlasTexture.size,ti=ze.imageAtlasTexture;const wi=Kt.kind==="composite"||Kt.kind==="camera";$n=er||p.options.rotating||p.options.zooming||wi?Q.LINEAR:Q.NEAREST}}else{const wi=a.layout.get("icon-size").constantOr(0)!==1||vt.iconsNeedLinear;xr=ze.imageAtlasTexture,dn=rr||p.options.rotating||p.options.zooming||wi||er?Q.LINEAR:Q.NEAREST,sr=ze.imageAtlasTexture.size}const Hi=rn(ze,1,p.transform.zoom),Rn=Gr(rt.posMatrix,ce,J,p.transform,Hi),bi=vi(rt.posMatrix,ce,J,p.transform,Hi),co=Ce&&vt.hasTextData(),qn=a.layout.get("icon-text-fit")!=="none"&&co&&vt.hasIconData();if(ue){const wi=a.layout.get("text-rotation-alignment")==="map";qt(vt,rt.posMatrix,p,f,Rn,bi,ce,D,wi)}const ar=p.translatePosMatrix(rt.posMatrix,ze,v,w),fr=ue||f&&Ce||qn?Pd:Rn,Jr=p.translatePosMatrix(bi,ze,v,w,!0),In=rr&&a.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zr;zr=rr?vt.iconsInText?vd(Kt.kind,Ft,ge,ce,p,ar,fr,Jr,sr,ei):wl(Kt.kind,Ft,ge,ce,p,ar,fr,Jr,f,sr,!0):ea(Kt.kind,Ft,ge,ce,p,ar,fr,Jr,f,sr);const uo={program:jr,buffers:at,uniformValues:zr,atlasTexture:xr,atlasTextureIcon:ti,atlasInterpolation:dn,atlasInterpolationIcon:$n,isSDF:rr,hasHalo:In};if(de&&vt.canOverlap){Oe=!0;const wi=at.segments.get();for(const Ea of wi)qe.push({segments:new l.SegmentVector([Ea]),sortKey:Ea.sortKey,state:uo})}else qe.push({segments:at.segments,sortKey:0,state:uo})}Oe&&qe.sort((rt,ze)=>rt.sortKey-ze.sortKey);for(const rt of qe){const ze=rt.state;if(q.activeTexture.set(Q.TEXTURE0),ze.atlasTexture.bind(ze.atlasInterpolation,Q.CLAMP_TO_EDGE),ze.atlasTextureIcon&&(q.activeTexture.set(Q.TEXTURE1),ze.atlasTextureIcon&&ze.atlasTextureIcon.bind(ze.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),ze.isSDF){const vt=ze.uniformValues;ze.hasHalo&&(vt.u_is_halo=1,ha(ze.buffers,rt.segments,a,p,ze.program,Te,R,N,vt)),vt.u_is_halo=0}ha(ze.buffers,rt.segments,a,p,ze.program,Te,R,N,ze.uniformValues)}}function ha(p,r,a,h,f,v,w,S,I){const D=h.context;f.draw(D,D.gl.TRIANGLES,v,w,S,Ur.disabled,I,a.id,p.layoutVertexBuffer,p.indexBuffer,r,a.paint,h.transform.zoom,p.programConfigurations.get(a.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Fl(p,r,a,h,f,v,w){const S=p.context.gl,I=a.paint.get("fill-pattern"),D=I&&I.constantOr(1),R=a.getCrossfadeParameters();let N,q,Q,H,J;w?(q=D&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",N=S.LINES):(q=D?"fillPattern":"fill",N=S.TRIANGLES);for(const ce of h){const ue=r.getTile(ce);if(D&&!ue.patternsLoaded())continue;const ge=ue.getBucket(a);if(!ge)continue;const de=ge.programConfigurations.get(a.id),Oe=p.useProgram(q,de);D&&(p.context.activeTexture.set(S.TEXTURE0),ue.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),de.updatePaintBuffers(R));const Te=I.constantOr(null);if(Te&&ue.imageAtlas){const qe=ue.imageAtlas,rt=qe.patternPositions[Te.to.toString()],ze=qe.patternPositions[Te.from.toString()];rt&&ze&&de.setConstantPatternPositions(rt,ze)}const Ce=p.translatePosMatrix(ce.posMatrix,ue,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(w){H=ge.indexBuffer2,J=ge.segments2;const qe=[S.drawingBufferWidth,S.drawingBufferHeight];Q=q==="fillOutlinePattern"&&D?iu(Ce,p,R,ue,qe):nu(Ce,qe)}else H=ge.indexBuffer,J=ge.segments,Q=D?xl(Ce,p,R,ue):vl(Ce);Oe.draw(p.context,N,f,p.stencilModeForClipping(ce),v,Ur.disabled,Q,a.id,ge.layoutVertexBuffer,H,J,a.paint,p.transform.zoom,de)}}function Oo(p,r,a,h,f,v,w){const S=p.context,I=S.gl,D=a.paint.get("fill-extrusion-pattern"),R=D.constantOr(1),N=a.getCrossfadeParameters(),q=a.paint.get("fill-extrusion-opacity");for(const Q of h){const H=r.getTile(Q),J=H.getBucket(a);if(!J)continue;const ce=J.programConfigurations.get(a.id),ue=p.useProgram(R?"fillExtrusionPattern":"fillExtrusion",ce);R&&(p.context.activeTexture.set(I.TEXTURE0),H.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ce.updatePaintBuffers(N));const ge=D.constantOr(null);if(ge&&H.imageAtlas){const Ce=H.imageAtlas,qe=Ce.patternPositions[ge.to.toString()],rt=Ce.patternPositions[ge.from.toString()];qe&&rt&&ce.setConstantPatternPositions(qe,rt)}const de=p.translatePosMatrix(Q.posMatrix,H,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Oe=a.paint.get("fill-extrusion-vertical-gradient"),Te=R?yl(de,p,Oe,q,Q,N,H):ru(de,p,Oe,q);ue.draw(S,S.gl.TRIANGLES,f,v,w,Ur.backCCW,Te,a.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,a.paint,p.transform.zoom,ce)}}function da(p,r,a,h,f,v){const w=p.context,S=w.gl,I=r.fbo;if(!I)return;const D=p.useProgram("hillshade");w.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,I.colorAttachment.get());const R=((N,q,Q)=>{const H=Q.paint.get("hillshade-shadow-color"),J=Q.paint.get("hillshade-highlight-color"),ce=Q.paint.get("hillshade-accent-color");let ue=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(ue-=N.transform.angle);const ge=!N.options.moving;return{u_matrix:N.transform.calculatePosMatrix(q.tileID.toUnwrapped(),ge),u_image:0,u_latrange:Ys(0,q.tileID),u_light:[Q.paint.get("hillshade-exaggeration"),ue],u_shadow:H,u_highlight:J,u_accent:ce}})(p,r,a);D.draw(w,S.TRIANGLES,h,f,v,Ur.disabled,R,a.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}function ci(p,r,a,h,f,v){const w=p.context,S=w.gl,I=r.dem;if(I&&I.data){const D=I.dim,R=I.stride,N=I.getPixels();if(w.activeTexture.set(S.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||p.getTileTexture(R),r.demTexture){const Q=r.demTexture;Q.update(N,{premultiply:!1}),Q.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else r.demTexture=new me(w,N,S.RGBA,{premultiply:!1}),r.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);w.activeTexture.set(S.TEXTURE0);let q=r.fbo;if(!q){const Q=new me(w,{width:D,height:D,data:null},S.RGBA);Q.bind(S.LINEAR,S.CLAMP_TO_EDGE),q=r.fbo=w.createFramebuffer(D,D,!0),q.colorAttachment.set(Q.texture)}w.bindFramebuffer.set(q.framebuffer),w.viewport.set([0,0,D,D]),p.useProgram("hillshadePrepare").draw(w,S.TRIANGLES,h,f,v,Ur.disabled,((Q,H)=>{const J=H.stride,ce=l.create();return l.ortho(ce,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ce,ce,[0,-l.EXTENT,0]),{u_matrix:ce,u_image:1,u_dimension:[J,J],u_zoom:Q.overscaledZ,u_unpack:H.getUnpackVector()}})(r.tileID,I),a.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function mu(p,r,a,h,f){const v=h.paint.get("raster-fade-duration");if(v>0){const w=l.exported.now(),S=(w-p.timeAdded)/v,I=r?(w-r.timeAdded)/v:-1,D=a.getSource(),R=f.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),N=!r||Math.abs(r.tileID.overscaledZ-R)>Math.abs(p.tileID.overscaledZ-R),q=N&&p.refreshedUponExpiration?1:l.clamp(N?S:1-I,0,1);return p.refreshedUponExpiration&&S>=1&&(p.refreshedUponExpiration=!1),r?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}const gu=new l.Color(1,0,0,1),_u=new l.Color(0,1,0,1),Mo=new l.Color(0,0,1,1),pa=new l.Color(1,0,1,1),Nl=new l.Color(0,1,1,1);function yu(p,r,a,h){ma(p,0,r+a/2,p.transform.width,a,h)}function fa(p,r,a,h){ma(p,r-a/2,0,a,p.transform.height,h)}function ma(p,r,a,h,f,v){const w=p.context,S=w.gl;S.enable(S.SCISSOR_TEST),S.scissor(r*p.pixelRatio,a*p.pixelRatio,h*p.pixelRatio,f*p.pixelRatio),w.clear({color:v}),S.disable(S.SCISSOR_TEST)}function vu(p,r,a){const h=p.context,f=h.gl,v=a.posMatrix,w=p.useProgram("debug"),S=_r.disabled,I=kr.disabled,D=p.colorModeForRenderPass(),R="$debug";h.activeTexture.set(f.TEXTURE0),p.emptyTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),w.draw(h,f.LINE_STRIP,S,I,D,Ur.disabled,Co(v,l.Color.red),R,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments);const N=r.getTileByID(a.key).latestRawTileData,q=Math.floor((N&&N.byteLength||0)/1024),Q=r.getTile(a).tileSize,H=512/Math.min(Q,512)*(a.overscaledZ/p.transform.zoom)*.5;let J=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(J+=` => ${a.overscaledZ}`),function(ce,ue){ce.initDebugOverlayCanvas();const ge=ce.debugOverlayCanvas,de=ce.context.gl,Oe=ce.debugOverlayCanvas.getContext("2d");Oe.clearRect(0,0,ge.width,ge.height),Oe.shadowColor="white",Oe.shadowBlur=2,Oe.lineWidth=1.5,Oe.strokeStyle="white",Oe.textBaseline="top",Oe.font="bold 36px Open Sans, sans-serif",Oe.fillText(ue,5,5),Oe.strokeText(ue,5,5),ce.debugOverlayTexture.update(ge),ce.debugOverlayTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)}(p,`${J} ${q}kb`),w.draw(h,f.TRIANGLES,S,I,Nt.alphaBlended,Ur.disabled,Co(v,l.Color.transparent,H),R,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments)}const ys={symbol:function(p,r,a,h,f){if(p.renderPass!=="translucent")return;const v=kr.disabled,w=p.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(S,I,D,R,N,q,Q){const H=I.transform,J=N==="map",ce=q==="map";for(const ue of S){const ge=R.getTile(ue),de=ge.getBucket(D);if(!de||!de.text||!de.text.segments.get().length)continue;const Oe=l.evaluateSizeForZoom(de.textSizeData,H.zoom),Te=rn(ge,1,I.transform.zoom),Ce=Gr(ue.posMatrix,ce,J,I.transform,Te),qe=D.layout.get("icon-text-fit")!=="none"&&de.hasIconData();if(Oe){const rt=Math.pow(2,H.zoom-ge.tileID.overscaledZ);la(de,J,ce,Q,H,Ce,ue.posMatrix,rt,Oe,qe)}}}(h,p,a,r,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),f),a.paint.get("icon-opacity").constantOr(1)!==0&&ua(p,r,a,h,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),v,w),a.paint.get("text-opacity").constantOr(1)!==0&&ua(p,r,a,h,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),v,w),r.map.showCollisionBoxes&&(Rl(p,r,a,h,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),Rl(p,r,a,h,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))},circle:function(p,r,a,h){if(p.renderPass!=="translucent")return;const f=a.paint.get("circle-opacity"),v=a.paint.get("circle-stroke-width"),w=a.paint.get("circle-stroke-opacity"),S=!a.layout.get("circle-sort-key").isConstant();if(f.constantOr(1)===0&&(v.constantOr(1)===0||w.constantOr(1)===0))return;const I=p.context,D=I.gl,R=p.depthModeForSublayer(0,_r.ReadOnly),N=kr.disabled,q=p.colorModeForRenderPass(),Q=[];for(let H=0;H<h.length;H++){const J=h[H],ce=r.getTile(J),ue=ce.getBucket(a);if(!ue)continue;const ge=ue.programConfigurations.get(a.id),de={programConfiguration:ge,program:p.useProgram("circle",ge),layoutVertexBuffer:ue.layoutVertexBuffer,indexBuffer:ue.indexBuffer,uniformValues:to(p,J,ce,a)};if(S){const Oe=ue.segments.get();for(const Te of Oe)Q.push({segments:new l.SegmentVector([Te]),sortKey:Te.sortKey,state:de})}else Q.push({segments:ue.segments,sortKey:0,state:de})}S&&Q.sort((H,J)=>H.sortKey-J.sortKey);for(const H of Q){const{programConfiguration:J,program:ce,layoutVertexBuffer:ue,indexBuffer:ge,uniformValues:de}=H.state;ce.draw(I,D.TRIANGLES,R,N,q,Ur.disabled,de,a.id,ue,ge,H.segments,a.paint,p.transform.zoom,J)}},heatmap:function(p,r,a,h){if(a.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const f=p.context,v=f.gl,w=kr.disabled,S=new Nt([v.ONE,v.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(I,D,R){const N=I.gl;I.activeTexture.set(N.TEXTURE1),I.viewport.set([0,0,D.width/4,D.height/4]);let q=R.heatmapFbo;if(q)N.bindTexture(N.TEXTURE_2D,q.colorAttachment.get()),I.bindFramebuffer.set(q.framebuffer);else{const Q=N.createTexture();N.bindTexture(N.TEXTURE_2D,Q),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),q=R.heatmapFbo=I.createFramebuffer(D.width/4,D.height/4,!1),function(H,J,ce,ue){const ge=H.gl;ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,J.width/4,J.height/4,0,ge.RGBA,H.extRenderToTextureHalfFloat?H.extTextureHalfFloat.HALF_FLOAT_OES:ge.UNSIGNED_BYTE,null),ue.colorAttachment.set(ce)}(I,D,Q,q)}})(f,p,a),f.clear({color:l.Color.transparent});for(let I=0;I<h.length;I++){const D=h[I];if(r.hasRenderableParent(D))continue;const R=r.getTile(D),N=R.getBucket(a);if(!N)continue;const q=N.programConfigurations.get(a.id),Q=p.useProgram("heatmap",q),{zoom:H}=p.transform;Q.draw(f,v.TRIANGLES,_r.disabled,w,S,Ur.disabled,Js(D.posMatrix,R,H,a.paint.get("heatmap-intensity")),a.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,a.paint,p.transform.zoom,q)}f.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(f,v){const w=f.context,S=w.gl,I=v.heatmapFbo;if(!I)return;w.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,I.colorAttachment.get()),w.activeTexture.set(S.TEXTURE1);let D=v.colorRampTexture;D||(D=v.colorRampTexture=new me(w,v.colorRamp,S.RGBA)),D.bind(S.LINEAR,S.CLAMP_TO_EDGE),f.useProgram("heatmapTexture").draw(w,S.TRIANGLES,_r.disabled,kr.disabled,f.colorModeForRenderPass(),Ur.disabled,((R,N,q,Q)=>{const H=l.create();l.ortho(H,0,R.width,R.height,0,0,1);const J=R.context.gl;return{u_matrix:H,u_world:[J.drawingBufferWidth,J.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:N.paint.get("heatmap-opacity")}})(f,v),v.id,f.viewportBuffer,f.quadTriangleIndexBuffer,f.viewportSegments,v.paint,f.transform.zoom)}(p,a))},line:function(p,r,a,h){if(p.renderPass!=="translucent")return;const f=a.paint.get("line-opacity"),v=a.paint.get("line-width");if(f.constantOr(1)===0||v.constantOr(1)===0)return;const w=p.depthModeForSublayer(0,_r.ReadOnly),S=p.colorModeForRenderPass(),I=a.paint.get("line-dasharray"),D=a.paint.get("line-pattern"),R=D.constantOr(1),N=a.paint.get("line-gradient"),q=a.getCrossfadeParameters(),Q=R?"linePattern":I?"lineSDF":N?"lineGradient":"line",H=p.context,J=H.gl;let ce=!0;for(const ue of h){const ge=r.getTile(ue);if(R&&!ge.patternsLoaded())continue;const de=ge.getBucket(a);if(!de)continue;const Oe=de.programConfigurations.get(a.id),Te=p.context.program.get(),Ce=p.useProgram(Q,Oe),qe=ce||Ce.program!==Te,rt=D.constantOr(null);if(rt&&ge.imageAtlas){const vt=ge.imageAtlas,at=vt.patternPositions[rt.to.toString()],Rt=vt.patternPositions[rt.from.toString()];at&&Rt&&Oe.setConstantPatternPositions(at,Rt)}const ze=R?fs(p,ge,a,q):I?Xr(p,ge,a,I,q):N?Qs(p,ge,a,de.lineClipsArray.length):ps(p,ge,a);if(R)H.activeTexture.set(J.TEXTURE0),ge.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),Oe.updatePaintBuffers(q);else if(I&&(qe||p.lineAtlas.dirty))H.activeTexture.set(J.TEXTURE0),p.lineAtlas.bind(H);else if(N){const vt=de.gradients[a.id];let at=vt.texture;if(a.gradientVersion!==vt.version){let Rt=256;if(a.stepInterpolant){const rr=r.getSource().maxzoom,Kt=ue.canonical.z===rr?Math.ceil(1<<p.transform.maxZoom-ue.canonical.z):1;Rt=l.clamp(l.nextPowerOfTwo(de.maxLineLength/l.EXTENT*1024*Kt),256,H.maxTextureSize)}vt.gradient=l.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Rt,image:vt.gradient||void 0,clips:de.lineClipsArray}),vt.texture?vt.texture.update(vt.gradient):vt.texture=new me(H,vt.gradient,J.RGBA),vt.version=a.gradientVersion,at=vt.texture}H.activeTexture.set(J.TEXTURE0),at.bind(a.stepInterpolant?J.NEAREST:J.LINEAR,J.CLAMP_TO_EDGE)}Ce.draw(H,J.TRIANGLES,w,p.stencilModeForClipping(ue),S,Ur.disabled,ze,a.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,a.paint,p.transform.zoom,Oe,de.layoutVertexBuffer2),ce=!1}},fill:function(p,r,a,h){const f=a.paint.get("fill-color"),v=a.paint.get("fill-opacity");if(v.constantOr(1)===0)return;const w=p.colorModeForRenderPass(),S=a.paint.get("fill-pattern"),I=p.opaquePassEnabledForLayer()&&!S.constantOr(1)&&f.constantOr(l.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===I){const D=p.depthModeForSublayer(1,p.renderPass==="opaque"?_r.ReadWrite:_r.ReadOnly);Fl(p,r,a,h,D,w,!1)}if(p.renderPass==="translucent"&&a.paint.get("fill-antialias")){const D=p.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,_r.ReadOnly);Fl(p,r,a,h,D,w,!0)}},"fill-extrusion":function(p,r,a,h){const f=a.paint.get("fill-extrusion-opacity");if(f!==0&&p.renderPass==="translucent"){const v=new _r(p.context.gl.LEQUAL,_r.ReadWrite,p.depthRangeFor3D);if(f!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Oo(p,r,a,h,v,kr.disabled,Nt.disabled),Oo(p,r,a,h,v,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const w=p.colorModeForRenderPass();Oo(p,r,a,h,v,kr.disabled,w)}}},hillshade:function(p,r,a,h){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const f=p.context,v=p.depthModeForSublayer(0,_r.ReadOnly),w=p.colorModeForRenderPass(),[S,I]=p.renderPass==="translucent"?p.stencilConfigForOverlap(h):[{},h];for(const D of I){const R=r.getTile(D);R.needsHillshadePrepare&&p.renderPass==="offscreen"?ci(p,R,a,v,kr.disabled,w):p.renderPass==="translucent"&&da(p,R,a,v,S[D.overscaledZ],w)}f.viewport.set([0,0,p.width,p.height])},raster:function(p,r,a,h){if(p.renderPass!=="translucent"||a.paint.get("raster-opacity")===0||!h.length)return;const f=p.context,v=f.gl,w=r.getSource(),S=p.useProgram("raster"),I=p.colorModeForRenderPass(),[D,R]=w instanceof Ar?[{},h]:p.stencilConfigForOverlap(h),N=R[R.length-1].overscaledZ,q=!p.options.moving;for(const Q of R){const H=p.depthModeForSublayer(Q.overscaledZ-N,a.paint.get("raster-opacity")===1?_r.ReadWrite:_r.ReadOnly,v.LESS),J=r.getTile(Q),ce=p.transform.calculatePosMatrix(Q.toUnwrapped(),q);J.registerFadeDuration(a.paint.get("raster-fade-duration"));const ue=r.findLoadedParent(Q,0),ge=mu(J,ue,r,a,p.transform);let de,Oe;const Te=a.paint.get("raster-resampling")==="nearest"?v.NEAREST:v.LINEAR;f.activeTexture.set(v.TEXTURE0),J.texture.bind(Te,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),f.activeTexture.set(v.TEXTURE1),ue?(ue.texture.bind(Te,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),de=Math.pow(2,ue.tileID.overscaledZ-J.tileID.overscaledZ),Oe=[J.tileID.canonical.x*de%1,J.tileID.canonical.y*de%1]):J.texture.bind(Te,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST);const Ce=ou(ce,Oe||[0,0],de||1,ge,a);w instanceof Ar?S.draw(f,v.TRIANGLES,H,kr.disabled,I,Ur.disabled,Ce,a.id,w.boundsBuffer,p.quadTriangleIndexBuffer,w.boundsSegments):S.draw(f,v.TRIANGLES,H,D[Q.overscaledZ],I,Ur.disabled,Ce,a.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,r,a){const h=a.paint.get("background-color"),f=a.paint.get("background-opacity");if(f===0)return;const v=p.context,w=v.gl,S=p.transform,I=S.tileSize,D=a.paint.get("background-pattern");if(p.isPatternMissing(D))return;const R=!D&&h.a===1&&f===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==R)return;const N=kr.disabled,q=p.depthModeForSublayer(0,R==="opaque"?_r.ReadWrite:_r.ReadOnly),Q=p.colorModeForRenderPass(),H=p.useProgram(D?"backgroundPattern":"background"),J=S.coveringTiles({tileSize:I});D&&(v.activeTexture.set(w.TEXTURE0),p.imageManager.bind(p.context));const ce=a.getCrossfadeParameters();for(const ue of J){const ge=p.transform.calculatePosMatrix(ue.toUnwrapped()),de=D?El(ge,f,p,D,{tileID:ue,tileSize:I},ce):xd(ge,f,h);H.draw(v,w.TRIANGLES,q,N,Q,Ur.disabled,de,a.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}},debug:function(p,r,a){for(let h=0;h<a.length;h++)vu(p,r,a[h])},custom:function(p,r,a){const h=p.context,f=a.implementation;if(p.renderPass==="offscreen"){const v=f.prerender;v&&(p.setCustomLayerDefaults(),h.setColorMode(p.colorModeForRenderPass()),v.call(f,h.gl,p.transform.customLayerMatrix()),h.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),h.setColorMode(p.colorModeForRenderPass()),h.setStencilMode(kr.disabled);const v=f.renderingMode==="3d"?new _r(p.context.gl.LEQUAL,_r.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,_r.ReadOnly);h.setDepthMode(v),f.render(h.gl,p.transform.customLayerMatrix()),h.setDirty(),p.setBaseState(),h.bindFramebuffer.set(null)}}};class jl{constructor(r,a){this.context=new oa(r),this.transform=a,this._tileTextures={},this.setup(),this.numSublayers=W.maxUnderzooming+W.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Gt,this.gpuTimers={}}resize(r,a,h){if(this.width=r*h,this.height=a*h,this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const r=this.context,a=new l.PosArray;a.emplaceBack(0,0),a.emplaceBack(l.EXTENT,0),a.emplaceBack(0,l.EXTENT),a.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(a,fl.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const h=new l.PosArray;h.emplaceBack(0,0),h.emplaceBack(l.EXTENT,0),h.emplaceBack(0,l.EXTENT),h.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=r.createVertexBuffer(h,fl.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const f=new l.RasterBoundsArray;f.emplaceBack(0,0,0,0),f.emplaceBack(l.EXTENT,0,l.EXTENT,0),f.emplaceBack(0,l.EXTENT,0,l.EXTENT),f.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(f,vr.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const v=new l.PosArray;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(v,fl.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const w=new l.LineStripIndexArray;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(w);const S=new l.TriangleIndexArray;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(S),this.emptyTexture=new me(r,{width:1,height:1,data:new Uint8Array([0,0,0,0])},r.gl.RGBA);const I=this.context.gl;this.stencilClearMode=new kr({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const r=this.context,a=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=l.create();l.ortho(h,0,this.width,this.height,0,0,1),l.scale(h,h,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,a.TRIANGLES,_r.disabled,this.stencilClearMode,Nt.disabled,Ur.disabled,ds(h),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,a){if(this.currentStencilSource===r.source||!r.isTileClipped()||!a||!a.length)return;this.currentStencilSource=r.source;const h=this.context,f=h.gl;this.nextStencilID+a.length>256&&this.clearStencil(),h.setColorMode(Nt.disabled),h.setDepthMode(_r.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of a){const S=this._tileClippingMaskIDs[w.key]=this.nextStencilID++;v.draw(h,f.TRIANGLES,_r.disabled,new kr({func:f.ALWAYS,mask:0},S,255,f.KEEP,f.KEEP,f.REPLACE),Nt.disabled,Ur.disabled,ds(w.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,a=this.context.gl;return new kr({func:a.NOTEQUAL,mask:255},r,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(r){const a=this.context.gl;return new kr({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(r){const a=this.context.gl,h=r.sort((w,S)=>S.overscaledZ-w.overscaledZ),f=h[h.length-1].overscaledZ,v=h[0].overscaledZ-f+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const w={};for(let S=0;S<v;S++)w[S+f]=new kr({func:a.GEQUAL,mask:255},S+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=v,[w,h]}return[{[f]:kr.disabled},h]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Nt([r.CONSTANT_COLOR,r.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nt.unblended:Nt.alphaBlended}depthModeForSublayer(r,a,h){if(!this.opaquePassEnabledForLayer())return _r.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new _r(h||this.context.gl.LEQUAL,a,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,a){this.style=r,this.options=a,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const h=this.style._order,f=this.style.sourceCaches;for(const I in f){const D=f[I];D.used&&D.prepare(this.context)}const v={},w={},S={};for(const I in f){const D=f[I];v[I]=D.getVisibleCoordinates(),w[I]=v[I].slice().reverse(),S[I]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<h.length;I++)if(this.style._layers[h[I]].is3D()){this.opaquePassCutoff=I;break}this.renderPass="offscreen";for(const I of h){const D=this.style._layers[I];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const R=w[D.source];(D.type==="custom"||R.length)&&this.renderLayer(this,f[D.source],D,R)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[h[this.currentLayer]],D=f[I.source],R=v[I.source];this._renderTileClippingMasks(I,R),this.renderLayer(this,D,I,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const I=this.style._layers[h[this.currentLayer]],D=f[I.source],R=(I.type==="symbol"?S:w)[I.source];this._renderTileClippingMasks(I,v[I.source]),this.renderLayer(this,D,I,R)}if(this.options.showTileBoundaries){let I,D;Object.values(this.style._layers).forEach(R=>{R.source&&!R.isHidden(this.transform.zoom)&&(R.source!==(D&&D.id)&&(D=this.style.sourceCaches[R.source]),(!I||I.getSource().maxzoom<D.getSource().maxzoom)&&(I=D))}),I&&ys.debug(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const D=I.transform.padding;yu(I,I.transform.height-(D.top||0),3,gu),yu(I,D.bottom||0,3,_u),fa(I,D.left||0,3,Mo),fa(I,I.transform.width-(D.right||0),3,pa);const R=I.transform.centerPoint;(function(N,q,Q,H){ma(N,q-1,Q-10,2,20,H),ma(N,q-10,Q-1,20,2,H)})(I,R.x,I.transform.height-R.y,Nl)}(this),this.context.setDefault()}renderLayer(r,a,h,f){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||f.length)&&(this.id=h.id,this.gpuTimingStart(h),ys[h.type](r,a,h,f,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(r){if(!this.options.gpuTiming)return;const a=this.context.extTimerQuery;let h=this.gpuTimers[r.id];h||(h=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:a.createQueryEXT()}),h.calls++,a.beginQueryEXT(a.TIME_ELAPSED_EXT,h.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}collectGpuTimers(){const r=this.gpuTimers;return this.gpuTimers={},r}queryGpuTimers(r){const a={};for(const h in r){const f=r[h],v=this.context.extTimerQuery,w=v.getQueryObjectEXT(f.query,v.QUERY_RESULT_EXT)/1e6;v.deleteQueryEXT(f.query),a[h]=w}return a}translatePosMatrix(r,a,h,f,v){if(!h[0]&&!h[1])return r;const w=v?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(w){const D=Math.sin(w),R=Math.cos(w);h=[h[0]*R-h[1]*D,h[0]*D+h[1]*R]}const S=[v?h[0]:rn(a,h[0],this.transform.zoom),v?h[1]:rn(a,h[1],this.transform.zoom),0],I=new Float32Array(16);return l.translate(I,r,S),I}saveTileTexture(r){const a=this._tileTextures[r.size[0]];a?a.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const a=this._tileTextures[r];return a&&a.length>0?a.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const a=this.imageManager.getPattern(r.from.toString()),h=this.imageManager.getPattern(r.to.toString());return!a||!h}useProgram(r,a){this.cache=this.cache||{};const h=`${r}${a?a.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[h]||(this.cache[h]=new yd(this.context,r,ml[r],a,Sl[r],this._showOverdrawInspector)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new me(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class ga{constructor(r,a){this.points=r,this.planes=a}static fromInvProjectionMatrix(r,a,h){const f=Math.pow(2,h),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>l.transformMat4([],S,r)).map(S=>l.scale$1([],S,1/S[3]/a*f)),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const I=function(q,Q){var H=Q[0],J=Q[1],ce=Q[2],ue=H*H+J*J+ce*ce;return ue>0&&(ue=1/Math.sqrt(ue)),q[0]=Q[0]*ue,q[1]=Q[1]*ue,q[2]=Q[2]*ue,q}([],function(q,Q,H){var J=Q[0],ce=Q[1],ue=Q[2],ge=H[0],de=H[1],Oe=H[2];return q[0]=ce*Oe-ue*de,q[1]=ue*ge-J*Oe,q[2]=J*de-ce*ge,q}([],Y([],v[S[0]],v[S[1]]),Y([],v[S[2]],v[S[1]]))),D=-((R=I)[0]*(N=v[S[1]])[0]+R[1]*N[1]+R[2]*N[2]);var R,N;return I.concat(D)});return new ga(v,w)}}class _a{constructor(r,a){this.min=r,this.max=a,this.center=function(h,f,v){return h[0]=.5*f[0],h[1]=.5*f[1],h[2]=.5*f[2],h}([],function(h,f,v){return h[0]=f[0]+v[0],h[1]=f[1]+v[1],h[2]=f[2]+v[2],h}([],this.min,this.max))}quadrant(r){const a=[r%2==0,r<2],h=pe(this.min),f=pe(this.max);for(let v=0;v<a.length;v++)h[v]=a[v]?this.min[v]:this.center[v],f[v]=a[v]?this.center[v]:this.max[v];return f[2]=this.max[2],new _a(h,f)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const a=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let h=!0;for(let f=0;f<r.planes.length;f++){const v=r.planes[f];let w=0;for(let S=0;S<a.length;S++)l.dot(v,a[S])>=0&&w++;if(w===0)return 0;w!==a.length&&(h=!1)}if(h)return 2;for(let f=0;f<3;f++){let v=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let S=0;S<r.points.length;S++){const I=r.points[S][f]-this.min[f];v=Math.min(v,I),w=Math.max(w,I)}if(w<0||v>this.max[f]-this.min[f])return 0}return 1}}class Lo{constructor(r=0,a=0,h=0,f=0){if(isNaN(r)||r<0||isNaN(a)||a<0||isNaN(h)||h<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=a,this.left=h,this.right=f}interpolate(r,a,h){return a.top!=null&&r.top!=null&&(this.top=l.number(r.top,a.top,h)),a.bottom!=null&&r.bottom!=null&&(this.bottom=l.number(r.bottom,a.bottom,h)),a.left!=null&&r.left!=null&&(this.left=l.number(r.left,a.left,h)),a.right!=null&&r.right!=null&&(this.right=l.number(r.right,a.right,h)),this}getCenter(r,a){const h=l.clamp((this.left+r-this.right)/2,0,r),f=l.clamp((this.top+a-this.bottom)/2,0,a);return new l.pointGeometry(h,f)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Lo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class vs{constructor(r,a,h,f,v){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=v===void 0||!!v,this._minZoom=r||0,this._maxZoom=a||22,this._minPitch=h==null?0:h,this._maxPitch=f==null?60:f,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Lo,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const r=new vs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const a=-l.wrap(r,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var h=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}(),function(h,f,v){var w=f[0],S=f[1],I=f[2],D=f[3],R=Math.sin(v),N=Math.cos(v);h[0]=w*N+I*R,h[1]=S*N+D*R,h[2]=w*-R+I*N,h[3]=S*-R+D*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const a=l.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const a=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,a,h){this._unmodified=!1,this._edgeInsets.interpolate(r,a,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const a=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(r){const a=[new l.UnwrappedTileID(0,r)];if(this._renderWorldCopies){const h=this.pointCoordinate(new l.pointGeometry(0,0)),f=this.pointCoordinate(new l.pointGeometry(this.width,0)),v=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),w=this.pointCoordinate(new l.pointGeometry(0,this.height)),S=Math.floor(Math.min(h.x,f.x,v.x,w.x)),I=Math.floor(Math.max(h.x,f.x,v.x,w.x)),D=1;for(let R=S-D;R<=I+D;R++)R!==0&&a.push(new l.UnwrappedTileID(R,r))}return a}coveringTiles(r){let a=this.coveringZoomLevel(r);const h=a;if(r.minzoom!==void 0&&a<r.minzoom)return[];r.maxzoom!==void 0&&a>r.maxzoom&&(a=r.maxzoom);const f=l.MercatorCoordinate.fromLngLat(this.center),v=Math.pow(2,a),w=[v*f.x,v*f.y,0],S=ga.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a);let I=r.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(I=a);const D=H=>({aabb:new _a([H*v,0,0],[(H+1)*v,v,0]),zoom:0,x:0,y:0,wrap:H,fullyVisible:!1}),R=[],N=[],q=a,Q=r.reparseOverscaled?h:a;if(this._renderWorldCopies)for(let H=1;H<=3;H++)R.push(D(-H)),R.push(D(H));for(R.push(D(0));R.length>0;){const H=R.pop(),J=H.x,ce=H.y;let ue=H.fullyVisible;if(!ue){const Ce=H.aabb.intersects(S);if(Ce===0)continue;ue=Ce===2}const ge=H.aabb.distanceX(w),de=H.aabb.distanceY(w),Oe=Math.max(Math.abs(ge),Math.abs(de)),Te=3+(1<<q-H.zoom)-2;if(H.zoom===q||Oe>Te&&H.zoom>=I)N.push({tileID:new l.OverscaledTileID(H.zoom===q?Q:H.zoom,H.wrap,H.zoom,J,ce),distanceSq:he([w[0]-.5-J,w[1]-.5-ce])});else for(let Ce=0;Ce<4;Ce++){const qe=(J<<1)+Ce%2,rt=(ce<<1)+(Ce>>1);R.push({aabb:H.aabb.quadrant(Ce),zoom:H.zoom+1,x:qe,y:rt,wrap:H.wrap,fullyVisible:ue})}}return N.sort((H,J)=>H.distanceSq-J.distanceSq).map(H=>H.tileID)}resize(r,a){this.width=r,this.height=a,this.pixelsToGLUnits=[2/r,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const a=l.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(r.lng)*this.worldSize,l.mercatorYfromLat(a)*this.worldSize)}unproject(r){return new l.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(r,a){const h=this.pointCoordinate(a),f=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(r),w=new l.MercatorCoordinate(v.x-(h.x-f.x),v.y-(h.y-f.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r){return this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r){return this.coordinateLocation(this.pointCoordinate(r))}locationCoordinate(r){return l.MercatorCoordinate.fromLngLat(r)}coordinateLocation(r){return r.toLngLat()}pointCoordinate(r){const a=[r.x,r.y,0,1],h=[r.x,r.y,1,1];l.transformMat4(a,a,this.pixelMatrixInverse),l.transformMat4(h,h,this.pixelMatrixInverse);const f=a[3],v=h[3],w=a[1]/f,S=h[1]/v,I=a[2]/f,D=h[2]/v,R=I===D?0:(0-I)/(D-I);return new l.MercatorCoordinate(l.number(a[0]/f,h[0]/v,R)/this.worldSize,l.number(w,S,R)/this.worldSize)}coordinatePoint(r){const a=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(a,a,this.pixelMatrix),new l.pointGeometry(a[0]/a[3],a[1]/a[3])}getBounds(){return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,0))).extend(this.pointLocation(new l.pointGeometry(this.width,0))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,a=!1){const h=r.key,f=a?this._alignedPosMatrixCache:this._posMatrixCache;if(f[h])return f[h];const v=r.canonical,w=this.worldSize/this.zoomScale(v.z),S=v.x+Math.pow(2,v.z)*r.wrap,I=l.identity(new Float64Array(16));return l.translate(I,I,[S*w,v.y*w,0]),l.scale(I,I,[w/l.EXTENT,w/l.EXTENT,1]),l.multiply(I,a?this.alignedProjMatrix:this.projMatrix,I),f[h]=new Float32Array(I),f[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,a,h,f,v=-90,w=90,S=-180,I=180;const D=this.size,R=this._unmodified;if(this.latRange){const Q=this.latRange;v=l.mercatorYfromLat(Q[1])*this.worldSize,w=l.mercatorYfromLat(Q[0])*this.worldSize,r=w-v<D.y?D.y/(w-v):0}if(this.lngRange){const Q=this.lngRange;S=l.mercatorXfromLng(Q[0])*this.worldSize,I=l.mercatorXfromLng(Q[1])*this.worldSize,a=I-S<D.x?D.x/(I-S):0}const N=this.point,q=Math.max(a||0,r||0);if(q)return this.center=this.unproject(new l.pointGeometry(a?(I+S)/2:N.x,r?(w+v)/2:N.y)),this.zoom+=this.scaleZoom(q),this._unmodified=R,void(this._constraining=!1);if(this.latRange){const Q=N.y,H=D.y/2;Q-H<v&&(f=v+H),Q+H>w&&(f=w-H)}if(this.lngRange){const Q=N.x,H=D.x/2;Q-H<S&&(h=S+H),Q+H>I&&(h=I-H)}h===void 0&&f===void 0||(this.center=this.unproject(new l.pointGeometry(h!==void 0?h:N.x,f!==void 0?f:N.y))),this._unmodified=R,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const a=Math.PI/2+this._pitch,h=this._fov*(.5+r.y/this.height),f=Math.sin(h)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-a-h,.01,Math.PI-.01)),v=this.point,w=v.x,S=v.y,I=1.01*(Math.cos(Math.PI/2-this._pitch)*f+this.cameraToCenterDistance),D=this.height/50;let R=new Float64Array(16);l.perspective(R,this._fov,this.width/this.height,D,I),R[8]=2*-r.x/this.width,R[9]=2*r.y/this.height,l.scale(R,R,[1,-1,1]),l.translate(R,R,[0,0,-this.cameraToCenterDistance]),l.rotateX(R,R,this._pitch),l.rotateZ(R,R,this.angle),l.translate(R,R,[-w,-S,0]),this.mercatorMatrix=l.scale([],R,[this.worldSize,this.worldSize,this.worldSize]),l.scale(R,R,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=R,this.invProjMatrix=l.invert([],this.projMatrix);const N=this.width%2/2,q=this.height%2/2,Q=Math.cos(this.angle),H=Math.sin(this.angle),J=w-Math.round(w)+Q*N+H*q,ce=S-Math.round(S)+Q*q+H*N,ue=new Float64Array(R);if(l.translate(ue,ue,[J>.5?J-1:J,ce>.5?ce-1:ce,0]),this.alignedProjMatrix=ue,R=l.create(),l.scale(R,R,[this.width/2,-this.height/2,1]),l.translate(R,R,[1,-1,0]),this.labelPlaneMatrix=R,R=l.create(),l.scale(R,R,[1,-1,1]),l.translate(R,R,[-1,-1,0]),l.scale(R,R,[2/this.width,2/this.height,1]),this.glCoordMatrix=R,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),R=l.invert(new Float64Array(16),this.pixelMatrix),!R)throw new Error("failed to invert matrix");this.pixelMatrixInverse=R,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.pointGeometry(0,0)),a=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,r))}getCameraQueryGeometry(r){const a=this.getCameraPoint();if(r.length===1)return[r[0],a];{let h=a.x,f=a.y,v=a.x,w=a.y;for(const S of r)h=Math.min(h,S.x),f=Math.min(f,S.y),v=Math.max(v,S.x),w=Math.max(w,S.y);return[new l.pointGeometry(h,f),new l.pointGeometry(v,f),new l.pointGeometry(v,w),new l.pointGeometry(h,w),new l.pointGeometry(h,f)]}}}class xu{constructor(r){this._hashName=r&&encodeURIComponent(r),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(a,h){let f=!1,v=null;const w=()=>{v=null,f&&(a(),v=setTimeout(w,300),f=!1)};return()=>(f=!0,v||w(),v)}(this._updateHashUnthrottled.bind(this))}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const a=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,f=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,f),w=Math.round(a.lng*v)/v,S=Math.round(a.lat*v)/v,I=this._map.getBearing(),D=this._map.getPitch();let R="";if(R+=r?`/${w}/${S}/${h}`:`${h}/${S}/${w}`,(I||D)&&(R+="/"+Math.round(10*I)/10),D&&(R+=`/${Math.round(D)}`),this._hashName){const N=this._hashName;let q=!1;const Q=window.location.hash.slice(1).split("&").map(H=>{const J=H.split("=")[0];return J===N?(q=!0,`${J}=${R}`):H}).filter(H=>H);return q||Q.push(`${N}=${R}`),`#${Q.join("&")}`}return`#${R}`}_getCurrentHash(){const r=window.location.hash.replace("#","");if(this._hashName){let a;return r.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(a=h)}),(a&&a[1]||"").split("/")}return r.split("/")}_onHashChange(){const r=this._getCurrentHash();if(r.length>=3&&!r.some(a=>isNaN(a))){const a=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:a,pitch:+(r[4]||0)}),!0}return!1}_updateHashUnthrottled(){const r=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,r)}catch{}}}const xs={linearity:.3,easing:l.bezier(0,0,.3,1)},bu=l.extend({deceleration:2500,maxSpeed:1400},xs),wu=l.extend({deceleration:20,maxSpeed:1400},xs),Eu=l.extend({deceleration:1e3,maxSpeed:360},xs),Ro=l.extend({deceleration:1e3,maxSpeed:90},xs);class Su{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,a=l.exported.now();for(;r.length>0&&a-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)a.zoom+=v.zoomDelta||0,a.bearing+=v.bearingDelta||0,a.pitch+=v.pitchDelta||0,v.panDelta&&a.pan._add(v.panDelta),v.around&&(a.around=v.around),v.pinchAround&&(a.pinchAround=v.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(a.pan.mag()){const v=ws(a.pan.mag(),h,l.extend({},bu,r||{}));f.offset=a.pan.mult(v.amount/a.pan.mag()),f.center=this._map.transform.center,bs(f,v)}if(a.zoom){const v=ws(a.zoom,h,wu);f.zoom=this._map.transform.zoom+v.amount,bs(f,v)}if(a.bearing){const v=ws(a.bearing,h,Eu);f.bearing=this._map.transform.bearing+l.clamp(v.amount,-179,179),bs(f,v)}if(a.pitch){const v=ws(a.pitch,h,Ro);f.pitch=this._map.transform.pitch+v.amount,bs(f,v)}if(f.zoom||f.bearing){const v=a.pinchAround===void 0?a.around:a.pinchAround;f.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),l.extend(f,{noMoveStart:!0})}}function bs(p,r){(!p.duration||p.duration<r.duration)&&(p.duration=r.duration,p.easing=r.easing)}function ws(p,r,a){const{maxSpeed:h,linearity:f,deceleration:v}=a,w=l.clamp(p*f/(r/1e3),-h,h),S=Math.abs(w)/(v*f);return{easing:a.easing,duration:1e3*S,amount:w*(S/2)}}class Un extends l.Event{constructor(r,a,h,f={}){const v=L.mousePos(a.getCanvasContainer(),h),w=a.unproject(v);super(r,l.extend({point:v,lngLat:w,originalEvent:h},f)),this._defaultPrevented=!1,this.target=a}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class On extends l.Event{constructor(r,a,h){const f=r==="touchend"?h.changedTouches:h.touches,v=L.touchPos(a.getCanvasContainer(),f),w=v.map(I=>a.unproject(I)),S=v.reduce((I,D,R,N)=>I.add(D.div(N.length)),new l.pointGeometry(0,0));super(r,{points:v,point:S,lngLats:w,lngLat:a.unproject(S),originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Cd extends l.Event{constructor(r,a,h){super(r,{originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class io{constructor(r,a){this._map=r,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Cd(r.type,this._map,r))}mousedown(r,a){return this._mousedownPos=a,this._firePreventable(new Un(r.type,this._map,r))}mouseup(r){this._map.fire(new Un(r.type,this._map,r))}click(r,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Un(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Un(r.type,this._map,r))}mouseover(r){this._map.fire(new Un(r.type,this._map,r))}mouseout(r){this._map.fire(new Un(r.type,this._map,r))}touchstart(r){return this._firePreventable(new On(r.type,this._map,r))}touchmove(r){this._map.fire(new On(r.type,this._map,r))}touchend(r){this._map.fire(new On(r.type,this._map,r))}touchcancel(r){this._map.fire(new On(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tu{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Un(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Un("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._map.fire(new Un(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Bo{constructor(r,a){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,a){this.isEnabled()&&r.shiftKey&&r.button===0&&(L.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(r,a){if(!this._active)return;const h=a;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=h,this._box||(this._box=L.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));const v=Math.min(f.x,h.x),w=Math.max(f.x,h.x),S=Math.min(f.y,h.y),I=Math.max(f.y,h.y);L.setTransform(this._box,`translate(${v}px,${S}px)`),this._box.style.width=w-v+"px",this._box.style.height=I-S+"px"}mouseupWindow(r,a){if(!this._active||r.button!==0)return;const h=this._startPos,f=a;if(this.reset(),L.suppressClick(),h.x!==f.x||h.y!==f.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(h,f,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(L.remove(this._box),this._box=null),L.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,a){return this._map.fire(new l.Event(r,{originalEvent:a}))}}function oo(p,r){const a={};for(let h=0;h<p.length;h++)a[p[h].identifier]=r[h];return a}class kd{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,a,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),h.length===this.numTouches&&(this.centroid=function(f){const v=new l.pointGeometry(0,0);for(const w of f)v._add(w);return v.div(f.length)}(a),this.touches=oo(h,a)))}touchmove(r,a,h){if(this.aborted||!this.centroid)return;const f=oo(h,a);for(const v in this.touches){const w=this.touches[v],S=f[v];(!S||S.dist(w)>30)&&(this.aborted=!0)}}touchend(r,a,h){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class Vl{constructor(r){this.singleTap=new kd(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,a,h){this.singleTap.touchstart(r,a,h)}touchmove(r,a,h){this.singleTap.touchmove(r,a,h)}touchend(r,a,h){const f=this.singleTap.touchend(r,a,h);if(f){const v=r.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(f)<30;if(v&&w||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class Dd{constructor(){this._zoomIn=new Vl({numTouches:1,numTaps:2}),this._zoomOut=new Vl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,a,h){this._zoomIn.touchstart(r,a,h),this._zoomOut.touchstart(r,a,h)}touchmove(r,a,h){this._zoomIn.touchmove(r,a,h),this._zoomOut.touchmove(r,a,h)}touchend(r,a,h){const f=this._zoomIn.touchend(r,a,h),v=this._zoomOut.touchend(r,a,h);return f?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(f)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Iu={0:1,2:2};class so{constructor(r){this.reset(),this._clickTolerance=r.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(r,a){return!1}_move(r,a){return{}}mousedown(r,a){if(this._lastPoint)return;const h=L.mouseButton(r);this._correctButton(r,h)&&(this._lastPoint=a,this._eventButton=h)}mousemoveWindow(r,a){const h=this._lastPoint;if(h){if(r.preventDefault(),function(f,v){const w=Iu[v];return f.buttons===void 0||(f.buttons&w)!==w}(r,this._eventButton))this.reset();else if(this._moved||!(a.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=a,this._move(h,a)}}mouseupWindow(r){this._lastPoint&&L.mouseButton(r)===this._eventButton&&(this._moved&&L.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fo extends so{mousedown(r,a){super.mousedown(r,a),this._lastPoint&&(this._active=!0)}_correctButton(r,a){return a===0&&!r.ctrlKey}_move(r,a){return{around:a,panDelta:a.sub(r)}}}class gt extends so{_correctButton(r,a){return a===0&&r.ctrlKey||a===2}_move(r,a){const h=.8*(a.x-r.x);if(h)return this._active=!0,{bearingDelta:h}}contextmenu(r){r.preventDefault()}}class Ul extends so{_correctButton(r,a){return a===0&&r.ctrlKey||a===2}_move(r,a){const h=-.5*(a.y-r.y);if(h)return this._active=!0,{pitchDelta:h}}contextmenu(r){r.preventDefault()}}class Es{constructor(r){this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0)}touchstart(r,a,h){return this._calculateTransform(r,a,h)}touchmove(r,a,h){if(this._active&&!(h.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,a,h)}touchend(r,a,h){this._calculateTransform(r,a,h),this._active&&h.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,a,h){h.length>0&&(this._active=!0);const f=oo(h,a),v=new l.pointGeometry(0,0),w=new l.pointGeometry(0,0);let S=0;for(const D in f){const R=f[D],N=this._touches[D];N&&(v._add(R),w._add(R.sub(N)),S++,f[D]=R)}if(this._touches=f,S<this._minTouches||!w.mag())return;const I=w.div(S);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(S),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ao{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(r){}_move(r,a,h){return{}}touchstart(r,a,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([a[0],a[1]]))}touchmove(r,a,h){if(!this._firstTwoTouches)return;r.preventDefault();const[f,v]=this._firstTwoTouches,w=Ss(h,a,f),S=Ss(h,a,v);if(!w||!S)return;const I=this._aroundCenter?null:w.add(S).div(2);return this._move([w,S],I,r)}touchend(r,a,h){if(!this._firstTwoTouches)return;const[f,v]=this._firstTwoTouches,w=Ss(h,a,f),S=Ss(h,a,v);w&&S||(this._active&&L.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ss(p,r,a){for(let h=0;h<p.length;h++)if(p[h].identifier===a)return r[h]}function st(p,r){return Math.log(p/r)/Math.LN2}class $l extends ao{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,a){const h=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(st(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:st(this._distance,h),pinchAround:a}}}function Au(p,r){return 180*p.angleWith(r)/Math.PI}class zd extends ao{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,a){const h=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Au(this._vector,h),pinchAround:a}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const a=25/(Math.PI*this._minDiameter)*360,h=Au(r,this._startVector);return Math.abs(h)<a}}function Ts(p){return Math.abs(p.y)>Math.abs(p.x)}class Pu extends ao{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(r){this._lastPoints=r,Ts(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,a,h){const f=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(f,v,h.timeStamp),this._valid)return this._lastPoints=r,this._active=!0,{pitchDelta:(f.y+v.y)/2*-.5}}gestureBeginsVertically(r,a,h){if(this._valid!==void 0)return this._valid;const f=r.mag()>=2,v=a.mag()>=2;if(!f&&!v)return;if(!f||!v)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const w=r.y>0==a.y>0;return Ts(r)&&Ts(a)&&w}}const Cu={panStep:100,bearingStep:15,pitchStep:10};class Od{constructor(){const r=Cu;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let a=0,h=0,f=0,v=0,w=0;switch(r.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:r.shiftKey?h=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?h=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?f=1:(r.preventDefault(),w=-1);break;case 40:r.shiftKey?f=-1:(r.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(h=0,f=0),{cameraAnimation:S=>{const I=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:Md,zoom:a?Math.round(I)+a*(r.shiftKey?2:1):I,bearing:S.getBearing()+h*this._bearingStep,pitch:S.getPitch()+f*this._pitchStep,offset:[-v*this._panStep,-w*this._panStep],center:S.getCenter()},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Md(p){return p*(2-p)}const ya=4.000244140625;class ql{constructor(r,a){this._map=r,this._el=r.getCanvasContainer(),this._handler=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;let a=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const h=l.exported.now(),f=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,a!==0&&a%ya==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(f*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),r.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=r,this._delta-=a,this._active||this._start(r)),r.preventDefault()}_onTimeout(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=L.mousePos(this._el,r);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._map.transform;if(this._delta!==0){const S=this._type==="wheel"&&Math.abs(this._delta)>ya?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&I!==0&&(I=1/I);const D=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(D*I))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,h=this._startZoom,f=this._easing;let v,w=!1;if(this._type==="wheel"&&h&&f){const S=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),I=f(S);v=l.number(h,a,I),S<1?this._frameId||(this._frameId=!0):w=!0}else v=a,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let a=l.ease;if(this._prevEase){const h=this._prevEase,f=(l.exported.now()-h.start)/h.duration,v=h.easing(f+.01)-h.easing(f),w=.27/Math.sqrt(v*v+1e-4)*.01,S=Math.sqrt(.0729-w*w);a=l.bezier(w,S,.25,1)}return this._prevEase={start:l.exported.now(),duration:r,easing:a},a}reset(){this._active=!1}}class Hl{constructor(r,a){this._clickZoom=r,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Gl{constructor(){this.reset()}reset(){this._active=!1}dblclick(r,a){return r.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:h.getZoom()+(r.shiftKey?-1:1),around:h.unproject(a)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mn{constructor(){this._tap=new Vl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(r,a,h){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=a[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(r,a,h))}touchmove(r,a,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const f=a[0],v=f.y-this._swipePoint.y;return this._swipePoint=f,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,a,h)}touchend(r,a,h){this._tapTime?this._swipePoint&&h.length===0&&this.reset():this._tap.touchend(r,a,h)&&(this._tapTime=r.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qi{constructor(r,a,h){this._el=r,this._mousePan=a,this._touchPan=h}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ku{constructor(r,a,h){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=a,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Zl{constructor(r,a,h,f){this._el=r,this._touchZoom=a,this._touchRotate=h,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const No=p=>p.zoom||p.drag||p.pitch||p.rotate;class Wl extends l.Event{}function va(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Qn{constructor(r,a){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Su(r),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a),l.bindAll(["handleEvent","handleWindowEvent"],this);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,v,w]of this._listeners)L.addEventListener(f,v,f===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[r,a,h]of this._listeners)L.removeEventListener(r,a,r===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(r){const a=this._map,h=a.getCanvasContainer();this._add("mapEvent",new io(a,r));const f=a.boxZoom=new Bo(a,r);this._add("boxZoom",f);const v=new Dd,w=new Gl;a.doubleClickZoom=new Hl(w,v),this._add("tapZoom",v),this._add("clickZoom",w);const S=new Mn;this._add("tapDragZoom",S);const I=a.touchPitch=new Pu;this._add("touchPitch",I);const D=new gt(r),R=new Ul(r);a.dragRotate=new ku(r,D,R),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);const N=new Fo(r),q=new Es(r);a.dragPan=new qi(h,N,q),this._add("mousePan",N),this._add("touchPan",q,["touchZoom","touchRotate"]);const Q=new zd,H=new $l;a.touchZoomRotate=new Zl(h,H,Q,S),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",H,["touchPan","touchRotate"]);const J=a.scrollZoom=new ql(a,this);this._add("scrollZoom",J,["mousePan"]);const ce=a.keyboard=new Od;this._add("keyboard",ce),this._add("blockableMapEvent",new Tu(a));for(const ue of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])r.interactive&&r[ue]&&a[ue].enable(r[ue])}_add(r,a,h){this._handlers.push({handlerName:r,handler:a,allowed:h}),this._handlersById[r]=a}stop(r){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(No(this._eventsInProgress))||this.isZooming()}_blockedByActive(r,a,h){for(const f in r)if(f!==h&&(!a||a.indexOf(f)<0))return!0;return!1}handleWindowEvent(r){this.handleEvent(r,`${r.type}Window`)}_getMapTouches(r){const a=[];for(const h of r)this._el.contains(h.target)&&a.push(h);return a}handleEvent(r,a){if(r.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const h=r.type==="renderFrame"?void 0:r,f={needsRenderFrame:!1},v={},w={},S=r.touches,I=S?this._getMapTouches(S):void 0,D=I?L.touchPos(this._el,I):L.mousePos(this._el,r);for(const{handlerName:q,handler:Q,allowed:H}of this._handlers){if(!Q.isEnabled())continue;let J;this._blockedByActive(w,H,q)?Q.reset():Q[a||r.type]&&(J=Q[a||r.type](r,D,I),this.mergeHandlerResult(f,v,J,q,h),J&&J.needsRenderFrame&&this._triggerRenderFrame()),(J||Q.isActive())&&(w[q]=Q)}const R={};for(const q in this._previousActiveHandlers)w[q]||(R[q]=h);this._previousActiveHandlers=w,(Object.keys(R).length||va(f))&&(this._changes.push([f,v,R]),this._triggerRenderFrame()),(Object.keys(w).length||va(f))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:N}=f;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))}mergeHandlerResult(r,a,h,f,v){if(!h)return;l.extend(r,h);const w={handlerName:f,originalEvent:h.originalEvent||v};h.zoomDelta!==void 0&&(a.zoom=w),h.panDelta!==void 0&&(a.drag=w),h.pitchDelta!==void 0&&(a.pitch=w),h.bearingDelta!==void 0&&(a.rotate=w)}_applyChanges(){const r={},a={},h={};for(const[f,v,w]of this._changes)f.panDelta&&(r.panDelta=(r.panDelta||new l.pointGeometry(0,0))._add(f.panDelta)),f.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(r.around=f.around),f.pinchAround!==void 0&&(r.pinchAround=f.pinchAround),f.noInertia&&(r.noInertia=f.noInertia),l.extend(a,v),l.extend(h,w);this._updateMapTransform(r,a,h),this._changes=[]}_updateMapTransform(r,a,h){const f=this._map,v=f.transform;if(!va(r))return this._fireEvents(a,h,!0);let{panDelta:w,zoomDelta:S,bearingDelta:I,pitchDelta:D,around:R,pinchAround:N}=r;N!==void 0&&(R=N),f._stop(!0),R=R||f.transform.centerPoint;const q=v.pointLocation(w?R.sub(w):R);I&&(v.bearing+=I),D&&(v.pitch+=D),S&&(v.zoom+=S),v.setLocationAtPoint(q,R),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(a,h,!0)}_fireEvents(r,a,h){const f=No(this._eventsInProgress),v=No(r),w={};for(const R in r){const{originalEvent:N}=r[R];this._eventsInProgress[R]||(w[`${R}start`]=N),this._eventsInProgress[R]=r[R]}!f&&v&&this._fireEvent("movestart",v.originalEvent);for(const R in w)this._fireEvent(R,w[R]);v&&this._fireEvent("move",v.originalEvent);for(const R in r){const{originalEvent:N}=r[R];this._fireEvent(R,N)}const S={};let I;for(const R in this._eventsInProgress){const{handlerName:N,originalEvent:q}=this._eventsInProgress[R];this._handlersById[N].isActive()||(delete this._eventsInProgress[R],I=a[N]||q,S[`${R}end`]=I)}for(const R in S)this._fireEvent(R,S[R]);const D=No(this._eventsInProgress);if(h&&(f||v)&&!D){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;R?(N(R.bearing||this._map.getBearing())&&(R.bearing=0),this._map.easeTo(R,{originalEvent:I})):(this._map.fire(new l.Event("moveend",{originalEvent:I})),N(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,a){this._map.fire(new l.Event(r,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Wl("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Dr={extend:(p,...r)=>l.extend(p,...r),run(p){p()},logToElement(p,r=!1,a="log"){const h=window.document.getElementById(a);h&&(r&&(h.innerHTML=""),h.innerHTML+=`<br>${p}`)}};class xa extends l.Evented{constructor(r,a){super(),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=a.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,a){return this.jumpTo({center:r},a)}panBy(r,a,h){return r=l.pointGeometry.convert(r).mult(-1),this.panTo(this.transform.center,l.extend({offset:r},a),h)}panTo(r,a,h){return this.easeTo(l.extend({center:r},a),h)}getZoom(){return this.transform.zoom}setZoom(r,a){return this.jumpTo({zoom:r},a),this}zoomTo(r,a,h){return this.easeTo(l.extend({zoom:r},a),h)}zoomIn(r,a){return this.zoomTo(this.getZoom()+1,r,a),this}zoomOut(r,a){return this.zoomTo(this.getZoom()-1,r,a),this}getBearing(){return this.transform.bearing}setBearing(r,a){return this.jumpTo({bearing:r},a),this}getPadding(){return this.transform.padding}setPadding(r,a){return this.jumpTo({padding:r},a),this}rotateTo(r,a,h){return this.easeTo(l.extend({bearing:r},a),h)}resetNorth(r,a){return this.rotateTo(0,l.extend({duration:1e3},r),a),this}resetNorthPitch(r,a){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},r),a),this}snapToNorth(r,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,a):this}getPitch(){return this.transform.pitch}setPitch(r,a){return this.jumpTo({pitch:r},a),this}cameraForBounds(r,a){r=l.LngLatBounds.convert(r);const h=a&&a.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),h,a)}_cameraForBoxAndBearing(r,a,h,f){const v={top:0,bottom:0,right:0,left:0};if(typeof(f=l.extend({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const Te=f.padding;f.padding={top:Te,bottom:Te,right:Te,left:Te}}f.padding=l.extend(v,f.padding);const w=this.transform,S=w.padding,I=w.project(l.LngLat.convert(r)),D=w.project(l.LngLat.convert(a)),R=I.rotate(-h*Math.PI/180),N=D.rotate(-h*Math.PI/180),q=new l.pointGeometry(Math.max(R.x,N.x),Math.max(R.y,N.y)),Q=new l.pointGeometry(Math.min(R.x,N.x),Math.min(R.y,N.y)),H=q.sub(Q),J=(w.width-(S.left+S.right+f.padding.left+f.padding.right))/H.x,ce=(w.height-(S.top+S.bottom+f.padding.top+f.padding.bottom))/H.y;if(ce<0||J<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ue=Math.min(w.scaleZoom(w.scale*Math.min(J,ce)),f.maxZoom),ge=l.pointGeometry.convert(f.offset),de=new l.pointGeometry((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(h*Math.PI/180),Oe=ge.add(de).mult(w.scale/w.zoomScale(ue));return{center:w.unproject(I.add(D).div(2).sub(Oe)),zoom:ue,bearing:h}}fitBounds(r,a,h){return this._fitInternal(this.cameraForBounds(r,a),a,h)}fitScreenCoordinates(r,a,h,f,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(r)),this.transform.pointLocation(l.pointGeometry.convert(a)),h,f),f,v)}_fitInternal(r,a,h){return r?(delete(a=l.extend(r,a)).padding,a.linear?this.easeTo(a,h):this.flyTo(a,h)):this}jumpTo(r,a){this.stop();const h=this.transform;let f=!1,v=!1,w=!1;return"zoom"in r&&h.zoom!==+r.zoom&&(f=!0,h.zoom=+r.zoom),r.center!==void 0&&(h.center=l.LngLat.convert(r.center)),"bearing"in r&&h.bearing!==+r.bearing&&(v=!0,h.bearing=+r.bearing),"pitch"in r&&h.pitch!==+r.pitch&&(w=!0,h.pitch=+r.pitch),r.padding==null||h.isPaddingEqual(r.padding)||(h.padding=r.padding),this.fire(new l.Event("movestart",a)).fire(new l.Event("move",a)),f&&this.fire(new l.Event("zoomstart",a)).fire(new l.Event("zoom",a)).fire(new l.Event("zoomend",a)),v&&this.fire(new l.Event("rotatestart",a)).fire(new l.Event("rotate",a)).fire(new l.Event("rotateend",a)),w&&this.fire(new l.Event("pitchstart",a)).fire(new l.Event("pitch",a)).fire(new l.Event("pitchend",a)),this.fire(new l.Event("moveend",a))}easeTo(r,a){this._stop(!1,r.easeId),((r=l.extend({offset:[0,0],duration:500,easing:l.ease},r)).animate===!1||!r.essential&&l.exported.prefersReducedMotion)&&(r.duration=0);const h=this.transform,f=this.getZoom(),v=this.getBearing(),w=this.getPitch(),S=this.getPadding(),I="zoom"in r?+r.zoom:f,D="bearing"in r?this._normalizeBearing(r.bearing,v):v,R="pitch"in r?+r.pitch:w,N="padding"in r?r.padding:h.padding,q=l.pointGeometry.convert(r.offset);let Q=h.centerPoint.add(q);const H=h.pointLocation(Q),J=l.LngLat.convert(r.center||H);this._normalizeCenter(J);const ce=h.project(H),ue=h.project(J).sub(ce),ge=h.zoomScale(I-f);let de,Oe;r.around&&(de=l.LngLat.convert(r.around),Oe=h.locationPoint(de));const Te={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==f,this._rotating=this._rotating||v!==D,this._pitching=this._pitching||R!==w,this._padding=!h.isPaddingEqual(N),this._easeId=r.easeId,this._prepareEase(a,r.noMoveStart,Te),this._ease(Ce=>{if(this._zooming&&(h.zoom=l.number(f,I,Ce)),this._rotating&&(h.bearing=l.number(v,D,Ce)),this._pitching&&(h.pitch=l.number(w,R,Ce)),this._padding&&(h.interpolatePadding(S,N,Ce),Q=h.centerPoint.add(q)),de)h.setLocationAtPoint(de,Oe);else{const qe=h.zoomScale(h.zoom-f),rt=I>f?Math.min(2,ge):Math.max(.5,ge),ze=Math.pow(rt,1-Ce),vt=h.unproject(ce.add(ue.mult(Ce*ze)).mult(qe));h.setLocationAtPoint(h.renderWorldCopies?vt.wrap():vt,Q)}this._fireMoveEvents(a)},Ce=>{this._afterEase(a,Ce)},r),this}_prepareEase(r,a,h={}){this._moving=!0,a||h.moving||this.fire(new l.Event("movestart",r)),this._zooming&&!h.zooming&&this.fire(new l.Event("zoomstart",r)),this._rotating&&!h.rotating&&this.fire(new l.Event("rotatestart",r)),this._pitching&&!h.pitching&&this.fire(new l.Event("pitchstart",r))}_fireMoveEvents(r){this.fire(new l.Event("move",r)),this._zooming&&this.fire(new l.Event("zoom",r)),this._rotating&&this.fire(new l.Event("rotate",r)),this._pitching&&this.fire(new l.Event("pitch",r))}_afterEase(r,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const h=this._zooming,f=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new l.Event("zoomend",r)),f&&this.fire(new l.Event("rotateend",r)),v&&this.fire(new l.Event("pitchend",r)),this.fire(new l.Event("moveend",r))}flyTo(r,a){if(!r.essential&&l.exported.prefersReducedMotion){const er=l.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(er,a)}this.stop(),r=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},r);const h=this.transform,f=this.getZoom(),v=this.getBearing(),w=this.getPitch(),S=this.getPadding(),I="zoom"in r?l.clamp(+r.zoom,h.minZoom,h.maxZoom):f,D="bearing"in r?this._normalizeBearing(r.bearing,v):v,R="pitch"in r?+r.pitch:w,N="padding"in r?r.padding:h.padding,q=h.zoomScale(I-f),Q=l.pointGeometry.convert(r.offset);let H=h.centerPoint.add(Q);const J=h.pointLocation(H),ce=l.LngLat.convert(r.center||J);this._normalizeCenter(ce);const ue=h.project(J),ge=h.project(ce).sub(ue);let de=r.curve;const Oe=Math.max(h.width,h.height),Te=Oe/q,Ce=ge.mag();if("minZoom"in r){const er=l.clamp(Math.min(r.minZoom,f,I),h.minZoom,h.maxZoom),jr=Oe/h.zoomScale(er-f);de=Math.sqrt(jr/Ce*2)}const qe=de*de;function rt(er){const jr=(Te*Te-Oe*Oe+(er?-1:1)*qe*qe*Ce*Ce)/(2*(er?Te:Oe)*qe*Ce);return Math.log(Math.sqrt(jr*jr+1)-jr)}function ze(er){return(Math.exp(er)-Math.exp(-er))/2}function vt(er){return(Math.exp(er)+Math.exp(-er))/2}const at=rt(0);let Rt=function(er){return vt(at)/vt(at+de*er)},rr=function(er){return Oe*((vt(at)*(ze(jr=at+de*er)/vt(jr))-ze(at))/qe)/Ce;var jr},Kt=(rt(1)-at)/de;if(Math.abs(Ce)<1e-6||!isFinite(Kt)){if(Math.abs(Oe-Te)<1e-6)return this.easeTo(r,a);const er=Te<Oe?-1:1;Kt=Math.abs(Math.log(Te/Oe))/de,rr=function(){return 0},Rt=function(jr){return Math.exp(er*de*jr)}}return r.duration="duration"in r?+r.duration:1e3*Kt/("screenSpeed"in r?+r.screenSpeed/de:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=v!==D,this._pitching=R!==w,this._padding=!h.isPaddingEqual(N),this._prepareEase(a,!1),this._ease(er=>{const jr=er*Kt,Ft=1/Rt(jr);h.zoom=er===1?I:f+h.scaleZoom(Ft),this._rotating&&(h.bearing=l.number(v,D,er)),this._pitching&&(h.pitch=l.number(w,R,er)),this._padding&&(h.interpolatePadding(S,N,er),H=h.centerPoint.add(Q));const sr=er===1?ce:h.unproject(ue.add(ge.mult(rr(jr))).mult(Ft));h.setLocationAtPoint(h.renderWorldCopies?sr.wrap():sr,H),this._fireMoveEvents(a)},()=>this._afterEase(a),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,a){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,a)}if(!r){const h=this.handlers;h&&h.stop(!1)}return this}_ease(r,a,h){h.animate===!1||h.duration===0?(r(1),a()):(this._easeStart=l.exported.now(),this._easeOptions=h,this._onEaseFrame=r,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const r=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(r,a){r=l.wrap(r,-180,180);const h=Math.abs(r-a);return Math.abs(r-360-a)<h&&(r-=360),Math.abs(r+360-a)<h&&(r+=360),r}_normalizeCenter(r){const a=this.transform;if(!a.renderWorldCopies||a.lngRange)return;const h=r.lng-a.center.lng;r.lng+=h>180?-360:h<-180?360:0}}class ba{constructor(r={}){this.options=r,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=L.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=L.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=L.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){L.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,a){const h=this._map._getUIString(`AttributionControl.${a}`);r.title=h,r.setAttribute("aria-label",h)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(r){!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const a=this._map.style.sourceCaches;for(const f in a){const v=a[f];if(v.used){const w=v.getSource();w.attribution&&r.indexOf(w.attribution)<0&&r.push(w.attribution)}}r=r.filter(f=>String(f).trim()),r.sort((f,v)=>f.length-v.length),r=r.filter((f,v)=>{for(let w=v+1;w<r.length;w++)if(r[w].indexOf(f)>=0)return!1;return!0});const h=r.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,r.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Kl{constructor(r={}){this.options=r,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=L.create("div","maplibregl-ctrl mapboxgl-ctrl");const a=L.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){L.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const r=this._container.children;if(r.length){const a=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&a.classList.add("maplibregl-compact","mapboxgl-compact"):a.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Du{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const a=++this._id;return this._queue.push({callback:r,id:a,cancelled:!1}),a}remove(r){const a=this._currentlyRunning,h=a?this._queue.concat(a):this._queue;for(const f of h)if(f.id===r)return void(f.cancelled=!0)}run(r=0){const a=this._currentlyRunning=this._queue;this._queue=[];for(const h of a)if(!h.cancelled&&(h.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const zu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ld={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},xi={showCompass:!0,showZoom:!0,visualizePitch:!1};class wa{constructor(r,a,h=!1){this._clickTolerance=10,this.element=a,this.mouseRotate=new gt({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,h&&(this.mousePitch=new Ul({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),L.addEventListener(a,"mousedown",this.mousedown),L.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),L.addEventListener(a,"touchmove",this.touchmove),L.addEventListener(a,"touchend",this.touchend),L.addEventListener(a,"touchcancel",this.reset)}down(r,a){this.mouseRotate.mousedown(r,a),this.mousePitch&&this.mousePitch.mousedown(r,a),L.disableDrag()}move(r,a){const h=this.map,f=this.mouseRotate.mousemoveWindow(r,a);if(f&&f.bearingDelta&&h.setBearing(h.getBearing()+f.bearingDelta),this.mousePitch){const v=this.mousePitch.mousemoveWindow(r,a);v&&v.pitchDelta&&h.setPitch(h.getPitch()+v.pitchDelta)}}off(){const r=this.element;L.removeEventListener(r,"mousedown",this.mousedown),L.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),L.removeEventListener(r,"touchmove",this.touchmove),L.removeEventListener(r,"touchend",this.touchend),L.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){L.enableDrag(),L.removeEventListener(window,"mousemove",this.mousemove),L.removeEventListener(window,"mouseup",this.mouseup)}mousedown(r){this.down(l.extend({},r,{ctrlKey:!0,preventDefault:()=>r.preventDefault()}),L.mousePos(this.element,r)),L.addEventListener(window,"mousemove",this.mousemove),L.addEventListener(window,"mouseup",this.mouseup)}mousemove(r){this.move(r,L.mousePos(this.element,r))}mouseup(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()}touchstart(r){r.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=L.touchPos(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>r.preventDefault()},this._startPos))}touchmove(r){r.targetTouches.length!==1?this.reset():(this._lastPos=L.touchPos(this.element,r.targetTouches)[0],this.move({preventDefault:()=>r.preventDefault()},this._lastPos))}touchend(r){r.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Et(p,r,a){if(p=new l.LngLat(p.lng,p.lat),r){const h=new l.LngLat(p.lng-360,p.lat),f=new l.LngLat(p.lng+360,p.lat),v=a.locationPoint(p).distSqr(r);a.locationPoint(h).distSqr(r)<v?p=h:a.locationPoint(f).distSqr(r)<v&&(p=f)}for(;Math.abs(p.lng-a.center.lng)>180;){const h=a.locationPoint(p);if(h.x>=0&&h.y>=0&&h.x<=a.width&&h.y<=a.height)break;p.lng>a.center.lng?p.lng-=360:p.lng+=360}return p}const kt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Is(p,r,a){const h=p.classList;for(const f in kt)h.remove(`maplibregl-${a}-anchor-${f}`,`mapboxgl-${a}-anchor-${f}`);h.add(`maplibregl-${a}-anchor-${r}`,`mapboxgl-${a}-anchor-${r}`)}class As extends l.Evented{constructor(r,a){if(super(),(r instanceof HTMLElement||a)&&(r=l.extend({element:r},a)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.pointGeometry.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=L.create("div"),this._element.setAttribute("aria-label","Map marker");const h=L.createNS("http://www.w3.org/2000/svg","svg"),f=41,v=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${f}px`),h.setAttributeNS(null,"width",`${v}px`),h.setAttributeNS(null,"viewBox",`0 0 ${v} ${f}`);const w=L.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const S=L.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const I=L.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ge of D){const de=L.createNS("http://www.w3.org/2000/svg","ellipse");de.setAttributeNS(null,"opacity","0.04"),de.setAttributeNS(null,"cx","10.5"),de.setAttributeNS(null,"cy","5.80029008"),de.setAttributeNS(null,"rx",ge.rx),de.setAttributeNS(null,"ry",ge.ry),I.appendChild(de)}const R=L.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const N=L.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(N);const q=L.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const Q=L.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(Q);const H=L.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(6.0, 7.0)"),H.setAttributeNS(null,"fill","#FFFFFF");const J=L.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ce=L.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");const ue=L.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),J.appendChild(ce),J.appendChild(ue),S.appendChild(I),S.appendChild(R),S.appendChild(q),S.appendChild(H),S.appendChild(J),h.appendChild(S),h.setAttributeNS(null,"height",f*this._scale+"px"),h.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(h),this._offset=l.pointGeometry.convert(r&&r.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),Is(this._element,this._anchor,"marker"),this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),L.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const f=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(r){const a=r.code,h=r.charCode||r.keyCode;a!=="Space"&&a!=="Enter"&&h!==32&&h!==13||this.togglePopup()}_onMapClick(r){const a=r.originalEvent.target,h=this._element;this._popup&&(a===h||h.contains(a))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}_update(r){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Et(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let a="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?a=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(a=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let h="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?h="rotateX(0deg)":this._pitchAlignment==="map"&&(h=`rotateX(${this._map.getPitch()}deg)`),r&&r.type!=="moveend"||(this._pos=this._pos.round()),L.setTransform(this._element,`${kt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${h} ${a}`)}getOffset(){return this._offset}setOffset(r){return this._offset=l.pointGeometry.convert(r),this._update(),this}_onMove(r){if(!this._isDragging){const a=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=a}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Xl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let nn,lo=0,Ln=!1;const Rd={maxWidth:100,unit:"metric"};function Ps(p,r,a){const h=a&&a.maxWidth||100,f=p._container.clientHeight/2,v=p.unproject([0,f]),w=p.unproject([h,f]),S=v.distanceTo(w);if(a&&a.unit==="imperial"){const I=3.2808*S;I>5280?Cr(r,h,I/5280,p._getUIString("ScaleControl.Miles")):Cr(r,h,I,p._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Cr(r,h,S/1852,p._getUIString("ScaleControl.NauticalMiles")):S>=1e3?Cr(r,h,S/1e3,p._getUIString("ScaleControl.Kilometers")):Cr(r,h,S,p._getUIString("ScaleControl.Meters"))}function Cr(p,r,a,h){const f=function(v){const w=Math.pow(10,`${Math.floor(v)}`.length-1);let S=v/w;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(I){const D=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*D)/D}(S),w*S}(a);p.style.width=r*(f/a)+"px",p.innerHTML=`${f}&nbsp;${h}`}const on={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ou=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function jo(p){if(p){if(typeof p=="number"){const r=Math.round(Math.sqrt(.5*Math.pow(p,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,p),"top-left":new l.pointGeometry(r,r),"top-right":new l.pointGeometry(-r,r),bottom:new l.pointGeometry(0,-p),"bottom-left":new l.pointGeometry(r,-r),"bottom-right":new l.pointGeometry(-r,-r),left:new l.pointGeometry(p,0),right:new l.pointGeometry(-p,0)}}if(p instanceof l.pointGeometry||Array.isArray(p)){const r=l.pointGeometry.convert(p);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.pointGeometry.convert(p.center||[0,0]),top:l.pointGeometry.convert(p.top||[0,0]),"top-left":l.pointGeometry.convert(p["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(p["top-right"]||[0,0]),bottom:l.pointGeometry.convert(p.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(p["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(p["bottom-right"]||[0,0]),left:l.pointGeometry.convert(p.left||[0,0]),right:l.pointGeometry.convert(p.right||[0,0])}}return jo(new l.pointGeometry(0,0))}const Cs={supported:T,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends xa{constructor(p){var r;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(p=l.extend({},Ld,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new vs(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),{bearingSnap:p.bearingSnap}),this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new Du,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},zu,p.locale),this._clickTolerance=p.clickTolerance,this._pixelRatio=(r=p.pixelRatio)!==null&&r!==void 0?r:devicePixelRatio,this._requestManager=new K(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Qn(this,p),this._hash=p.hash&&new xu(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new ba({customAttribution:p.customAttribution})),p.maplibreLogo&&this.addControl(new Kl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new l.Event(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new l.Event(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new l.Event("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(p,r){if(r===void 0&&(r=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=p.onAdd(this);this._controls.push(p);const h=this._controlPositions[r];return r.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(p);return r>-1&&this._controls.splice(r,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}resize(p){const r=this._containerDimensions(),a=r[0],h=r[1];this._resizeCanvas(a,h,this.getPixelRatio()),this.transform.resize(a,h),this.painter.resize(a,h,this.getPixelRatio());const f=!this._moving;return f&&(this.stop(),this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p))),this.fire(new l.Event("resize",p)),f&&this.fire(new l.Event("moveend",p)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(p){const[r,a]=this._containerDimensions();this._pixelRatio=p,this._resizeCanvas(r,a,p),this.painter.resize(r,a,p)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p==null?60:p)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}project(p){return this.transform.locationPoint(l.LngLat.convert(p))}unproject(p){return this.transform.pointLocation(l.pointGeometry.convert(p))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(p,r,a){if(p==="mouseenter"||p==="mouseover"){let h=!1;return{layer:r,listener:a,delegates:{mousemove:v=>{const w=this.getLayer(r)?this.queryRenderedFeatures(v.point,{layers:[r]}):[];w.length?h||(h=!0,a.call(this,new Un(p,this,v.originalEvent,{features:w}))):h=!1},mouseout:()=>{h=!1}}}}if(p==="mouseleave"||p==="mouseout"){let h=!1;return{layer:r,listener:a,delegates:{mousemove:w=>{(this.getLayer(r)?this.queryRenderedFeatures(w.point,{layers:[r]}):[]).length?h=!0:h&&(h=!1,a.call(this,new Un(p,this,w.originalEvent)))},mouseout:w=>{h&&(h=!1,a.call(this,new Un(p,this,w.originalEvent)))}}}}{const h=f=>{const v=this.getLayer(r)?this.queryRenderedFeatures(f.point,{layers:[r]}):[];v.length&&(f.features=v,a.call(this,f),delete f.features)};return{layer:r,listener:a,delegates:{[p]:h}}}}on(p,r,a){if(a===void 0)return super.on(p,r);const h=this._createDelegatedListener(p,r,a);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(h);for(const f in h.delegates)this.on(f,h.delegates[f]);return this}once(p,r,a){if(a===void 0)return super.once(p,r);const h=this._createDelegatedListener(p,r,a);for(const f in h.delegates)this.once(f,h.delegates[f]);return this}off(p,r,a){return a===void 0?super.off(p,r):(this._delegatedListeners&&this._delegatedListeners[p]&&(h=>{const f=this._delegatedListeners[p];for(let v=0;v<f.length;v++){const w=f[v];if(w.layer===r&&w.listener===a){for(const S in w.delegates)this.off(S,w.delegates[S]);return f.splice(v,1),this}}})(),this)}queryRenderedFeatures(p,r){if(!this.style)return[];let a;if(r!==void 0||p===void 0||p instanceof l.pointGeometry||Array.isArray(p)||(r=p,p=void 0),r=r||{},(p=p||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof p[0]=="number")a=[l.pointGeometry.convert(p)];else{const h=l.pointGeometry.convert(p[0]),f=l.pointGeometry.convert(p[1]);a=[h,new l.pointGeometry(f.x,h.y),f,new l.pointGeometry(h.x,f.y),h]}return this.style.queryRenderedFeatures(a,r,this.transform)}querySourceFeatures(p,r){return this.style.querySourceFeatures(p,r)}setStyle(p,r){return(r=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(p,r))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const r=this._locale[p];if(r==null)throw new Error(`Missing UI string '${p}'`);return r}_updateStyle(p,r){return this.style&&(this.style.setEventedParent(null),this.style._remove()),p?(this.style=new hn(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new hn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,r){if(typeof p=="string"){const a=this._requestManager.transformRequest(p,l.ResourceType.Style);l.getJSON(a,(h,f)=>{h?this.fire(new l.ErrorEvent(h)):f&&this._updateDiff(f,r)})}else typeof p=="object"&&this._updateDiff(p,r)}_updateDiff(p,r){try{this.style.setState(p)&&this._update(!0)}catch(a){l.warnOnce(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(p,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(p,r){return this._lazyInitEmptyStyle(),this.style.addSource(p,r),this._update(!0)}isSourceLoaded(p){const r=this.style&&this.style.sourceCaches[p];if(r!==void 0)return r.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const r in p){const a=p[r]._tiles;for(const h in a){const f=a[h];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}addSourceType(p,r,a){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,r,a)}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,r,{pixelRatio:a=1,sdf:h=!1,stretchX:f,stretchY:v,content:w}={}){if(this._lazyInitEmptyStyle(),r instanceof HTMLImageElement||l.isImageBitmap(r)){const{width:S,height:I,data:D}=l.exported.getImageData(r);this.style.addImage(p,{data:new l.RGBAImage({width:S,height:I},D),pixelRatio:a,stretchX:f,stretchY:v,content:w,sdf:h,version:0})}else{if(r.width===void 0||r.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:S,height:I,data:D}=r,R=r;this.style.addImage(p,{data:new l.RGBAImage({width:S,height:I},new Uint8Array(D)),pixelRatio:a,stretchX:f,stretchY:v,content:w,sdf:h,version:0,userImage:R}),R.onAdd&&R.onAdd(this,p)}}}updateImage(p,r){const a=this.style.getImage(p);if(!a)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=r instanceof HTMLImageElement||l.isImageBitmap(r)?l.exported.getImageData(r):r,{width:f,height:v,data:w}=h;if(f===void 0||v===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==a.data.width||v!==a.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const S=!(r instanceof HTMLImageElement||l.isImageBitmap(r));a.data.replace(w,S),this.style.updateImage(p,a)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,r){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),r)}listImages(){return this.style.listImages()}addLayer(p,r){return this._lazyInitEmptyStyle(),this.style.addLayer(p,r),this._update(!0)}moveLayer(p,r){return this.style.moveLayer(p,r),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,r,a){return this.style.setLayerZoomRange(p,r,a),this._update(!0)}setFilter(p,r,a={}){return this.style.setFilter(p,r,a),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,r,a,h={}){return this.style.setPaintProperty(p,r,a,h),this._update(!0)}getPaintProperty(p,r){return this.style.getPaintProperty(p,r)}setLayoutProperty(p,r,a,h={}){return this.style.setLayoutProperty(p,r,a,h),this._update(!0)}getLayoutProperty(p,r){return this.style.getLayoutProperty(p,r)}setLight(p,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(p,r){return this.style.setFeatureState(p,r),this._update()}removeFeatureState(p,r){return this.style.removeFeatureState(p,r),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,r=0;return this._container&&(p=this._container.clientWidth||400,r=this._container.clientHeight||300),[p,r]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map","mapboxgl-map");const r=this._canvasContainer=L.create("div","maplibregl-canvas-container mapboxgl-canvas-container",p);this._interactive&&r.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=L.create("canvas","maplibregl-canvas mapboxgl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const a=this._containerDimensions();this._resizeCanvas(a[0],a[1],this.getPixelRatio());const h=this._controlContainer=L.create("div","maplibregl-control-container mapboxgl-control-container",p),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{f[v]=L.create("div",`maplibregl-ctrl-${v} mapboxgl-ctrl-${v}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,r,a){this._canvas.width=a*p,this._canvas.height=a*r,this._canvas.style.width=`${p}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const p=l.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);r?(this.painter=new jl(r,this.transform),l.exported$1.testSupport(r)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){let r,a=0;const h=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(r=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,r),a=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const w=this.transform.zoom,S=l.exported.now();this.style.zoomHistory.update(w,S);const I=new l.EvaluationParameters(w,{now:S,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),D=I.crossFadingFactor();D===1&&D===this._crossFadingFactor||(f=!0,this._crossFadingFactor=D),this.style.update(I)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const w=l.exported.now()-a;h.endQueryEXT(h.TIME_ELAPSED_EXT,r),setTimeout(()=>{const S=h.getQueryObjectEXT(r,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(r),this.fire(new l.Event("gpu-timing-frame",{cpuTime:w,gpuTime:S}))},50)}if(this.listens("gpu-timing-layer")){const w=this.painter.collectGpuTimers();setTimeout(()=>{const S=this.painter.queryGpuTimers(w);this.fire(new l.Event("gpu-timing-layer",{layerTimes:S}))},50)}const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const r of this._controls)r.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),L.remove(this._canvasContainer),L.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(p=>{l.PerformanceUtils.frame(p),this._frame=null,this._render(p)}))}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}_setCacheLimits(p,r){l.setCacheLimits(p,r)}},NavigationControl:class{constructor(p){this.options=l.extend({},xi,p),this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map.getZoom(),r=p===this._map.getMaxZoom(),a=p===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wa(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){L.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,r){const a=L.create("button",p,this._container);return a.type="button",a.addEventListener("click",r),a}_setButtonTitle(p,r){const a=this._map._getUIString(`NavigationControl.${r}`);p.title=a,p.setAttribute("aria-label",a)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({},Xl,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(p){var r;return this._map=p,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,nn!==void 0?r(nn):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(a=>{nn=a.state!=="denied",r(nn)}):(nn=!!window.navigator.geolocation,r(nn)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),L.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,lo=0,Ln=!1}_isOutOfMapMaxBounds(p){const r=this._map.getMaxBounds(),a=p.coords;return r&&(a.longitude<r.getWest()||a.longitude>r.getEast()||a.latitude<r.getSouth()||a.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const r=new l.LngLat(p.coords.longitude,p.coords.latitude),a=p.coords.accuracy,h=this._map.getBearing(),f=l.extend({bearing:h},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(a),f,{geolocateSource:!0})}_updateMarker(p){if(p){const r=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map._container.clientHeight/2,r=this._map.unproject([0,p]),a=this._map.unproject([1,p]),h=r.distanceTo(a),f=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&Ln)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=L.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=L.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new As(this._dotElement),this._circleElement=L.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new As({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lo--,Ln=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),lo++,lo>1?(p={maximumAge:6e5,timeout:0},Ln=!0):(p=this.options.positionOptions,Ln=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ba,LogoControl:Kl,ScaleControl:class{constructor(p){this.options=l.extend({},Rd,p),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ps(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){L.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,Ps(this._map,this._container,this.options)}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=L.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){L.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=L.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);L.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(on),p),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&L.remove(this._content),this._container&&(L.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const r=document.createDocumentFragment(),a=document.createElement("body");let h;for(a.innerHTML=p;h=a.firstChild,h;)r.appendChild(h);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=L.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){this._container&&this._container.classList.add(p)}removeClassName(p){this._container&&this._container.classList.remove(p)}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}_createCloseButton(){this.options.closeButton&&(this._closeButton=L.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_update(p){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=L.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=L.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(v=>this._container.classList.add(v)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Et(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p))return;const r=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let a=this.options.anchor;const h=jo(this.options.offset);if(!a){const v=this._container.offsetWidth,w=this._container.offsetHeight;let S;S=r.y+h.bottom.y<w?["top"]:r.y>this._map.transform.height-w?["bottom"]:[],r.x<v/2?S.push("left"):r.x>this._map.transform.width-v/2&&S.push("right"),a=S.length===0?"bottom":S.join("-")}const f=r.add(h[a]).round();L.setTransform(this._container,`${kt[a]} translate(${f.x}px,${f.y}px)`),Is(this._container,a,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Ou);p&&p.focus()}_onClose(){this.remove()}},Marker:As,Style:hn,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:Fe,GeoJSONSource:Ir,ImageSource:Ar,RasterDEMTileSource:pr,RasterTileSource:Ot,VectorTileSource:At,VideoSource:Fr,prewarm:function(){$e().acquire(Me)},clearPrewarmedResources:function(){const p=Qe;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Me),Qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return Re.workerCount},set workerCount(p){Re.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){l.clearTileCache(p)},workerUrl:"",addProtocol(p,r){l.config.REGISTERED_PROTOCOLS[p]=r},removeProtocol(p){delete l.config.REGISTERED_PROTOCOLS[p]}};return Dr.extend(Cs,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),Cs});var x=m;return x})})(Yx);var Ec=Yx.exports;const T5={name:"MyMap",data:()=>({map_style_url:"https://mirrors.sustech.edu.cn/osm-tile/styles/osm-street/style.json",map_text_colour:"#000000",bus_location_data_api:[],bus_location_data_display:[],bus_plate_hash:{298:{plate:"\u7CA4BDF298"},363:{plate:"\u7CA4BDF363"},8040:{plate:"\u7CA4BDF040"},8147:{plate:"\u7CA4BDF147"},8267:{plate:"\u7CA4BDF267"},8330:{plate:"\u7CA4BDF330"},8335:{plate:"\u7CA4BDF335"},8338:{plate:"\u7CA4BDF338"},8345:{plate:"\u7CA4BDF345"},8365:{plate:"\u7CA4BDF365"},8371:{plate:"\u7CA4BDF371"},8411:{plate:"\u7CA4BDF411"},8421:{plate:"\u7CA4BDF421"},8430:{plate:"\u7CA4BDF430"},8447:{plate:"\u7CA4BDF447"},8458:{plate:"\u7CA4BDF458"},8470:{plate:"\u7CA4BDF470"},8471:{plate:"\u7CA4BDF471"},18447:{plate:"\u7CA4BDF447"}},geojson_line_1:[[113.9902000608227,22.60334446057298,0],[113.9903507353066,22.60274690433305,0],[113.9908897685934,22.60223280847205,0],[113.9916260097764,22.60156692563558,0],[113.9920446448193,22.60109135771524,0],[113.9920345671635,22.60052003061499,0],[113.9919356057219,22.60002742855453,0],[113.9913193648925,22.59945330686925,0],[113.9908118273651,22.59919305096794,0],[113.9905758993394,22.59903425858952,0],[113.9904009525345,22.59862018369482,0],[113.9902978490773,22.59752639824848,0],[113.9904063277428,22.59709615868556,0],[113.9908760621444,22.59704147897459,0],[113.9915566904328,22.5972455558366,0],[113.9920342333153,22.59726814181022,0],[113.9927162086146,22.5968173712095,0],[113.9932552142158,22.59630326187374,0],[113.9938251162565,22.5960599036024,0],[113.9942637689173,22.59607116200299,0],[113.9945506236767,22.59551917942994,0],[113.9952872316258,22.59597241715224,0],[113.9965296425777,22.59731692465482,0],[113.9980455511388,22.59902110136386,0],[113.9987961352288,22.59953364148681,0],[113.9996172189355,22.60002130471761,0],[113.9988625272248,22.60073512664515,0],[113.998734780645,22.60117875994807,0],[113.9987272567012,22.60148247090658,0],[113.9984811102924,22.60178382602745,0],[113.9982613807302,22.6021205004729,0],[113.9980697519452,22.60258771673122,0],[113.9980026147617,22.60300575140722,0],[113.9979489117119,22.60325062940188,0],[113.9978602396981,22.6033412591236,0],[113.9968866415579,22.6029808956564,0],[113.9962401029074,22.60288348203091,0],[113.9955117554291,22.60290040283193,0],[113.9950813789864,22.60335930509263,0],[113.9944946598457,22.60394737599491,0],[113.9939497003322,22.60464554145209,0],[113.9934784038899,22.60548092977822,0],[113.995278497141,22.60640224097063,0],[113.9953277666447,22.60667341560261,0],[113.9964905851169,22.6063775771138,0],[113.9977156537446,22.60596002561628,0],[113.9983207115444,22.60613169032316,0],[113.9986648706885,22.60659923685179,0],[113.9988979465801,22.60815331611633,0],[113.9981618912118,22.60975341767644,0],[113.9976555155949,22.61051444868976,0],[113.9973489079054,22.61067741494136,0]],geojson_line_2:[[113.9914596783045,22.59960492109923,0],[113.9918969233072,22.59993661748595,0],[113.9920105698998,22.6005318195689,0],[113.9919172423369,22.60102266627295,0],[113.9917196221943,22.601431625928,0],[113.9912862193332,22.60181812810236,0],[113.9909041713777,22.60213330809864,0],[113.9904804856139,22.60253483338519,0],[113.9903330314688,22.60277899659393,0],[113.9900477774609,22.60433153499769,0],[113.9900962409839,22.60464254738627,0],[113.9903161120924,22.60505460565142,0],[113.9915641615897,22.60511717356275,0],[113.9934784038899,22.60548092977822,0],[113.995278497141,22.60640224097063,0],[113.9953277666447,22.60667341560261,0],[113.9964905851169,22.6063775771138,0],[113.9977156537446,22.60596002561628,0],[113.9983207115444,22.60613169032316,0],[113.9986648706885,22.60659923685179,0],[113.9988979465801,22.60815331611633,0],[113.9981618912118,22.60975341767644,0],[113.9976555155949,22.61051444868976,0],[113.9973489079054,22.61067741494136,0]],stations_geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[113.9902,22.60336]},properties:{name:"\u5DE5\u5B66\u9662 COE"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99153,22.599643]},properties:{name:"\u79D1\u7814\u697C Research Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.990399,22.597132]},properties:{name:"\u4E03\u53F7\u95E8 Gate7"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.992403,22.597011]},properties:{name:"\u884C\u653F\u697C Administration Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.994898,22.59569]},properties:{name:"1\u53F7\u95E8 Gate1"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99939,22.599893]},properties:{name:"3\u53F7\u95E8 Gate3"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998329,22.601975]},properties:{name:"\u4E13\u5BB6\u516C\u5BD3 Guest Houses"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997811,22.603325]},properties:{name:"\u6559\u5DE5\u9910\u5385 Faculty Cafteria"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995981,22.60293]},properties:{name:"\u793E\u5EB7\u4E2D\u5FC3 C.Health.Center"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99289,22.60532]},properties:{name:"\u5B66\u751F\u5BBF\u820D\u5317 Student Dormitory N."}},{type:"Feature",geometry:{type:"Point",coordinates:[113.994041,22.604431]},properties:{name:"\u5B66\u751F\u5BBF\u820D\u5357 Student Dormitory S."}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995238,22.606518]},properties:{name:"\u8354\u56ED Lychee Hill"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.996732,22.606278]},properties:{name:"\u521B\u56ED Chuang Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998372,22.606102]},properties:{name:"\u6167\u56ED Hui Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997473,22.610667]},properties:{name:"\u6B23\u56ED Joy Highland"}}]},bus_marker_arr:[],map:[]}),async created(){},methods:{async fetch_bus(){const e=await gm.get("https://bus.sustcra.com/api/v2/monitor_osm/");this.bus_location_data_api=e.data;const i=new Date;console.log("bus location data fetched at "+parseInt(i.getTime()/1e3)),typeof this.bus_location_data_api[0].time_rt!="undefined"&&console.log("The clock drift is "+parseInt(i.getTime()/1e3-this.bus_location_data_api[0].time_rt)+" seconds"),this.update_location()},update_location:function(){this.display_data=[],this.bus_marker_arr.forEach(y=>y.remove());let e;for(e=0;e<this.bus_location_data_api.length;e++)if(this.bus_location_data_api[e].time_rt-this.bus_location_data_api[e].time_mt<300){var i=document.createElement("div");i.className="marker",i.style.backgroundImage="url(https://bus.sustcra.com/bus-top-line1.png)",i.style.width=35+"px",i.style.height=35+"px",i.style.backgroundSize="cover";var s=document.createElement("div");s.className="marker",s.style.backgroundImage="url(https://bus.sustcra.com/bus-top-line2.png)",s.style.width=35+"px",s.style.height=35+"px",s.style.backgroundSize="cover";var u=document.createElement("div");u.className="marker",u.style.backgroundImage="url(https://bus.sustcra.com/bus-top-view.png)",u.style.width=35+"px",u.style.height=35+"px",u.style.backgroundSize="cover";var m=new Ec.Marker(u).setLngLat([this.bus_location_data_api[e].lng,this.bus_location_data_api[e].lat]).setRotation(parseInt(this.bus_location_data_api[e].course)).setPopup(new Ec.Popup({offset:25}).setHTML('<p class="car-plate">Plate: <b>'+this.bus_plate_hash[this.bus_location_data_api[e].id].plate+"</b></p><p>Speed: <b>"+this.bus_location_data_api[e].speed+"km/h</b></p>")).addTo(this.map);this.bus_marker_arr.push(m)}},async refresh(){await this.fetch_bus()}},async mounted(){const e={lng:113.99373,lat:22.60308,zoom:14},i={bus_location_data:this.bus_location_data,geojson_line_1:this.geojson_line_1,geojson_line_2:this.geojson_line_2},s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,await s&&(console.log("dark mode enabled."),this.map_text_colour="#FFFFFF",this.map_style_url="https://mirrors.sustech.edu.cn/osm-tile/styles/osm-blue/style.json"),this.map=new Ec.Map({container:this.$refs.myMap,style:this.map_style_url,center:[e.lng,e.lat],zoom:e.zoom});var u=new Ec.NavigationControl;this.map.addControl(u,"top-left"),this.map.addControl(new Ec.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),this.map.on("load",()=>{this.map.addSource("line1",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i.geojson_line_1}}}),this.map.addSource("line2",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i.geojson_line_2}}}),this.map.addLayer({id:"line1",type:"line",source:"line1",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f7911d","line-width":3}}),this.map.addLayer({id:"line2",type:"line",source:"line2",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#29abe2","line-width":3}}),this.map.loadImage("https://bus.sustcra.com/station_icon.png",(m,y)=>{if(m)throw m;this.map.addImage("custom-marker",y),this.map.addSource("stations",{type:"geojson",data:this.stations_geojson}),this.map.addLayer({id:"bus-station",type:"symbol",source:"stations",layout:{"icon-size":.075,"icon-image":"custom-marker","text-field":["get","name"],"text-size":10,"text-offset":[0,1.25],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]})})}),await this.fetch_bus(),setInterval(()=>{this.refresh()},5e3)}},I5={class:"map-container",ref:"myMap"};function A5(e,i,s,u,m,y){return tn(),kn("div",I5,null,512)}var P5=Yi(T5,[["render",A5],["__scopeId","data-v-40a18a32"],["__file","Realtime-map.vue"]]);const C5={name:"weather-span",mounted(){this.load_weather()},methods:{load_weather(){$.getJSON("https://api.sustech.online/weather",function(e){$("#weather-container span").text(e.msg)})}}},k5={id:"weather-container"},D5=mi("span",{id:"weather"},null,-1),z5=[D5];function O5(e,i,s,u,m,y){return tn(),kn("div",k5,z5)}var M5=Yi(C5,[["render",O5],["__file","weather-span.vue"]]),L5=yi({enhance({app:e}){e.component("BusTable",S5),e.component("Realtimemap",P5),e.component("WeatherSpan",M5)}});const Zp=[jS,qS,KS,BT,WA,JA,rP,oP,_P,bP,SP,PP,L5],R5=[["v-8daa1a0e","/",{title:"\u{1F4DA}\u5357\u79D1\u624B\u518C"},["/index.html","/README.md"]],["v-74bc627b","/about/",{title:"\u5E2E\u52A9\u6211\u4EEC\u5B8C\u5584"},["/about/index.html","/about/README.md"]],["v-08ae5eba","/calendar/2018-2019.html",{title:"\u6821\u5386 - 2018-2019 \u5B66\u5E74"},["/calendar/2018-2019","/calendar/2018-2019.md"]],["v-93cfbde4","/calendar/2019-2020.html",{title:"\u6821\u5386 - 2019-2020 \u5B66\u5E74"},["/calendar/2019-2020","/calendar/2019-2020.md"]],["v-f917537a","/calendar/2020-2021.html",{title:"\u6821\u5386 - 2020-2021 \u5B66\u5E74"},["/calendar/2020-2021","/calendar/2020-2021.md"]],["v-1a0de1a3","/calendar/2021-2022.html",{title:"\u6821\u5386 - 2021-2022 \u5B66\u5E74\uFF08\u9884\u53D1\u5E03\uFF09"},["/calendar/2021-2022","/calendar/2021-2022.md"]],["v-190ab309","/calendar/2021fall.html",{title:""},["/calendar/2021fall","/calendar/2021fall.md"]],["v-96167c50","/calendar/",{title:"\u{1F4C5}\u6821\u5386"},["/calendar/index.html","/calendar/README.md"]],["v-96536bf0","/contact/",{title:"\u{1F4C7}\u9EC4\u9875"},["/contact/index.html","/contact/README.md"]],["v-dbd38712","/emergency/",{title:"\u5E94\u6025\u5904\u7406"},["/emergency/index.html","/emergency/README.md"]],["v-c73889da","/facility/",{title:"\u{1F3EB}\u5EFA\u7B51\u4E0E\u8BBE\u65BD"},["/facility/index.html","/facility/README.md"]],["v-104cfa63","/if-you-are-a-freshman/2021.html",{title:"\u5982\u679C\u4F60\u662F\u65B0\u751F..."},["/if-you-are-a-freshman/2021","/if-you-are-a-freshman/2021.md"]],["v-780207b9","/if-you-are-a-freshman/",{title:"\u5982\u679C\u4F60\u662F\u65B0\u751F..."},["/if-you-are-a-freshman/index.html","/if-you-are-a-freshman/README.md"]],["v-14e6315a","/life/",{title:"\u{1F468}\u200D\u{1F393}\u751F\u6D3B\u5728\u5357\u79D1"},["/life/index.html","/life/README.md"]],["v-42f2be94","/life/vehicle-charger.html",{title:"\u5145\u7535\u6869\u5206\u5E03"},["/life/vehicle-charger","/life/vehicle-charger.md"]],["v-ed48bdf8","/media/",{title:"\u{1F4FA}\u5A92\u4F53\u4E0E\u7F51\u7AD9"},["/media/index.html","/media/README.md"]],["v-f4bc5604","/miniapp/",{title:"\u5357\u79D1\u624B\u518C-\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F"},["/miniapp/index.html","/miniapp/README.md"]],["v-1500d063","/news/",{title:"\u66F4\u65B0\u65E5\u5FD7"},["/news/index.html","/news/README.md"]],["v-014445c8","/organizations/",{title:"\u{1F3A1}\u793E\u56E2\u6D3B\u52A8"},["/organizations/index.html","/organizations/README.md"]],["v-461d4a7c","/organizations/registered-organization-2019.html",{title:"\u6CE8\u518C\u793E\u56E2\u5217\u8868\uFF082018-2019\u5E74\u5EA6\uFF09"},["/organizations/registered-organization-2019","/organizations/registered-organization-2019.md"]],["v-6ba7e826","/organizations/registered-organization-2020.html",{title:"\u6CE8\u518C\u793E\u56E2\u5217\u8868\uFF082019-2020\u5E74\u5EA6\uFF09"},["/organizations/registered-organization-2020","/organizations/registered-organization-2020.md"]],["v-6d5cc0c5","/organizations/registered-organization-2021.html",{title:"\u6CE8\u518C\u793E\u56E2\u5217\u8868\uFF082020-2021\u5E74\u5EA6\uFF09"},["/organizations/registered-organization-2021","/organizations/registered-organization-2021.md"]],["v-28ddfa13","/service/",{title:"\u{1F5A5}\u670D\u52A1\u4E0E\u6280\u5DE7"},["/service/index.html","/service/README.md"]],["v-be92ea7e","/site-help/",{title:"\u2753\u7AD9\u70B9\u5E2E\u52A9"},["/site-help/index.html","/site-help/README.md"]],["v-d7188082","/study/",{title:"\u{1F393}\u5B66\u5728\u5357\u79D1"},["/study/index.html","/study/README.md"]],["v-d1061704","/study/paper-tools.html",{title:"\u51E0\u4E2A\u8D76 ddl \u7684\u597D\u7528\u5DE5\u5177\u{1F527}"},["/study/paper-tools","/study/paper-tools.md"]],["v-4322d0a7","/surroundings/",{title:"\u{1F6CD}\u5468\u8FB9"},["/surroundings/index.html","/surroundings/README.md"]],["v-69b23ddf","/transport/",{title:"\u{1F684}\u4EA4\u901A"},["/transport/index.html","/transport/README.md"]],["v-1678dd6f","/transport/bustimer-wx.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB\u65F6\u523B\u8868 SUSTech Campus Bus Info"},["/transport/bustimer-wx","/transport/bustimer-wx.md"]],["v-1630dfb5","/transport/bustimer.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB\u65F6\u523B\u8868 SUSTech Campus Bus Info"},["/transport/bustimer","/transport/bustimer.md"]],["v-6a28f6e0","/transport/holiday.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB - \u8282\u5047\u65E5 (2021\u5E746\u670818\u65E5\u66F4\u65B0)"},["/transport/holiday","/transport/holiday.md"]],["v-48975204","/transport/redirect.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB - \u81EA\u52A8\u8DF3\u8F6C"},["/transport/redirect","/transport/redirect.md"]],["v-8059a7a6","/transport/workday.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB - \u5DE5\u4F5C\u65E5 (2021\u5E746\u670818\u65E5\u66F4\u65B0)"},["/transport/workday","/transport/workday.md"]],["v-22cd7d0c","/facility/panolens/",{title:"\u5168\u666F\u770B\u6821\u56ED"},["/facility/panolens/index.html","/facility/panolens/README.md"]],["v-0e92d420","/if-you-are-a-freshman/preview/",{title:"\u84E2\u6751\u62FE\u9057\uFF1A\u5357\u79D1\u5927\u51B7\u77E5\u8BC62021"},["/if-you-are-a-freshman/preview/index.html","/if-you-are-a-freshman/preview/README.md"]],["v-2b8cac58","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7"},["/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87","/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.md"]],["v-66965350","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7"},["/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87","/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.md"]],["v-66317da4","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7"},["/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87","/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.md"]],["v-5c3fcdf6","/life/catering/",{title:"\u2615\uFE0F\u9910\u996E"},["/life/catering/index.html","/life/catering/README.md"]],["v-04710004","/life/dormitory/",{title:"\u{1F3E0}\u4F4F\u5728\u5357\u79D1"},["/life/dormitory/index.html","/life/dormitory/README.md"]],["v-5589dd0c","/life/dormitory/dorm-floor-plan.html",{title:"\u5BBF\u820D\u5E73\u9762\u56FE"},["/life/dormitory/dorm-floor-plan","/life/dormitory/dorm-floor-plan.md"]],["v-d42194b6","/life/freshman-register/",{title:"\u65B0\u751F\u62A5\u5230"},["/life/freshman-register/index.html","/life/freshman-register/README.md"]],["v-20383a78","/life/sports-facility/",{title:"\u{1F3CA}\u200D\u2640\uFE0F\u8FD0\u52A8\u8BBE\u65BD"},["/life/sports-facility/index.html","/life/sports-facility/README.md"]],["v-42c1fa44","/service/campus-card/",{title:"\u{1F4B3}\u6821\u56ED\u5361"},["/service/campus-card/index.html","/service/campus-card/README.md"]],["v-76cff034","/service/email/",{title:"\u7535\u5B50\u90AE\u4EF6\u670D\u52A1"},["/service/email/index.html","/service/email/README.md"]],["v-29860ed0","/service/mail-and-express/",{title:"\u{1F4E6}\u90AE\u4EF6\u4E0E\u5FEB\u9012\u6536\u53D1"},["/service/mail-and-express/index.html","/service/mail-and-express/README.md"]],["v-622da02f","/service/matlab/",{title:"MATLAB \u6FC0\u6D3B"},["/service/matlab/index.html","/service/matlab/README.md"]],["v-5e590ec6","/service/medical-treatment/",{title:"\u{1F3E5}\u5C31\u533B\u6307\u5357"},["/service/medical-treatment/index.html","/service/medical-treatment/README.md"]],["v-1fa222d4","/service/network/",{title:"\u{1F310}\u7F51\u7EDC\u4E0E\u4FE1\u606F\u4E2D\u5FC3 (its@sustech.edu.cn)"},["/service/network/index.html","/service/network/README.md"]],["v-48519846","/service/sakai/",{title:"Sakai | \u6587\u4EF6\u5206\u4EAB"},["/service/sakai/index.html","/service/sakai/README.md"]],["v-369295b4","/service/sid/",{title:"\u5B66\u53F7\uFF08SID\uFF09"},["/service/sid/index.html","/service/sid/README.md"]],["v-3692bb1f","/service/ssc/",{title:""},["/service/ssc/index.html","/service/ssc/README.md"]],["v-425958ce","/service/student-train-ticket/",{title:"\u706B\u8F66\u7968\u5B66\u751F\u4F18\u60E0\u4F7F\u7528\u6307\u5357"},["/service/student-train-ticket/index.html","/service/student-train-ticket/README.md"]],["v-3692ee77","/service/tax/",{title:"\u5982\u4F55\u7533\u62A5\u9000\u7A0E\uFF1F-- \u5E74\u5EA6\u4E2A\u4EBA\u6240\u5F97\u7A0E\u5E74\u5EA6\u6C47\u7B97"},["/service/tax/index.html","/service/tax/README.md"]],["v-2686552a","/service/unifound/",{title:"\u{1F5A8}\uFE0F\u8054\u521B\u6253\u5370\u7CFB\u7EDF"},["/service/unifound/index.html","/service/unifound/README.md"]],["v-45d74ec0","/service/work-wechat/",{title:"\u4F01\u4E1A\u5FAE\u4FE1"},["/service/work-wechat/index.html","/service/work-wechat/README.md"]],["v-772a5784","/study/borrow-books/",{title:"\u{1F4D7}\u6559\u6750\u4E0E\u56FE\u4E66\u501F\u8FD8"},["/study/borrow-books/index.html","/study/borrow-books/README.md"]],["v-8460eeb8","/study/by-shude-college/advice-on-study.html",{title:"\u{1F4D6}\u5B66\u4E60\u5EFA\u8BAE"},["/study/by-shude-college/advice-on-study","/study/by-shude-college/advice-on-study.md"]],["v-435bd49a","/study/by-shude-college/info-on-study.html",{title:"\u{1F4D6}\u5B66\u4E60\u5236\u5EA6\u4E0E\u4FE1\u606F"},["/study/by-shude-college/info-on-study","/study/by-shude-college/info-on-study.md"]],["v-6323734e","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7"},["/study/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.html","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87","/study/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.md","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.md"]],["v-5eb748bf","/study/cse/innovative-project.html",{title:"\u5357\u65B9\u79D1\u6280\u5927\u5B66\u8BA1\u7B97\u673A\u7CFB\u521B\u65B0\u5B9E\u8DF5\u9879\u76EE\u6C47\u603B"},["/study/cse/innovative-project","/study/cse/innovative-project.md"]],["v-2a23f022","/service/blackboard/retrive-ics-url/",{title:"BB | \u5C06Blackboard\u4E2D\u4F5C\u4E1A\uFF0CDDL\u7B49\u65E5\u7A0B\u6DFB\u52A0\u5230\u7CFB\u7EDF\u65E5\u5386"},["/service/blackboard/retrive-ics-url/index.html","/service/blackboard/retrive-ics-url/README.md"]],["v-66061b92","/service/network/apply-for-vpn/",{title:"\u7533\u8BF7\u56DE\u6821VPN"},["/service/network/apply-for-vpn/index.html","/service/network/apply-for-vpn/README.md"]],["v-89ac2bec","/service/network/choose-a-pad/",{title:"\u9009\u62E9\u4E00\u53F0\u5408\u9002\u7684\u5E73\u677F\u7535\u8111"},["/service/network/choose-a-pad/index.html","/service/network/choose-a-pad/README.md"]],["v-1549b190","/service/network/choose-a-router/",{title:"\u{1F4F6}\u9009\u62E9\u4E00\u53F0\u5408\u9002\u7684\u8DEF\u7531\u5668"},["/service/network/choose-a-router/index.html","/service/network/choose-a-router/README.md"]],["v-9e1961f8","/service/network/eduroam/",{title:"eduroam\uFF08\u5B66\u672F\u7F51\u8DEF\u6F2B\u6E38\uFF09"},["/service/network/eduroam/index.html","/service/network/eduroam/README.md"]],["v-6bba5e58","/service/network/ipv6/",{title:"\u6821\u5185 IPv6 \u8BBE\u7F6E\u6559\u7A0B"},["/service/network/ipv6/index.html","/service/network/ipv6/README.md"]],["v-83a77034","/service/network/remote-desktop/",{title:"\u6821\u5185\u8FDC\u7A0B\u684C\u9762\u4F7F\u7528\u6307\u5317"},["/service/network/remote-desktop/index.html","/service/network/remote-desktop/README.md"]],["v-296d1d15","/service/network/use-vpn/",{title:"\u4F7F\u7528 SSL VPN \u8BF4\u660E"},["/service/network/use-vpn/index.html","/service/network/use-vpn/README.md"]],["v-fb711be8","/study/book-list-by-prof-yuan/2018/",{title:"\u8881\u957F\u5E9A\u8001\u5E08\u4E3A\u65B0\u751F\u63A8\u8350\u7684\u4E66\u5355\uFF082018\uFF09"},["/study/book-list-by-prof-yuan/2018/index.html","/study/book-list-by-prof-yuan/2018/README.md"]],["v-3706649a","/404.html",{title:""},["/404"]]];var B5=()=>R5.reduce((e,[i,s,u,m])=>(e.push({name:i,path:s,component:y_,meta:u},...m.map(y=>({path:y,redirect:s}))),e),[{name:"404",path:"/:catchAll(.*)",component:y_}]),F5=XE,N5=()=>{const e=OS({history:F5(EE(ns.value.base)),routes:B5(),scrollBehavior:(i,s,u)=>u||(i.hash?{el:i.hash}:{top:0})});return e.beforeResolve(async(i,s)=>{var u;(i.path!==s.path||s===xo)&&([wo.value]=await Promise.all([Vs.resolvePageData(i.name),(u=f0[i.name])==null?void 0:u.__asyncLoader()]))}),e},j5=e=>{e.component("ClientOnly",DE),e.component("Content",zE)},V5=(e,i)=>{const s=Pr(()=>Vs.resolveRouteLocale(ns.value.locales,i.currentRoute.value.path)),u=Pr(()=>Vs.resolveSiteLocaleData(ns.value,s.value)),m=Pr(()=>Vs.resolvePageFrontmatter(wo.value)),y=Pr(()=>Vs.resolvePageHeadTitle(wo.value,u.value)),x=Pr(()=>Vs.resolvePageHead(y.value,m.value,u.value)),l=Pr(()=>Vs.resolvePageLang(wo.value));return e.provide(Yf,s),e.provide(w0,u),e.provide(_0,m),e.provide(CE,y),e.provide(y0,x),e.provide(v0,l),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get:()=>m.value},$head:{get:()=>x.value},$headTitle:{get:()=>y.value},$lang:{get:()=>l.value},$page:{get:()=>wo.value},$routeLocale:{get:()=>s.value},$site:{get:()=>ns.value},$siteLocale:{get:()=>u.value},$withBase:{get:()=>E0}}),{pageData:wo,pageFrontmatter:m,pageHead:x,pageHeadTitle:y,pageLang:l,routeLocale:s,siteData:ns,siteLocaleData:u}},U5=()=>{const e=ud(),i=PE(),s=x0(),u=mn([]),m=()=>{i.value.forEach(x=>{const l=$5(x);l&&u.value.push(l)})},y=()=>{document.documentElement.lang=s.value,u.value.forEach(x=>{x.parentNode===document.head&&document.head.removeChild(x)}),u.value.splice(0,u.value.length),i.value.forEach(x=>{const l=q5(x);l!==null&&(document.head.appendChild(l),u.value.push(l))})};ss(kE,y),Ji(()=>{m(),y(),Ui(()=>e.path,()=>y())})},$5=([e,i,s=""])=>{const u=Object.entries(i).map(([l,T])=>Br(T)?`[${l}="${T}"]`:T===!0?`[${l}]`:"").join(""),m=`head > ${e}${u}`;return Array.from(document.querySelectorAll(m)).find(l=>l.innerText===s)||null},q5=([e,i,s])=>{if(!Br(e))return null;const u=document.createElement(e);return d0(i)&&Object.entries(i).forEach(([m,y])=>{Br(y)?u.setAttribute(m,y):y===!0&&u.setAttribute(m,"")}),Br(s)&&u.appendChild(document.createTextNode(s)),u},H5=_E,G5=async()=>{var s;const e=H5({name:"VuepressApp",setup(){var u;U5();for(const m of Zp)(u=m.setup)==null||u.call(m);return()=>[cr(L0),...Zp.flatMap(({rootComponents:m=[]})=>m.map(y=>cr(y)))]}}),i=N5();j5(e),V5(e,i);for(const u of Zp)await((s=u.enhance)==null?void 0:s.call(u,{app:e,router:i,siteData:ns}));return e.use(i),{app:e,router:i}};G5().then(({app:e,router:i})=>{i.isReady().then(()=>{e.mount("#app")})});export{K5 as $,b0 as A,Q5 as B,t3 as C,cr as D,E0 as E,wn as F,DE as G,us as H,mn as I,Ui as J,Z5 as K,X5 as L,SE as M,EE as N,cd as O,Br as P,CT as Q,Ji as R,Xc as S,sd as T,hl as U,r3 as V,d0 as W,e3 as X,qf as Y,Gf as Z,Yi as _,qr as a,Zf as a0,DT as a1,mi as b,kn as c,G5 as createVueApp,Xf as d,W5 as e,jn as f,G0 as g,Vi as h,AE as i,Pr as j,jt as k,Wf as l,el as m,ud as n,tn as o,Lw as p,qc as q,Ga as r,s0 as s,Ci as t,Qf as u,nd as v,xh as w,wE as x,J5 as y,Y5 as z};
